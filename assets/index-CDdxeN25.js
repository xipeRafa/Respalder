var Ck=Object.defineProperty;var Rk=(n,e,t)=>e in n?Ck(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t;var G=(n,e,t)=>Rk(n,typeof e!="symbol"?e+"":e,t);function Ak(n,e){for(var t=0;t<e.length;t++){const r=e[t];if(typeof r!="string"&&!Array.isArray(r)){for(const i in r)if(i!=="default"&&!(i in n)){const s=Object.getOwnPropertyDescriptor(r,i);s&&Object.defineProperty(n,i,s.get?s:{enumerable:!0,get:()=>r[i]})}}}return Object.freeze(Object.defineProperty(n,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const s of i)if(s.type==="childList")for(const o of s.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function t(i){const s={};return i.integrity&&(s.integrity=i.integrity),i.referrerPolicy&&(s.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?s.credentials="include":i.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function r(i){if(i.ep)return;i.ep=!0;const s=t(i);fetch(i.href,s)}})();function TT(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}var IT={exports:{}},mh={},ST={exports:{}},ce={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var yu=Symbol.for("react.element"),Nk=Symbol.for("react.portal"),Mk=Symbol.for("react.fragment"),Ok=Symbol.for("react.strict_mode"),Vk=Symbol.for("react.profiler"),Lk=Symbol.for("react.provider"),Fk=Symbol.for("react.context"),Bk=Symbol.for("react.forward_ref"),Uk=Symbol.for("react.suspense"),jk=Symbol.for("react.memo"),$k=Symbol.for("react.lazy"),qv=Symbol.iterator;function zk(n){return n===null||typeof n!="object"?null:(n=qv&&n[qv]||n["@@iterator"],typeof n=="function"?n:null)}var DT={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},bT=Object.assign,PT={};function ma(n,e,t){this.props=n,this.context=e,this.refs=PT,this.updater=t||DT}ma.prototype.isReactComponent={};ma.prototype.setState=function(n,e){if(typeof n!="object"&&typeof n!="function"&&n!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,n,e,"setState")};ma.prototype.forceUpdate=function(n){this.updater.enqueueForceUpdate(this,n,"forceUpdate")};function kT(){}kT.prototype=ma.prototype;function Eg(n,e,t){this.props=n,this.context=e,this.refs=PT,this.updater=t||DT}var Tg=Eg.prototype=new kT;Tg.constructor=Eg;bT(Tg,ma.prototype);Tg.isPureReactComponent=!0;var Wv=Array.isArray,xT=Object.prototype.hasOwnProperty,Ig={current:null},CT={key:!0,ref:!0,__self:!0,__source:!0};function RT(n,e,t){var r,i={},s=null,o=null;if(e!=null)for(r in e.ref!==void 0&&(o=e.ref),e.key!==void 0&&(s=""+e.key),e)xT.call(e,r)&&!CT.hasOwnProperty(r)&&(i[r]=e[r]);var a=arguments.length-2;if(a===1)i.children=t;else if(1<a){for(var l=Array(a),c=0;c<a;c++)l[c]=arguments[c+2];i.children=l}if(n&&n.defaultProps)for(r in a=n.defaultProps,a)i[r]===void 0&&(i[r]=a[r]);return{$$typeof:yu,type:n,key:s,ref:o,props:i,_owner:Ig.current}}function qk(n,e){return{$$typeof:yu,type:n.type,key:e,ref:n.ref,props:n.props,_owner:n._owner}}function Sg(n){return typeof n=="object"&&n!==null&&n.$$typeof===yu}function Wk(n){var e={"=":"=0",":":"=2"};return"$"+n.replace(/[=:]/g,function(t){return e[t]})}var Yv=/\/+/g;function jf(n,e){return typeof n=="object"&&n!==null&&n.key!=null?Wk(""+n.key):e.toString(36)}function Vc(n,e,t,r,i){var s=typeof n;(s==="undefined"||s==="boolean")&&(n=null);var o=!1;if(n===null)o=!0;else switch(s){case"string":case"number":o=!0;break;case"object":switch(n.$$typeof){case yu:case Nk:o=!0}}if(o)return o=n,i=i(o),n=r===""?"."+jf(o,0):r,Wv(i)?(t="",n!=null&&(t=n.replace(Yv,"$&/")+"/"),Vc(i,e,t,"",function(c){return c})):i!=null&&(Sg(i)&&(i=qk(i,t+(!i.key||o&&o.key===i.key?"":(""+i.key).replace(Yv,"$&/")+"/")+n)),e.push(i)),1;if(o=0,r=r===""?".":r+":",Wv(n))for(var a=0;a<n.length;a++){s=n[a];var l=r+jf(s,a);o+=Vc(s,e,t,l,i)}else if(l=zk(n),typeof l=="function")for(n=l.call(n),a=0;!(s=n.next()).done;)s=s.value,l=r+jf(s,a++),o+=Vc(s,e,t,l,i);else if(s==="object")throw e=String(n),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(n).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return o}function rc(n,e,t){if(n==null)return n;var r=[],i=0;return Vc(n,r,"","",function(s){return e.call(t,s,i++)}),r}function Yk(n){if(n._status===-1){var e=n._result;e=e(),e.then(function(t){(n._status===0||n._status===-1)&&(n._status=1,n._result=t)},function(t){(n._status===0||n._status===-1)&&(n._status=2,n._result=t)}),n._status===-1&&(n._status=0,n._result=e)}if(n._status===1)return n._result.default;throw n._result}var Gt={current:null},Lc={transition:null},Hk={ReactCurrentDispatcher:Gt,ReactCurrentBatchConfig:Lc,ReactCurrentOwner:Ig};function AT(){throw Error("act(...) is not supported in production builds of React.")}ce.Children={map:rc,forEach:function(n,e,t){rc(n,function(){e.apply(this,arguments)},t)},count:function(n){var e=0;return rc(n,function(){e++}),e},toArray:function(n){return rc(n,function(e){return e})||[]},only:function(n){if(!Sg(n))throw Error("React.Children.only expected to receive a single React element child.");return n}};ce.Component=ma;ce.Fragment=Mk;ce.Profiler=Vk;ce.PureComponent=Eg;ce.StrictMode=Ok;ce.Suspense=Uk;ce.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Hk;ce.act=AT;ce.cloneElement=function(n,e,t){if(n==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+n+".");var r=bT({},n.props),i=n.key,s=n.ref,o=n._owner;if(e!=null){if(e.ref!==void 0&&(s=e.ref,o=Ig.current),e.key!==void 0&&(i=""+e.key),n.type&&n.type.defaultProps)var a=n.type.defaultProps;for(l in e)xT.call(e,l)&&!CT.hasOwnProperty(l)&&(r[l]=e[l]===void 0&&a!==void 0?a[l]:e[l])}var l=arguments.length-2;if(l===1)r.children=t;else if(1<l){a=Array(l);for(var c=0;c<l;c++)a[c]=arguments[c+2];r.children=a}return{$$typeof:yu,type:n.type,key:i,ref:s,props:r,_owner:o}};ce.createContext=function(n){return n={$$typeof:Fk,_currentValue:n,_currentValue2:n,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},n.Provider={$$typeof:Lk,_context:n},n.Consumer=n};ce.createElement=RT;ce.createFactory=function(n){var e=RT.bind(null,n);return e.type=n,e};ce.createRef=function(){return{current:null}};ce.forwardRef=function(n){return{$$typeof:Bk,render:n}};ce.isValidElement=Sg;ce.lazy=function(n){return{$$typeof:$k,_payload:{_status:-1,_result:n},_init:Yk}};ce.memo=function(n,e){return{$$typeof:jk,type:n,compare:e===void 0?null:e}};ce.startTransition=function(n){var e=Lc.transition;Lc.transition={};try{n()}finally{Lc.transition=e}};ce.unstable_act=AT;ce.useCallback=function(n,e){return Gt.current.useCallback(n,e)};ce.useContext=function(n){return Gt.current.useContext(n)};ce.useDebugValue=function(){};ce.useDeferredValue=function(n){return Gt.current.useDeferredValue(n)};ce.useEffect=function(n,e){return Gt.current.useEffect(n,e)};ce.useId=function(){return Gt.current.useId()};ce.useImperativeHandle=function(n,e,t){return Gt.current.useImperativeHandle(n,e,t)};ce.useInsertionEffect=function(n,e){return Gt.current.useInsertionEffect(n,e)};ce.useLayoutEffect=function(n,e){return Gt.current.useLayoutEffect(n,e)};ce.useMemo=function(n,e){return Gt.current.useMemo(n,e)};ce.useReducer=function(n,e,t){return Gt.current.useReducer(n,e,t)};ce.useRef=function(n){return Gt.current.useRef(n)};ce.useState=function(n){return Gt.current.useState(n)};ce.useSyncExternalStore=function(n,e,t){return Gt.current.useSyncExternalStore(n,e,t)};ce.useTransition=function(){return Gt.current.useTransition()};ce.version="18.3.1";ST.exports=ce;var N=ST.exports;const U=TT(N),NT=Ak({__proto__:null,default:U},[N]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Qk=N,Kk=Symbol.for("react.element"),Gk=Symbol.for("react.fragment"),Xk=Object.prototype.hasOwnProperty,Jk=Qk.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,Zk={key:!0,ref:!0,__self:!0,__source:!0};function MT(n,e,t){var r,i={},s=null,o=null;t!==void 0&&(s=""+t),e.key!==void 0&&(s=""+e.key),e.ref!==void 0&&(o=e.ref);for(r in e)Xk.call(e,r)&&!Zk.hasOwnProperty(r)&&(i[r]=e[r]);if(n&&n.defaultProps)for(r in e=n.defaultProps,e)i[r]===void 0&&(i[r]=e[r]);return{$$typeof:Kk,type:n,key:s,ref:o,props:i,_owner:Jk.current}}mh.Fragment=Gk;mh.jsx=MT;mh.jsxs=MT;IT.exports=mh;var V=IT.exports,Vp={},OT={exports:{}},gn={},VT={exports:{}},LT={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(n){function e(q,Q){var se=q.length;q.push(Q);e:for(;0<se;){var $e=se-1>>>1,ke=q[$e];if(0<i(ke,Q))q[$e]=Q,q[se]=ke,se=$e;else break e}}function t(q){return q.length===0?null:q[0]}function r(q){if(q.length===0)return null;var Q=q[0],se=q.pop();if(se!==Q){q[0]=se;e:for(var $e=0,ke=q.length,tt=ke>>>1;$e<tt;){var cr=2*($e+1)-1,dr=q[cr],hr=cr+1,fr=q[hr];if(0>i(dr,se))hr<ke&&0>i(fr,dr)?(q[$e]=fr,q[hr]=se,$e=hr):(q[$e]=dr,q[cr]=se,$e=cr);else if(hr<ke&&0>i(fr,se))q[$e]=fr,q[hr]=se,$e=hr;else break e}}return Q}function i(q,Q){var se=q.sortIndex-Q.sortIndex;return se!==0?se:q.id-Q.id}if(typeof performance=="object"&&typeof performance.now=="function"){var s=performance;n.unstable_now=function(){return s.now()}}else{var o=Date,a=o.now();n.unstable_now=function(){return o.now()-a}}var l=[],c=[],d=1,h=null,p=3,g=!1,v=!1,S=!1,D=typeof setTimeout=="function"?setTimeout:null,w=typeof clearTimeout=="function"?clearTimeout:null,_=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function E(q){for(var Q=t(c);Q!==null;){if(Q.callback===null)r(c);else if(Q.startTime<=q)r(c),Q.sortIndex=Q.expirationTime,e(l,Q);else break;Q=t(c)}}function x(q){if(S=!1,E(q),!v)if(t(l)!==null)v=!0,le(A);else{var Q=t(c);Q!==null&&ie(x,Q.startTime-q)}}function A(q,Q){v=!1,S&&(S=!1,w(y),y=-1),g=!0;var se=p;try{for(E(Q),h=t(l);h!==null&&(!(h.expirationTime>Q)||q&&!C());){var $e=h.callback;if(typeof $e=="function"){h.callback=null,p=h.priorityLevel;var ke=$e(h.expirationTime<=Q);Q=n.unstable_now(),typeof ke=="function"?h.callback=ke:h===t(l)&&r(l),E(Q)}else r(l);h=t(l)}if(h!==null)var tt=!0;else{var cr=t(c);cr!==null&&ie(x,cr.startTime-Q),tt=!1}return tt}finally{h=null,p=se,g=!1}}var L=!1,I=null,y=-1,b=5,k=-1;function C(){return!(n.unstable_now()-k<b)}function R(){if(I!==null){var q=n.unstable_now();k=q;var Q=!0;try{Q=I(!0,q)}finally{Q?P():(L=!1,I=null)}}else L=!1}var P;if(typeof _=="function")P=function(){_(R)};else if(typeof MessageChannel<"u"){var ne=new MessageChannel,re=ne.port2;ne.port1.onmessage=R,P=function(){re.postMessage(null)}}else P=function(){D(R,0)};function le(q){I=q,L||(L=!0,P())}function ie(q,Q){y=D(function(){q(n.unstable_now())},Q)}n.unstable_IdlePriority=5,n.unstable_ImmediatePriority=1,n.unstable_LowPriority=4,n.unstable_NormalPriority=3,n.unstable_Profiling=null,n.unstable_UserBlockingPriority=2,n.unstable_cancelCallback=function(q){q.callback=null},n.unstable_continueExecution=function(){v||g||(v=!0,le(A))},n.unstable_forceFrameRate=function(q){0>q||125<q?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):b=0<q?Math.floor(1e3/q):5},n.unstable_getCurrentPriorityLevel=function(){return p},n.unstable_getFirstCallbackNode=function(){return t(l)},n.unstable_next=function(q){switch(p){case 1:case 2:case 3:var Q=3;break;default:Q=p}var se=p;p=Q;try{return q()}finally{p=se}},n.unstable_pauseExecution=function(){},n.unstable_requestPaint=function(){},n.unstable_runWithPriority=function(q,Q){switch(q){case 1:case 2:case 3:case 4:case 5:break;default:q=3}var se=p;p=q;try{return Q()}finally{p=se}},n.unstable_scheduleCallback=function(q,Q,se){var $e=n.unstable_now();switch(typeof se=="object"&&se!==null?(se=se.delay,se=typeof se=="number"&&0<se?$e+se:$e):se=$e,q){case 1:var ke=-1;break;case 2:ke=250;break;case 5:ke=1073741823;break;case 4:ke=1e4;break;default:ke=5e3}return ke=se+ke,q={id:d++,callback:Q,priorityLevel:q,startTime:se,expirationTime:ke,sortIndex:-1},se>$e?(q.sortIndex=se,e(c,q),t(l)===null&&q===t(c)&&(S?(w(y),y=-1):S=!0,ie(x,se-$e))):(q.sortIndex=ke,e(l,q),v||g||(v=!0,le(A))),q},n.unstable_shouldYield=C,n.unstable_wrapCallback=function(q){var Q=p;return function(){var se=p;p=Q;try{return q.apply(this,arguments)}finally{p=se}}}})(LT);VT.exports=LT;var ex=VT.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var tx=N,pn=ex;function z(n){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+n,t=1;t<arguments.length;t++)e+="&args[]="+encodeURIComponent(arguments[t]);return"Minified React error #"+n+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var FT=new Set,Nl={};function zs(n,e){Uo(n,e),Uo(n+"Capture",e)}function Uo(n,e){for(Nl[n]=e,n=0;n<e.length;n++)FT.add(e[n])}var kr=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Lp=Object.prototype.hasOwnProperty,nx=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,Hv={},Qv={};function rx(n){return Lp.call(Qv,n)?!0:Lp.call(Hv,n)?!1:nx.test(n)?Qv[n]=!0:(Hv[n]=!0,!1)}function ix(n,e,t,r){if(t!==null&&t.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return r?!1:t!==null?!t.acceptsBooleans:(n=n.toLowerCase().slice(0,5),n!=="data-"&&n!=="aria-");default:return!1}}function sx(n,e,t,r){if(e===null||typeof e>"u"||ix(n,e,t,r))return!0;if(r)return!1;if(t!==null)switch(t.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function Xt(n,e,t,r,i,s,o){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=t,this.propertyName=n,this.type=e,this.sanitizeURL=s,this.removeEmptyString=o}var bt={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(n){bt[n]=new Xt(n,0,!1,n,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(n){var e=n[0];bt[e]=new Xt(e,1,!1,n[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(n){bt[n]=new Xt(n,2,!1,n.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(n){bt[n]=new Xt(n,2,!1,n,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(n){bt[n]=new Xt(n,3,!1,n.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(n){bt[n]=new Xt(n,3,!0,n,null,!1,!1)});["capture","download"].forEach(function(n){bt[n]=new Xt(n,4,!1,n,null,!1,!1)});["cols","rows","size","span"].forEach(function(n){bt[n]=new Xt(n,6,!1,n,null,!1,!1)});["rowSpan","start"].forEach(function(n){bt[n]=new Xt(n,5,!1,n.toLowerCase(),null,!1,!1)});var Dg=/[\-:]([a-z])/g;function bg(n){return n[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(n){var e=n.replace(Dg,bg);bt[e]=new Xt(e,1,!1,n,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(n){var e=n.replace(Dg,bg);bt[e]=new Xt(e,1,!1,n,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(n){var e=n.replace(Dg,bg);bt[e]=new Xt(e,1,!1,n,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(n){bt[n]=new Xt(n,1,!1,n.toLowerCase(),null,!1,!1)});bt.xlinkHref=new Xt("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(n){bt[n]=new Xt(n,1,!1,n.toLowerCase(),null,!0,!0)});function Pg(n,e,t,r){var i=bt.hasOwnProperty(e)?bt[e]:null;(i!==null?i.type!==0:r||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(sx(e,t,i,r)&&(t=null),r||i===null?rx(e)&&(t===null?n.removeAttribute(e):n.setAttribute(e,""+t)):i.mustUseProperty?n[i.propertyName]=t===null?i.type===3?!1:"":t:(e=i.attributeName,r=i.attributeNamespace,t===null?n.removeAttribute(e):(i=i.type,t=i===3||i===4&&t===!0?"":""+t,r?n.setAttributeNS(r,e,t):n.setAttribute(e,t))))}var Vr=tx.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,ic=Symbol.for("react.element"),go=Symbol.for("react.portal"),yo=Symbol.for("react.fragment"),kg=Symbol.for("react.strict_mode"),Fp=Symbol.for("react.profiler"),BT=Symbol.for("react.provider"),UT=Symbol.for("react.context"),xg=Symbol.for("react.forward_ref"),Bp=Symbol.for("react.suspense"),Up=Symbol.for("react.suspense_list"),Cg=Symbol.for("react.memo"),Xr=Symbol.for("react.lazy"),jT=Symbol.for("react.offscreen"),Kv=Symbol.iterator;function qa(n){return n===null||typeof n!="object"?null:(n=Kv&&n[Kv]||n["@@iterator"],typeof n=="function"?n:null)}var Qe=Object.assign,$f;function ol(n){if($f===void 0)try{throw Error()}catch(t){var e=t.stack.trim().match(/\n( *(at )?)/);$f=e&&e[1]||""}return`
`+$f+n}var zf=!1;function qf(n,e){if(!n||zf)return"";zf=!0;var t=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(c){var r=c}Reflect.construct(n,[],e)}else{try{e.call()}catch(c){r=c}n.call(e.prototype)}else{try{throw Error()}catch(c){r=c}n()}}catch(c){if(c&&r&&typeof c.stack=="string"){for(var i=c.stack.split(`
`),s=r.stack.split(`
`),o=i.length-1,a=s.length-1;1<=o&&0<=a&&i[o]!==s[a];)a--;for(;1<=o&&0<=a;o--,a--)if(i[o]!==s[a]){if(o!==1||a!==1)do if(o--,a--,0>a||i[o]!==s[a]){var l=`
`+i[o].replace(" at new "," at ");return n.displayName&&l.includes("<anonymous>")&&(l=l.replace("<anonymous>",n.displayName)),l}while(1<=o&&0<=a);break}}}finally{zf=!1,Error.prepareStackTrace=t}return(n=n?n.displayName||n.name:"")?ol(n):""}function ox(n){switch(n.tag){case 5:return ol(n.type);case 16:return ol("Lazy");case 13:return ol("Suspense");case 19:return ol("SuspenseList");case 0:case 2:case 15:return n=qf(n.type,!1),n;case 11:return n=qf(n.type.render,!1),n;case 1:return n=qf(n.type,!0),n;default:return""}}function jp(n){if(n==null)return null;if(typeof n=="function")return n.displayName||n.name||null;if(typeof n=="string")return n;switch(n){case yo:return"Fragment";case go:return"Portal";case Fp:return"Profiler";case kg:return"StrictMode";case Bp:return"Suspense";case Up:return"SuspenseList"}if(typeof n=="object")switch(n.$$typeof){case UT:return(n.displayName||"Context")+".Consumer";case BT:return(n._context.displayName||"Context")+".Provider";case xg:var e=n.render;return n=n.displayName,n||(n=e.displayName||e.name||"",n=n!==""?"ForwardRef("+n+")":"ForwardRef"),n;case Cg:return e=n.displayName||null,e!==null?e:jp(n.type)||"Memo";case Xr:e=n._payload,n=n._init;try{return jp(n(e))}catch{}}return null}function ax(n){var e=n.type;switch(n.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return n=e.render,n=n.displayName||n.name||"",e.displayName||(n!==""?"ForwardRef("+n+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return jp(e);case 8:return e===kg?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function Ti(n){switch(typeof n){case"boolean":case"number":case"string":case"undefined":return n;case"object":return n;default:return""}}function $T(n){var e=n.type;return(n=n.nodeName)&&n.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function lx(n){var e=$T(n)?"checked":"value",t=Object.getOwnPropertyDescriptor(n.constructor.prototype,e),r=""+n[e];if(!n.hasOwnProperty(e)&&typeof t<"u"&&typeof t.get=="function"&&typeof t.set=="function"){var i=t.get,s=t.set;return Object.defineProperty(n,e,{configurable:!0,get:function(){return i.call(this)},set:function(o){r=""+o,s.call(this,o)}}),Object.defineProperty(n,e,{enumerable:t.enumerable}),{getValue:function(){return r},setValue:function(o){r=""+o},stopTracking:function(){n._valueTracker=null,delete n[e]}}}}function sc(n){n._valueTracker||(n._valueTracker=lx(n))}function zT(n){if(!n)return!1;var e=n._valueTracker;if(!e)return!0;var t=e.getValue(),r="";return n&&(r=$T(n)?n.checked?"true":"false":n.value),n=r,n!==t?(e.setValue(n),!0):!1}function ld(n){if(n=n||(typeof document<"u"?document:void 0),typeof n>"u")return null;try{return n.activeElement||n.body}catch{return n.body}}function $p(n,e){var t=e.checked;return Qe({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:t??n._wrapperState.initialChecked})}function Gv(n,e){var t=e.defaultValue==null?"":e.defaultValue,r=e.checked!=null?e.checked:e.defaultChecked;t=Ti(e.value!=null?e.value:t),n._wrapperState={initialChecked:r,initialValue:t,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function qT(n,e){e=e.checked,e!=null&&Pg(n,"checked",e,!1)}function zp(n,e){qT(n,e);var t=Ti(e.value),r=e.type;if(t!=null)r==="number"?(t===0&&n.value===""||n.value!=t)&&(n.value=""+t):n.value!==""+t&&(n.value=""+t);else if(r==="submit"||r==="reset"){n.removeAttribute("value");return}e.hasOwnProperty("value")?qp(n,e.type,t):e.hasOwnProperty("defaultValue")&&qp(n,e.type,Ti(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(n.defaultChecked=!!e.defaultChecked)}function Xv(n,e,t){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var r=e.type;if(!(r!=="submit"&&r!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+n._wrapperState.initialValue,t||e===n.value||(n.value=e),n.defaultValue=e}t=n.name,t!==""&&(n.name=""),n.defaultChecked=!!n._wrapperState.initialChecked,t!==""&&(n.name=t)}function qp(n,e,t){(e!=="number"||ld(n.ownerDocument)!==n)&&(t==null?n.defaultValue=""+n._wrapperState.initialValue:n.defaultValue!==""+t&&(n.defaultValue=""+t))}var al=Array.isArray;function ko(n,e,t,r){if(n=n.options,e){e={};for(var i=0;i<t.length;i++)e["$"+t[i]]=!0;for(t=0;t<n.length;t++)i=e.hasOwnProperty("$"+n[t].value),n[t].selected!==i&&(n[t].selected=i),i&&r&&(n[t].defaultSelected=!0)}else{for(t=""+Ti(t),e=null,i=0;i<n.length;i++){if(n[i].value===t){n[i].selected=!0,r&&(n[i].defaultSelected=!0);return}e!==null||n[i].disabled||(e=n[i])}e!==null&&(e.selected=!0)}}function Wp(n,e){if(e.dangerouslySetInnerHTML!=null)throw Error(z(91));return Qe({},e,{value:void 0,defaultValue:void 0,children:""+n._wrapperState.initialValue})}function Jv(n,e){var t=e.value;if(t==null){if(t=e.children,e=e.defaultValue,t!=null){if(e!=null)throw Error(z(92));if(al(t)){if(1<t.length)throw Error(z(93));t=t[0]}e=t}e==null&&(e=""),t=e}n._wrapperState={initialValue:Ti(t)}}function WT(n,e){var t=Ti(e.value),r=Ti(e.defaultValue);t!=null&&(t=""+t,t!==n.value&&(n.value=t),e.defaultValue==null&&n.defaultValue!==t&&(n.defaultValue=t)),r!=null&&(n.defaultValue=""+r)}function Zv(n){var e=n.textContent;e===n._wrapperState.initialValue&&e!==""&&e!==null&&(n.value=e)}function YT(n){switch(n){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Yp(n,e){return n==null||n==="http://www.w3.org/1999/xhtml"?YT(e):n==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":n}var oc,HT=function(n){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,t,r,i){MSApp.execUnsafeLocalFunction(function(){return n(e,t,r,i)})}:n}(function(n,e){if(n.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in n)n.innerHTML=e;else{for(oc=oc||document.createElement("div"),oc.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=oc.firstChild;n.firstChild;)n.removeChild(n.firstChild);for(;e.firstChild;)n.appendChild(e.firstChild)}});function Ml(n,e){if(e){var t=n.firstChild;if(t&&t===n.lastChild&&t.nodeType===3){t.nodeValue=e;return}}n.textContent=e}var gl={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},ux=["Webkit","ms","Moz","O"];Object.keys(gl).forEach(function(n){ux.forEach(function(e){e=e+n.charAt(0).toUpperCase()+n.substring(1),gl[e]=gl[n]})});function QT(n,e,t){return e==null||typeof e=="boolean"||e===""?"":t||typeof e!="number"||e===0||gl.hasOwnProperty(n)&&gl[n]?(""+e).trim():e+"px"}function KT(n,e){n=n.style;for(var t in e)if(e.hasOwnProperty(t)){var r=t.indexOf("--")===0,i=QT(t,e[t],r);t==="float"&&(t="cssFloat"),r?n.setProperty(t,i):n[t]=i}}var cx=Qe({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Hp(n,e){if(e){if(cx[n]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(z(137,n));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(z(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(z(61))}if(e.style!=null&&typeof e.style!="object")throw Error(z(62))}}function Qp(n,e){if(n.indexOf("-")===-1)return typeof e.is=="string";switch(n){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Kp=null;function Rg(n){return n=n.target||n.srcElement||window,n.correspondingUseElement&&(n=n.correspondingUseElement),n.nodeType===3?n.parentNode:n}var Gp=null,xo=null,Co=null;function ew(n){if(n=wu(n)){if(typeof Gp!="function")throw Error(z(280));var e=n.stateNode;e&&(e=wh(e),Gp(n.stateNode,n.type,e))}}function GT(n){xo?Co?Co.push(n):Co=[n]:xo=n}function XT(){if(xo){var n=xo,e=Co;if(Co=xo=null,ew(n),e)for(n=0;n<e.length;n++)ew(e[n])}}function JT(n,e){return n(e)}function ZT(){}var Wf=!1;function eI(n,e,t){if(Wf)return n(e,t);Wf=!0;try{return JT(n,e,t)}finally{Wf=!1,(xo!==null||Co!==null)&&(ZT(),XT())}}function Ol(n,e){var t=n.stateNode;if(t===null)return null;var r=wh(t);if(r===null)return null;t=r[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(n=n.type,r=!(n==="button"||n==="input"||n==="select"||n==="textarea")),n=!r;break e;default:n=!1}if(n)return null;if(t&&typeof t!="function")throw Error(z(231,e,typeof t));return t}var Xp=!1;if(kr)try{var Wa={};Object.defineProperty(Wa,"passive",{get:function(){Xp=!0}}),window.addEventListener("test",Wa,Wa),window.removeEventListener("test",Wa,Wa)}catch{Xp=!1}function dx(n,e,t,r,i,s,o,a,l){var c=Array.prototype.slice.call(arguments,3);try{e.apply(t,c)}catch(d){this.onError(d)}}var yl=!1,ud=null,cd=!1,Jp=null,hx={onError:function(n){yl=!0,ud=n}};function fx(n,e,t,r,i,s,o,a,l){yl=!1,ud=null,dx.apply(hx,arguments)}function px(n,e,t,r,i,s,o,a,l){if(fx.apply(this,arguments),yl){if(yl){var c=ud;yl=!1,ud=null}else throw Error(z(198));cd||(cd=!0,Jp=c)}}function qs(n){var e=n,t=n;if(n.alternate)for(;e.return;)e=e.return;else{n=e;do e=n,e.flags&4098&&(t=e.return),n=e.return;while(n)}return e.tag===3?t:null}function tI(n){if(n.tag===13){var e=n.memoizedState;if(e===null&&(n=n.alternate,n!==null&&(e=n.memoizedState)),e!==null)return e.dehydrated}return null}function tw(n){if(qs(n)!==n)throw Error(z(188))}function mx(n){var e=n.alternate;if(!e){if(e=qs(n),e===null)throw Error(z(188));return e!==n?null:n}for(var t=n,r=e;;){var i=t.return;if(i===null)break;var s=i.alternate;if(s===null){if(r=i.return,r!==null){t=r;continue}break}if(i.child===s.child){for(s=i.child;s;){if(s===t)return tw(i),n;if(s===r)return tw(i),e;s=s.sibling}throw Error(z(188))}if(t.return!==r.return)t=i,r=s;else{for(var o=!1,a=i.child;a;){if(a===t){o=!0,t=i,r=s;break}if(a===r){o=!0,r=i,t=s;break}a=a.sibling}if(!o){for(a=s.child;a;){if(a===t){o=!0,t=s,r=i;break}if(a===r){o=!0,r=s,t=i;break}a=a.sibling}if(!o)throw Error(z(189))}}if(t.alternate!==r)throw Error(z(190))}if(t.tag!==3)throw Error(z(188));return t.stateNode.current===t?n:e}function nI(n){return n=mx(n),n!==null?rI(n):null}function rI(n){if(n.tag===5||n.tag===6)return n;for(n=n.child;n!==null;){var e=rI(n);if(e!==null)return e;n=n.sibling}return null}var iI=pn.unstable_scheduleCallback,nw=pn.unstable_cancelCallback,gx=pn.unstable_shouldYield,yx=pn.unstable_requestPaint,nt=pn.unstable_now,_x=pn.unstable_getCurrentPriorityLevel,Ag=pn.unstable_ImmediatePriority,sI=pn.unstable_UserBlockingPriority,dd=pn.unstable_NormalPriority,vx=pn.unstable_LowPriority,oI=pn.unstable_IdlePriority,gh=null,er=null;function wx(n){if(er&&typeof er.onCommitFiberRoot=="function")try{er.onCommitFiberRoot(gh,n,void 0,(n.current.flags&128)===128)}catch{}}var On=Math.clz32?Math.clz32:Ix,Ex=Math.log,Tx=Math.LN2;function Ix(n){return n>>>=0,n===0?32:31-(Ex(n)/Tx|0)|0}var ac=64,lc=4194304;function ll(n){switch(n&-n){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return n&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return n&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return n}}function hd(n,e){var t=n.pendingLanes;if(t===0)return 0;var r=0,i=n.suspendedLanes,s=n.pingedLanes,o=t&268435455;if(o!==0){var a=o&~i;a!==0?r=ll(a):(s&=o,s!==0&&(r=ll(s)))}else o=t&~i,o!==0?r=ll(o):s!==0&&(r=ll(s));if(r===0)return 0;if(e!==0&&e!==r&&!(e&i)&&(i=r&-r,s=e&-e,i>=s||i===16&&(s&4194240)!==0))return e;if(r&4&&(r|=t&16),e=n.entangledLanes,e!==0)for(n=n.entanglements,e&=r;0<e;)t=31-On(e),i=1<<t,r|=n[t],e&=~i;return r}function Sx(n,e){switch(n){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Dx(n,e){for(var t=n.suspendedLanes,r=n.pingedLanes,i=n.expirationTimes,s=n.pendingLanes;0<s;){var o=31-On(s),a=1<<o,l=i[o];l===-1?(!(a&t)||a&r)&&(i[o]=Sx(a,e)):l<=e&&(n.expiredLanes|=a),s&=~a}}function Zp(n){return n=n.pendingLanes&-1073741825,n!==0?n:n&1073741824?1073741824:0}function aI(){var n=ac;return ac<<=1,!(ac&4194240)&&(ac=64),n}function Yf(n){for(var e=[],t=0;31>t;t++)e.push(n);return e}function _u(n,e,t){n.pendingLanes|=e,e!==536870912&&(n.suspendedLanes=0,n.pingedLanes=0),n=n.eventTimes,e=31-On(e),n[e]=t}function bx(n,e){var t=n.pendingLanes&~e;n.pendingLanes=e,n.suspendedLanes=0,n.pingedLanes=0,n.expiredLanes&=e,n.mutableReadLanes&=e,n.entangledLanes&=e,e=n.entanglements;var r=n.eventTimes;for(n=n.expirationTimes;0<t;){var i=31-On(t),s=1<<i;e[i]=0,r[i]=-1,n[i]=-1,t&=~s}}function Ng(n,e){var t=n.entangledLanes|=e;for(n=n.entanglements;t;){var r=31-On(t),i=1<<r;i&e|n[r]&e&&(n[r]|=e),t&=~i}}var be=0;function lI(n){return n&=-n,1<n?4<n?n&268435455?16:536870912:4:1}var uI,Mg,cI,dI,hI,em=!1,uc=[],ui=null,ci=null,di=null,Vl=new Map,Ll=new Map,Zr=[],Px="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function rw(n,e){switch(n){case"focusin":case"focusout":ui=null;break;case"dragenter":case"dragleave":ci=null;break;case"mouseover":case"mouseout":di=null;break;case"pointerover":case"pointerout":Vl.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":Ll.delete(e.pointerId)}}function Ya(n,e,t,r,i,s){return n===null||n.nativeEvent!==s?(n={blockedOn:e,domEventName:t,eventSystemFlags:r,nativeEvent:s,targetContainers:[i]},e!==null&&(e=wu(e),e!==null&&Mg(e)),n):(n.eventSystemFlags|=r,e=n.targetContainers,i!==null&&e.indexOf(i)===-1&&e.push(i),n)}function kx(n,e,t,r,i){switch(e){case"focusin":return ui=Ya(ui,n,e,t,r,i),!0;case"dragenter":return ci=Ya(ci,n,e,t,r,i),!0;case"mouseover":return di=Ya(di,n,e,t,r,i),!0;case"pointerover":var s=i.pointerId;return Vl.set(s,Ya(Vl.get(s)||null,n,e,t,r,i)),!0;case"gotpointercapture":return s=i.pointerId,Ll.set(s,Ya(Ll.get(s)||null,n,e,t,r,i)),!0}return!1}function fI(n){var e=cs(n.target);if(e!==null){var t=qs(e);if(t!==null){if(e=t.tag,e===13){if(e=tI(t),e!==null){n.blockedOn=e,hI(n.priority,function(){cI(t)});return}}else if(e===3&&t.stateNode.current.memoizedState.isDehydrated){n.blockedOn=t.tag===3?t.stateNode.containerInfo:null;return}}}n.blockedOn=null}function Fc(n){if(n.blockedOn!==null)return!1;for(var e=n.targetContainers;0<e.length;){var t=tm(n.domEventName,n.eventSystemFlags,e[0],n.nativeEvent);if(t===null){t=n.nativeEvent;var r=new t.constructor(t.type,t);Kp=r,t.target.dispatchEvent(r),Kp=null}else return e=wu(t),e!==null&&Mg(e),n.blockedOn=t,!1;e.shift()}return!0}function iw(n,e,t){Fc(n)&&t.delete(e)}function xx(){em=!1,ui!==null&&Fc(ui)&&(ui=null),ci!==null&&Fc(ci)&&(ci=null),di!==null&&Fc(di)&&(di=null),Vl.forEach(iw),Ll.forEach(iw)}function Ha(n,e){n.blockedOn===e&&(n.blockedOn=null,em||(em=!0,pn.unstable_scheduleCallback(pn.unstable_NormalPriority,xx)))}function Fl(n){function e(i){return Ha(i,n)}if(0<uc.length){Ha(uc[0],n);for(var t=1;t<uc.length;t++){var r=uc[t];r.blockedOn===n&&(r.blockedOn=null)}}for(ui!==null&&Ha(ui,n),ci!==null&&Ha(ci,n),di!==null&&Ha(di,n),Vl.forEach(e),Ll.forEach(e),t=0;t<Zr.length;t++)r=Zr[t],r.blockedOn===n&&(r.blockedOn=null);for(;0<Zr.length&&(t=Zr[0],t.blockedOn===null);)fI(t),t.blockedOn===null&&Zr.shift()}var Ro=Vr.ReactCurrentBatchConfig,fd=!0;function Cx(n,e,t,r){var i=be,s=Ro.transition;Ro.transition=null;try{be=1,Og(n,e,t,r)}finally{be=i,Ro.transition=s}}function Rx(n,e,t,r){var i=be,s=Ro.transition;Ro.transition=null;try{be=4,Og(n,e,t,r)}finally{be=i,Ro.transition=s}}function Og(n,e,t,r){if(fd){var i=tm(n,e,t,r);if(i===null)np(n,e,r,pd,t),rw(n,r);else if(kx(i,n,e,t,r))r.stopPropagation();else if(rw(n,r),e&4&&-1<Px.indexOf(n)){for(;i!==null;){var s=wu(i);if(s!==null&&uI(s),s=tm(n,e,t,r),s===null&&np(n,e,r,pd,t),s===i)break;i=s}i!==null&&r.stopPropagation()}else np(n,e,r,null,t)}}var pd=null;function tm(n,e,t,r){if(pd=null,n=Rg(r),n=cs(n),n!==null)if(e=qs(n),e===null)n=null;else if(t=e.tag,t===13){if(n=tI(e),n!==null)return n;n=null}else if(t===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;n=null}else e!==n&&(n=null);return pd=n,null}function pI(n){switch(n){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(_x()){case Ag:return 1;case sI:return 4;case dd:case vx:return 16;case oI:return 536870912;default:return 16}default:return 16}}var ri=null,Vg=null,Bc=null;function mI(){if(Bc)return Bc;var n,e=Vg,t=e.length,r,i="value"in ri?ri.value:ri.textContent,s=i.length;for(n=0;n<t&&e[n]===i[n];n++);var o=t-n;for(r=1;r<=o&&e[t-r]===i[s-r];r++);return Bc=i.slice(n,1<r?1-r:void 0)}function Uc(n){var e=n.keyCode;return"charCode"in n?(n=n.charCode,n===0&&e===13&&(n=13)):n=e,n===10&&(n=13),32<=n||n===13?n:0}function cc(){return!0}function sw(){return!1}function yn(n){function e(t,r,i,s,o){this._reactName=t,this._targetInst=i,this.type=r,this.nativeEvent=s,this.target=o,this.currentTarget=null;for(var a in n)n.hasOwnProperty(a)&&(t=n[a],this[a]=t?t(s):s[a]);return this.isDefaultPrevented=(s.defaultPrevented!=null?s.defaultPrevented:s.returnValue===!1)?cc:sw,this.isPropagationStopped=sw,this}return Qe(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var t=this.nativeEvent;t&&(t.preventDefault?t.preventDefault():typeof t.returnValue!="unknown"&&(t.returnValue=!1),this.isDefaultPrevented=cc)},stopPropagation:function(){var t=this.nativeEvent;t&&(t.stopPropagation?t.stopPropagation():typeof t.cancelBubble!="unknown"&&(t.cancelBubble=!0),this.isPropagationStopped=cc)},persist:function(){},isPersistent:cc}),e}var ga={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(n){return n.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Lg=yn(ga),vu=Qe({},ga,{view:0,detail:0}),Ax=yn(vu),Hf,Qf,Qa,yh=Qe({},vu,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Fg,button:0,buttons:0,relatedTarget:function(n){return n.relatedTarget===void 0?n.fromElement===n.srcElement?n.toElement:n.fromElement:n.relatedTarget},movementX:function(n){return"movementX"in n?n.movementX:(n!==Qa&&(Qa&&n.type==="mousemove"?(Hf=n.screenX-Qa.screenX,Qf=n.screenY-Qa.screenY):Qf=Hf=0,Qa=n),Hf)},movementY:function(n){return"movementY"in n?n.movementY:Qf}}),ow=yn(yh),Nx=Qe({},yh,{dataTransfer:0}),Mx=yn(Nx),Ox=Qe({},vu,{relatedTarget:0}),Kf=yn(Ox),Vx=Qe({},ga,{animationName:0,elapsedTime:0,pseudoElement:0}),Lx=yn(Vx),Fx=Qe({},ga,{clipboardData:function(n){return"clipboardData"in n?n.clipboardData:window.clipboardData}}),Bx=yn(Fx),Ux=Qe({},ga,{data:0}),aw=yn(Ux),jx={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},$x={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},zx={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function qx(n){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(n):(n=zx[n])?!!e[n]:!1}function Fg(){return qx}var Wx=Qe({},vu,{key:function(n){if(n.key){var e=jx[n.key]||n.key;if(e!=="Unidentified")return e}return n.type==="keypress"?(n=Uc(n),n===13?"Enter":String.fromCharCode(n)):n.type==="keydown"||n.type==="keyup"?$x[n.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Fg,charCode:function(n){return n.type==="keypress"?Uc(n):0},keyCode:function(n){return n.type==="keydown"||n.type==="keyup"?n.keyCode:0},which:function(n){return n.type==="keypress"?Uc(n):n.type==="keydown"||n.type==="keyup"?n.keyCode:0}}),Yx=yn(Wx),Hx=Qe({},yh,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),lw=yn(Hx),Qx=Qe({},vu,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Fg}),Kx=yn(Qx),Gx=Qe({},ga,{propertyName:0,elapsedTime:0,pseudoElement:0}),Xx=yn(Gx),Jx=Qe({},yh,{deltaX:function(n){return"deltaX"in n?n.deltaX:"wheelDeltaX"in n?-n.wheelDeltaX:0},deltaY:function(n){return"deltaY"in n?n.deltaY:"wheelDeltaY"in n?-n.wheelDeltaY:"wheelDelta"in n?-n.wheelDelta:0},deltaZ:0,deltaMode:0}),Zx=yn(Jx),eC=[9,13,27,32],Bg=kr&&"CompositionEvent"in window,_l=null;kr&&"documentMode"in document&&(_l=document.documentMode);var tC=kr&&"TextEvent"in window&&!_l,gI=kr&&(!Bg||_l&&8<_l&&11>=_l),uw=" ",cw=!1;function yI(n,e){switch(n){case"keyup":return eC.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function _I(n){return n=n.detail,typeof n=="object"&&"data"in n?n.data:null}var _o=!1;function nC(n,e){switch(n){case"compositionend":return _I(e);case"keypress":return e.which!==32?null:(cw=!0,uw);case"textInput":return n=e.data,n===uw&&cw?null:n;default:return null}}function rC(n,e){if(_o)return n==="compositionend"||!Bg&&yI(n,e)?(n=mI(),Bc=Vg=ri=null,_o=!1,n):null;switch(n){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return gI&&e.locale!=="ko"?null:e.data;default:return null}}var iC={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function dw(n){var e=n&&n.nodeName&&n.nodeName.toLowerCase();return e==="input"?!!iC[n.type]:e==="textarea"}function vI(n,e,t,r){GT(r),e=md(e,"onChange"),0<e.length&&(t=new Lg("onChange","change",null,t,r),n.push({event:t,listeners:e}))}var vl=null,Bl=null;function sC(n){CI(n,0)}function _h(n){var e=Eo(n);if(zT(e))return n}function oC(n,e){if(n==="change")return e}var wI=!1;if(kr){var Gf;if(kr){var Xf="oninput"in document;if(!Xf){var hw=document.createElement("div");hw.setAttribute("oninput","return;"),Xf=typeof hw.oninput=="function"}Gf=Xf}else Gf=!1;wI=Gf&&(!document.documentMode||9<document.documentMode)}function fw(){vl&&(vl.detachEvent("onpropertychange",EI),Bl=vl=null)}function EI(n){if(n.propertyName==="value"&&_h(Bl)){var e=[];vI(e,Bl,n,Rg(n)),eI(sC,e)}}function aC(n,e,t){n==="focusin"?(fw(),vl=e,Bl=t,vl.attachEvent("onpropertychange",EI)):n==="focusout"&&fw()}function lC(n){if(n==="selectionchange"||n==="keyup"||n==="keydown")return _h(Bl)}function uC(n,e){if(n==="click")return _h(e)}function cC(n,e){if(n==="input"||n==="change")return _h(e)}function dC(n,e){return n===e&&(n!==0||1/n===1/e)||n!==n&&e!==e}var Fn=typeof Object.is=="function"?Object.is:dC;function Ul(n,e){if(Fn(n,e))return!0;if(typeof n!="object"||n===null||typeof e!="object"||e===null)return!1;var t=Object.keys(n),r=Object.keys(e);if(t.length!==r.length)return!1;for(r=0;r<t.length;r++){var i=t[r];if(!Lp.call(e,i)||!Fn(n[i],e[i]))return!1}return!0}function pw(n){for(;n&&n.firstChild;)n=n.firstChild;return n}function mw(n,e){var t=pw(n);n=0;for(var r;t;){if(t.nodeType===3){if(r=n+t.textContent.length,n<=e&&r>=e)return{node:t,offset:e-n};n=r}e:{for(;t;){if(t.nextSibling){t=t.nextSibling;break e}t=t.parentNode}t=void 0}t=pw(t)}}function TI(n,e){return n&&e?n===e?!0:n&&n.nodeType===3?!1:e&&e.nodeType===3?TI(n,e.parentNode):"contains"in n?n.contains(e):n.compareDocumentPosition?!!(n.compareDocumentPosition(e)&16):!1:!1}function II(){for(var n=window,e=ld();e instanceof n.HTMLIFrameElement;){try{var t=typeof e.contentWindow.location.href=="string"}catch{t=!1}if(t)n=e.contentWindow;else break;e=ld(n.document)}return e}function Ug(n){var e=n&&n.nodeName&&n.nodeName.toLowerCase();return e&&(e==="input"&&(n.type==="text"||n.type==="search"||n.type==="tel"||n.type==="url"||n.type==="password")||e==="textarea"||n.contentEditable==="true")}function hC(n){var e=II(),t=n.focusedElem,r=n.selectionRange;if(e!==t&&t&&t.ownerDocument&&TI(t.ownerDocument.documentElement,t)){if(r!==null&&Ug(t)){if(e=r.start,n=r.end,n===void 0&&(n=e),"selectionStart"in t)t.selectionStart=e,t.selectionEnd=Math.min(n,t.value.length);else if(n=(e=t.ownerDocument||document)&&e.defaultView||window,n.getSelection){n=n.getSelection();var i=t.textContent.length,s=Math.min(r.start,i);r=r.end===void 0?s:Math.min(r.end,i),!n.extend&&s>r&&(i=r,r=s,s=i),i=mw(t,s);var o=mw(t,r);i&&o&&(n.rangeCount!==1||n.anchorNode!==i.node||n.anchorOffset!==i.offset||n.focusNode!==o.node||n.focusOffset!==o.offset)&&(e=e.createRange(),e.setStart(i.node,i.offset),n.removeAllRanges(),s>r?(n.addRange(e),n.extend(o.node,o.offset)):(e.setEnd(o.node,o.offset),n.addRange(e)))}}for(e=[],n=t;n=n.parentNode;)n.nodeType===1&&e.push({element:n,left:n.scrollLeft,top:n.scrollTop});for(typeof t.focus=="function"&&t.focus(),t=0;t<e.length;t++)n=e[t],n.element.scrollLeft=n.left,n.element.scrollTop=n.top}}var fC=kr&&"documentMode"in document&&11>=document.documentMode,vo=null,nm=null,wl=null,rm=!1;function gw(n,e,t){var r=t.window===t?t.document:t.nodeType===9?t:t.ownerDocument;rm||vo==null||vo!==ld(r)||(r=vo,"selectionStart"in r&&Ug(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),wl&&Ul(wl,r)||(wl=r,r=md(nm,"onSelect"),0<r.length&&(e=new Lg("onSelect","select",null,e,t),n.push({event:e,listeners:r}),e.target=vo)))}function dc(n,e){var t={};return t[n.toLowerCase()]=e.toLowerCase(),t["Webkit"+n]="webkit"+e,t["Moz"+n]="moz"+e,t}var wo={animationend:dc("Animation","AnimationEnd"),animationiteration:dc("Animation","AnimationIteration"),animationstart:dc("Animation","AnimationStart"),transitionend:dc("Transition","TransitionEnd")},Jf={},SI={};kr&&(SI=document.createElement("div").style,"AnimationEvent"in window||(delete wo.animationend.animation,delete wo.animationiteration.animation,delete wo.animationstart.animation),"TransitionEvent"in window||delete wo.transitionend.transition);function vh(n){if(Jf[n])return Jf[n];if(!wo[n])return n;var e=wo[n],t;for(t in e)if(e.hasOwnProperty(t)&&t in SI)return Jf[n]=e[t];return n}var DI=vh("animationend"),bI=vh("animationiteration"),PI=vh("animationstart"),kI=vh("transitionend"),xI=new Map,yw="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Li(n,e){xI.set(n,e),zs(e,[n])}for(var Zf=0;Zf<yw.length;Zf++){var ep=yw[Zf],pC=ep.toLowerCase(),mC=ep[0].toUpperCase()+ep.slice(1);Li(pC,"on"+mC)}Li(DI,"onAnimationEnd");Li(bI,"onAnimationIteration");Li(PI,"onAnimationStart");Li("dblclick","onDoubleClick");Li("focusin","onFocus");Li("focusout","onBlur");Li(kI,"onTransitionEnd");Uo("onMouseEnter",["mouseout","mouseover"]);Uo("onMouseLeave",["mouseout","mouseover"]);Uo("onPointerEnter",["pointerout","pointerover"]);Uo("onPointerLeave",["pointerout","pointerover"]);zs("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));zs("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));zs("onBeforeInput",["compositionend","keypress","textInput","paste"]);zs("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));zs("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));zs("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var ul="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),gC=new Set("cancel close invalid load scroll toggle".split(" ").concat(ul));function _w(n,e,t){var r=n.type||"unknown-event";n.currentTarget=t,px(r,e,void 0,n),n.currentTarget=null}function CI(n,e){e=(e&4)!==0;for(var t=0;t<n.length;t++){var r=n[t],i=r.event;r=r.listeners;e:{var s=void 0;if(e)for(var o=r.length-1;0<=o;o--){var a=r[o],l=a.instance,c=a.currentTarget;if(a=a.listener,l!==s&&i.isPropagationStopped())break e;_w(i,a,c),s=l}else for(o=0;o<r.length;o++){if(a=r[o],l=a.instance,c=a.currentTarget,a=a.listener,l!==s&&i.isPropagationStopped())break e;_w(i,a,c),s=l}}}if(cd)throw n=Jp,cd=!1,Jp=null,n}function Ne(n,e){var t=e[lm];t===void 0&&(t=e[lm]=new Set);var r=n+"__bubble";t.has(r)||(RI(e,n,2,!1),t.add(r))}function tp(n,e,t){var r=0;e&&(r|=4),RI(t,n,r,e)}var hc="_reactListening"+Math.random().toString(36).slice(2);function jl(n){if(!n[hc]){n[hc]=!0,FT.forEach(function(t){t!=="selectionchange"&&(gC.has(t)||tp(t,!1,n),tp(t,!0,n))});var e=n.nodeType===9?n:n.ownerDocument;e===null||e[hc]||(e[hc]=!0,tp("selectionchange",!1,e))}}function RI(n,e,t,r){switch(pI(e)){case 1:var i=Cx;break;case 4:i=Rx;break;default:i=Og}t=i.bind(null,e,t,n),i=void 0,!Xp||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(i=!0),r?i!==void 0?n.addEventListener(e,t,{capture:!0,passive:i}):n.addEventListener(e,t,!0):i!==void 0?n.addEventListener(e,t,{passive:i}):n.addEventListener(e,t,!1)}function np(n,e,t,r,i){var s=r;if(!(e&1)&&!(e&2)&&r!==null)e:for(;;){if(r===null)return;var o=r.tag;if(o===3||o===4){var a=r.stateNode.containerInfo;if(a===i||a.nodeType===8&&a.parentNode===i)break;if(o===4)for(o=r.return;o!==null;){var l=o.tag;if((l===3||l===4)&&(l=o.stateNode.containerInfo,l===i||l.nodeType===8&&l.parentNode===i))return;o=o.return}for(;a!==null;){if(o=cs(a),o===null)return;if(l=o.tag,l===5||l===6){r=s=o;continue e}a=a.parentNode}}r=r.return}eI(function(){var c=s,d=Rg(t),h=[];e:{var p=xI.get(n);if(p!==void 0){var g=Lg,v=n;switch(n){case"keypress":if(Uc(t)===0)break e;case"keydown":case"keyup":g=Yx;break;case"focusin":v="focus",g=Kf;break;case"focusout":v="blur",g=Kf;break;case"beforeblur":case"afterblur":g=Kf;break;case"click":if(t.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":g=ow;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":g=Mx;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":g=Kx;break;case DI:case bI:case PI:g=Lx;break;case kI:g=Xx;break;case"scroll":g=Ax;break;case"wheel":g=Zx;break;case"copy":case"cut":case"paste":g=Bx;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":g=lw}var S=(e&4)!==0,D=!S&&n==="scroll",w=S?p!==null?p+"Capture":null:p;S=[];for(var _=c,E;_!==null;){E=_;var x=E.stateNode;if(E.tag===5&&x!==null&&(E=x,w!==null&&(x=Ol(_,w),x!=null&&S.push($l(_,x,E)))),D)break;_=_.return}0<S.length&&(p=new g(p,v,null,t,d),h.push({event:p,listeners:S}))}}if(!(e&7)){e:{if(p=n==="mouseover"||n==="pointerover",g=n==="mouseout"||n==="pointerout",p&&t!==Kp&&(v=t.relatedTarget||t.fromElement)&&(cs(v)||v[xr]))break e;if((g||p)&&(p=d.window===d?d:(p=d.ownerDocument)?p.defaultView||p.parentWindow:window,g?(v=t.relatedTarget||t.toElement,g=c,v=v?cs(v):null,v!==null&&(D=qs(v),v!==D||v.tag!==5&&v.tag!==6)&&(v=null)):(g=null,v=c),g!==v)){if(S=ow,x="onMouseLeave",w="onMouseEnter",_="mouse",(n==="pointerout"||n==="pointerover")&&(S=lw,x="onPointerLeave",w="onPointerEnter",_="pointer"),D=g==null?p:Eo(g),E=v==null?p:Eo(v),p=new S(x,_+"leave",g,t,d),p.target=D,p.relatedTarget=E,x=null,cs(d)===c&&(S=new S(w,_+"enter",v,t,d),S.target=E,S.relatedTarget=D,x=S),D=x,g&&v)t:{for(S=g,w=v,_=0,E=S;E;E=no(E))_++;for(E=0,x=w;x;x=no(x))E++;for(;0<_-E;)S=no(S),_--;for(;0<E-_;)w=no(w),E--;for(;_--;){if(S===w||w!==null&&S===w.alternate)break t;S=no(S),w=no(w)}S=null}else S=null;g!==null&&vw(h,p,g,S,!1),v!==null&&D!==null&&vw(h,D,v,S,!0)}}e:{if(p=c?Eo(c):window,g=p.nodeName&&p.nodeName.toLowerCase(),g==="select"||g==="input"&&p.type==="file")var A=oC;else if(dw(p))if(wI)A=cC;else{A=lC;var L=aC}else(g=p.nodeName)&&g.toLowerCase()==="input"&&(p.type==="checkbox"||p.type==="radio")&&(A=uC);if(A&&(A=A(n,c))){vI(h,A,t,d);break e}L&&L(n,p,c),n==="focusout"&&(L=p._wrapperState)&&L.controlled&&p.type==="number"&&qp(p,"number",p.value)}switch(L=c?Eo(c):window,n){case"focusin":(dw(L)||L.contentEditable==="true")&&(vo=L,nm=c,wl=null);break;case"focusout":wl=nm=vo=null;break;case"mousedown":rm=!0;break;case"contextmenu":case"mouseup":case"dragend":rm=!1,gw(h,t,d);break;case"selectionchange":if(fC)break;case"keydown":case"keyup":gw(h,t,d)}var I;if(Bg)e:{switch(n){case"compositionstart":var y="onCompositionStart";break e;case"compositionend":y="onCompositionEnd";break e;case"compositionupdate":y="onCompositionUpdate";break e}y=void 0}else _o?yI(n,t)&&(y="onCompositionEnd"):n==="keydown"&&t.keyCode===229&&(y="onCompositionStart");y&&(gI&&t.locale!=="ko"&&(_o||y!=="onCompositionStart"?y==="onCompositionEnd"&&_o&&(I=mI()):(ri=d,Vg="value"in ri?ri.value:ri.textContent,_o=!0)),L=md(c,y),0<L.length&&(y=new aw(y,n,null,t,d),h.push({event:y,listeners:L}),I?y.data=I:(I=_I(t),I!==null&&(y.data=I)))),(I=tC?nC(n,t):rC(n,t))&&(c=md(c,"onBeforeInput"),0<c.length&&(d=new aw("onBeforeInput","beforeinput",null,t,d),h.push({event:d,listeners:c}),d.data=I))}CI(h,e)})}function $l(n,e,t){return{instance:n,listener:e,currentTarget:t}}function md(n,e){for(var t=e+"Capture",r=[];n!==null;){var i=n,s=i.stateNode;i.tag===5&&s!==null&&(i=s,s=Ol(n,t),s!=null&&r.unshift($l(n,s,i)),s=Ol(n,e),s!=null&&r.push($l(n,s,i))),n=n.return}return r}function no(n){if(n===null)return null;do n=n.return;while(n&&n.tag!==5);return n||null}function vw(n,e,t,r,i){for(var s=e._reactName,o=[];t!==null&&t!==r;){var a=t,l=a.alternate,c=a.stateNode;if(l!==null&&l===r)break;a.tag===5&&c!==null&&(a=c,i?(l=Ol(t,s),l!=null&&o.unshift($l(t,l,a))):i||(l=Ol(t,s),l!=null&&o.push($l(t,l,a)))),t=t.return}o.length!==0&&n.push({event:e,listeners:o})}var yC=/\r\n?/g,_C=/\u0000|\uFFFD/g;function ww(n){return(typeof n=="string"?n:""+n).replace(yC,`
`).replace(_C,"")}function fc(n,e,t){if(e=ww(e),ww(n)!==e&&t)throw Error(z(425))}function gd(){}var im=null,sm=null;function om(n,e){return n==="textarea"||n==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var am=typeof setTimeout=="function"?setTimeout:void 0,vC=typeof clearTimeout=="function"?clearTimeout:void 0,Ew=typeof Promise=="function"?Promise:void 0,wC=typeof queueMicrotask=="function"?queueMicrotask:typeof Ew<"u"?function(n){return Ew.resolve(null).then(n).catch(EC)}:am;function EC(n){setTimeout(function(){throw n})}function rp(n,e){var t=e,r=0;do{var i=t.nextSibling;if(n.removeChild(t),i&&i.nodeType===8)if(t=i.data,t==="/$"){if(r===0){n.removeChild(i),Fl(e);return}r--}else t!=="$"&&t!=="$?"&&t!=="$!"||r++;t=i}while(t);Fl(e)}function hi(n){for(;n!=null;n=n.nextSibling){var e=n.nodeType;if(e===1||e===3)break;if(e===8){if(e=n.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return n}function Tw(n){n=n.previousSibling;for(var e=0;n;){if(n.nodeType===8){var t=n.data;if(t==="$"||t==="$!"||t==="$?"){if(e===0)return n;e--}else t==="/$"&&e++}n=n.previousSibling}return null}var ya=Math.random().toString(36).slice(2),Wn="__reactFiber$"+ya,zl="__reactProps$"+ya,xr="__reactContainer$"+ya,lm="__reactEvents$"+ya,TC="__reactListeners$"+ya,IC="__reactHandles$"+ya;function cs(n){var e=n[Wn];if(e)return e;for(var t=n.parentNode;t;){if(e=t[xr]||t[Wn]){if(t=e.alternate,e.child!==null||t!==null&&t.child!==null)for(n=Tw(n);n!==null;){if(t=n[Wn])return t;n=Tw(n)}return e}n=t,t=n.parentNode}return null}function wu(n){return n=n[Wn]||n[xr],!n||n.tag!==5&&n.tag!==6&&n.tag!==13&&n.tag!==3?null:n}function Eo(n){if(n.tag===5||n.tag===6)return n.stateNode;throw Error(z(33))}function wh(n){return n[zl]||null}var um=[],To=-1;function Fi(n){return{current:n}}function Oe(n){0>To||(n.current=um[To],um[To]=null,To--)}function Ce(n,e){To++,um[To]=n.current,n.current=e}var Ii={},Ot=Fi(Ii),sn=Fi(!1),Is=Ii;function jo(n,e){var t=n.type.contextTypes;if(!t)return Ii;var r=n.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===e)return r.__reactInternalMemoizedMaskedChildContext;var i={},s;for(s in t)i[s]=e[s];return r&&(n=n.stateNode,n.__reactInternalMemoizedUnmaskedChildContext=e,n.__reactInternalMemoizedMaskedChildContext=i),i}function on(n){return n=n.childContextTypes,n!=null}function yd(){Oe(sn),Oe(Ot)}function Iw(n,e,t){if(Ot.current!==Ii)throw Error(z(168));Ce(Ot,e),Ce(sn,t)}function AI(n,e,t){var r=n.stateNode;if(e=e.childContextTypes,typeof r.getChildContext!="function")return t;r=r.getChildContext();for(var i in r)if(!(i in e))throw Error(z(108,ax(n)||"Unknown",i));return Qe({},t,r)}function _d(n){return n=(n=n.stateNode)&&n.__reactInternalMemoizedMergedChildContext||Ii,Is=Ot.current,Ce(Ot,n),Ce(sn,sn.current),!0}function Sw(n,e,t){var r=n.stateNode;if(!r)throw Error(z(169));t?(n=AI(n,e,Is),r.__reactInternalMemoizedMergedChildContext=n,Oe(sn),Oe(Ot),Ce(Ot,n)):Oe(sn),Ce(sn,t)}var _r=null,Eh=!1,ip=!1;function NI(n){_r===null?_r=[n]:_r.push(n)}function SC(n){Eh=!0,NI(n)}function Bi(){if(!ip&&_r!==null){ip=!0;var n=0,e=be;try{var t=_r;for(be=1;n<t.length;n++){var r=t[n];do r=r(!0);while(r!==null)}_r=null,Eh=!1}catch(i){throw _r!==null&&(_r=_r.slice(n+1)),iI(Ag,Bi),i}finally{be=e,ip=!1}}return null}var Io=[],So=0,vd=null,wd=0,vn=[],wn=0,Ss=null,wr=1,Er="";function es(n,e){Io[So++]=wd,Io[So++]=vd,vd=n,wd=e}function MI(n,e,t){vn[wn++]=wr,vn[wn++]=Er,vn[wn++]=Ss,Ss=n;var r=wr;n=Er;var i=32-On(r)-1;r&=~(1<<i),t+=1;var s=32-On(e)+i;if(30<s){var o=i-i%5;s=(r&(1<<o)-1).toString(32),r>>=o,i-=o,wr=1<<32-On(e)+i|t<<i|r,Er=s+n}else wr=1<<s|t<<i|r,Er=n}function jg(n){n.return!==null&&(es(n,1),MI(n,1,0))}function $g(n){for(;n===vd;)vd=Io[--So],Io[So]=null,wd=Io[--So],Io[So]=null;for(;n===Ss;)Ss=vn[--wn],vn[wn]=null,Er=vn[--wn],vn[wn]=null,wr=vn[--wn],vn[wn]=null}var hn=null,dn=null,Fe=!1,Nn=null;function OI(n,e){var t=En(5,null,null,0);t.elementType="DELETED",t.stateNode=e,t.return=n,e=n.deletions,e===null?(n.deletions=[t],n.flags|=16):e.push(t)}function Dw(n,e){switch(n.tag){case 5:var t=n.type;return e=e.nodeType!==1||t.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(n.stateNode=e,hn=n,dn=hi(e.firstChild),!0):!1;case 6:return e=n.pendingProps===""||e.nodeType!==3?null:e,e!==null?(n.stateNode=e,hn=n,dn=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(t=Ss!==null?{id:wr,overflow:Er}:null,n.memoizedState={dehydrated:e,treeContext:t,retryLane:1073741824},t=En(18,null,null,0),t.stateNode=e,t.return=n,n.child=t,hn=n,dn=null,!0):!1;default:return!1}}function cm(n){return(n.mode&1)!==0&&(n.flags&128)===0}function dm(n){if(Fe){var e=dn;if(e){var t=e;if(!Dw(n,e)){if(cm(n))throw Error(z(418));e=hi(t.nextSibling);var r=hn;e&&Dw(n,e)?OI(r,t):(n.flags=n.flags&-4097|2,Fe=!1,hn=n)}}else{if(cm(n))throw Error(z(418));n.flags=n.flags&-4097|2,Fe=!1,hn=n}}}function bw(n){for(n=n.return;n!==null&&n.tag!==5&&n.tag!==3&&n.tag!==13;)n=n.return;hn=n}function pc(n){if(n!==hn)return!1;if(!Fe)return bw(n),Fe=!0,!1;var e;if((e=n.tag!==3)&&!(e=n.tag!==5)&&(e=n.type,e=e!=="head"&&e!=="body"&&!om(n.type,n.memoizedProps)),e&&(e=dn)){if(cm(n))throw VI(),Error(z(418));for(;e;)OI(n,e),e=hi(e.nextSibling)}if(bw(n),n.tag===13){if(n=n.memoizedState,n=n!==null?n.dehydrated:null,!n)throw Error(z(317));e:{for(n=n.nextSibling,e=0;n;){if(n.nodeType===8){var t=n.data;if(t==="/$"){if(e===0){dn=hi(n.nextSibling);break e}e--}else t!=="$"&&t!=="$!"&&t!=="$?"||e++}n=n.nextSibling}dn=null}}else dn=hn?hi(n.stateNode.nextSibling):null;return!0}function VI(){for(var n=dn;n;)n=hi(n.nextSibling)}function $o(){dn=hn=null,Fe=!1}function zg(n){Nn===null?Nn=[n]:Nn.push(n)}var DC=Vr.ReactCurrentBatchConfig;function Ka(n,e,t){if(n=t.ref,n!==null&&typeof n!="function"&&typeof n!="object"){if(t._owner){if(t=t._owner,t){if(t.tag!==1)throw Error(z(309));var r=t.stateNode}if(!r)throw Error(z(147,n));var i=r,s=""+n;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===s?e.ref:(e=function(o){var a=i.refs;o===null?delete a[s]:a[s]=o},e._stringRef=s,e)}if(typeof n!="string")throw Error(z(284));if(!t._owner)throw Error(z(290,n))}return n}function mc(n,e){throw n=Object.prototype.toString.call(e),Error(z(31,n==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":n))}function Pw(n){var e=n._init;return e(n._payload)}function LI(n){function e(w,_){if(n){var E=w.deletions;E===null?(w.deletions=[_],w.flags|=16):E.push(_)}}function t(w,_){if(!n)return null;for(;_!==null;)e(w,_),_=_.sibling;return null}function r(w,_){for(w=new Map;_!==null;)_.key!==null?w.set(_.key,_):w.set(_.index,_),_=_.sibling;return w}function i(w,_){return w=gi(w,_),w.index=0,w.sibling=null,w}function s(w,_,E){return w.index=E,n?(E=w.alternate,E!==null?(E=E.index,E<_?(w.flags|=2,_):E):(w.flags|=2,_)):(w.flags|=1048576,_)}function o(w){return n&&w.alternate===null&&(w.flags|=2),w}function a(w,_,E,x){return _===null||_.tag!==6?(_=dp(E,w.mode,x),_.return=w,_):(_=i(_,E),_.return=w,_)}function l(w,_,E,x){var A=E.type;return A===yo?d(w,_,E.props.children,x,E.key):_!==null&&(_.elementType===A||typeof A=="object"&&A!==null&&A.$$typeof===Xr&&Pw(A)===_.type)?(x=i(_,E.props),x.ref=Ka(w,_,E),x.return=w,x):(x=Hc(E.type,E.key,E.props,null,w.mode,x),x.ref=Ka(w,_,E),x.return=w,x)}function c(w,_,E,x){return _===null||_.tag!==4||_.stateNode.containerInfo!==E.containerInfo||_.stateNode.implementation!==E.implementation?(_=hp(E,w.mode,x),_.return=w,_):(_=i(_,E.children||[]),_.return=w,_)}function d(w,_,E,x,A){return _===null||_.tag!==7?(_=ys(E,w.mode,x,A),_.return=w,_):(_=i(_,E),_.return=w,_)}function h(w,_,E){if(typeof _=="string"&&_!==""||typeof _=="number")return _=dp(""+_,w.mode,E),_.return=w,_;if(typeof _=="object"&&_!==null){switch(_.$$typeof){case ic:return E=Hc(_.type,_.key,_.props,null,w.mode,E),E.ref=Ka(w,null,_),E.return=w,E;case go:return _=hp(_,w.mode,E),_.return=w,_;case Xr:var x=_._init;return h(w,x(_._payload),E)}if(al(_)||qa(_))return _=ys(_,w.mode,E,null),_.return=w,_;mc(w,_)}return null}function p(w,_,E,x){var A=_!==null?_.key:null;if(typeof E=="string"&&E!==""||typeof E=="number")return A!==null?null:a(w,_,""+E,x);if(typeof E=="object"&&E!==null){switch(E.$$typeof){case ic:return E.key===A?l(w,_,E,x):null;case go:return E.key===A?c(w,_,E,x):null;case Xr:return A=E._init,p(w,_,A(E._payload),x)}if(al(E)||qa(E))return A!==null?null:d(w,_,E,x,null);mc(w,E)}return null}function g(w,_,E,x,A){if(typeof x=="string"&&x!==""||typeof x=="number")return w=w.get(E)||null,a(_,w,""+x,A);if(typeof x=="object"&&x!==null){switch(x.$$typeof){case ic:return w=w.get(x.key===null?E:x.key)||null,l(_,w,x,A);case go:return w=w.get(x.key===null?E:x.key)||null,c(_,w,x,A);case Xr:var L=x._init;return g(w,_,E,L(x._payload),A)}if(al(x)||qa(x))return w=w.get(E)||null,d(_,w,x,A,null);mc(_,x)}return null}function v(w,_,E,x){for(var A=null,L=null,I=_,y=_=0,b=null;I!==null&&y<E.length;y++){I.index>y?(b=I,I=null):b=I.sibling;var k=p(w,I,E[y],x);if(k===null){I===null&&(I=b);break}n&&I&&k.alternate===null&&e(w,I),_=s(k,_,y),L===null?A=k:L.sibling=k,L=k,I=b}if(y===E.length)return t(w,I),Fe&&es(w,y),A;if(I===null){for(;y<E.length;y++)I=h(w,E[y],x),I!==null&&(_=s(I,_,y),L===null?A=I:L.sibling=I,L=I);return Fe&&es(w,y),A}for(I=r(w,I);y<E.length;y++)b=g(I,w,y,E[y],x),b!==null&&(n&&b.alternate!==null&&I.delete(b.key===null?y:b.key),_=s(b,_,y),L===null?A=b:L.sibling=b,L=b);return n&&I.forEach(function(C){return e(w,C)}),Fe&&es(w,y),A}function S(w,_,E,x){var A=qa(E);if(typeof A!="function")throw Error(z(150));if(E=A.call(E),E==null)throw Error(z(151));for(var L=A=null,I=_,y=_=0,b=null,k=E.next();I!==null&&!k.done;y++,k=E.next()){I.index>y?(b=I,I=null):b=I.sibling;var C=p(w,I,k.value,x);if(C===null){I===null&&(I=b);break}n&&I&&C.alternate===null&&e(w,I),_=s(C,_,y),L===null?A=C:L.sibling=C,L=C,I=b}if(k.done)return t(w,I),Fe&&es(w,y),A;if(I===null){for(;!k.done;y++,k=E.next())k=h(w,k.value,x),k!==null&&(_=s(k,_,y),L===null?A=k:L.sibling=k,L=k);return Fe&&es(w,y),A}for(I=r(w,I);!k.done;y++,k=E.next())k=g(I,w,y,k.value,x),k!==null&&(n&&k.alternate!==null&&I.delete(k.key===null?y:k.key),_=s(k,_,y),L===null?A=k:L.sibling=k,L=k);return n&&I.forEach(function(R){return e(w,R)}),Fe&&es(w,y),A}function D(w,_,E,x){if(typeof E=="object"&&E!==null&&E.type===yo&&E.key===null&&(E=E.props.children),typeof E=="object"&&E!==null){switch(E.$$typeof){case ic:e:{for(var A=E.key,L=_;L!==null;){if(L.key===A){if(A=E.type,A===yo){if(L.tag===7){t(w,L.sibling),_=i(L,E.props.children),_.return=w,w=_;break e}}else if(L.elementType===A||typeof A=="object"&&A!==null&&A.$$typeof===Xr&&Pw(A)===L.type){t(w,L.sibling),_=i(L,E.props),_.ref=Ka(w,L,E),_.return=w,w=_;break e}t(w,L);break}else e(w,L);L=L.sibling}E.type===yo?(_=ys(E.props.children,w.mode,x,E.key),_.return=w,w=_):(x=Hc(E.type,E.key,E.props,null,w.mode,x),x.ref=Ka(w,_,E),x.return=w,w=x)}return o(w);case go:e:{for(L=E.key;_!==null;){if(_.key===L)if(_.tag===4&&_.stateNode.containerInfo===E.containerInfo&&_.stateNode.implementation===E.implementation){t(w,_.sibling),_=i(_,E.children||[]),_.return=w,w=_;break e}else{t(w,_);break}else e(w,_);_=_.sibling}_=hp(E,w.mode,x),_.return=w,w=_}return o(w);case Xr:return L=E._init,D(w,_,L(E._payload),x)}if(al(E))return v(w,_,E,x);if(qa(E))return S(w,_,E,x);mc(w,E)}return typeof E=="string"&&E!==""||typeof E=="number"?(E=""+E,_!==null&&_.tag===6?(t(w,_.sibling),_=i(_,E),_.return=w,w=_):(t(w,_),_=dp(E,w.mode,x),_.return=w,w=_),o(w)):t(w,_)}return D}var zo=LI(!0),FI=LI(!1),Ed=Fi(null),Td=null,Do=null,qg=null;function Wg(){qg=Do=Td=null}function Yg(n){var e=Ed.current;Oe(Ed),n._currentValue=e}function hm(n,e,t){for(;n!==null;){var r=n.alternate;if((n.childLanes&e)!==e?(n.childLanes|=e,r!==null&&(r.childLanes|=e)):r!==null&&(r.childLanes&e)!==e&&(r.childLanes|=e),n===t)break;n=n.return}}function Ao(n,e){Td=n,qg=Do=null,n=n.dependencies,n!==null&&n.firstContext!==null&&(n.lanes&e&&(en=!0),n.firstContext=null)}function bn(n){var e=n._currentValue;if(qg!==n)if(n={context:n,memoizedValue:e,next:null},Do===null){if(Td===null)throw Error(z(308));Do=n,Td.dependencies={lanes:0,firstContext:n}}else Do=Do.next=n;return e}var ds=null;function Hg(n){ds===null?ds=[n]:ds.push(n)}function BI(n,e,t,r){var i=e.interleaved;return i===null?(t.next=t,Hg(e)):(t.next=i.next,i.next=t),e.interleaved=t,Cr(n,r)}function Cr(n,e){n.lanes|=e;var t=n.alternate;for(t!==null&&(t.lanes|=e),t=n,n=n.return;n!==null;)n.childLanes|=e,t=n.alternate,t!==null&&(t.childLanes|=e),t=n,n=n.return;return t.tag===3?t.stateNode:null}var Jr=!1;function Qg(n){n.updateQueue={baseState:n.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function UI(n,e){n=n.updateQueue,e.updateQueue===n&&(e.updateQueue={baseState:n.baseState,firstBaseUpdate:n.firstBaseUpdate,lastBaseUpdate:n.lastBaseUpdate,shared:n.shared,effects:n.effects})}function Ir(n,e){return{eventTime:n,lane:e,tag:0,payload:null,callback:null,next:null}}function fi(n,e,t){var r=n.updateQueue;if(r===null)return null;if(r=r.shared,ye&2){var i=r.pending;return i===null?e.next=e:(e.next=i.next,i.next=e),r.pending=e,Cr(n,t)}return i=r.interleaved,i===null?(e.next=e,Hg(r)):(e.next=i.next,i.next=e),r.interleaved=e,Cr(n,t)}function jc(n,e,t){if(e=e.updateQueue,e!==null&&(e=e.shared,(t&4194240)!==0)){var r=e.lanes;r&=n.pendingLanes,t|=r,e.lanes=t,Ng(n,t)}}function kw(n,e){var t=n.updateQueue,r=n.alternate;if(r!==null&&(r=r.updateQueue,t===r)){var i=null,s=null;if(t=t.firstBaseUpdate,t!==null){do{var o={eventTime:t.eventTime,lane:t.lane,tag:t.tag,payload:t.payload,callback:t.callback,next:null};s===null?i=s=o:s=s.next=o,t=t.next}while(t!==null);s===null?i=s=e:s=s.next=e}else i=s=e;t={baseState:r.baseState,firstBaseUpdate:i,lastBaseUpdate:s,shared:r.shared,effects:r.effects},n.updateQueue=t;return}n=t.lastBaseUpdate,n===null?t.firstBaseUpdate=e:n.next=e,t.lastBaseUpdate=e}function Id(n,e,t,r){var i=n.updateQueue;Jr=!1;var s=i.firstBaseUpdate,o=i.lastBaseUpdate,a=i.shared.pending;if(a!==null){i.shared.pending=null;var l=a,c=l.next;l.next=null,o===null?s=c:o.next=c,o=l;var d=n.alternate;d!==null&&(d=d.updateQueue,a=d.lastBaseUpdate,a!==o&&(a===null?d.firstBaseUpdate=c:a.next=c,d.lastBaseUpdate=l))}if(s!==null){var h=i.baseState;o=0,d=c=l=null,a=s;do{var p=a.lane,g=a.eventTime;if((r&p)===p){d!==null&&(d=d.next={eventTime:g,lane:0,tag:a.tag,payload:a.payload,callback:a.callback,next:null});e:{var v=n,S=a;switch(p=e,g=t,S.tag){case 1:if(v=S.payload,typeof v=="function"){h=v.call(g,h,p);break e}h=v;break e;case 3:v.flags=v.flags&-65537|128;case 0:if(v=S.payload,p=typeof v=="function"?v.call(g,h,p):v,p==null)break e;h=Qe({},h,p);break e;case 2:Jr=!0}}a.callback!==null&&a.lane!==0&&(n.flags|=64,p=i.effects,p===null?i.effects=[a]:p.push(a))}else g={eventTime:g,lane:p,tag:a.tag,payload:a.payload,callback:a.callback,next:null},d===null?(c=d=g,l=h):d=d.next=g,o|=p;if(a=a.next,a===null){if(a=i.shared.pending,a===null)break;p=a,a=p.next,p.next=null,i.lastBaseUpdate=p,i.shared.pending=null}}while(!0);if(d===null&&(l=h),i.baseState=l,i.firstBaseUpdate=c,i.lastBaseUpdate=d,e=i.shared.interleaved,e!==null){i=e;do o|=i.lane,i=i.next;while(i!==e)}else s===null&&(i.shared.lanes=0);bs|=o,n.lanes=o,n.memoizedState=h}}function xw(n,e,t){if(n=e.effects,e.effects=null,n!==null)for(e=0;e<n.length;e++){var r=n[e],i=r.callback;if(i!==null){if(r.callback=null,r=t,typeof i!="function")throw Error(z(191,i));i.call(r)}}}var Eu={},tr=Fi(Eu),ql=Fi(Eu),Wl=Fi(Eu);function hs(n){if(n===Eu)throw Error(z(174));return n}function Kg(n,e){switch(Ce(Wl,e),Ce(ql,n),Ce(tr,Eu),n=e.nodeType,n){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:Yp(null,"");break;default:n=n===8?e.parentNode:e,e=n.namespaceURI||null,n=n.tagName,e=Yp(e,n)}Oe(tr),Ce(tr,e)}function qo(){Oe(tr),Oe(ql),Oe(Wl)}function jI(n){hs(Wl.current);var e=hs(tr.current),t=Yp(e,n.type);e!==t&&(Ce(ql,n),Ce(tr,t))}function Gg(n){ql.current===n&&(Oe(tr),Oe(ql))}var ze=Fi(0);function Sd(n){for(var e=n;e!==null;){if(e.tag===13){var t=e.memoizedState;if(t!==null&&(t=t.dehydrated,t===null||t.data==="$?"||t.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===n)break;for(;e.sibling===null;){if(e.return===null||e.return===n)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var sp=[];function Xg(){for(var n=0;n<sp.length;n++)sp[n]._workInProgressVersionPrimary=null;sp.length=0}var $c=Vr.ReactCurrentDispatcher,op=Vr.ReactCurrentBatchConfig,Ds=0,We=null,ut=null,ft=null,Dd=!1,El=!1,Yl=0,bC=0;function Ct(){throw Error(z(321))}function Jg(n,e){if(e===null)return!1;for(var t=0;t<e.length&&t<n.length;t++)if(!Fn(n[t],e[t]))return!1;return!0}function Zg(n,e,t,r,i,s){if(Ds=s,We=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,$c.current=n===null||n.memoizedState===null?CC:RC,n=t(r,i),El){s=0;do{if(El=!1,Yl=0,25<=s)throw Error(z(301));s+=1,ft=ut=null,e.updateQueue=null,$c.current=AC,n=t(r,i)}while(El)}if($c.current=bd,e=ut!==null&&ut.next!==null,Ds=0,ft=ut=We=null,Dd=!1,e)throw Error(z(300));return n}function ey(){var n=Yl!==0;return Yl=0,n}function $n(){var n={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return ft===null?We.memoizedState=ft=n:ft=ft.next=n,ft}function Pn(){if(ut===null){var n=We.alternate;n=n!==null?n.memoizedState:null}else n=ut.next;var e=ft===null?We.memoizedState:ft.next;if(e!==null)ft=e,ut=n;else{if(n===null)throw Error(z(310));ut=n,n={memoizedState:ut.memoizedState,baseState:ut.baseState,baseQueue:ut.baseQueue,queue:ut.queue,next:null},ft===null?We.memoizedState=ft=n:ft=ft.next=n}return ft}function Hl(n,e){return typeof e=="function"?e(n):e}function ap(n){var e=Pn(),t=e.queue;if(t===null)throw Error(z(311));t.lastRenderedReducer=n;var r=ut,i=r.baseQueue,s=t.pending;if(s!==null){if(i!==null){var o=i.next;i.next=s.next,s.next=o}r.baseQueue=i=s,t.pending=null}if(i!==null){s=i.next,r=r.baseState;var a=o=null,l=null,c=s;do{var d=c.lane;if((Ds&d)===d)l!==null&&(l=l.next={lane:0,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null}),r=c.hasEagerState?c.eagerState:n(r,c.action);else{var h={lane:d,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null};l===null?(a=l=h,o=r):l=l.next=h,We.lanes|=d,bs|=d}c=c.next}while(c!==null&&c!==s);l===null?o=r:l.next=a,Fn(r,e.memoizedState)||(en=!0),e.memoizedState=r,e.baseState=o,e.baseQueue=l,t.lastRenderedState=r}if(n=t.interleaved,n!==null){i=n;do s=i.lane,We.lanes|=s,bs|=s,i=i.next;while(i!==n)}else i===null&&(t.lanes=0);return[e.memoizedState,t.dispatch]}function lp(n){var e=Pn(),t=e.queue;if(t===null)throw Error(z(311));t.lastRenderedReducer=n;var r=t.dispatch,i=t.pending,s=e.memoizedState;if(i!==null){t.pending=null;var o=i=i.next;do s=n(s,o.action),o=o.next;while(o!==i);Fn(s,e.memoizedState)||(en=!0),e.memoizedState=s,e.baseQueue===null&&(e.baseState=s),t.lastRenderedState=s}return[s,r]}function $I(){}function zI(n,e){var t=We,r=Pn(),i=e(),s=!Fn(r.memoizedState,i);if(s&&(r.memoizedState=i,en=!0),r=r.queue,ty(YI.bind(null,t,r,n),[n]),r.getSnapshot!==e||s||ft!==null&&ft.memoizedState.tag&1){if(t.flags|=2048,Ql(9,WI.bind(null,t,r,i,e),void 0,null),gt===null)throw Error(z(349));Ds&30||qI(t,e,i)}return i}function qI(n,e,t){n.flags|=16384,n={getSnapshot:e,value:t},e=We.updateQueue,e===null?(e={lastEffect:null,stores:null},We.updateQueue=e,e.stores=[n]):(t=e.stores,t===null?e.stores=[n]:t.push(n))}function WI(n,e,t,r){e.value=t,e.getSnapshot=r,HI(e)&&QI(n)}function YI(n,e,t){return t(function(){HI(e)&&QI(n)})}function HI(n){var e=n.getSnapshot;n=n.value;try{var t=e();return!Fn(n,t)}catch{return!0}}function QI(n){var e=Cr(n,1);e!==null&&Vn(e,n,1,-1)}function Cw(n){var e=$n();return typeof n=="function"&&(n=n()),e.memoizedState=e.baseState=n,n={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Hl,lastRenderedState:n},e.queue=n,n=n.dispatch=xC.bind(null,We,n),[e.memoizedState,n]}function Ql(n,e,t,r){return n={tag:n,create:e,destroy:t,deps:r,next:null},e=We.updateQueue,e===null?(e={lastEffect:null,stores:null},We.updateQueue=e,e.lastEffect=n.next=n):(t=e.lastEffect,t===null?e.lastEffect=n.next=n:(r=t.next,t.next=n,n.next=r,e.lastEffect=n)),n}function KI(){return Pn().memoizedState}function zc(n,e,t,r){var i=$n();We.flags|=n,i.memoizedState=Ql(1|e,t,void 0,r===void 0?null:r)}function Th(n,e,t,r){var i=Pn();r=r===void 0?null:r;var s=void 0;if(ut!==null){var o=ut.memoizedState;if(s=o.destroy,r!==null&&Jg(r,o.deps)){i.memoizedState=Ql(e,t,s,r);return}}We.flags|=n,i.memoizedState=Ql(1|e,t,s,r)}function Rw(n,e){return zc(8390656,8,n,e)}function ty(n,e){return Th(2048,8,n,e)}function GI(n,e){return Th(4,2,n,e)}function XI(n,e){return Th(4,4,n,e)}function JI(n,e){if(typeof e=="function")return n=n(),e(n),function(){e(null)};if(e!=null)return n=n(),e.current=n,function(){e.current=null}}function ZI(n,e,t){return t=t!=null?t.concat([n]):null,Th(4,4,JI.bind(null,e,n),t)}function ny(){}function eS(n,e){var t=Pn();e=e===void 0?null:e;var r=t.memoizedState;return r!==null&&e!==null&&Jg(e,r[1])?r[0]:(t.memoizedState=[n,e],n)}function tS(n,e){var t=Pn();e=e===void 0?null:e;var r=t.memoizedState;return r!==null&&e!==null&&Jg(e,r[1])?r[0]:(n=n(),t.memoizedState=[n,e],n)}function nS(n,e,t){return Ds&21?(Fn(t,e)||(t=aI(),We.lanes|=t,bs|=t,n.baseState=!0),e):(n.baseState&&(n.baseState=!1,en=!0),n.memoizedState=t)}function PC(n,e){var t=be;be=t!==0&&4>t?t:4,n(!0);var r=op.transition;op.transition={};try{n(!1),e()}finally{be=t,op.transition=r}}function rS(){return Pn().memoizedState}function kC(n,e,t){var r=mi(n);if(t={lane:r,action:t,hasEagerState:!1,eagerState:null,next:null},iS(n))sS(e,t);else if(t=BI(n,e,t,r),t!==null){var i=Yt();Vn(t,n,r,i),oS(t,e,r)}}function xC(n,e,t){var r=mi(n),i={lane:r,action:t,hasEagerState:!1,eagerState:null,next:null};if(iS(n))sS(e,i);else{var s=n.alternate;if(n.lanes===0&&(s===null||s.lanes===0)&&(s=e.lastRenderedReducer,s!==null))try{var o=e.lastRenderedState,a=s(o,t);if(i.hasEagerState=!0,i.eagerState=a,Fn(a,o)){var l=e.interleaved;l===null?(i.next=i,Hg(e)):(i.next=l.next,l.next=i),e.interleaved=i;return}}catch{}finally{}t=BI(n,e,i,r),t!==null&&(i=Yt(),Vn(t,n,r,i),oS(t,e,r))}}function iS(n){var e=n.alternate;return n===We||e!==null&&e===We}function sS(n,e){El=Dd=!0;var t=n.pending;t===null?e.next=e:(e.next=t.next,t.next=e),n.pending=e}function oS(n,e,t){if(t&4194240){var r=e.lanes;r&=n.pendingLanes,t|=r,e.lanes=t,Ng(n,t)}}var bd={readContext:bn,useCallback:Ct,useContext:Ct,useEffect:Ct,useImperativeHandle:Ct,useInsertionEffect:Ct,useLayoutEffect:Ct,useMemo:Ct,useReducer:Ct,useRef:Ct,useState:Ct,useDebugValue:Ct,useDeferredValue:Ct,useTransition:Ct,useMutableSource:Ct,useSyncExternalStore:Ct,useId:Ct,unstable_isNewReconciler:!1},CC={readContext:bn,useCallback:function(n,e){return $n().memoizedState=[n,e===void 0?null:e],n},useContext:bn,useEffect:Rw,useImperativeHandle:function(n,e,t){return t=t!=null?t.concat([n]):null,zc(4194308,4,JI.bind(null,e,n),t)},useLayoutEffect:function(n,e){return zc(4194308,4,n,e)},useInsertionEffect:function(n,e){return zc(4,2,n,e)},useMemo:function(n,e){var t=$n();return e=e===void 0?null:e,n=n(),t.memoizedState=[n,e],n},useReducer:function(n,e,t){var r=$n();return e=t!==void 0?t(e):e,r.memoizedState=r.baseState=e,n={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:n,lastRenderedState:e},r.queue=n,n=n.dispatch=kC.bind(null,We,n),[r.memoizedState,n]},useRef:function(n){var e=$n();return n={current:n},e.memoizedState=n},useState:Cw,useDebugValue:ny,useDeferredValue:function(n){return $n().memoizedState=n},useTransition:function(){var n=Cw(!1),e=n[0];return n=PC.bind(null,n[1]),$n().memoizedState=n,[e,n]},useMutableSource:function(){},useSyncExternalStore:function(n,e,t){var r=We,i=$n();if(Fe){if(t===void 0)throw Error(z(407));t=t()}else{if(t=e(),gt===null)throw Error(z(349));Ds&30||qI(r,e,t)}i.memoizedState=t;var s={value:t,getSnapshot:e};return i.queue=s,Rw(YI.bind(null,r,s,n),[n]),r.flags|=2048,Ql(9,WI.bind(null,r,s,t,e),void 0,null),t},useId:function(){var n=$n(),e=gt.identifierPrefix;if(Fe){var t=Er,r=wr;t=(r&~(1<<32-On(r)-1)).toString(32)+t,e=":"+e+"R"+t,t=Yl++,0<t&&(e+="H"+t.toString(32)),e+=":"}else t=bC++,e=":"+e+"r"+t.toString(32)+":";return n.memoizedState=e},unstable_isNewReconciler:!1},RC={readContext:bn,useCallback:eS,useContext:bn,useEffect:ty,useImperativeHandle:ZI,useInsertionEffect:GI,useLayoutEffect:XI,useMemo:tS,useReducer:ap,useRef:KI,useState:function(){return ap(Hl)},useDebugValue:ny,useDeferredValue:function(n){var e=Pn();return nS(e,ut.memoizedState,n)},useTransition:function(){var n=ap(Hl)[0],e=Pn().memoizedState;return[n,e]},useMutableSource:$I,useSyncExternalStore:zI,useId:rS,unstable_isNewReconciler:!1},AC={readContext:bn,useCallback:eS,useContext:bn,useEffect:ty,useImperativeHandle:ZI,useInsertionEffect:GI,useLayoutEffect:XI,useMemo:tS,useReducer:lp,useRef:KI,useState:function(){return lp(Hl)},useDebugValue:ny,useDeferredValue:function(n){var e=Pn();return ut===null?e.memoizedState=n:nS(e,ut.memoizedState,n)},useTransition:function(){var n=lp(Hl)[0],e=Pn().memoizedState;return[n,e]},useMutableSource:$I,useSyncExternalStore:zI,useId:rS,unstable_isNewReconciler:!1};function Rn(n,e){if(n&&n.defaultProps){e=Qe({},e),n=n.defaultProps;for(var t in n)e[t]===void 0&&(e[t]=n[t]);return e}return e}function fm(n,e,t,r){e=n.memoizedState,t=t(r,e),t=t==null?e:Qe({},e,t),n.memoizedState=t,n.lanes===0&&(n.updateQueue.baseState=t)}var Ih={isMounted:function(n){return(n=n._reactInternals)?qs(n)===n:!1},enqueueSetState:function(n,e,t){n=n._reactInternals;var r=Yt(),i=mi(n),s=Ir(r,i);s.payload=e,t!=null&&(s.callback=t),e=fi(n,s,i),e!==null&&(Vn(e,n,i,r),jc(e,n,i))},enqueueReplaceState:function(n,e,t){n=n._reactInternals;var r=Yt(),i=mi(n),s=Ir(r,i);s.tag=1,s.payload=e,t!=null&&(s.callback=t),e=fi(n,s,i),e!==null&&(Vn(e,n,i,r),jc(e,n,i))},enqueueForceUpdate:function(n,e){n=n._reactInternals;var t=Yt(),r=mi(n),i=Ir(t,r);i.tag=2,e!=null&&(i.callback=e),e=fi(n,i,r),e!==null&&(Vn(e,n,r,t),jc(e,n,r))}};function Aw(n,e,t,r,i,s,o){return n=n.stateNode,typeof n.shouldComponentUpdate=="function"?n.shouldComponentUpdate(r,s,o):e.prototype&&e.prototype.isPureReactComponent?!Ul(t,r)||!Ul(i,s):!0}function aS(n,e,t){var r=!1,i=Ii,s=e.contextType;return typeof s=="object"&&s!==null?s=bn(s):(i=on(e)?Is:Ot.current,r=e.contextTypes,s=(r=r!=null)?jo(n,i):Ii),e=new e(t,s),n.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=Ih,n.stateNode=e,e._reactInternals=n,r&&(n=n.stateNode,n.__reactInternalMemoizedUnmaskedChildContext=i,n.__reactInternalMemoizedMaskedChildContext=s),e}function Nw(n,e,t,r){n=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(t,r),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(t,r),e.state!==n&&Ih.enqueueReplaceState(e,e.state,null)}function pm(n,e,t,r){var i=n.stateNode;i.props=t,i.state=n.memoizedState,i.refs={},Qg(n);var s=e.contextType;typeof s=="object"&&s!==null?i.context=bn(s):(s=on(e)?Is:Ot.current,i.context=jo(n,s)),i.state=n.memoizedState,s=e.getDerivedStateFromProps,typeof s=="function"&&(fm(n,e,s,t),i.state=n.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof i.getSnapshotBeforeUpdate=="function"||typeof i.UNSAFE_componentWillMount!="function"&&typeof i.componentWillMount!="function"||(e=i.state,typeof i.componentWillMount=="function"&&i.componentWillMount(),typeof i.UNSAFE_componentWillMount=="function"&&i.UNSAFE_componentWillMount(),e!==i.state&&Ih.enqueueReplaceState(i,i.state,null),Id(n,t,i,r),i.state=n.memoizedState),typeof i.componentDidMount=="function"&&(n.flags|=4194308)}function Wo(n,e){try{var t="",r=e;do t+=ox(r),r=r.return;while(r);var i=t}catch(s){i=`
Error generating stack: `+s.message+`
`+s.stack}return{value:n,source:e,stack:i,digest:null}}function up(n,e,t){return{value:n,source:null,stack:t??null,digest:e??null}}function mm(n,e){try{console.error(e.value)}catch(t){setTimeout(function(){throw t})}}var NC=typeof WeakMap=="function"?WeakMap:Map;function lS(n,e,t){t=Ir(-1,t),t.tag=3,t.payload={element:null};var r=e.value;return t.callback=function(){kd||(kd=!0,Dm=r),mm(n,e)},t}function uS(n,e,t){t=Ir(-1,t),t.tag=3;var r=n.type.getDerivedStateFromError;if(typeof r=="function"){var i=e.value;t.payload=function(){return r(i)},t.callback=function(){mm(n,e)}}var s=n.stateNode;return s!==null&&typeof s.componentDidCatch=="function"&&(t.callback=function(){mm(n,e),typeof r!="function"&&(pi===null?pi=new Set([this]):pi.add(this));var o=e.stack;this.componentDidCatch(e.value,{componentStack:o!==null?o:""})}),t}function Mw(n,e,t){var r=n.pingCache;if(r===null){r=n.pingCache=new NC;var i=new Set;r.set(e,i)}else i=r.get(e),i===void 0&&(i=new Set,r.set(e,i));i.has(t)||(i.add(t),n=HC.bind(null,n,e,t),e.then(n,n))}function Ow(n){do{var e;if((e=n.tag===13)&&(e=n.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return n;n=n.return}while(n!==null);return null}function Vw(n,e,t,r,i){return n.mode&1?(n.flags|=65536,n.lanes=i,n):(n===e?n.flags|=65536:(n.flags|=128,t.flags|=131072,t.flags&=-52805,t.tag===1&&(t.alternate===null?t.tag=17:(e=Ir(-1,1),e.tag=2,fi(t,e,1))),t.lanes|=1),n)}var MC=Vr.ReactCurrentOwner,en=!1;function Bt(n,e,t,r){e.child=n===null?FI(e,null,t,r):zo(e,n.child,t,r)}function Lw(n,e,t,r,i){t=t.render;var s=e.ref;return Ao(e,i),r=Zg(n,e,t,r,s,i),t=ey(),n!==null&&!en?(e.updateQueue=n.updateQueue,e.flags&=-2053,n.lanes&=~i,Rr(n,e,i)):(Fe&&t&&jg(e),e.flags|=1,Bt(n,e,r,i),e.child)}function Fw(n,e,t,r,i){if(n===null){var s=t.type;return typeof s=="function"&&!cy(s)&&s.defaultProps===void 0&&t.compare===null&&t.defaultProps===void 0?(e.tag=15,e.type=s,cS(n,e,s,r,i)):(n=Hc(t.type,null,r,e,e.mode,i),n.ref=e.ref,n.return=e,e.child=n)}if(s=n.child,!(n.lanes&i)){var o=s.memoizedProps;if(t=t.compare,t=t!==null?t:Ul,t(o,r)&&n.ref===e.ref)return Rr(n,e,i)}return e.flags|=1,n=gi(s,r),n.ref=e.ref,n.return=e,e.child=n}function cS(n,e,t,r,i){if(n!==null){var s=n.memoizedProps;if(Ul(s,r)&&n.ref===e.ref)if(en=!1,e.pendingProps=r=s,(n.lanes&i)!==0)n.flags&131072&&(en=!0);else return e.lanes=n.lanes,Rr(n,e,i)}return gm(n,e,t,r,i)}function dS(n,e,t){var r=e.pendingProps,i=r.children,s=n!==null?n.memoizedState:null;if(r.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},Ce(Po,un),un|=t;else{if(!(t&1073741824))return n=s!==null?s.baseLanes|t:t,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:n,cachePool:null,transitions:null},e.updateQueue=null,Ce(Po,un),un|=n,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=s!==null?s.baseLanes:t,Ce(Po,un),un|=r}else s!==null?(r=s.baseLanes|t,e.memoizedState=null):r=t,Ce(Po,un),un|=r;return Bt(n,e,i,t),e.child}function hS(n,e){var t=e.ref;(n===null&&t!==null||n!==null&&n.ref!==t)&&(e.flags|=512,e.flags|=2097152)}function gm(n,e,t,r,i){var s=on(t)?Is:Ot.current;return s=jo(e,s),Ao(e,i),t=Zg(n,e,t,r,s,i),r=ey(),n!==null&&!en?(e.updateQueue=n.updateQueue,e.flags&=-2053,n.lanes&=~i,Rr(n,e,i)):(Fe&&r&&jg(e),e.flags|=1,Bt(n,e,t,i),e.child)}function Bw(n,e,t,r,i){if(on(t)){var s=!0;_d(e)}else s=!1;if(Ao(e,i),e.stateNode===null)qc(n,e),aS(e,t,r),pm(e,t,r,i),r=!0;else if(n===null){var o=e.stateNode,a=e.memoizedProps;o.props=a;var l=o.context,c=t.contextType;typeof c=="object"&&c!==null?c=bn(c):(c=on(t)?Is:Ot.current,c=jo(e,c));var d=t.getDerivedStateFromProps,h=typeof d=="function"||typeof o.getSnapshotBeforeUpdate=="function";h||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==r||l!==c)&&Nw(e,o,r,c),Jr=!1;var p=e.memoizedState;o.state=p,Id(e,r,o,i),l=e.memoizedState,a!==r||p!==l||sn.current||Jr?(typeof d=="function"&&(fm(e,t,d,r),l=e.memoizedState),(a=Jr||Aw(e,t,a,r,p,l,c))?(h||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(e.flags|=4194308)):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=r,e.memoizedState=l),o.props=r,o.state=l,o.context=c,r=a):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),r=!1)}else{o=e.stateNode,UI(n,e),a=e.memoizedProps,c=e.type===e.elementType?a:Rn(e.type,a),o.props=c,h=e.pendingProps,p=o.context,l=t.contextType,typeof l=="object"&&l!==null?l=bn(l):(l=on(t)?Is:Ot.current,l=jo(e,l));var g=t.getDerivedStateFromProps;(d=typeof g=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==h||p!==l)&&Nw(e,o,r,l),Jr=!1,p=e.memoizedState,o.state=p,Id(e,r,o,i);var v=e.memoizedState;a!==h||p!==v||sn.current||Jr?(typeof g=="function"&&(fm(e,t,g,r),v=e.memoizedState),(c=Jr||Aw(e,t,c,r,p,v,l)||!1)?(d||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(r,v,l),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(r,v,l)),typeof o.componentDidUpdate=="function"&&(e.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof o.componentDidUpdate!="function"||a===n.memoizedProps&&p===n.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===n.memoizedProps&&p===n.memoizedState||(e.flags|=1024),e.memoizedProps=r,e.memoizedState=v),o.props=r,o.state=v,o.context=l,r=c):(typeof o.componentDidUpdate!="function"||a===n.memoizedProps&&p===n.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===n.memoizedProps&&p===n.memoizedState||(e.flags|=1024),r=!1)}return ym(n,e,t,r,s,i)}function ym(n,e,t,r,i,s){hS(n,e);var o=(e.flags&128)!==0;if(!r&&!o)return i&&Sw(e,t,!1),Rr(n,e,s);r=e.stateNode,MC.current=e;var a=o&&typeof t.getDerivedStateFromError!="function"?null:r.render();return e.flags|=1,n!==null&&o?(e.child=zo(e,n.child,null,s),e.child=zo(e,null,a,s)):Bt(n,e,a,s),e.memoizedState=r.state,i&&Sw(e,t,!0),e.child}function fS(n){var e=n.stateNode;e.pendingContext?Iw(n,e.pendingContext,e.pendingContext!==e.context):e.context&&Iw(n,e.context,!1),Kg(n,e.containerInfo)}function Uw(n,e,t,r,i){return $o(),zg(i),e.flags|=256,Bt(n,e,t,r),e.child}var _m={dehydrated:null,treeContext:null,retryLane:0};function vm(n){return{baseLanes:n,cachePool:null,transitions:null}}function pS(n,e,t){var r=e.pendingProps,i=ze.current,s=!1,o=(e.flags&128)!==0,a;if((a=o)||(a=n!==null&&n.memoizedState===null?!1:(i&2)!==0),a?(s=!0,e.flags&=-129):(n===null||n.memoizedState!==null)&&(i|=1),Ce(ze,i&1),n===null)return dm(e),n=e.memoizedState,n!==null&&(n=n.dehydrated,n!==null)?(e.mode&1?n.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(o=r.children,n=r.fallback,s?(r=e.mode,s=e.child,o={mode:"hidden",children:o},!(r&1)&&s!==null?(s.childLanes=0,s.pendingProps=o):s=bh(o,r,0,null),n=ys(n,r,t,null),s.return=e,n.return=e,s.sibling=n,e.child=s,e.child.memoizedState=vm(t),e.memoizedState=_m,n):ry(e,o));if(i=n.memoizedState,i!==null&&(a=i.dehydrated,a!==null))return OC(n,e,o,r,a,i,t);if(s){s=r.fallback,o=e.mode,i=n.child,a=i.sibling;var l={mode:"hidden",children:r.children};return!(o&1)&&e.child!==i?(r=e.child,r.childLanes=0,r.pendingProps=l,e.deletions=null):(r=gi(i,l),r.subtreeFlags=i.subtreeFlags&14680064),a!==null?s=gi(a,s):(s=ys(s,o,t,null),s.flags|=2),s.return=e,r.return=e,r.sibling=s,e.child=r,r=s,s=e.child,o=n.child.memoizedState,o=o===null?vm(t):{baseLanes:o.baseLanes|t,cachePool:null,transitions:o.transitions},s.memoizedState=o,s.childLanes=n.childLanes&~t,e.memoizedState=_m,r}return s=n.child,n=s.sibling,r=gi(s,{mode:"visible",children:r.children}),!(e.mode&1)&&(r.lanes=t),r.return=e,r.sibling=null,n!==null&&(t=e.deletions,t===null?(e.deletions=[n],e.flags|=16):t.push(n)),e.child=r,e.memoizedState=null,r}function ry(n,e){return e=bh({mode:"visible",children:e},n.mode,0,null),e.return=n,n.child=e}function gc(n,e,t,r){return r!==null&&zg(r),zo(e,n.child,null,t),n=ry(e,e.pendingProps.children),n.flags|=2,e.memoizedState=null,n}function OC(n,e,t,r,i,s,o){if(t)return e.flags&256?(e.flags&=-257,r=up(Error(z(422))),gc(n,e,o,r)):e.memoizedState!==null?(e.child=n.child,e.flags|=128,null):(s=r.fallback,i=e.mode,r=bh({mode:"visible",children:r.children},i,0,null),s=ys(s,i,o,null),s.flags|=2,r.return=e,s.return=e,r.sibling=s,e.child=r,e.mode&1&&zo(e,n.child,null,o),e.child.memoizedState=vm(o),e.memoizedState=_m,s);if(!(e.mode&1))return gc(n,e,o,null);if(i.data==="$!"){if(r=i.nextSibling&&i.nextSibling.dataset,r)var a=r.dgst;return r=a,s=Error(z(419)),r=up(s,r,void 0),gc(n,e,o,r)}if(a=(o&n.childLanes)!==0,en||a){if(r=gt,r!==null){switch(o&-o){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}i=i&(r.suspendedLanes|o)?0:i,i!==0&&i!==s.retryLane&&(s.retryLane=i,Cr(n,i),Vn(r,n,i,-1))}return uy(),r=up(Error(z(421))),gc(n,e,o,r)}return i.data==="$?"?(e.flags|=128,e.child=n.child,e=QC.bind(null,n),i._reactRetry=e,null):(n=s.treeContext,dn=hi(i.nextSibling),hn=e,Fe=!0,Nn=null,n!==null&&(vn[wn++]=wr,vn[wn++]=Er,vn[wn++]=Ss,wr=n.id,Er=n.overflow,Ss=e),e=ry(e,r.children),e.flags|=4096,e)}function jw(n,e,t){n.lanes|=e;var r=n.alternate;r!==null&&(r.lanes|=e),hm(n.return,e,t)}function cp(n,e,t,r,i){var s=n.memoizedState;s===null?n.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:r,tail:t,tailMode:i}:(s.isBackwards=e,s.rendering=null,s.renderingStartTime=0,s.last=r,s.tail=t,s.tailMode=i)}function mS(n,e,t){var r=e.pendingProps,i=r.revealOrder,s=r.tail;if(Bt(n,e,r.children,t),r=ze.current,r&2)r=r&1|2,e.flags|=128;else{if(n!==null&&n.flags&128)e:for(n=e.child;n!==null;){if(n.tag===13)n.memoizedState!==null&&jw(n,t,e);else if(n.tag===19)jw(n,t,e);else if(n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break e;for(;n.sibling===null;){if(n.return===null||n.return===e)break e;n=n.return}n.sibling.return=n.return,n=n.sibling}r&=1}if(Ce(ze,r),!(e.mode&1))e.memoizedState=null;else switch(i){case"forwards":for(t=e.child,i=null;t!==null;)n=t.alternate,n!==null&&Sd(n)===null&&(i=t),t=t.sibling;t=i,t===null?(i=e.child,e.child=null):(i=t.sibling,t.sibling=null),cp(e,!1,i,t,s);break;case"backwards":for(t=null,i=e.child,e.child=null;i!==null;){if(n=i.alternate,n!==null&&Sd(n)===null){e.child=i;break}n=i.sibling,i.sibling=t,t=i,i=n}cp(e,!0,t,null,s);break;case"together":cp(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function qc(n,e){!(e.mode&1)&&n!==null&&(n.alternate=null,e.alternate=null,e.flags|=2)}function Rr(n,e,t){if(n!==null&&(e.dependencies=n.dependencies),bs|=e.lanes,!(t&e.childLanes))return null;if(n!==null&&e.child!==n.child)throw Error(z(153));if(e.child!==null){for(n=e.child,t=gi(n,n.pendingProps),e.child=t,t.return=e;n.sibling!==null;)n=n.sibling,t=t.sibling=gi(n,n.pendingProps),t.return=e;t.sibling=null}return e.child}function VC(n,e,t){switch(e.tag){case 3:fS(e),$o();break;case 5:jI(e);break;case 1:on(e.type)&&_d(e);break;case 4:Kg(e,e.stateNode.containerInfo);break;case 10:var r=e.type._context,i=e.memoizedProps.value;Ce(Ed,r._currentValue),r._currentValue=i;break;case 13:if(r=e.memoizedState,r!==null)return r.dehydrated!==null?(Ce(ze,ze.current&1),e.flags|=128,null):t&e.child.childLanes?pS(n,e,t):(Ce(ze,ze.current&1),n=Rr(n,e,t),n!==null?n.sibling:null);Ce(ze,ze.current&1);break;case 19:if(r=(t&e.childLanes)!==0,n.flags&128){if(r)return mS(n,e,t);e.flags|=128}if(i=e.memoizedState,i!==null&&(i.rendering=null,i.tail=null,i.lastEffect=null),Ce(ze,ze.current),r)break;return null;case 22:case 23:return e.lanes=0,dS(n,e,t)}return Rr(n,e,t)}var gS,wm,yS,_S;gS=function(n,e){for(var t=e.child;t!==null;){if(t.tag===5||t.tag===6)n.appendChild(t.stateNode);else if(t.tag!==4&&t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return;t=t.return}t.sibling.return=t.return,t=t.sibling}};wm=function(){};yS=function(n,e,t,r){var i=n.memoizedProps;if(i!==r){n=e.stateNode,hs(tr.current);var s=null;switch(t){case"input":i=$p(n,i),r=$p(n,r),s=[];break;case"select":i=Qe({},i,{value:void 0}),r=Qe({},r,{value:void 0}),s=[];break;case"textarea":i=Wp(n,i),r=Wp(n,r),s=[];break;default:typeof i.onClick!="function"&&typeof r.onClick=="function"&&(n.onclick=gd)}Hp(t,r);var o;t=null;for(c in i)if(!r.hasOwnProperty(c)&&i.hasOwnProperty(c)&&i[c]!=null)if(c==="style"){var a=i[c];for(o in a)a.hasOwnProperty(o)&&(t||(t={}),t[o]="")}else c!=="dangerouslySetInnerHTML"&&c!=="children"&&c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&c!=="autoFocus"&&(Nl.hasOwnProperty(c)?s||(s=[]):(s=s||[]).push(c,null));for(c in r){var l=r[c];if(a=i!=null?i[c]:void 0,r.hasOwnProperty(c)&&l!==a&&(l!=null||a!=null))if(c==="style")if(a){for(o in a)!a.hasOwnProperty(o)||l&&l.hasOwnProperty(o)||(t||(t={}),t[o]="");for(o in l)l.hasOwnProperty(o)&&a[o]!==l[o]&&(t||(t={}),t[o]=l[o])}else t||(s||(s=[]),s.push(c,t)),t=l;else c==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,a=a?a.__html:void 0,l!=null&&a!==l&&(s=s||[]).push(c,l)):c==="children"?typeof l!="string"&&typeof l!="number"||(s=s||[]).push(c,""+l):c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&(Nl.hasOwnProperty(c)?(l!=null&&c==="onScroll"&&Ne("scroll",n),s||a===l||(s=[])):(s=s||[]).push(c,l))}t&&(s=s||[]).push("style",t);var c=s;(e.updateQueue=c)&&(e.flags|=4)}};_S=function(n,e,t,r){t!==r&&(e.flags|=4)};function Ga(n,e){if(!Fe)switch(n.tailMode){case"hidden":e=n.tail;for(var t=null;e!==null;)e.alternate!==null&&(t=e),e=e.sibling;t===null?n.tail=null:t.sibling=null;break;case"collapsed":t=n.tail;for(var r=null;t!==null;)t.alternate!==null&&(r=t),t=t.sibling;r===null?e||n.tail===null?n.tail=null:n.tail.sibling=null:r.sibling=null}}function Rt(n){var e=n.alternate!==null&&n.alternate.child===n.child,t=0,r=0;if(e)for(var i=n.child;i!==null;)t|=i.lanes|i.childLanes,r|=i.subtreeFlags&14680064,r|=i.flags&14680064,i.return=n,i=i.sibling;else for(i=n.child;i!==null;)t|=i.lanes|i.childLanes,r|=i.subtreeFlags,r|=i.flags,i.return=n,i=i.sibling;return n.subtreeFlags|=r,n.childLanes=t,e}function LC(n,e,t){var r=e.pendingProps;switch($g(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Rt(e),null;case 1:return on(e.type)&&yd(),Rt(e),null;case 3:return r=e.stateNode,qo(),Oe(sn),Oe(Ot),Xg(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(n===null||n.child===null)&&(pc(e)?e.flags|=4:n===null||n.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,Nn!==null&&(km(Nn),Nn=null))),wm(n,e),Rt(e),null;case 5:Gg(e);var i=hs(Wl.current);if(t=e.type,n!==null&&e.stateNode!=null)yS(n,e,t,r,i),n.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!r){if(e.stateNode===null)throw Error(z(166));return Rt(e),null}if(n=hs(tr.current),pc(e)){r=e.stateNode,t=e.type;var s=e.memoizedProps;switch(r[Wn]=e,r[zl]=s,n=(e.mode&1)!==0,t){case"dialog":Ne("cancel",r),Ne("close",r);break;case"iframe":case"object":case"embed":Ne("load",r);break;case"video":case"audio":for(i=0;i<ul.length;i++)Ne(ul[i],r);break;case"source":Ne("error",r);break;case"img":case"image":case"link":Ne("error",r),Ne("load",r);break;case"details":Ne("toggle",r);break;case"input":Gv(r,s),Ne("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!s.multiple},Ne("invalid",r);break;case"textarea":Jv(r,s),Ne("invalid",r)}Hp(t,s),i=null;for(var o in s)if(s.hasOwnProperty(o)){var a=s[o];o==="children"?typeof a=="string"?r.textContent!==a&&(s.suppressHydrationWarning!==!0&&fc(r.textContent,a,n),i=["children",a]):typeof a=="number"&&r.textContent!==""+a&&(s.suppressHydrationWarning!==!0&&fc(r.textContent,a,n),i=["children",""+a]):Nl.hasOwnProperty(o)&&a!=null&&o==="onScroll"&&Ne("scroll",r)}switch(t){case"input":sc(r),Xv(r,s,!0);break;case"textarea":sc(r),Zv(r);break;case"select":case"option":break;default:typeof s.onClick=="function"&&(r.onclick=gd)}r=i,e.updateQueue=r,r!==null&&(e.flags|=4)}else{o=i.nodeType===9?i:i.ownerDocument,n==="http://www.w3.org/1999/xhtml"&&(n=YT(t)),n==="http://www.w3.org/1999/xhtml"?t==="script"?(n=o.createElement("div"),n.innerHTML="<script><\/script>",n=n.removeChild(n.firstChild)):typeof r.is=="string"?n=o.createElement(t,{is:r.is}):(n=o.createElement(t),t==="select"&&(o=n,r.multiple?o.multiple=!0:r.size&&(o.size=r.size))):n=o.createElementNS(n,t),n[Wn]=e,n[zl]=r,gS(n,e,!1,!1),e.stateNode=n;e:{switch(o=Qp(t,r),t){case"dialog":Ne("cancel",n),Ne("close",n),i=r;break;case"iframe":case"object":case"embed":Ne("load",n),i=r;break;case"video":case"audio":for(i=0;i<ul.length;i++)Ne(ul[i],n);i=r;break;case"source":Ne("error",n),i=r;break;case"img":case"image":case"link":Ne("error",n),Ne("load",n),i=r;break;case"details":Ne("toggle",n),i=r;break;case"input":Gv(n,r),i=$p(n,r),Ne("invalid",n);break;case"option":i=r;break;case"select":n._wrapperState={wasMultiple:!!r.multiple},i=Qe({},r,{value:void 0}),Ne("invalid",n);break;case"textarea":Jv(n,r),i=Wp(n,r),Ne("invalid",n);break;default:i=r}Hp(t,i),a=i;for(s in a)if(a.hasOwnProperty(s)){var l=a[s];s==="style"?KT(n,l):s==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,l!=null&&HT(n,l)):s==="children"?typeof l=="string"?(t!=="textarea"||l!=="")&&Ml(n,l):typeof l=="number"&&Ml(n,""+l):s!=="suppressContentEditableWarning"&&s!=="suppressHydrationWarning"&&s!=="autoFocus"&&(Nl.hasOwnProperty(s)?l!=null&&s==="onScroll"&&Ne("scroll",n):l!=null&&Pg(n,s,l,o))}switch(t){case"input":sc(n),Xv(n,r,!1);break;case"textarea":sc(n),Zv(n);break;case"option":r.value!=null&&n.setAttribute("value",""+Ti(r.value));break;case"select":n.multiple=!!r.multiple,s=r.value,s!=null?ko(n,!!r.multiple,s,!1):r.defaultValue!=null&&ko(n,!!r.multiple,r.defaultValue,!0);break;default:typeof i.onClick=="function"&&(n.onclick=gd)}switch(t){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return Rt(e),null;case 6:if(n&&e.stateNode!=null)_S(n,e,n.memoizedProps,r);else{if(typeof r!="string"&&e.stateNode===null)throw Error(z(166));if(t=hs(Wl.current),hs(tr.current),pc(e)){if(r=e.stateNode,t=e.memoizedProps,r[Wn]=e,(s=r.nodeValue!==t)&&(n=hn,n!==null))switch(n.tag){case 3:fc(r.nodeValue,t,(n.mode&1)!==0);break;case 5:n.memoizedProps.suppressHydrationWarning!==!0&&fc(r.nodeValue,t,(n.mode&1)!==0)}s&&(e.flags|=4)}else r=(t.nodeType===9?t:t.ownerDocument).createTextNode(r),r[Wn]=e,e.stateNode=r}return Rt(e),null;case 13:if(Oe(ze),r=e.memoizedState,n===null||n.memoizedState!==null&&n.memoizedState.dehydrated!==null){if(Fe&&dn!==null&&e.mode&1&&!(e.flags&128))VI(),$o(),e.flags|=98560,s=!1;else if(s=pc(e),r!==null&&r.dehydrated!==null){if(n===null){if(!s)throw Error(z(318));if(s=e.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(z(317));s[Wn]=e}else $o(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;Rt(e),s=!1}else Nn!==null&&(km(Nn),Nn=null),s=!0;if(!s)return e.flags&65536?e:null}return e.flags&128?(e.lanes=t,e):(r=r!==null,r!==(n!==null&&n.memoizedState!==null)&&r&&(e.child.flags|=8192,e.mode&1&&(n===null||ze.current&1?ct===0&&(ct=3):uy())),e.updateQueue!==null&&(e.flags|=4),Rt(e),null);case 4:return qo(),wm(n,e),n===null&&jl(e.stateNode.containerInfo),Rt(e),null;case 10:return Yg(e.type._context),Rt(e),null;case 17:return on(e.type)&&yd(),Rt(e),null;case 19:if(Oe(ze),s=e.memoizedState,s===null)return Rt(e),null;if(r=(e.flags&128)!==0,o=s.rendering,o===null)if(r)Ga(s,!1);else{if(ct!==0||n!==null&&n.flags&128)for(n=e.child;n!==null;){if(o=Sd(n),o!==null){for(e.flags|=128,Ga(s,!1),r=o.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),e.subtreeFlags=0,r=t,t=e.child;t!==null;)s=t,n=r,s.flags&=14680066,o=s.alternate,o===null?(s.childLanes=0,s.lanes=n,s.child=null,s.subtreeFlags=0,s.memoizedProps=null,s.memoizedState=null,s.updateQueue=null,s.dependencies=null,s.stateNode=null):(s.childLanes=o.childLanes,s.lanes=o.lanes,s.child=o.child,s.subtreeFlags=0,s.deletions=null,s.memoizedProps=o.memoizedProps,s.memoizedState=o.memoizedState,s.updateQueue=o.updateQueue,s.type=o.type,n=o.dependencies,s.dependencies=n===null?null:{lanes:n.lanes,firstContext:n.firstContext}),t=t.sibling;return Ce(ze,ze.current&1|2),e.child}n=n.sibling}s.tail!==null&&nt()>Yo&&(e.flags|=128,r=!0,Ga(s,!1),e.lanes=4194304)}else{if(!r)if(n=Sd(o),n!==null){if(e.flags|=128,r=!0,t=n.updateQueue,t!==null&&(e.updateQueue=t,e.flags|=4),Ga(s,!0),s.tail===null&&s.tailMode==="hidden"&&!o.alternate&&!Fe)return Rt(e),null}else 2*nt()-s.renderingStartTime>Yo&&t!==1073741824&&(e.flags|=128,r=!0,Ga(s,!1),e.lanes=4194304);s.isBackwards?(o.sibling=e.child,e.child=o):(t=s.last,t!==null?t.sibling=o:e.child=o,s.last=o)}return s.tail!==null?(e=s.tail,s.rendering=e,s.tail=e.sibling,s.renderingStartTime=nt(),e.sibling=null,t=ze.current,Ce(ze,r?t&1|2:t&1),e):(Rt(e),null);case 22:case 23:return ly(),r=e.memoizedState!==null,n!==null&&n.memoizedState!==null!==r&&(e.flags|=8192),r&&e.mode&1?un&1073741824&&(Rt(e),e.subtreeFlags&6&&(e.flags|=8192)):Rt(e),null;case 24:return null;case 25:return null}throw Error(z(156,e.tag))}function FC(n,e){switch($g(e),e.tag){case 1:return on(e.type)&&yd(),n=e.flags,n&65536?(e.flags=n&-65537|128,e):null;case 3:return qo(),Oe(sn),Oe(Ot),Xg(),n=e.flags,n&65536&&!(n&128)?(e.flags=n&-65537|128,e):null;case 5:return Gg(e),null;case 13:if(Oe(ze),n=e.memoizedState,n!==null&&n.dehydrated!==null){if(e.alternate===null)throw Error(z(340));$o()}return n=e.flags,n&65536?(e.flags=n&-65537|128,e):null;case 19:return Oe(ze),null;case 4:return qo(),null;case 10:return Yg(e.type._context),null;case 22:case 23:return ly(),null;case 24:return null;default:return null}}var yc=!1,Nt=!1,BC=typeof WeakSet=="function"?WeakSet:Set,Z=null;function bo(n,e){var t=n.ref;if(t!==null)if(typeof t=="function")try{t(null)}catch(r){Xe(n,e,r)}else t.current=null}function Em(n,e,t){try{t()}catch(r){Xe(n,e,r)}}var $w=!1;function UC(n,e){if(im=fd,n=II(),Ug(n)){if("selectionStart"in n)var t={start:n.selectionStart,end:n.selectionEnd};else e:{t=(t=n.ownerDocument)&&t.defaultView||window;var r=t.getSelection&&t.getSelection();if(r&&r.rangeCount!==0){t=r.anchorNode;var i=r.anchorOffset,s=r.focusNode;r=r.focusOffset;try{t.nodeType,s.nodeType}catch{t=null;break e}var o=0,a=-1,l=-1,c=0,d=0,h=n,p=null;t:for(;;){for(var g;h!==t||i!==0&&h.nodeType!==3||(a=o+i),h!==s||r!==0&&h.nodeType!==3||(l=o+r),h.nodeType===3&&(o+=h.nodeValue.length),(g=h.firstChild)!==null;)p=h,h=g;for(;;){if(h===n)break t;if(p===t&&++c===i&&(a=o),p===s&&++d===r&&(l=o),(g=h.nextSibling)!==null)break;h=p,p=h.parentNode}h=g}t=a===-1||l===-1?null:{start:a,end:l}}else t=null}t=t||{start:0,end:0}}else t=null;for(sm={focusedElem:n,selectionRange:t},fd=!1,Z=e;Z!==null;)if(e=Z,n=e.child,(e.subtreeFlags&1028)!==0&&n!==null)n.return=e,Z=n;else for(;Z!==null;){e=Z;try{var v=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(v!==null){var S=v.memoizedProps,D=v.memoizedState,w=e.stateNode,_=w.getSnapshotBeforeUpdate(e.elementType===e.type?S:Rn(e.type,S),D);w.__reactInternalSnapshotBeforeUpdate=_}break;case 3:var E=e.stateNode.containerInfo;E.nodeType===1?E.textContent="":E.nodeType===9&&E.documentElement&&E.removeChild(E.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(z(163))}}catch(x){Xe(e,e.return,x)}if(n=e.sibling,n!==null){n.return=e.return,Z=n;break}Z=e.return}return v=$w,$w=!1,v}function Tl(n,e,t){var r=e.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var i=r=r.next;do{if((i.tag&n)===n){var s=i.destroy;i.destroy=void 0,s!==void 0&&Em(e,t,s)}i=i.next}while(i!==r)}}function Sh(n,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var t=e=e.next;do{if((t.tag&n)===n){var r=t.create;t.destroy=r()}t=t.next}while(t!==e)}}function Tm(n){var e=n.ref;if(e!==null){var t=n.stateNode;switch(n.tag){case 5:n=t;break;default:n=t}typeof e=="function"?e(n):e.current=n}}function vS(n){var e=n.alternate;e!==null&&(n.alternate=null,vS(e)),n.child=null,n.deletions=null,n.sibling=null,n.tag===5&&(e=n.stateNode,e!==null&&(delete e[Wn],delete e[zl],delete e[lm],delete e[TC],delete e[IC])),n.stateNode=null,n.return=null,n.dependencies=null,n.memoizedProps=null,n.memoizedState=null,n.pendingProps=null,n.stateNode=null,n.updateQueue=null}function wS(n){return n.tag===5||n.tag===3||n.tag===4}function zw(n){e:for(;;){for(;n.sibling===null;){if(n.return===null||wS(n.return))return null;n=n.return}for(n.sibling.return=n.return,n=n.sibling;n.tag!==5&&n.tag!==6&&n.tag!==18;){if(n.flags&2||n.child===null||n.tag===4)continue e;n.child.return=n,n=n.child}if(!(n.flags&2))return n.stateNode}}function Im(n,e,t){var r=n.tag;if(r===5||r===6)n=n.stateNode,e?t.nodeType===8?t.parentNode.insertBefore(n,e):t.insertBefore(n,e):(t.nodeType===8?(e=t.parentNode,e.insertBefore(n,t)):(e=t,e.appendChild(n)),t=t._reactRootContainer,t!=null||e.onclick!==null||(e.onclick=gd));else if(r!==4&&(n=n.child,n!==null))for(Im(n,e,t),n=n.sibling;n!==null;)Im(n,e,t),n=n.sibling}function Sm(n,e,t){var r=n.tag;if(r===5||r===6)n=n.stateNode,e?t.insertBefore(n,e):t.appendChild(n);else if(r!==4&&(n=n.child,n!==null))for(Sm(n,e,t),n=n.sibling;n!==null;)Sm(n,e,t),n=n.sibling}var Tt=null,An=!1;function Yr(n,e,t){for(t=t.child;t!==null;)ES(n,e,t),t=t.sibling}function ES(n,e,t){if(er&&typeof er.onCommitFiberUnmount=="function")try{er.onCommitFiberUnmount(gh,t)}catch{}switch(t.tag){case 5:Nt||bo(t,e);case 6:var r=Tt,i=An;Tt=null,Yr(n,e,t),Tt=r,An=i,Tt!==null&&(An?(n=Tt,t=t.stateNode,n.nodeType===8?n.parentNode.removeChild(t):n.removeChild(t)):Tt.removeChild(t.stateNode));break;case 18:Tt!==null&&(An?(n=Tt,t=t.stateNode,n.nodeType===8?rp(n.parentNode,t):n.nodeType===1&&rp(n,t),Fl(n)):rp(Tt,t.stateNode));break;case 4:r=Tt,i=An,Tt=t.stateNode.containerInfo,An=!0,Yr(n,e,t),Tt=r,An=i;break;case 0:case 11:case 14:case 15:if(!Nt&&(r=t.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){i=r=r.next;do{var s=i,o=s.destroy;s=s.tag,o!==void 0&&(s&2||s&4)&&Em(t,e,o),i=i.next}while(i!==r)}Yr(n,e,t);break;case 1:if(!Nt&&(bo(t,e),r=t.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=t.memoizedProps,r.state=t.memoizedState,r.componentWillUnmount()}catch(a){Xe(t,e,a)}Yr(n,e,t);break;case 21:Yr(n,e,t);break;case 22:t.mode&1?(Nt=(r=Nt)||t.memoizedState!==null,Yr(n,e,t),Nt=r):Yr(n,e,t);break;default:Yr(n,e,t)}}function qw(n){var e=n.updateQueue;if(e!==null){n.updateQueue=null;var t=n.stateNode;t===null&&(t=n.stateNode=new BC),e.forEach(function(r){var i=KC.bind(null,n,r);t.has(r)||(t.add(r),r.then(i,i))})}}function Cn(n,e){var t=e.deletions;if(t!==null)for(var r=0;r<t.length;r++){var i=t[r];try{var s=n,o=e,a=o;e:for(;a!==null;){switch(a.tag){case 5:Tt=a.stateNode,An=!1;break e;case 3:Tt=a.stateNode.containerInfo,An=!0;break e;case 4:Tt=a.stateNode.containerInfo,An=!0;break e}a=a.return}if(Tt===null)throw Error(z(160));ES(s,o,i),Tt=null,An=!1;var l=i.alternate;l!==null&&(l.return=null),i.return=null}catch(c){Xe(i,e,c)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)TS(e,n),e=e.sibling}function TS(n,e){var t=n.alternate,r=n.flags;switch(n.tag){case 0:case 11:case 14:case 15:if(Cn(e,n),jn(n),r&4){try{Tl(3,n,n.return),Sh(3,n)}catch(S){Xe(n,n.return,S)}try{Tl(5,n,n.return)}catch(S){Xe(n,n.return,S)}}break;case 1:Cn(e,n),jn(n),r&512&&t!==null&&bo(t,t.return);break;case 5:if(Cn(e,n),jn(n),r&512&&t!==null&&bo(t,t.return),n.flags&32){var i=n.stateNode;try{Ml(i,"")}catch(S){Xe(n,n.return,S)}}if(r&4&&(i=n.stateNode,i!=null)){var s=n.memoizedProps,o=t!==null?t.memoizedProps:s,a=n.type,l=n.updateQueue;if(n.updateQueue=null,l!==null)try{a==="input"&&s.type==="radio"&&s.name!=null&&qT(i,s),Qp(a,o);var c=Qp(a,s);for(o=0;o<l.length;o+=2){var d=l[o],h=l[o+1];d==="style"?KT(i,h):d==="dangerouslySetInnerHTML"?HT(i,h):d==="children"?Ml(i,h):Pg(i,d,h,c)}switch(a){case"input":zp(i,s);break;case"textarea":WT(i,s);break;case"select":var p=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!s.multiple;var g=s.value;g!=null?ko(i,!!s.multiple,g,!1):p!==!!s.multiple&&(s.defaultValue!=null?ko(i,!!s.multiple,s.defaultValue,!0):ko(i,!!s.multiple,s.multiple?[]:"",!1))}i[zl]=s}catch(S){Xe(n,n.return,S)}}break;case 6:if(Cn(e,n),jn(n),r&4){if(n.stateNode===null)throw Error(z(162));i=n.stateNode,s=n.memoizedProps;try{i.nodeValue=s}catch(S){Xe(n,n.return,S)}}break;case 3:if(Cn(e,n),jn(n),r&4&&t!==null&&t.memoizedState.isDehydrated)try{Fl(e.containerInfo)}catch(S){Xe(n,n.return,S)}break;case 4:Cn(e,n),jn(n);break;case 13:Cn(e,n),jn(n),i=n.child,i.flags&8192&&(s=i.memoizedState!==null,i.stateNode.isHidden=s,!s||i.alternate!==null&&i.alternate.memoizedState!==null||(oy=nt())),r&4&&qw(n);break;case 22:if(d=t!==null&&t.memoizedState!==null,n.mode&1?(Nt=(c=Nt)||d,Cn(e,n),Nt=c):Cn(e,n),jn(n),r&8192){if(c=n.memoizedState!==null,(n.stateNode.isHidden=c)&&!d&&n.mode&1)for(Z=n,d=n.child;d!==null;){for(h=Z=d;Z!==null;){switch(p=Z,g=p.child,p.tag){case 0:case 11:case 14:case 15:Tl(4,p,p.return);break;case 1:bo(p,p.return);var v=p.stateNode;if(typeof v.componentWillUnmount=="function"){r=p,t=p.return;try{e=r,v.props=e.memoizedProps,v.state=e.memoizedState,v.componentWillUnmount()}catch(S){Xe(r,t,S)}}break;case 5:bo(p,p.return);break;case 22:if(p.memoizedState!==null){Yw(h);continue}}g!==null?(g.return=p,Z=g):Yw(h)}d=d.sibling}e:for(d=null,h=n;;){if(h.tag===5){if(d===null){d=h;try{i=h.stateNode,c?(s=i.style,typeof s.setProperty=="function"?s.setProperty("display","none","important"):s.display="none"):(a=h.stateNode,l=h.memoizedProps.style,o=l!=null&&l.hasOwnProperty("display")?l.display:null,a.style.display=QT("display",o))}catch(S){Xe(n,n.return,S)}}}else if(h.tag===6){if(d===null)try{h.stateNode.nodeValue=c?"":h.memoizedProps}catch(S){Xe(n,n.return,S)}}else if((h.tag!==22&&h.tag!==23||h.memoizedState===null||h===n)&&h.child!==null){h.child.return=h,h=h.child;continue}if(h===n)break e;for(;h.sibling===null;){if(h.return===null||h.return===n)break e;d===h&&(d=null),h=h.return}d===h&&(d=null),h.sibling.return=h.return,h=h.sibling}}break;case 19:Cn(e,n),jn(n),r&4&&qw(n);break;case 21:break;default:Cn(e,n),jn(n)}}function jn(n){var e=n.flags;if(e&2){try{e:{for(var t=n.return;t!==null;){if(wS(t)){var r=t;break e}t=t.return}throw Error(z(160))}switch(r.tag){case 5:var i=r.stateNode;r.flags&32&&(Ml(i,""),r.flags&=-33);var s=zw(n);Sm(n,s,i);break;case 3:case 4:var o=r.stateNode.containerInfo,a=zw(n);Im(n,a,o);break;default:throw Error(z(161))}}catch(l){Xe(n,n.return,l)}n.flags&=-3}e&4096&&(n.flags&=-4097)}function jC(n,e,t){Z=n,IS(n)}function IS(n,e,t){for(var r=(n.mode&1)!==0;Z!==null;){var i=Z,s=i.child;if(i.tag===22&&r){var o=i.memoizedState!==null||yc;if(!o){var a=i.alternate,l=a!==null&&a.memoizedState!==null||Nt;a=yc;var c=Nt;if(yc=o,(Nt=l)&&!c)for(Z=i;Z!==null;)o=Z,l=o.child,o.tag===22&&o.memoizedState!==null?Hw(i):l!==null?(l.return=o,Z=l):Hw(i);for(;s!==null;)Z=s,IS(s),s=s.sibling;Z=i,yc=a,Nt=c}Ww(n)}else i.subtreeFlags&8772&&s!==null?(s.return=i,Z=s):Ww(n)}}function Ww(n){for(;Z!==null;){var e=Z;if(e.flags&8772){var t=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:Nt||Sh(5,e);break;case 1:var r=e.stateNode;if(e.flags&4&&!Nt)if(t===null)r.componentDidMount();else{var i=e.elementType===e.type?t.memoizedProps:Rn(e.type,t.memoizedProps);r.componentDidUpdate(i,t.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var s=e.updateQueue;s!==null&&xw(e,s,r);break;case 3:var o=e.updateQueue;if(o!==null){if(t=null,e.child!==null)switch(e.child.tag){case 5:t=e.child.stateNode;break;case 1:t=e.child.stateNode}xw(e,o,t)}break;case 5:var a=e.stateNode;if(t===null&&e.flags&4){t=a;var l=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":l.autoFocus&&t.focus();break;case"img":l.src&&(t.src=l.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var c=e.alternate;if(c!==null){var d=c.memoizedState;if(d!==null){var h=d.dehydrated;h!==null&&Fl(h)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(z(163))}Nt||e.flags&512&&Tm(e)}catch(p){Xe(e,e.return,p)}}if(e===n){Z=null;break}if(t=e.sibling,t!==null){t.return=e.return,Z=t;break}Z=e.return}}function Yw(n){for(;Z!==null;){var e=Z;if(e===n){Z=null;break}var t=e.sibling;if(t!==null){t.return=e.return,Z=t;break}Z=e.return}}function Hw(n){for(;Z!==null;){var e=Z;try{switch(e.tag){case 0:case 11:case 15:var t=e.return;try{Sh(4,e)}catch(l){Xe(e,t,l)}break;case 1:var r=e.stateNode;if(typeof r.componentDidMount=="function"){var i=e.return;try{r.componentDidMount()}catch(l){Xe(e,i,l)}}var s=e.return;try{Tm(e)}catch(l){Xe(e,s,l)}break;case 5:var o=e.return;try{Tm(e)}catch(l){Xe(e,o,l)}}}catch(l){Xe(e,e.return,l)}if(e===n){Z=null;break}var a=e.sibling;if(a!==null){a.return=e.return,Z=a;break}Z=e.return}}var $C=Math.ceil,Pd=Vr.ReactCurrentDispatcher,iy=Vr.ReactCurrentOwner,Sn=Vr.ReactCurrentBatchConfig,ye=0,gt=null,lt=null,Dt=0,un=0,Po=Fi(0),ct=0,Kl=null,bs=0,Dh=0,sy=0,Il=null,Zt=null,oy=0,Yo=1/0,yr=null,kd=!1,Dm=null,pi=null,_c=!1,ii=null,xd=0,Sl=0,bm=null,Wc=-1,Yc=0;function Yt(){return ye&6?nt():Wc!==-1?Wc:Wc=nt()}function mi(n){return n.mode&1?ye&2&&Dt!==0?Dt&-Dt:DC.transition!==null?(Yc===0&&(Yc=aI()),Yc):(n=be,n!==0||(n=window.event,n=n===void 0?16:pI(n.type)),n):1}function Vn(n,e,t,r){if(50<Sl)throw Sl=0,bm=null,Error(z(185));_u(n,t,r),(!(ye&2)||n!==gt)&&(n===gt&&(!(ye&2)&&(Dh|=t),ct===4&&ei(n,Dt)),an(n,r),t===1&&ye===0&&!(e.mode&1)&&(Yo=nt()+500,Eh&&Bi()))}function an(n,e){var t=n.callbackNode;Dx(n,e);var r=hd(n,n===gt?Dt:0);if(r===0)t!==null&&nw(t),n.callbackNode=null,n.callbackPriority=0;else if(e=r&-r,n.callbackPriority!==e){if(t!=null&&nw(t),e===1)n.tag===0?SC(Qw.bind(null,n)):NI(Qw.bind(null,n)),wC(function(){!(ye&6)&&Bi()}),t=null;else{switch(lI(r)){case 1:t=Ag;break;case 4:t=sI;break;case 16:t=dd;break;case 536870912:t=oI;break;default:t=dd}t=RS(t,SS.bind(null,n))}n.callbackPriority=e,n.callbackNode=t}}function SS(n,e){if(Wc=-1,Yc=0,ye&6)throw Error(z(327));var t=n.callbackNode;if(No()&&n.callbackNode!==t)return null;var r=hd(n,n===gt?Dt:0);if(r===0)return null;if(r&30||r&n.expiredLanes||e)e=Cd(n,r);else{e=r;var i=ye;ye|=2;var s=bS();(gt!==n||Dt!==e)&&(yr=null,Yo=nt()+500,gs(n,e));do try{WC();break}catch(a){DS(n,a)}while(!0);Wg(),Pd.current=s,ye=i,lt!==null?e=0:(gt=null,Dt=0,e=ct)}if(e!==0){if(e===2&&(i=Zp(n),i!==0&&(r=i,e=Pm(n,i))),e===1)throw t=Kl,gs(n,0),ei(n,r),an(n,nt()),t;if(e===6)ei(n,r);else{if(i=n.current.alternate,!(r&30)&&!zC(i)&&(e=Cd(n,r),e===2&&(s=Zp(n),s!==0&&(r=s,e=Pm(n,s))),e===1))throw t=Kl,gs(n,0),ei(n,r),an(n,nt()),t;switch(n.finishedWork=i,n.finishedLanes=r,e){case 0:case 1:throw Error(z(345));case 2:ts(n,Zt,yr);break;case 3:if(ei(n,r),(r&130023424)===r&&(e=oy+500-nt(),10<e)){if(hd(n,0)!==0)break;if(i=n.suspendedLanes,(i&r)!==r){Yt(),n.pingedLanes|=n.suspendedLanes&i;break}n.timeoutHandle=am(ts.bind(null,n,Zt,yr),e);break}ts(n,Zt,yr);break;case 4:if(ei(n,r),(r&4194240)===r)break;for(e=n.eventTimes,i=-1;0<r;){var o=31-On(r);s=1<<o,o=e[o],o>i&&(i=o),r&=~s}if(r=i,r=nt()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*$C(r/1960))-r,10<r){n.timeoutHandle=am(ts.bind(null,n,Zt,yr),r);break}ts(n,Zt,yr);break;case 5:ts(n,Zt,yr);break;default:throw Error(z(329))}}}return an(n,nt()),n.callbackNode===t?SS.bind(null,n):null}function Pm(n,e){var t=Il;return n.current.memoizedState.isDehydrated&&(gs(n,e).flags|=256),n=Cd(n,e),n!==2&&(e=Zt,Zt=t,e!==null&&km(e)),n}function km(n){Zt===null?Zt=n:Zt.push.apply(Zt,n)}function zC(n){for(var e=n;;){if(e.flags&16384){var t=e.updateQueue;if(t!==null&&(t=t.stores,t!==null))for(var r=0;r<t.length;r++){var i=t[r],s=i.getSnapshot;i=i.value;try{if(!Fn(s(),i))return!1}catch{return!1}}}if(t=e.child,e.subtreeFlags&16384&&t!==null)t.return=e,e=t;else{if(e===n)break;for(;e.sibling===null;){if(e.return===null||e.return===n)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function ei(n,e){for(e&=~sy,e&=~Dh,n.suspendedLanes|=e,n.pingedLanes&=~e,n=n.expirationTimes;0<e;){var t=31-On(e),r=1<<t;n[t]=-1,e&=~r}}function Qw(n){if(ye&6)throw Error(z(327));No();var e=hd(n,0);if(!(e&1))return an(n,nt()),null;var t=Cd(n,e);if(n.tag!==0&&t===2){var r=Zp(n);r!==0&&(e=r,t=Pm(n,r))}if(t===1)throw t=Kl,gs(n,0),ei(n,e),an(n,nt()),t;if(t===6)throw Error(z(345));return n.finishedWork=n.current.alternate,n.finishedLanes=e,ts(n,Zt,yr),an(n,nt()),null}function ay(n,e){var t=ye;ye|=1;try{return n(e)}finally{ye=t,ye===0&&(Yo=nt()+500,Eh&&Bi())}}function Ps(n){ii!==null&&ii.tag===0&&!(ye&6)&&No();var e=ye;ye|=1;var t=Sn.transition,r=be;try{if(Sn.transition=null,be=1,n)return n()}finally{be=r,Sn.transition=t,ye=e,!(ye&6)&&Bi()}}function ly(){un=Po.current,Oe(Po)}function gs(n,e){n.finishedWork=null,n.finishedLanes=0;var t=n.timeoutHandle;if(t!==-1&&(n.timeoutHandle=-1,vC(t)),lt!==null)for(t=lt.return;t!==null;){var r=t;switch($g(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&yd();break;case 3:qo(),Oe(sn),Oe(Ot),Xg();break;case 5:Gg(r);break;case 4:qo();break;case 13:Oe(ze);break;case 19:Oe(ze);break;case 10:Yg(r.type._context);break;case 22:case 23:ly()}t=t.return}if(gt=n,lt=n=gi(n.current,null),Dt=un=e,ct=0,Kl=null,sy=Dh=bs=0,Zt=Il=null,ds!==null){for(e=0;e<ds.length;e++)if(t=ds[e],r=t.interleaved,r!==null){t.interleaved=null;var i=r.next,s=t.pending;if(s!==null){var o=s.next;s.next=i,r.next=o}t.pending=r}ds=null}return n}function DS(n,e){do{var t=lt;try{if(Wg(),$c.current=bd,Dd){for(var r=We.memoizedState;r!==null;){var i=r.queue;i!==null&&(i.pending=null),r=r.next}Dd=!1}if(Ds=0,ft=ut=We=null,El=!1,Yl=0,iy.current=null,t===null||t.return===null){ct=1,Kl=e,lt=null;break}e:{var s=n,o=t.return,a=t,l=e;if(e=Dt,a.flags|=32768,l!==null&&typeof l=="object"&&typeof l.then=="function"){var c=l,d=a,h=d.tag;if(!(d.mode&1)&&(h===0||h===11||h===15)){var p=d.alternate;p?(d.updateQueue=p.updateQueue,d.memoizedState=p.memoizedState,d.lanes=p.lanes):(d.updateQueue=null,d.memoizedState=null)}var g=Ow(o);if(g!==null){g.flags&=-257,Vw(g,o,a,s,e),g.mode&1&&Mw(s,c,e),e=g,l=c;var v=e.updateQueue;if(v===null){var S=new Set;S.add(l),e.updateQueue=S}else v.add(l);break e}else{if(!(e&1)){Mw(s,c,e),uy();break e}l=Error(z(426))}}else if(Fe&&a.mode&1){var D=Ow(o);if(D!==null){!(D.flags&65536)&&(D.flags|=256),Vw(D,o,a,s,e),zg(Wo(l,a));break e}}s=l=Wo(l,a),ct!==4&&(ct=2),Il===null?Il=[s]:Il.push(s),s=o;do{switch(s.tag){case 3:s.flags|=65536,e&=-e,s.lanes|=e;var w=lS(s,l,e);kw(s,w);break e;case 1:a=l;var _=s.type,E=s.stateNode;if(!(s.flags&128)&&(typeof _.getDerivedStateFromError=="function"||E!==null&&typeof E.componentDidCatch=="function"&&(pi===null||!pi.has(E)))){s.flags|=65536,e&=-e,s.lanes|=e;var x=uS(s,a,e);kw(s,x);break e}}s=s.return}while(s!==null)}kS(t)}catch(A){e=A,lt===t&&t!==null&&(lt=t=t.return);continue}break}while(!0)}function bS(){var n=Pd.current;return Pd.current=bd,n===null?bd:n}function uy(){(ct===0||ct===3||ct===2)&&(ct=4),gt===null||!(bs&268435455)&&!(Dh&268435455)||ei(gt,Dt)}function Cd(n,e){var t=ye;ye|=2;var r=bS();(gt!==n||Dt!==e)&&(yr=null,gs(n,e));do try{qC();break}catch(i){DS(n,i)}while(!0);if(Wg(),ye=t,Pd.current=r,lt!==null)throw Error(z(261));return gt=null,Dt=0,ct}function qC(){for(;lt!==null;)PS(lt)}function WC(){for(;lt!==null&&!gx();)PS(lt)}function PS(n){var e=CS(n.alternate,n,un);n.memoizedProps=n.pendingProps,e===null?kS(n):lt=e,iy.current=null}function kS(n){var e=n;do{var t=e.alternate;if(n=e.return,e.flags&32768){if(t=FC(t,e),t!==null){t.flags&=32767,lt=t;return}if(n!==null)n.flags|=32768,n.subtreeFlags=0,n.deletions=null;else{ct=6,lt=null;return}}else if(t=LC(t,e,un),t!==null){lt=t;return}if(e=e.sibling,e!==null){lt=e;return}lt=e=n}while(e!==null);ct===0&&(ct=5)}function ts(n,e,t){var r=be,i=Sn.transition;try{Sn.transition=null,be=1,YC(n,e,t,r)}finally{Sn.transition=i,be=r}return null}function YC(n,e,t,r){do No();while(ii!==null);if(ye&6)throw Error(z(327));t=n.finishedWork;var i=n.finishedLanes;if(t===null)return null;if(n.finishedWork=null,n.finishedLanes=0,t===n.current)throw Error(z(177));n.callbackNode=null,n.callbackPriority=0;var s=t.lanes|t.childLanes;if(bx(n,s),n===gt&&(lt=gt=null,Dt=0),!(t.subtreeFlags&2064)&&!(t.flags&2064)||_c||(_c=!0,RS(dd,function(){return No(),null})),s=(t.flags&15990)!==0,t.subtreeFlags&15990||s){s=Sn.transition,Sn.transition=null;var o=be;be=1;var a=ye;ye|=4,iy.current=null,UC(n,t),TS(t,n),hC(sm),fd=!!im,sm=im=null,n.current=t,jC(t),yx(),ye=a,be=o,Sn.transition=s}else n.current=t;if(_c&&(_c=!1,ii=n,xd=i),s=n.pendingLanes,s===0&&(pi=null),wx(t.stateNode),an(n,nt()),e!==null)for(r=n.onRecoverableError,t=0;t<e.length;t++)i=e[t],r(i.value,{componentStack:i.stack,digest:i.digest});if(kd)throw kd=!1,n=Dm,Dm=null,n;return xd&1&&n.tag!==0&&No(),s=n.pendingLanes,s&1?n===bm?Sl++:(Sl=0,bm=n):Sl=0,Bi(),null}function No(){if(ii!==null){var n=lI(xd),e=Sn.transition,t=be;try{if(Sn.transition=null,be=16>n?16:n,ii===null)var r=!1;else{if(n=ii,ii=null,xd=0,ye&6)throw Error(z(331));var i=ye;for(ye|=4,Z=n.current;Z!==null;){var s=Z,o=s.child;if(Z.flags&16){var a=s.deletions;if(a!==null){for(var l=0;l<a.length;l++){var c=a[l];for(Z=c;Z!==null;){var d=Z;switch(d.tag){case 0:case 11:case 15:Tl(8,d,s)}var h=d.child;if(h!==null)h.return=d,Z=h;else for(;Z!==null;){d=Z;var p=d.sibling,g=d.return;if(vS(d),d===c){Z=null;break}if(p!==null){p.return=g,Z=p;break}Z=g}}}var v=s.alternate;if(v!==null){var S=v.child;if(S!==null){v.child=null;do{var D=S.sibling;S.sibling=null,S=D}while(S!==null)}}Z=s}}if(s.subtreeFlags&2064&&o!==null)o.return=s,Z=o;else e:for(;Z!==null;){if(s=Z,s.flags&2048)switch(s.tag){case 0:case 11:case 15:Tl(9,s,s.return)}var w=s.sibling;if(w!==null){w.return=s.return,Z=w;break e}Z=s.return}}var _=n.current;for(Z=_;Z!==null;){o=Z;var E=o.child;if(o.subtreeFlags&2064&&E!==null)E.return=o,Z=E;else e:for(o=_;Z!==null;){if(a=Z,a.flags&2048)try{switch(a.tag){case 0:case 11:case 15:Sh(9,a)}}catch(A){Xe(a,a.return,A)}if(a===o){Z=null;break e}var x=a.sibling;if(x!==null){x.return=a.return,Z=x;break e}Z=a.return}}if(ye=i,Bi(),er&&typeof er.onPostCommitFiberRoot=="function")try{er.onPostCommitFiberRoot(gh,n)}catch{}r=!0}return r}finally{be=t,Sn.transition=e}}return!1}function Kw(n,e,t){e=Wo(t,e),e=lS(n,e,1),n=fi(n,e,1),e=Yt(),n!==null&&(_u(n,1,e),an(n,e))}function Xe(n,e,t){if(n.tag===3)Kw(n,n,t);else for(;e!==null;){if(e.tag===3){Kw(e,n,t);break}else if(e.tag===1){var r=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(pi===null||!pi.has(r))){n=Wo(t,n),n=uS(e,n,1),e=fi(e,n,1),n=Yt(),e!==null&&(_u(e,1,n),an(e,n));break}}e=e.return}}function HC(n,e,t){var r=n.pingCache;r!==null&&r.delete(e),e=Yt(),n.pingedLanes|=n.suspendedLanes&t,gt===n&&(Dt&t)===t&&(ct===4||ct===3&&(Dt&130023424)===Dt&&500>nt()-oy?gs(n,0):sy|=t),an(n,e)}function xS(n,e){e===0&&(n.mode&1?(e=lc,lc<<=1,!(lc&130023424)&&(lc=4194304)):e=1);var t=Yt();n=Cr(n,e),n!==null&&(_u(n,e,t),an(n,t))}function QC(n){var e=n.memoizedState,t=0;e!==null&&(t=e.retryLane),xS(n,t)}function KC(n,e){var t=0;switch(n.tag){case 13:var r=n.stateNode,i=n.memoizedState;i!==null&&(t=i.retryLane);break;case 19:r=n.stateNode;break;default:throw Error(z(314))}r!==null&&r.delete(e),xS(n,t)}var CS;CS=function(n,e,t){if(n!==null)if(n.memoizedProps!==e.pendingProps||sn.current)en=!0;else{if(!(n.lanes&t)&&!(e.flags&128))return en=!1,VC(n,e,t);en=!!(n.flags&131072)}else en=!1,Fe&&e.flags&1048576&&MI(e,wd,e.index);switch(e.lanes=0,e.tag){case 2:var r=e.type;qc(n,e),n=e.pendingProps;var i=jo(e,Ot.current);Ao(e,t),i=Zg(null,e,r,n,i,t);var s=ey();return e.flags|=1,typeof i=="object"&&i!==null&&typeof i.render=="function"&&i.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,on(r)?(s=!0,_d(e)):s=!1,e.memoizedState=i.state!==null&&i.state!==void 0?i.state:null,Qg(e),i.updater=Ih,e.stateNode=i,i._reactInternals=e,pm(e,r,n,t),e=ym(null,e,r,!0,s,t)):(e.tag=0,Fe&&s&&jg(e),Bt(null,e,i,t),e=e.child),e;case 16:r=e.elementType;e:{switch(qc(n,e),n=e.pendingProps,i=r._init,r=i(r._payload),e.type=r,i=e.tag=XC(r),n=Rn(r,n),i){case 0:e=gm(null,e,r,n,t);break e;case 1:e=Bw(null,e,r,n,t);break e;case 11:e=Lw(null,e,r,n,t);break e;case 14:e=Fw(null,e,r,Rn(r.type,n),t);break e}throw Error(z(306,r,""))}return e;case 0:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:Rn(r,i),gm(n,e,r,i,t);case 1:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:Rn(r,i),Bw(n,e,r,i,t);case 3:e:{if(fS(e),n===null)throw Error(z(387));r=e.pendingProps,s=e.memoizedState,i=s.element,UI(n,e),Id(e,r,null,t);var o=e.memoizedState;if(r=o.element,s.isDehydrated)if(s={element:r,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},e.updateQueue.baseState=s,e.memoizedState=s,e.flags&256){i=Wo(Error(z(423)),e),e=Uw(n,e,r,t,i);break e}else if(r!==i){i=Wo(Error(z(424)),e),e=Uw(n,e,r,t,i);break e}else for(dn=hi(e.stateNode.containerInfo.firstChild),hn=e,Fe=!0,Nn=null,t=FI(e,null,r,t),e.child=t;t;)t.flags=t.flags&-3|4096,t=t.sibling;else{if($o(),r===i){e=Rr(n,e,t);break e}Bt(n,e,r,t)}e=e.child}return e;case 5:return jI(e),n===null&&dm(e),r=e.type,i=e.pendingProps,s=n!==null?n.memoizedProps:null,o=i.children,om(r,i)?o=null:s!==null&&om(r,s)&&(e.flags|=32),hS(n,e),Bt(n,e,o,t),e.child;case 6:return n===null&&dm(e),null;case 13:return pS(n,e,t);case 4:return Kg(e,e.stateNode.containerInfo),r=e.pendingProps,n===null?e.child=zo(e,null,r,t):Bt(n,e,r,t),e.child;case 11:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:Rn(r,i),Lw(n,e,r,i,t);case 7:return Bt(n,e,e.pendingProps,t),e.child;case 8:return Bt(n,e,e.pendingProps.children,t),e.child;case 12:return Bt(n,e,e.pendingProps.children,t),e.child;case 10:e:{if(r=e.type._context,i=e.pendingProps,s=e.memoizedProps,o=i.value,Ce(Ed,r._currentValue),r._currentValue=o,s!==null)if(Fn(s.value,o)){if(s.children===i.children&&!sn.current){e=Rr(n,e,t);break e}}else for(s=e.child,s!==null&&(s.return=e);s!==null;){var a=s.dependencies;if(a!==null){o=s.child;for(var l=a.firstContext;l!==null;){if(l.context===r){if(s.tag===1){l=Ir(-1,t&-t),l.tag=2;var c=s.updateQueue;if(c!==null){c=c.shared;var d=c.pending;d===null?l.next=l:(l.next=d.next,d.next=l),c.pending=l}}s.lanes|=t,l=s.alternate,l!==null&&(l.lanes|=t),hm(s.return,t,e),a.lanes|=t;break}l=l.next}}else if(s.tag===10)o=s.type===e.type?null:s.child;else if(s.tag===18){if(o=s.return,o===null)throw Error(z(341));o.lanes|=t,a=o.alternate,a!==null&&(a.lanes|=t),hm(o,t,e),o=s.sibling}else o=s.child;if(o!==null)o.return=s;else for(o=s;o!==null;){if(o===e){o=null;break}if(s=o.sibling,s!==null){s.return=o.return,o=s;break}o=o.return}s=o}Bt(n,e,i.children,t),e=e.child}return e;case 9:return i=e.type,r=e.pendingProps.children,Ao(e,t),i=bn(i),r=r(i),e.flags|=1,Bt(n,e,r,t),e.child;case 14:return r=e.type,i=Rn(r,e.pendingProps),i=Rn(r.type,i),Fw(n,e,r,i,t);case 15:return cS(n,e,e.type,e.pendingProps,t);case 17:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:Rn(r,i),qc(n,e),e.tag=1,on(r)?(n=!0,_d(e)):n=!1,Ao(e,t),aS(e,r,i),pm(e,r,i,t),ym(null,e,r,!0,n,t);case 19:return mS(n,e,t);case 22:return dS(n,e,t)}throw Error(z(156,e.tag))};function RS(n,e){return iI(n,e)}function GC(n,e,t,r){this.tag=n,this.key=t,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function En(n,e,t,r){return new GC(n,e,t,r)}function cy(n){return n=n.prototype,!(!n||!n.isReactComponent)}function XC(n){if(typeof n=="function")return cy(n)?1:0;if(n!=null){if(n=n.$$typeof,n===xg)return 11;if(n===Cg)return 14}return 2}function gi(n,e){var t=n.alternate;return t===null?(t=En(n.tag,e,n.key,n.mode),t.elementType=n.elementType,t.type=n.type,t.stateNode=n.stateNode,t.alternate=n,n.alternate=t):(t.pendingProps=e,t.type=n.type,t.flags=0,t.subtreeFlags=0,t.deletions=null),t.flags=n.flags&14680064,t.childLanes=n.childLanes,t.lanes=n.lanes,t.child=n.child,t.memoizedProps=n.memoizedProps,t.memoizedState=n.memoizedState,t.updateQueue=n.updateQueue,e=n.dependencies,t.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},t.sibling=n.sibling,t.index=n.index,t.ref=n.ref,t}function Hc(n,e,t,r,i,s){var o=2;if(r=n,typeof n=="function")cy(n)&&(o=1);else if(typeof n=="string")o=5;else e:switch(n){case yo:return ys(t.children,i,s,e);case kg:o=8,i|=8;break;case Fp:return n=En(12,t,e,i|2),n.elementType=Fp,n.lanes=s,n;case Bp:return n=En(13,t,e,i),n.elementType=Bp,n.lanes=s,n;case Up:return n=En(19,t,e,i),n.elementType=Up,n.lanes=s,n;case jT:return bh(t,i,s,e);default:if(typeof n=="object"&&n!==null)switch(n.$$typeof){case BT:o=10;break e;case UT:o=9;break e;case xg:o=11;break e;case Cg:o=14;break e;case Xr:o=16,r=null;break e}throw Error(z(130,n==null?n:typeof n,""))}return e=En(o,t,e,i),e.elementType=n,e.type=r,e.lanes=s,e}function ys(n,e,t,r){return n=En(7,n,r,e),n.lanes=t,n}function bh(n,e,t,r){return n=En(22,n,r,e),n.elementType=jT,n.lanes=t,n.stateNode={isHidden:!1},n}function dp(n,e,t){return n=En(6,n,null,e),n.lanes=t,n}function hp(n,e,t){return e=En(4,n.children!==null?n.children:[],n.key,e),e.lanes=t,e.stateNode={containerInfo:n.containerInfo,pendingChildren:null,implementation:n.implementation},e}function JC(n,e,t,r,i){this.tag=e,this.containerInfo=n,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Yf(0),this.expirationTimes=Yf(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Yf(0),this.identifierPrefix=r,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function dy(n,e,t,r,i,s,o,a,l){return n=new JC(n,e,t,a,l),e===1?(e=1,s===!0&&(e|=8)):e=0,s=En(3,null,null,e),n.current=s,s.stateNode=n,s.memoizedState={element:r,isDehydrated:t,cache:null,transitions:null,pendingSuspenseBoundaries:null},Qg(s),n}function ZC(n,e,t){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:go,key:r==null?null:""+r,children:n,containerInfo:e,implementation:t}}function AS(n){if(!n)return Ii;n=n._reactInternals;e:{if(qs(n)!==n||n.tag!==1)throw Error(z(170));var e=n;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(on(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(z(171))}if(n.tag===1){var t=n.type;if(on(t))return AI(n,t,e)}return e}function NS(n,e,t,r,i,s,o,a,l){return n=dy(t,r,!0,n,i,s,o,a,l),n.context=AS(null),t=n.current,r=Yt(),i=mi(t),s=Ir(r,i),s.callback=e??null,fi(t,s,i),n.current.lanes=i,_u(n,i,r),an(n,r),n}function Ph(n,e,t,r){var i=e.current,s=Yt(),o=mi(i);return t=AS(t),e.context===null?e.context=t:e.pendingContext=t,e=Ir(s,o),e.payload={element:n},r=r===void 0?null:r,r!==null&&(e.callback=r),n=fi(i,e,o),n!==null&&(Vn(n,i,o,s),jc(n,i,o)),o}function Rd(n){if(n=n.current,!n.child)return null;switch(n.child.tag){case 5:return n.child.stateNode;default:return n.child.stateNode}}function Gw(n,e){if(n=n.memoizedState,n!==null&&n.dehydrated!==null){var t=n.retryLane;n.retryLane=t!==0&&t<e?t:e}}function hy(n,e){Gw(n,e),(n=n.alternate)&&Gw(n,e)}function eR(){return null}var MS=typeof reportError=="function"?reportError:function(n){console.error(n)};function fy(n){this._internalRoot=n}kh.prototype.render=fy.prototype.render=function(n){var e=this._internalRoot;if(e===null)throw Error(z(409));Ph(n,e,null,null)};kh.prototype.unmount=fy.prototype.unmount=function(){var n=this._internalRoot;if(n!==null){this._internalRoot=null;var e=n.containerInfo;Ps(function(){Ph(null,n,null,null)}),e[xr]=null}};function kh(n){this._internalRoot=n}kh.prototype.unstable_scheduleHydration=function(n){if(n){var e=dI();n={blockedOn:null,target:n,priority:e};for(var t=0;t<Zr.length&&e!==0&&e<Zr[t].priority;t++);Zr.splice(t,0,n),t===0&&fI(n)}};function py(n){return!(!n||n.nodeType!==1&&n.nodeType!==9&&n.nodeType!==11)}function xh(n){return!(!n||n.nodeType!==1&&n.nodeType!==9&&n.nodeType!==11&&(n.nodeType!==8||n.nodeValue!==" react-mount-point-unstable "))}function Xw(){}function tR(n,e,t,r,i){if(i){if(typeof r=="function"){var s=r;r=function(){var c=Rd(o);s.call(c)}}var o=NS(e,r,n,0,null,!1,!1,"",Xw);return n._reactRootContainer=o,n[xr]=o.current,jl(n.nodeType===8?n.parentNode:n),Ps(),o}for(;i=n.lastChild;)n.removeChild(i);if(typeof r=="function"){var a=r;r=function(){var c=Rd(l);a.call(c)}}var l=dy(n,0,!1,null,null,!1,!1,"",Xw);return n._reactRootContainer=l,n[xr]=l.current,jl(n.nodeType===8?n.parentNode:n),Ps(function(){Ph(e,l,t,r)}),l}function Ch(n,e,t,r,i){var s=t._reactRootContainer;if(s){var o=s;if(typeof i=="function"){var a=i;i=function(){var l=Rd(o);a.call(l)}}Ph(e,o,n,i)}else o=tR(t,e,n,i,r);return Rd(o)}uI=function(n){switch(n.tag){case 3:var e=n.stateNode;if(e.current.memoizedState.isDehydrated){var t=ll(e.pendingLanes);t!==0&&(Ng(e,t|1),an(e,nt()),!(ye&6)&&(Yo=nt()+500,Bi()))}break;case 13:Ps(function(){var r=Cr(n,1);if(r!==null){var i=Yt();Vn(r,n,1,i)}}),hy(n,1)}};Mg=function(n){if(n.tag===13){var e=Cr(n,134217728);if(e!==null){var t=Yt();Vn(e,n,134217728,t)}hy(n,134217728)}};cI=function(n){if(n.tag===13){var e=mi(n),t=Cr(n,e);if(t!==null){var r=Yt();Vn(t,n,e,r)}hy(n,e)}};dI=function(){return be};hI=function(n,e){var t=be;try{return be=n,e()}finally{be=t}};Gp=function(n,e,t){switch(e){case"input":if(zp(n,t),e=t.name,t.type==="radio"&&e!=null){for(t=n;t.parentNode;)t=t.parentNode;for(t=t.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<t.length;e++){var r=t[e];if(r!==n&&r.form===n.form){var i=wh(r);if(!i)throw Error(z(90));zT(r),zp(r,i)}}}break;case"textarea":WT(n,t);break;case"select":e=t.value,e!=null&&ko(n,!!t.multiple,e,!1)}};JT=ay;ZT=Ps;var nR={usingClientEntryPoint:!1,Events:[wu,Eo,wh,GT,XT,ay]},Xa={findFiberByHostInstance:cs,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},rR={bundleType:Xa.bundleType,version:Xa.version,rendererPackageName:Xa.rendererPackageName,rendererConfig:Xa.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Vr.ReactCurrentDispatcher,findHostInstanceByFiber:function(n){return n=nI(n),n===null?null:n.stateNode},findFiberByHostInstance:Xa.findFiberByHostInstance||eR,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var vc=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!vc.isDisabled&&vc.supportsFiber)try{gh=vc.inject(rR),er=vc}catch{}}gn.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=nR;gn.createPortal=function(n,e){var t=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!py(e))throw Error(z(200));return ZC(n,e,null,t)};gn.createRoot=function(n,e){if(!py(n))throw Error(z(299));var t=!1,r="",i=MS;return e!=null&&(e.unstable_strictMode===!0&&(t=!0),e.identifierPrefix!==void 0&&(r=e.identifierPrefix),e.onRecoverableError!==void 0&&(i=e.onRecoverableError)),e=dy(n,1,!1,null,null,t,!1,r,i),n[xr]=e.current,jl(n.nodeType===8?n.parentNode:n),new fy(e)};gn.findDOMNode=function(n){if(n==null)return null;if(n.nodeType===1)return n;var e=n._reactInternals;if(e===void 0)throw typeof n.render=="function"?Error(z(188)):(n=Object.keys(n).join(","),Error(z(268,n)));return n=nI(e),n=n===null?null:n.stateNode,n};gn.flushSync=function(n){return Ps(n)};gn.hydrate=function(n,e,t){if(!xh(e))throw Error(z(200));return Ch(null,n,e,!0,t)};gn.hydrateRoot=function(n,e,t){if(!py(n))throw Error(z(405));var r=t!=null&&t.hydratedSources||null,i=!1,s="",o=MS;if(t!=null&&(t.unstable_strictMode===!0&&(i=!0),t.identifierPrefix!==void 0&&(s=t.identifierPrefix),t.onRecoverableError!==void 0&&(o=t.onRecoverableError)),e=NS(e,null,n,1,t??null,i,!1,s,o),n[xr]=e.current,jl(n),r)for(n=0;n<r.length;n++)t=r[n],i=t._getVersion,i=i(t._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[t,i]:e.mutableSourceEagerHydrationData.push(t,i);return new kh(e)};gn.render=function(n,e,t){if(!xh(e))throw Error(z(200));return Ch(null,n,e,!1,t)};gn.unmountComponentAtNode=function(n){if(!xh(n))throw Error(z(40));return n._reactRootContainer?(Ps(function(){Ch(null,null,n,!1,function(){n._reactRootContainer=null,n[xr]=null})}),!0):!1};gn.unstable_batchedUpdates=ay;gn.unstable_renderSubtreeIntoContainer=function(n,e,t,r){if(!xh(t))throw Error(z(200));if(n==null||n._reactInternals===void 0)throw Error(z(38));return Ch(n,e,t,!1,r)};gn.version="18.3.1-next-f1338f8080-20240426";function OS(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(OS)}catch(n){console.error(n)}}OS(),OT.exports=gn;var Rh=OT.exports;const iR=TT(Rh);var Jw=Rh;Vp.createRoot=Jw.createRoot,Vp.hydrateRoot=Jw.hydrateRoot;/**
 * @remix-run/router v1.17.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Gl(){return Gl=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},Gl.apply(this,arguments)}var si;(function(n){n.Pop="POP",n.Push="PUSH",n.Replace="REPLACE"})(si||(si={}));const Zw="popstate";function sR(n){n===void 0&&(n={});function e(r,i){let{pathname:s,search:o,hash:a}=r.location;return xm("",{pathname:s,search:o,hash:a},i.state&&i.state.usr||null,i.state&&i.state.key||"default")}function t(r,i){return typeof i=="string"?i:Ad(i)}return aR(e,t,null,n)}function Ye(n,e){if(n===!1||n===null||typeof n>"u")throw new Error(e)}function VS(n,e){if(!n){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function oR(){return Math.random().toString(36).substr(2,8)}function e0(n,e){return{usr:n.state,key:n.key,idx:e}}function xm(n,e,t,r){return t===void 0&&(t=null),Gl({pathname:typeof n=="string"?n:n.pathname,search:"",hash:""},typeof e=="string"?_a(e):e,{state:t,key:e&&e.key||r||oR()})}function Ad(n){let{pathname:e="/",search:t="",hash:r=""}=n;return t&&t!=="?"&&(e+=t.charAt(0)==="?"?t:"?"+t),r&&r!=="#"&&(e+=r.charAt(0)==="#"?r:"#"+r),e}function _a(n){let e={};if(n){let t=n.indexOf("#");t>=0&&(e.hash=n.substr(t),n=n.substr(0,t));let r=n.indexOf("?");r>=0&&(e.search=n.substr(r),n=n.substr(0,r)),n&&(e.pathname=n)}return e}function aR(n,e,t,r){r===void 0&&(r={});let{window:i=document.defaultView,v5Compat:s=!1}=r,o=i.history,a=si.Pop,l=null,c=d();c==null&&(c=0,o.replaceState(Gl({},o.state,{idx:c}),""));function d(){return(o.state||{idx:null}).idx}function h(){a=si.Pop;let D=d(),w=D==null?null:D-c;c=D,l&&l({action:a,location:S.location,delta:w})}function p(D,w){a=si.Push;let _=xm(S.location,D,w);c=d()+1;let E=e0(_,c),x=S.createHref(_);try{o.pushState(E,"",x)}catch(A){if(A instanceof DOMException&&A.name==="DataCloneError")throw A;i.location.assign(x)}s&&l&&l({action:a,location:S.location,delta:1})}function g(D,w){a=si.Replace;let _=xm(S.location,D,w);c=d();let E=e0(_,c),x=S.createHref(_);o.replaceState(E,"",x),s&&l&&l({action:a,location:S.location,delta:0})}function v(D){let w=i.location.origin!=="null"?i.location.origin:i.location.href,_=typeof D=="string"?D:Ad(D);return _=_.replace(/ $/,"%20"),Ye(w,"No window.location.(origin|href) available to create URL for href: "+_),new URL(_,w)}let S={get action(){return a},get location(){return n(i,o)},listen(D){if(l)throw new Error("A history only accepts one active listener");return i.addEventListener(Zw,h),l=D,()=>{i.removeEventListener(Zw,h),l=null}},createHref(D){return e(i,D)},createURL:v,encodeLocation(D){let w=v(D);return{pathname:w.pathname,search:w.search,hash:w.hash}},push:p,replace:g,go(D){return o.go(D)}};return S}var t0;(function(n){n.data="data",n.deferred="deferred",n.redirect="redirect",n.error="error"})(t0||(t0={}));function lR(n,e,t){return t===void 0&&(t="/"),uR(n,e,t,!1)}function uR(n,e,t,r){let i=typeof e=="string"?_a(e):e,s=Ho(i.pathname||"/",t);if(s==null)return null;let o=LS(n);cR(o);let a=null;for(let l=0;a==null&&l<o.length;++l){let c=ER(s);a=vR(o[l],c,r)}return a}function LS(n,e,t,r){e===void 0&&(e=[]),t===void 0&&(t=[]),r===void 0&&(r="");let i=(s,o,a)=>{let l={relativePath:a===void 0?s.path||"":a,caseSensitive:s.caseSensitive===!0,childrenIndex:o,route:s};l.relativePath.startsWith("/")&&(Ye(l.relativePath.startsWith(r),'Absolute route path "'+l.relativePath+'" nested under path '+('"'+r+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),l.relativePath=l.relativePath.slice(r.length));let c=yi([r,l.relativePath]),d=t.concat(l);s.children&&s.children.length>0&&(Ye(s.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+c+'".')),LS(s.children,e,d,c)),!(s.path==null&&!s.index)&&e.push({path:c,score:yR(c,s.index),routesMeta:d})};return n.forEach((s,o)=>{var a;if(s.path===""||!((a=s.path)!=null&&a.includes("?")))i(s,o);else for(let l of FS(s.path))i(s,o,l)}),e}function FS(n){let e=n.split("/");if(e.length===0)return[];let[t,...r]=e,i=t.endsWith("?"),s=t.replace(/\?$/,"");if(r.length===0)return i?[s,""]:[s];let o=FS(r.join("/")),a=[];return a.push(...o.map(l=>l===""?s:[s,l].join("/"))),i&&a.push(...o),a.map(l=>n.startsWith("/")&&l===""?"/":l)}function cR(n){n.sort((e,t)=>e.score!==t.score?t.score-e.score:_R(e.routesMeta.map(r=>r.childrenIndex),t.routesMeta.map(r=>r.childrenIndex)))}const dR=/^:[\w-]+$/,hR=3,fR=2,pR=1,mR=10,gR=-2,n0=n=>n==="*";function yR(n,e){let t=n.split("/"),r=t.length;return t.some(n0)&&(r+=gR),e&&(r+=fR),t.filter(i=>!n0(i)).reduce((i,s)=>i+(dR.test(s)?hR:s===""?pR:mR),r)}function _R(n,e){return n.length===e.length&&n.slice(0,-1).every((r,i)=>r===e[i])?n[n.length-1]-e[e.length-1]:0}function vR(n,e,t){let{routesMeta:r}=n,i={},s="/",o=[];for(let a=0;a<r.length;++a){let l=r[a],c=a===r.length-1,d=s==="/"?e:e.slice(s.length)||"/",h=Nd({path:l.relativePath,caseSensitive:l.caseSensitive,end:c},d),p=l.route;if(!h&&c&&t&&!r[r.length-1].route.index&&(h=Nd({path:l.relativePath,caseSensitive:l.caseSensitive,end:!1},d)),!h)return null;Object.assign(i,h.params),o.push({params:i,pathname:yi([s,h.pathname]),pathnameBase:DR(yi([s,h.pathnameBase])),route:p}),h.pathnameBase!=="/"&&(s=yi([s,h.pathnameBase]))}return o}function Nd(n,e){typeof n=="string"&&(n={path:n,caseSensitive:!1,end:!0});let[t,r]=wR(n.path,n.caseSensitive,n.end),i=e.match(t);if(!i)return null;let s=i[0],o=s.replace(/(.)\/+$/,"$1"),a=i.slice(1);return{params:r.reduce((c,d,h)=>{let{paramName:p,isOptional:g}=d;if(p==="*"){let S=a[h]||"";o=s.slice(0,s.length-S.length).replace(/(.)\/+$/,"$1")}const v=a[h];return g&&!v?c[p]=void 0:c[p]=(v||"").replace(/%2F/g,"/"),c},{}),pathname:s,pathnameBase:o,pattern:n}}function wR(n,e,t){e===void 0&&(e=!1),t===void 0&&(t=!0),VS(n==="*"||!n.endsWith("*")||n.endsWith("/*"),'Route path "'+n+'" will be treated as if it were '+('"'+n.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+n.replace(/\*$/,"/*")+'".'));let r=[],i="^"+n.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(o,a,l)=>(r.push({paramName:a,isOptional:l!=null}),l?"/?([^\\/]+)?":"/([^\\/]+)"));return n.endsWith("*")?(r.push({paramName:"*"}),i+=n==="*"||n==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):t?i+="\\/*$":n!==""&&n!=="/"&&(i+="(?:(?=\\/|$))"),[new RegExp(i,e?void 0:"i"),r]}function ER(n){try{return n.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return VS(!1,'The URL path "'+n+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+e+").")),n}}function Ho(n,e){if(e==="/")return n;if(!n.toLowerCase().startsWith(e.toLowerCase()))return null;let t=e.endsWith("/")?e.length-1:e.length,r=n.charAt(t);return r&&r!=="/"?null:n.slice(t)||"/"}function TR(n,e){e===void 0&&(e="/");let{pathname:t,search:r="",hash:i=""}=typeof n=="string"?_a(n):n;return{pathname:t?t.startsWith("/")?t:IR(t,e):e,search:bR(r),hash:PR(i)}}function IR(n,e){let t=e.replace(/\/+$/,"").split("/");return n.split("/").forEach(i=>{i===".."?t.length>1&&t.pop():i!=="."&&t.push(i)}),t.length>1?t.join("/"):"/"}function fp(n,e,t,r){return"Cannot include a '"+n+"' character in a manually specified "+("`to."+e+"` field ["+JSON.stringify(r)+"].  Please separate it out to the ")+("`to."+t+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function SR(n){return n.filter((e,t)=>t===0||e.route.path&&e.route.path.length>0)}function my(n,e){let t=SR(n);return e?t.map((r,i)=>i===n.length-1?r.pathname:r.pathnameBase):t.map(r=>r.pathnameBase)}function gy(n,e,t,r){r===void 0&&(r=!1);let i;typeof n=="string"?i=_a(n):(i=Gl({},n),Ye(!i.pathname||!i.pathname.includes("?"),fp("?","pathname","search",i)),Ye(!i.pathname||!i.pathname.includes("#"),fp("#","pathname","hash",i)),Ye(!i.search||!i.search.includes("#"),fp("#","search","hash",i)));let s=n===""||i.pathname==="",o=s?"/":i.pathname,a;if(o==null)a=t;else{let h=e.length-1;if(!r&&o.startsWith("..")){let p=o.split("/");for(;p[0]==="..";)p.shift(),h-=1;i.pathname=p.join("/")}a=h>=0?e[h]:"/"}let l=TR(i,a),c=o&&o!=="/"&&o.endsWith("/"),d=(s||o===".")&&t.endsWith("/");return!l.pathname.endsWith("/")&&(c||d)&&(l.pathname+="/"),l}const yi=n=>n.join("/").replace(/\/\/+/g,"/"),DR=n=>n.replace(/\/+$/,"").replace(/^\/*/,"/"),bR=n=>!n||n==="?"?"":n.startsWith("?")?n:"?"+n,PR=n=>!n||n==="#"?"":n.startsWith("#")?n:"#"+n;function kR(n){return n!=null&&typeof n.status=="number"&&typeof n.statusText=="string"&&typeof n.internal=="boolean"&&"data"in n}const BS=["post","put","patch","delete"];new Set(BS);const xR=["get",...BS];new Set(xR);/**
 * React Router v6.24.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Xl(){return Xl=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},Xl.apply(this,arguments)}const Ah=N.createContext(null),US=N.createContext(null),Lr=N.createContext(null),Nh=N.createContext(null),Ui=N.createContext({outlet:null,matches:[],isDataRoute:!1}),jS=N.createContext(null);function CR(n,e){let{relative:t}=e===void 0?{}:e;va()||Ye(!1);let{basename:r,navigator:i}=N.useContext(Lr),{hash:s,pathname:o,search:a}=Mh(n,{relative:t}),l=o;return r!=="/"&&(l=o==="/"?r:yi([r,o])),i.createHref({pathname:l,search:a,hash:s})}function va(){return N.useContext(Nh)!=null}function Ws(){return va()||Ye(!1),N.useContext(Nh).location}function $S(n){N.useContext(Lr).static||N.useLayoutEffect(n)}function zS(){let{isDataRoute:n}=N.useContext(Ui);return n?zR():RR()}function RR(){va()||Ye(!1);let n=N.useContext(Ah),{basename:e,future:t,navigator:r}=N.useContext(Lr),{matches:i}=N.useContext(Ui),{pathname:s}=Ws(),o=JSON.stringify(my(i,t.v7_relativeSplatPath)),a=N.useRef(!1);return $S(()=>{a.current=!0}),N.useCallback(function(c,d){if(d===void 0&&(d={}),!a.current)return;if(typeof c=="number"){r.go(c);return}let h=gy(c,JSON.parse(o),s,d.relative==="path");n==null&&e!=="/"&&(h.pathname=h.pathname==="/"?e:yi([e,h.pathname])),(d.replace?r.replace:r.push)(h,d.state,d)},[e,r,o,s,n])}function Mh(n,e){let{relative:t}=e===void 0?{}:e,{future:r}=N.useContext(Lr),{matches:i}=N.useContext(Ui),{pathname:s}=Ws(),o=JSON.stringify(my(i,r.v7_relativeSplatPath));return N.useMemo(()=>gy(n,JSON.parse(o),s,t==="path"),[n,o,s,t])}function AR(n,e){return NR(n,e)}function NR(n,e,t,r){va()||Ye(!1);let{navigator:i}=N.useContext(Lr),{matches:s}=N.useContext(Ui),o=s[s.length-1],a=o?o.params:{};o&&o.pathname;let l=o?o.pathnameBase:"/";o&&o.route;let c=Ws(),d;if(e){var h;let D=typeof e=="string"?_a(e):e;l==="/"||(h=D.pathname)!=null&&h.startsWith(l)||Ye(!1),d=D}else d=c;let p=d.pathname||"/",g=p;if(l!=="/"){let D=l.replace(/^\//,"").split("/");g="/"+p.replace(/^\//,"").split("/").slice(D.length).join("/")}let v=lR(n,{pathname:g}),S=FR(v&&v.map(D=>Object.assign({},D,{params:Object.assign({},a,D.params),pathname:yi([l,i.encodeLocation?i.encodeLocation(D.pathname).pathname:D.pathname]),pathnameBase:D.pathnameBase==="/"?l:yi([l,i.encodeLocation?i.encodeLocation(D.pathnameBase).pathname:D.pathnameBase])})),s,t,r);return e&&S?N.createElement(Nh.Provider,{value:{location:Xl({pathname:"/",search:"",hash:"",state:null,key:"default"},d),navigationType:si.Pop}},S):S}function MR(){let n=$R(),e=kR(n)?n.status+" "+n.statusText:n instanceof Error?n.message:JSON.stringify(n),t=n instanceof Error?n.stack:null,i={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return N.createElement(N.Fragment,null,N.createElement("h2",null,"Unexpected Application Error!"),N.createElement("h3",{style:{fontStyle:"italic"}},e),t?N.createElement("pre",{style:i},t):null,null)}const OR=N.createElement(MR,null);class VR extends N.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,t){return t.location!==e.location||t.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error!==void 0?e.error:t.error,location:t.location,revalidation:e.revalidation||t.revalidation}}componentDidCatch(e,t){console.error("React Router caught the following error during render",e,t)}render(){return this.state.error!==void 0?N.createElement(Ui.Provider,{value:this.props.routeContext},N.createElement(jS.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function LR(n){let{routeContext:e,match:t,children:r}=n,i=N.useContext(Ah);return i&&i.static&&i.staticContext&&(t.route.errorElement||t.route.ErrorBoundary)&&(i.staticContext._deepestRenderedBoundaryId=t.route.id),N.createElement(Ui.Provider,{value:e},r)}function FR(n,e,t,r){var i;if(e===void 0&&(e=[]),t===void 0&&(t=null),r===void 0&&(r=null),n==null){var s;if((s=t)!=null&&s.errors)n=t.matches;else return null}let o=n,a=(i=t)==null?void 0:i.errors;if(a!=null){let d=o.findIndex(h=>h.route.id&&(a==null?void 0:a[h.route.id])!==void 0);d>=0||Ye(!1),o=o.slice(0,Math.min(o.length,d+1))}let l=!1,c=-1;if(t&&r&&r.v7_partialHydration)for(let d=0;d<o.length;d++){let h=o[d];if((h.route.HydrateFallback||h.route.hydrateFallbackElement)&&(c=d),h.route.id){let{loaderData:p,errors:g}=t,v=h.route.loader&&p[h.route.id]===void 0&&(!g||g[h.route.id]===void 0);if(h.route.lazy||v){l=!0,c>=0?o=o.slice(0,c+1):o=[o[0]];break}}}return o.reduceRight((d,h,p)=>{let g,v=!1,S=null,D=null;t&&(g=a&&h.route.id?a[h.route.id]:void 0,S=h.route.errorElement||OR,l&&(c<0&&p===0?(v=!0,D=null):c===p&&(v=!0,D=h.route.hydrateFallbackElement||null)));let w=e.concat(o.slice(0,p+1)),_=()=>{let E;return g?E=S:v?E=D:h.route.Component?E=N.createElement(h.route.Component,null):h.route.element?E=h.route.element:E=d,N.createElement(LR,{match:h,routeContext:{outlet:d,matches:w,isDataRoute:t!=null},children:E})};return t&&(h.route.ErrorBoundary||h.route.errorElement||p===0)?N.createElement(VR,{location:t.location,revalidation:t.revalidation,component:S,error:g,children:_(),routeContext:{outlet:null,matches:w,isDataRoute:!0}}):_()},null)}var qS=function(n){return n.UseBlocker="useBlocker",n.UseRevalidator="useRevalidator",n.UseNavigateStable="useNavigate",n}(qS||{}),Md=function(n){return n.UseBlocker="useBlocker",n.UseLoaderData="useLoaderData",n.UseActionData="useActionData",n.UseRouteError="useRouteError",n.UseNavigation="useNavigation",n.UseRouteLoaderData="useRouteLoaderData",n.UseMatches="useMatches",n.UseRevalidator="useRevalidator",n.UseNavigateStable="useNavigate",n.UseRouteId="useRouteId",n}(Md||{});function BR(n){let e=N.useContext(Ah);return e||Ye(!1),e}function UR(n){let e=N.useContext(US);return e||Ye(!1),e}function jR(n){let e=N.useContext(Ui);return e||Ye(!1),e}function WS(n){let e=jR(),t=e.matches[e.matches.length-1];return t.route.id||Ye(!1),t.route.id}function $R(){var n;let e=N.useContext(jS),t=UR(Md.UseRouteError),r=WS(Md.UseRouteError);return e!==void 0?e:(n=t.errors)==null?void 0:n[r]}function zR(){let{router:n}=BR(qS.UseNavigateStable),e=WS(Md.UseNavigateStable),t=N.useRef(!1);return $S(()=>{t.current=!0}),N.useCallback(function(i,s){s===void 0&&(s={}),t.current&&(typeof i=="number"?n.navigate(i):n.navigate(i,Xl({fromRouteId:e},s)))},[n,e])}function qR(n){let{to:e,replace:t,state:r,relative:i}=n;va()||Ye(!1);let{future:s,static:o}=N.useContext(Lr),{matches:a}=N.useContext(Ui),{pathname:l}=Ws(),c=zS(),d=gy(e,my(a,s.v7_relativeSplatPath),l,i==="path"),h=JSON.stringify(d);return N.useEffect(()=>c(JSON.parse(h),{replace:t,state:r,relative:i}),[c,h,i,t,r]),null}function gr(n){Ye(!1)}function WR(n){let{basename:e="/",children:t=null,location:r,navigationType:i=si.Pop,navigator:s,static:o=!1,future:a}=n;va()&&Ye(!1);let l=e.replace(/^\/*/,"/"),c=N.useMemo(()=>({basename:l,navigator:s,static:o,future:Xl({v7_relativeSplatPath:!1},a)}),[l,a,s,o]);typeof r=="string"&&(r=_a(r));let{pathname:d="/",search:h="",hash:p="",state:g=null,key:v="default"}=r,S=N.useMemo(()=>{let D=Ho(d,l);return D==null?null:{location:{pathname:D,search:h,hash:p,state:g,key:v},navigationType:i}},[l,d,h,p,g,v,i]);return S==null?null:N.createElement(Lr.Provider,{value:c},N.createElement(Nh.Provider,{children:t,value:S}))}function YR(n){let{children:e,location:t}=n;return AR(Cm(e),t)}new Promise(()=>{});function Cm(n,e){e===void 0&&(e=[]);let t=[];return N.Children.forEach(n,(r,i)=>{if(!N.isValidElement(r))return;let s=[...e,i];if(r.type===N.Fragment){t.push.apply(t,Cm(r.props.children,s));return}r.type!==gr&&Ye(!1),!r.props.index||!r.props.children||Ye(!1);let o={id:r.props.id||s.join("-"),caseSensitive:r.props.caseSensitive,element:r.props.element,Component:r.props.Component,index:r.props.index,path:r.props.path,loader:r.props.loader,action:r.props.action,errorElement:r.props.errorElement,ErrorBoundary:r.props.ErrorBoundary,hasErrorBoundary:r.props.ErrorBoundary!=null||r.props.errorElement!=null,shouldRevalidate:r.props.shouldRevalidate,handle:r.props.handle,lazy:r.props.lazy};r.props.children&&(o.children=Cm(r.props.children,s)),t.push(o)}),t}/**
 * React Router DOM v6.24.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Od(){return Od=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},Od.apply(this,arguments)}function YS(n,e){if(n==null)return{};var t={},r=Object.keys(n),i,s;for(s=0;s<r.length;s++)i=r[s],!(e.indexOf(i)>=0)&&(t[i]=n[i]);return t}function HR(n){return!!(n.metaKey||n.altKey||n.ctrlKey||n.shiftKey)}function QR(n,e){return n.button===0&&(!e||e==="_self")&&!HR(n)}const KR=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","unstable_viewTransition"],GR=["aria-current","caseSensitive","className","end","style","to","unstable_viewTransition","children"],XR="6";try{window.__reactRouterVersion=XR}catch{}const JR=N.createContext({isTransitioning:!1}),ZR="startTransition",r0=NT[ZR];function eA(n){let{basename:e,children:t,future:r,window:i}=n,s=N.useRef();s.current==null&&(s.current=sR({window:i,v5Compat:!0}));let o=s.current,[a,l]=N.useState({action:o.action,location:o.location}),{v7_startTransition:c}=r||{},d=N.useCallback(h=>{c&&r0?r0(()=>l(h)):l(h)},[l,c]);return N.useLayoutEffect(()=>o.listen(d),[o,d]),N.createElement(WR,{basename:e,children:t,location:a.location,navigationType:a.action,navigator:o,future:r})}const tA=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",nA=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,rA=N.forwardRef(function(e,t){let{onClick:r,relative:i,reloadDocument:s,replace:o,state:a,target:l,to:c,preventScrollReset:d,unstable_viewTransition:h}=e,p=YS(e,KR),{basename:g}=N.useContext(Lr),v,S=!1;if(typeof c=="string"&&nA.test(c)&&(v=c,tA))try{let E=new URL(window.location.href),x=c.startsWith("//")?new URL(E.protocol+c):new URL(c),A=Ho(x.pathname,g);x.origin===E.origin&&A!=null?c=A+x.search+x.hash:S=!0}catch{}let D=CR(c,{relative:i}),w=sA(c,{replace:o,state:a,target:l,preventScrollReset:d,relative:i,unstable_viewTransition:h});function _(E){r&&r(E),E.defaultPrevented||w(E)}return N.createElement("a",Od({},p,{href:v||D,onClick:S||s?r:_,ref:t,target:l}))}),Ji=N.forwardRef(function(e,t){let{"aria-current":r="page",caseSensitive:i=!1,className:s="",end:o=!1,style:a,to:l,unstable_viewTransition:c,children:d}=e,h=YS(e,GR),p=Mh(l,{relative:h.relative}),g=Ws(),v=N.useContext(US),{navigator:S,basename:D}=N.useContext(Lr),w=v!=null&&oA(p)&&c===!0,_=S.encodeLocation?S.encodeLocation(p).pathname:p.pathname,E=g.pathname,x=v&&v.navigation&&v.navigation.location?v.navigation.location.pathname:null;i||(E=E.toLowerCase(),x=x?x.toLowerCase():null,_=_.toLowerCase()),x&&D&&(x=Ho(x,D)||x);const A=_!=="/"&&_.endsWith("/")?_.length-1:_.length;let L=E===_||!o&&E.startsWith(_)&&E.charAt(A)==="/",I=x!=null&&(x===_||!o&&x.startsWith(_)&&x.charAt(_.length)==="/"),y={isActive:L,isPending:I,isTransitioning:w},b=L?r:void 0,k;typeof s=="function"?k=s(y):k=[s,L?"active":null,I?"pending":null,w?"transitioning":null].filter(Boolean).join(" ");let C=typeof a=="function"?a(y):a;return N.createElement(rA,Od({},h,{"aria-current":b,className:k,ref:t,style:C,to:l,unstable_viewTransition:c}),typeof d=="function"?d(y):d)});var Rm;(function(n){n.UseScrollRestoration="useScrollRestoration",n.UseSubmit="useSubmit",n.UseSubmitFetcher="useSubmitFetcher",n.UseFetcher="useFetcher",n.useViewTransitionState="useViewTransitionState"})(Rm||(Rm={}));var i0;(function(n){n.UseFetcher="useFetcher",n.UseFetchers="useFetchers",n.UseScrollRestoration="useScrollRestoration"})(i0||(i0={}));function iA(n){let e=N.useContext(Ah);return e||Ye(!1),e}function sA(n,e){let{target:t,replace:r,state:i,preventScrollReset:s,relative:o,unstable_viewTransition:a}=e===void 0?{}:e,l=zS(),c=Ws(),d=Mh(n,{relative:o});return N.useCallback(h=>{if(QR(h,t)){h.preventDefault();let p=r!==void 0?r:Ad(c)===Ad(d);l(n,{replace:p,state:i,preventScrollReset:s,relative:o,unstable_viewTransition:a})}},[c,l,d,r,i,t,n,s,o,a])}function oA(n,e){e===void 0&&(e={});let t=N.useContext(JR);t==null&&Ye(!1);let{basename:r}=iA(Rm.useViewTransitionState),i=Mh(n,{relative:e.relative});if(!t.isTransitioning)return!1;let s=Ho(t.currentLocation.pathname,r)||t.currentLocation.pathname,o=Ho(t.nextLocation.pathname,r)||t.nextLocation.pathname;return Nd(i.pathname,o)!=null||Nd(i.pathname,s)!=null}var s0={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const HS=function(n){const e=[];let t=0;for(let r=0;r<n.length;r++){let i=n.charCodeAt(r);i<128?e[t++]=i:i<2048?(e[t++]=i>>6|192,e[t++]=i&63|128):(i&64512)===55296&&r+1<n.length&&(n.charCodeAt(r+1)&64512)===56320?(i=65536+((i&1023)<<10)+(n.charCodeAt(++r)&1023),e[t++]=i>>18|240,e[t++]=i>>12&63|128,e[t++]=i>>6&63|128,e[t++]=i&63|128):(e[t++]=i>>12|224,e[t++]=i>>6&63|128,e[t++]=i&63|128)}return e},aA=function(n){const e=[];let t=0,r=0;for(;t<n.length;){const i=n[t++];if(i<128)e[r++]=String.fromCharCode(i);else if(i>191&&i<224){const s=n[t++];e[r++]=String.fromCharCode((i&31)<<6|s&63)}else if(i>239&&i<365){const s=n[t++],o=n[t++],a=n[t++],l=((i&7)<<18|(s&63)<<12|(o&63)<<6|a&63)-65536;e[r++]=String.fromCharCode(55296+(l>>10)),e[r++]=String.fromCharCode(56320+(l&1023))}else{const s=n[t++],o=n[t++];e[r++]=String.fromCharCode((i&15)<<12|(s&63)<<6|o&63)}}return e.join("")},QS={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(n,e){if(!Array.isArray(n))throw Error("encodeByteArray takes an array as a parameter");this.init_();const t=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<n.length;i+=3){const s=n[i],o=i+1<n.length,a=o?n[i+1]:0,l=i+2<n.length,c=l?n[i+2]:0,d=s>>2,h=(s&3)<<4|a>>4;let p=(a&15)<<2|c>>6,g=c&63;l||(g=64,o||(p=64)),r.push(t[d],t[h],t[p],t[g])}return r.join("")},encodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(n):this.encodeByteArray(HS(n),e)},decodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(n):aA(this.decodeStringToByteArray(n,e))},decodeStringToByteArray(n,e){this.init_();const t=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<n.length;){const s=t[n.charAt(i++)],a=i<n.length?t[n.charAt(i)]:0;++i;const c=i<n.length?t[n.charAt(i)]:64;++i;const h=i<n.length?t[n.charAt(i)]:64;if(++i,s==null||a==null||c==null||h==null)throw new lA;const p=s<<2|a>>4;if(r.push(p),c!==64){const g=a<<4&240|c>>2;if(r.push(g),h!==64){const v=c<<6&192|h;r.push(v)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let n=0;n<this.ENCODED_VALS.length;n++)this.byteToCharMap_[n]=this.ENCODED_VALS.charAt(n),this.charToByteMap_[this.byteToCharMap_[n]]=n,this.byteToCharMapWebSafe_[n]=this.ENCODED_VALS_WEBSAFE.charAt(n),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[n]]=n,n>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(n)]=n,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(n)]=n)}}};class lA extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const uA=function(n){const e=HS(n);return QS.encodeByteArray(e,!0)},Vd=function(n){return uA(n).replace(/\./g,"")},cA=function(n){try{return QS.decodeString(n,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};function Ld(n,e){if(!(e instanceof Object))return e;switch(e.constructor){case Date:const t=e;return new Date(t.getTime());case Object:n===void 0&&(n={});break;case Array:n=[];break;default:return e}for(const t in e)!e.hasOwnProperty(t)||!dA(t)||(n[t]=Ld(n[t],e[t]));return n}function dA(n){return n!=="__proto__"}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hA(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fA=()=>hA().__FIREBASE_DEFAULTS__,pA=()=>{if(typeof process>"u"||typeof s0>"u")return;const n=s0.__FIREBASE_DEFAULTS__;if(n)return JSON.parse(n)},mA=()=>{if(typeof document>"u")return;let n;try{n=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=n&&cA(n[1]);return e&&JSON.parse(e)},yy=()=>{try{return fA()||pA()||mA()}catch(n){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${n}`);return}},gA=n=>{var e,t;return(t=(e=yy())===null||e===void 0?void 0:e.emulatorHosts)===null||t===void 0?void 0:t[n]},KS=n=>{const e=gA(n);if(!e)return;const t=e.lastIndexOf(":");if(t<=0||t+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const r=parseInt(e.substring(t+1),10);return e[0]==="["?[e.substring(1,t-1),r]:[e.substring(0,t),r]},GS=()=>{var n;return(n=yy())===null||n===void 0?void 0:n.config};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yA{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,r)=>{t?this.reject(t):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(t):e(t,r))}}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function XS(n,e){if(n.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const t={alg:"none",type:"JWT"},r=e||"demo-project",i=n.iat||0,s=n.sub||n.user_id;if(!s)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const o=Object.assign({iss:`https://securetoken.google.com/${r}`,aud:r,iat:i,exp:i+3600,auth_time:i,sub:s,user_id:s,firebase:{sign_in_provider:"custom",identities:{}}},n);return[Vd(JSON.stringify(t)),Vd(JSON.stringify(o)),""].join(".")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Fd(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function _A(){var n;const e=(n=yy())===null||n===void 0?void 0:n.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function JS(){return typeof self=="object"&&self.self===self}function ZS(){return!_A()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function e1(){try{return typeof indexedDB=="object"}catch{return!1}}function vA(){return new Promise((n,e)=>{try{let t=!0;const r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),t||self.indexedDB.deleteDatabase(r),n(!0)},i.onupgradeneeded=()=>{t=!1},i.onerror=()=>{var s;e(((s=i.error)===null||s===void 0?void 0:s.message)||"")}}catch(t){e(t)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wA="FirebaseError";class ji extends Error{constructor(e,t,r){super(t),this.code=e,this.customData=r,this.name=wA,Object.setPrototypeOf(this,ji.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Oh.prototype.create)}}class Oh{constructor(e,t,r){this.service=e,this.serviceName=t,this.errors=r}create(e,...t){const r=t[0]||{},i=`${this.service}/${e}`,s=this.errors[e],o=s?EA(s,r):"Error",a=`${this.serviceName}: ${o} (${i}).`;return new ji(i,a,r)}}function EA(n,e){return n.replace(TA,(t,r)=>{const i=e[r];return i!=null?String(i):`<${r}?>`})}const TA=/\{\$([^}]+)}/g;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function o0(n,e){return Object.prototype.hasOwnProperty.call(n,e)}function Jl(n,e){if(n===e)return!0;const t=Object.keys(n),r=Object.keys(e);for(const i of t){if(!r.includes(i))return!1;const s=n[i],o=e[i];if(a0(s)&&a0(o)){if(!Jl(s,o))return!1}else if(s!==o)return!1}for(const i of r)if(!t.includes(i))return!1;return!0}function a0(n){return n!==null&&typeof n=="object"}function IA(n,e){const t=new SA(n,e);return t.subscribe.bind(t)}class SA{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(t=>{t.next(e)})}error(e){this.forEachObserver(t=>{t.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,t,r){let i;if(e===void 0&&t===void 0&&r===void 0)throw new Error("Missing Observer.");DA(e,["next","error","complete"])?i=e:i={next:e,error:t,complete:r},i.next===void 0&&(i.next=pp),i.error===void 0&&(i.error=pp),i.complete===void 0&&(i.complete=pp);const s=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?i.error(this.finalError):i.complete()}catch{}}),this.observers.push(i),s}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{t(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function DA(n,e){if(typeof n!="object"||n===null)return!1;for(const t of e)if(t in n&&typeof n[t]=="function")return!0;return!1}function pp(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ee(n){return n&&n._delegate?n._delegate:n}class Ar{constructor(e,t,r){this.name=e,this.instanceFactory=t,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ns="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bA{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){const r=new yA;if(this.instancesDeferred.set(t,r),this.isInitialized(t)||this.shouldAutoInitialize())try{const i=this.getOrInitializeService({instanceIdentifier:t});i&&r.resolve(i)}catch{}}return this.instancesDeferred.get(t).promise}getImmediate(e){var t;const r=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),i=(t=e==null?void 0:e.optional)!==null&&t!==void 0?t:!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(s){if(i)return null;throw s}else{if(i)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(kA(e))try{this.getOrInitializeService({instanceIdentifier:ns})}catch{}for(const[t,r]of this.instancesDeferred.entries()){const i=this.normalizeInstanceIdentifier(t);try{const s=this.getOrInitializeService({instanceIdentifier:i});r.resolve(s)}catch{}}}}clearInstance(e=ns){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(t=>"INTERNAL"in t).map(t=>t.INTERNAL.delete()),...e.filter(t=>"_delete"in t).map(t=>t._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=ns){return this.instances.has(e)}getOptions(e=ns){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:t={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const i=this.getOrInitializeService({instanceIdentifier:r,options:t});for(const[s,o]of this.instancesDeferred.entries()){const a=this.normalizeInstanceIdentifier(s);r===a&&o.resolve(i)}return i}onInit(e,t){var r;const i=this.normalizeInstanceIdentifier(t),s=(r=this.onInitCallbacks.get(i))!==null&&r!==void 0?r:new Set;s.add(e),this.onInitCallbacks.set(i,s);const o=this.instances.get(i);return o&&e(o,i),()=>{s.delete(e)}}invokeOnInitCallbacks(e,t){const r=this.onInitCallbacks.get(t);if(r)for(const i of r)try{i(e,t)}catch{}}getOrInitializeService({instanceIdentifier:e,options:t={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:PA(e),options:t}),this.instances.set(e,r),this.instancesOptions.set(e,t),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=ns){return this.component?this.component.multipleInstances?e:ns:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function PA(n){return n===ns?void 0:n}function kA(n){return n.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class t1{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const t=this.getProvider(e.name);if(t.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const t=new bA(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _y=[];var fe;(function(n){n[n.DEBUG=0]="DEBUG",n[n.VERBOSE=1]="VERBOSE",n[n.INFO=2]="INFO",n[n.WARN=3]="WARN",n[n.ERROR=4]="ERROR",n[n.SILENT=5]="SILENT"})(fe||(fe={}));const n1={debug:fe.DEBUG,verbose:fe.VERBOSE,info:fe.INFO,warn:fe.WARN,error:fe.ERROR,silent:fe.SILENT},xA=fe.INFO,CA={[fe.DEBUG]:"log",[fe.VERBOSE]:"log",[fe.INFO]:"info",[fe.WARN]:"warn",[fe.ERROR]:"error"},RA=(n,e,...t)=>{if(e<n.logLevel)return;const r=new Date().toISOString(),i=CA[e];if(i)console[i](`[${r}]  ${n.name}:`,...t);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class vy{constructor(e){this.name=e,this._logLevel=xA,this._logHandler=RA,this._userLogHandler=null,_y.push(this)}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in fe))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?n1[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,fe.DEBUG,...e),this._logHandler(this,fe.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,fe.VERBOSE,...e),this._logHandler(this,fe.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,fe.INFO,...e),this._logHandler(this,fe.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,fe.WARN,...e),this._logHandler(this,fe.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,fe.ERROR,...e),this._logHandler(this,fe.ERROR,...e)}}function AA(n){_y.forEach(e=>{e.setLogLevel(n)})}function NA(n,e){for(const t of _y){let r=null;e&&e.level&&(r=n1[e.level]),n===null?t.userLogHandler=null:t.userLogHandler=(i,s,...o)=>{const a=o.map(l=>{if(l==null)return null;if(typeof l=="string")return l;if(typeof l=="number"||typeof l=="boolean")return l.toString();if(l instanceof Error)return l.message;try{return JSON.stringify(l)}catch{return null}}).filter(l=>l).join(" ");s>=(r??i.logLevel)&&n({level:fe[s].toLowerCase(),message:a,args:o,type:i.name})}}}const MA=(n,e)=>e.some(t=>n instanceof t);let l0,u0;function OA(){return l0||(l0=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function VA(){return u0||(u0=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const r1=new WeakMap,Am=new WeakMap,i1=new WeakMap,mp=new WeakMap,wy=new WeakMap;function LA(n){const e=new Promise((t,r)=>{const i=()=>{n.removeEventListener("success",s),n.removeEventListener("error",o)},s=()=>{t(_i(n.result)),i()},o=()=>{r(n.error),i()};n.addEventListener("success",s),n.addEventListener("error",o)});return e.then(t=>{t instanceof IDBCursor&&r1.set(t,n)}).catch(()=>{}),wy.set(e,n),e}function FA(n){if(Am.has(n))return;const e=new Promise((t,r)=>{const i=()=>{n.removeEventListener("complete",s),n.removeEventListener("error",o),n.removeEventListener("abort",o)},s=()=>{t(),i()},o=()=>{r(n.error||new DOMException("AbortError","AbortError")),i()};n.addEventListener("complete",s),n.addEventListener("error",o),n.addEventListener("abort",o)});Am.set(n,e)}let Nm={get(n,e,t){if(n instanceof IDBTransaction){if(e==="done")return Am.get(n);if(e==="objectStoreNames")return n.objectStoreNames||i1.get(n);if(e==="store")return t.objectStoreNames[1]?void 0:t.objectStore(t.objectStoreNames[0])}return _i(n[e])},set(n,e,t){return n[e]=t,!0},has(n,e){return n instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in n}};function BA(n){Nm=n(Nm)}function UA(n){return n===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...t){const r=n.call(gp(this),e,...t);return i1.set(r,e.sort?e.sort():[e]),_i(r)}:VA().includes(n)?function(...e){return n.apply(gp(this),e),_i(r1.get(this))}:function(...e){return _i(n.apply(gp(this),e))}}function jA(n){return typeof n=="function"?UA(n):(n instanceof IDBTransaction&&FA(n),MA(n,OA())?new Proxy(n,Nm):n)}function _i(n){if(n instanceof IDBRequest)return LA(n);if(mp.has(n))return mp.get(n);const e=jA(n);return e!==n&&(mp.set(n,e),wy.set(e,n)),e}const gp=n=>wy.get(n);function $A(n,e,{blocked:t,upgrade:r,blocking:i,terminated:s}={}){const o=indexedDB.open(n,e),a=_i(o);return r&&o.addEventListener("upgradeneeded",l=>{r(_i(o.result),l.oldVersion,l.newVersion,_i(o.transaction),l)}),t&&o.addEventListener("blocked",l=>t(l.oldVersion,l.newVersion,l)),a.then(l=>{s&&l.addEventListener("close",()=>s()),i&&l.addEventListener("versionchange",c=>i(c.oldVersion,c.newVersion,c))}).catch(()=>{}),a}const zA=["get","getKey","getAll","getAllKeys","count"],qA=["put","add","delete","clear"],yp=new Map;function c0(n,e){if(!(n instanceof IDBDatabase&&!(e in n)&&typeof e=="string"))return;if(yp.get(e))return yp.get(e);const t=e.replace(/FromIndex$/,""),r=e!==t,i=qA.includes(t);if(!(t in(r?IDBIndex:IDBObjectStore).prototype)||!(i||zA.includes(t)))return;const s=async function(o,...a){const l=this.transaction(o,i?"readwrite":"readonly");let c=l.store;return r&&(c=c.index(a.shift())),(await Promise.all([c[t](...a),i&&l.done]))[0]};return yp.set(e,s),s}BA(n=>({...n,get:(e,t,r)=>c0(e,t)||n.get(e,t,r),has:(e,t)=>!!c0(e,t)||n.has(e,t)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class WA{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(t=>{if(YA(t)){const r=t.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(t=>t).join(" ")}}function YA(n){const e=n.getComponent();return(e==null?void 0:e.type)==="VERSION"}const Bd="@firebase/app",Mm="0.10.5";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ks=new vy("@firebase/app"),HA="@firebase/app-compat",QA="@firebase/analytics-compat",KA="@firebase/analytics",GA="@firebase/app-check-compat",XA="@firebase/app-check",JA="@firebase/auth",ZA="@firebase/auth-compat",eN="@firebase/database",tN="@firebase/database-compat",nN="@firebase/functions",rN="@firebase/functions-compat",iN="@firebase/installations",sN="@firebase/installations-compat",oN="@firebase/messaging",aN="@firebase/messaging-compat",lN="@firebase/performance",uN="@firebase/performance-compat",cN="@firebase/remote-config",dN="@firebase/remote-config-compat",hN="@firebase/storage",fN="@firebase/storage-compat",pN="@firebase/firestore",mN="@firebase/vertexai-preview",gN="@firebase/firestore-compat",yN="firebase",_N="10.12.2";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Si="[DEFAULT]",vN={[Bd]:"fire-core",[HA]:"fire-core-compat",[KA]:"fire-analytics",[QA]:"fire-analytics-compat",[XA]:"fire-app-check",[GA]:"fire-app-check-compat",[JA]:"fire-auth",[ZA]:"fire-auth-compat",[eN]:"fire-rtdb",[tN]:"fire-rtdb-compat",[nN]:"fire-fn",[rN]:"fire-fn-compat",[iN]:"fire-iid",[sN]:"fire-iid-compat",[oN]:"fire-fcm",[aN]:"fire-fcm-compat",[lN]:"fire-perf",[uN]:"fire-perf-compat",[cN]:"fire-rc",[dN]:"fire-rc-compat",[hN]:"fire-gcs",[fN]:"fire-gcs-compat",[pN]:"fire-fst",[gN]:"fire-fst-compat",[mN]:"fire-vertex","fire-js":"fire-js",[yN]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Di=new Map,Qo=new Map,Ko=new Map;function Zl(n,e){try{n.container.addComponent(e)}catch(t){ks.debug(`Component ${e.name} failed to register with FirebaseApp ${n.name}`,t)}}function s1(n,e){n.container.addOrOverwriteComponent(e)}function xs(n){const e=n.name;if(Ko.has(e))return ks.debug(`There were multiple attempts to register component ${e}.`),!1;Ko.set(e,n);for(const t of Di.values())Zl(t,n);for(const t of Qo.values())Zl(t,n);return!0}function Vh(n,e){const t=n.container.getProvider("heartbeat").getImmediate({optional:!0});return t&&t.triggerHeartbeat(),n.container.getProvider(e)}function wN(n,e,t=Si){Vh(n,e).clearInstance(t)}function o1(n){return n.options!==void 0}function EN(n){return n.settings!==void 0}function TN(){Ko.clear()}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const IN={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Dn=new Oh("app","Firebase",IN);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let a1=class{constructor(e,t,r){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},t),this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new Ar("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Dn.create("app-deleted",{appName:this._name})}};/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SN extends a1{constructor(e,t,r,i){const s=t.automaticDataCollectionEnabled!==void 0?t.automaticDataCollectionEnabled:!1,o={name:r,automaticDataCollectionEnabled:s};if(e.apiKey!==void 0)super(e,o,i);else{const a=e;super(a.options,o,i)}this._serverConfig=Object.assign({automaticDataCollectionEnabled:s},t),this._finalizationRegistry=new FinalizationRegistry(()=>{this.automaticCleanup()}),this._refCount=0,this.incRefCount(this._serverConfig.releaseOnDeref),this._serverConfig.releaseOnDeref=void 0,t.releaseOnDeref=void 0,Ln(Bd,Mm,"serverapp")}toJSON(){}get refCount(){return this._refCount}incRefCount(e){this.isDeleted||(this._refCount++,e!==void 0&&this._finalizationRegistry.register(e,this))}decRefCount(){return this.isDeleted?0:--this._refCount}automaticCleanup(){Iy(this)}get settings(){return this.checkDestroyed(),this._serverConfig}checkDestroyed(){if(this.isDeleted)throw Dn.create("server-app-deleted")}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Lh=_N;function Ey(n,e={}){let t=n;typeof e!="object"&&(e={name:e});const r=Object.assign({name:Si,automaticDataCollectionEnabled:!1},e),i=r.name;if(typeof i!="string"||!i)throw Dn.create("bad-app-name",{appName:String(i)});if(t||(t=GS()),!t)throw Dn.create("no-options");const s=Di.get(i);if(s){if(Jl(t,s.options)&&Jl(r,s.config))return s;throw Dn.create("duplicate-app",{appName:i})}const o=new t1(i);for(const l of Ko.values())o.addComponent(l);const a=new a1(t,r,o);return Di.set(i,a),a}function DN(n,e){if(JS())throw Dn.create("invalid-server-app-environment");e.automaticDataCollectionEnabled===void 0&&(e.automaticDataCollectionEnabled=!1);let t;o1(n)?t=n.options:t=n;const r=Object.assign(Object.assign({},e),t);r.releaseOnDeref!==void 0&&delete r.releaseOnDeref;const i=c=>[...c].reduce((d,h)=>Math.imul(31,d)+h.charCodeAt(0)|0,0);if(e.releaseOnDeref!==void 0&&typeof FinalizationRegistry>"u")throw Dn.create("finalization-registry-not-supported",{});const s=""+i(JSON.stringify(r)),o=Qo.get(s);if(o)return o.incRefCount(e.releaseOnDeref),o;const a=new t1(s);for(const c of Ko.values())a.addComponent(c);const l=new SN(t,e,s,a);return Qo.set(s,l),l}function Ty(n=Si){const e=Di.get(n);if(!e&&n===Si&&GS())return Ey();if(!e)throw Dn.create("no-app",{appName:n});return e}function bN(){return Array.from(Di.values())}async function Iy(n){let e=!1;const t=n.name;Di.has(t)?(e=!0,Di.delete(t)):Qo.has(t)&&n.decRefCount()<=0&&(Qo.delete(t),e=!0),e&&(await Promise.all(n.container.getProviders().map(r=>r.delete())),n.isDeleted=!0)}function Ln(n,e,t){var r;let i=(r=vN[n])!==null&&r!==void 0?r:n;t&&(i+=`-${t}`);const s=i.match(/\s|\//),o=e.match(/\s|\//);if(s||o){const a=[`Unable to register library "${i}" with version "${e}":`];s&&a.push(`library name "${i}" contains illegal characters (whitespace or "/")`),s&&o&&a.push("and"),o&&a.push(`version name "${e}" contains illegal characters (whitespace or "/")`),ks.warn(a.join(" "));return}xs(new Ar(`${i}-version`,()=>({library:i,version:e}),"VERSION"))}function l1(n,e){if(n!==null&&typeof n!="function")throw Dn.create("invalid-log-argument");NA(n,e)}function u1(n){AA(n)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const PN="firebase-heartbeat-database",kN=1,eu="firebase-heartbeat-store";let _p=null;function c1(){return _p||(_p=$A(PN,kN,{upgrade:(n,e)=>{switch(e){case 0:try{n.createObjectStore(eu)}catch(t){console.warn(t)}}}}).catch(n=>{throw Dn.create("idb-open",{originalErrorMessage:n.message})})),_p}async function xN(n){try{const t=(await c1()).transaction(eu),r=await t.objectStore(eu).get(d1(n));return await t.done,r}catch(e){if(e instanceof ji)ks.warn(e.message);else{const t=Dn.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});ks.warn(t.message)}}}async function d0(n,e){try{const r=(await c1()).transaction(eu,"readwrite");await r.objectStore(eu).put(e,d1(n)),await r.done}catch(t){if(t instanceof ji)ks.warn(t.message);else{const r=Dn.create("idb-set",{originalErrorMessage:t==null?void 0:t.message});ks.warn(r.message)}}}function d1(n){return`${n.name}!${n.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const CN=1024,RN=30*24*60*60*1e3;class AN{constructor(e){this.container=e,this._heartbeatsCache=null;const t=this.container.getProvider("app").getImmediate();this._storage=new MN(t),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){var e,t;const i=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),s=h0();if(!(((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((t=this._heartbeatsCache)===null||t===void 0?void 0:t.heartbeats)==null))&&!(this._heartbeatsCache.lastSentHeartbeatDate===s||this._heartbeatsCache.heartbeats.some(o=>o.date===s)))return this._heartbeatsCache.heartbeats.push({date:s,agent:i}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(o=>{const a=new Date(o.date).valueOf();return Date.now()-a<=RN}),this._storage.overwrite(this._heartbeatsCache)}async getHeartbeatsHeader(){var e;if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const t=h0(),{heartbeatsToSend:r,unsentEntries:i}=NN(this._heartbeatsCache.heartbeats),s=Vd(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=t,i.length>0?(this._heartbeatsCache.heartbeats=i,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),s}}function h0(){return new Date().toISOString().substring(0,10)}function NN(n,e=CN){const t=[];let r=n.slice();for(const i of n){const s=t.find(o=>o.agent===i.agent);if(s){if(s.dates.push(i.date),f0(t)>e){s.dates.pop();break}}else if(t.push({agent:i.agent,dates:[i.date]}),f0(t)>e){t.pop();break}r=r.slice(1)}return{heartbeatsToSend:t,unsentEntries:r}}class MN{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return e1()?vA().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const t=await xN(this.app);return t!=null&&t.heartbeats?t:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var t;if(await this._canUseIndexedDBPromise){const i=await this.read();return d0(this.app,{lastSentHeartbeatDate:(t=e.lastSentHeartbeatDate)!==null&&t!==void 0?t:i.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var t;if(await this._canUseIndexedDBPromise){const i=await this.read();return d0(this.app,{lastSentHeartbeatDate:(t=e.lastSentHeartbeatDate)!==null&&t!==void 0?t:i.lastSentHeartbeatDate,heartbeats:[...i.heartbeats,...e.heartbeats]})}else return}}function f0(n){return Vd(JSON.stringify({version:2,heartbeats:n})).length}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ON(n){xs(new Ar("platform-logger",e=>new WA(e),"PRIVATE")),xs(new Ar("heartbeat",e=>new AN(e),"PRIVATE")),Ln(Bd,Mm,n),Ln(Bd,Mm,"esm2017"),Ln("fire-js","")}ON("");const VN=Object.freeze(Object.defineProperty({__proto__:null,FirebaseError:ji,SDK_VERSION:Lh,_DEFAULT_ENTRY_NAME:Si,_addComponent:Zl,_addOrOverwriteComponent:s1,_apps:Di,_clearComponents:TN,_components:Ko,_getProvider:Vh,_isFirebaseApp:o1,_isFirebaseServerApp:EN,_registerComponent:xs,_removeServiceInstance:wN,_serverApps:Qo,deleteApp:Iy,getApp:Ty,getApps:bN,initializeApp:Ey,initializeServerApp:DN,onLog:l1,registerVersion:Ln,setLogLevel:u1},Symbol.toStringTag,{value:"Module"}));var p0=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var _s,h1;(function(){var n;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(I,y){function b(){}b.prototype=y.prototype,I.D=y.prototype,I.prototype=new b,I.prototype.constructor=I,I.C=function(k,C,R){for(var P=Array(arguments.length-2),ne=2;ne<arguments.length;ne++)P[ne-2]=arguments[ne];return y.prototype[C].apply(k,P)}}function t(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(r,t),r.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function i(I,y,b){b||(b=0);var k=Array(16);if(typeof y=="string")for(var C=0;16>C;++C)k[C]=y.charCodeAt(b++)|y.charCodeAt(b++)<<8|y.charCodeAt(b++)<<16|y.charCodeAt(b++)<<24;else for(C=0;16>C;++C)k[C]=y[b++]|y[b++]<<8|y[b++]<<16|y[b++]<<24;y=I.g[0],b=I.g[1],C=I.g[2];var R=I.g[3],P=y+(R^b&(C^R))+k[0]+3614090360&4294967295;y=b+(P<<7&4294967295|P>>>25),P=R+(C^y&(b^C))+k[1]+3905402710&4294967295,R=y+(P<<12&4294967295|P>>>20),P=C+(b^R&(y^b))+k[2]+606105819&4294967295,C=R+(P<<17&4294967295|P>>>15),P=b+(y^C&(R^y))+k[3]+3250441966&4294967295,b=C+(P<<22&4294967295|P>>>10),P=y+(R^b&(C^R))+k[4]+4118548399&4294967295,y=b+(P<<7&4294967295|P>>>25),P=R+(C^y&(b^C))+k[5]+1200080426&4294967295,R=y+(P<<12&4294967295|P>>>20),P=C+(b^R&(y^b))+k[6]+2821735955&4294967295,C=R+(P<<17&4294967295|P>>>15),P=b+(y^C&(R^y))+k[7]+4249261313&4294967295,b=C+(P<<22&4294967295|P>>>10),P=y+(R^b&(C^R))+k[8]+1770035416&4294967295,y=b+(P<<7&4294967295|P>>>25),P=R+(C^y&(b^C))+k[9]+2336552879&4294967295,R=y+(P<<12&4294967295|P>>>20),P=C+(b^R&(y^b))+k[10]+4294925233&4294967295,C=R+(P<<17&4294967295|P>>>15),P=b+(y^C&(R^y))+k[11]+2304563134&4294967295,b=C+(P<<22&4294967295|P>>>10),P=y+(R^b&(C^R))+k[12]+1804603682&4294967295,y=b+(P<<7&4294967295|P>>>25),P=R+(C^y&(b^C))+k[13]+4254626195&4294967295,R=y+(P<<12&4294967295|P>>>20),P=C+(b^R&(y^b))+k[14]+2792965006&4294967295,C=R+(P<<17&4294967295|P>>>15),P=b+(y^C&(R^y))+k[15]+1236535329&4294967295,b=C+(P<<22&4294967295|P>>>10),P=y+(C^R&(b^C))+k[1]+4129170786&4294967295,y=b+(P<<5&4294967295|P>>>27),P=R+(b^C&(y^b))+k[6]+3225465664&4294967295,R=y+(P<<9&4294967295|P>>>23),P=C+(y^b&(R^y))+k[11]+643717713&4294967295,C=R+(P<<14&4294967295|P>>>18),P=b+(R^y&(C^R))+k[0]+3921069994&4294967295,b=C+(P<<20&4294967295|P>>>12),P=y+(C^R&(b^C))+k[5]+3593408605&4294967295,y=b+(P<<5&4294967295|P>>>27),P=R+(b^C&(y^b))+k[10]+38016083&4294967295,R=y+(P<<9&4294967295|P>>>23),P=C+(y^b&(R^y))+k[15]+3634488961&4294967295,C=R+(P<<14&4294967295|P>>>18),P=b+(R^y&(C^R))+k[4]+3889429448&4294967295,b=C+(P<<20&4294967295|P>>>12),P=y+(C^R&(b^C))+k[9]+568446438&4294967295,y=b+(P<<5&4294967295|P>>>27),P=R+(b^C&(y^b))+k[14]+3275163606&4294967295,R=y+(P<<9&4294967295|P>>>23),P=C+(y^b&(R^y))+k[3]+4107603335&4294967295,C=R+(P<<14&4294967295|P>>>18),P=b+(R^y&(C^R))+k[8]+1163531501&4294967295,b=C+(P<<20&4294967295|P>>>12),P=y+(C^R&(b^C))+k[13]+2850285829&4294967295,y=b+(P<<5&4294967295|P>>>27),P=R+(b^C&(y^b))+k[2]+4243563512&4294967295,R=y+(P<<9&4294967295|P>>>23),P=C+(y^b&(R^y))+k[7]+1735328473&4294967295,C=R+(P<<14&4294967295|P>>>18),P=b+(R^y&(C^R))+k[12]+2368359562&4294967295,b=C+(P<<20&4294967295|P>>>12),P=y+(b^C^R)+k[5]+4294588738&4294967295,y=b+(P<<4&4294967295|P>>>28),P=R+(y^b^C)+k[8]+2272392833&4294967295,R=y+(P<<11&4294967295|P>>>21),P=C+(R^y^b)+k[11]+1839030562&4294967295,C=R+(P<<16&4294967295|P>>>16),P=b+(C^R^y)+k[14]+4259657740&4294967295,b=C+(P<<23&4294967295|P>>>9),P=y+(b^C^R)+k[1]+2763975236&4294967295,y=b+(P<<4&4294967295|P>>>28),P=R+(y^b^C)+k[4]+1272893353&4294967295,R=y+(P<<11&4294967295|P>>>21),P=C+(R^y^b)+k[7]+4139469664&4294967295,C=R+(P<<16&4294967295|P>>>16),P=b+(C^R^y)+k[10]+3200236656&4294967295,b=C+(P<<23&4294967295|P>>>9),P=y+(b^C^R)+k[13]+681279174&4294967295,y=b+(P<<4&4294967295|P>>>28),P=R+(y^b^C)+k[0]+3936430074&4294967295,R=y+(P<<11&4294967295|P>>>21),P=C+(R^y^b)+k[3]+3572445317&4294967295,C=R+(P<<16&4294967295|P>>>16),P=b+(C^R^y)+k[6]+76029189&4294967295,b=C+(P<<23&4294967295|P>>>9),P=y+(b^C^R)+k[9]+3654602809&4294967295,y=b+(P<<4&4294967295|P>>>28),P=R+(y^b^C)+k[12]+3873151461&4294967295,R=y+(P<<11&4294967295|P>>>21),P=C+(R^y^b)+k[15]+530742520&4294967295,C=R+(P<<16&4294967295|P>>>16),P=b+(C^R^y)+k[2]+3299628645&4294967295,b=C+(P<<23&4294967295|P>>>9),P=y+(C^(b|~R))+k[0]+4096336452&4294967295,y=b+(P<<6&4294967295|P>>>26),P=R+(b^(y|~C))+k[7]+1126891415&4294967295,R=y+(P<<10&4294967295|P>>>22),P=C+(y^(R|~b))+k[14]+2878612391&4294967295,C=R+(P<<15&4294967295|P>>>17),P=b+(R^(C|~y))+k[5]+4237533241&4294967295,b=C+(P<<21&4294967295|P>>>11),P=y+(C^(b|~R))+k[12]+1700485571&4294967295,y=b+(P<<6&4294967295|P>>>26),P=R+(b^(y|~C))+k[3]+2399980690&4294967295,R=y+(P<<10&4294967295|P>>>22),P=C+(y^(R|~b))+k[10]+4293915773&4294967295,C=R+(P<<15&4294967295|P>>>17),P=b+(R^(C|~y))+k[1]+2240044497&4294967295,b=C+(P<<21&4294967295|P>>>11),P=y+(C^(b|~R))+k[8]+1873313359&4294967295,y=b+(P<<6&4294967295|P>>>26),P=R+(b^(y|~C))+k[15]+4264355552&4294967295,R=y+(P<<10&4294967295|P>>>22),P=C+(y^(R|~b))+k[6]+2734768916&4294967295,C=R+(P<<15&4294967295|P>>>17),P=b+(R^(C|~y))+k[13]+1309151649&4294967295,b=C+(P<<21&4294967295|P>>>11),P=y+(C^(b|~R))+k[4]+4149444226&4294967295,y=b+(P<<6&4294967295|P>>>26),P=R+(b^(y|~C))+k[11]+3174756917&4294967295,R=y+(P<<10&4294967295|P>>>22),P=C+(y^(R|~b))+k[2]+718787259&4294967295,C=R+(P<<15&4294967295|P>>>17),P=b+(R^(C|~y))+k[9]+3951481745&4294967295,I.g[0]=I.g[0]+y&4294967295,I.g[1]=I.g[1]+(C+(P<<21&4294967295|P>>>11))&4294967295,I.g[2]=I.g[2]+C&4294967295,I.g[3]=I.g[3]+R&4294967295}r.prototype.u=function(I,y){y===void 0&&(y=I.length);for(var b=y-this.blockSize,k=this.B,C=this.h,R=0;R<y;){if(C==0)for(;R<=b;)i(this,I,R),R+=this.blockSize;if(typeof I=="string"){for(;R<y;)if(k[C++]=I.charCodeAt(R++),C==this.blockSize){i(this,k),C=0;break}}else for(;R<y;)if(k[C++]=I[R++],C==this.blockSize){i(this,k),C=0;break}}this.h=C,this.o+=y},r.prototype.v=function(){var I=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);I[0]=128;for(var y=1;y<I.length-8;++y)I[y]=0;var b=8*this.o;for(y=I.length-8;y<I.length;++y)I[y]=b&255,b/=256;for(this.u(I),I=Array(16),y=b=0;4>y;++y)for(var k=0;32>k;k+=8)I[b++]=this.g[y]>>>k&255;return I};function s(I,y){var b=a;return Object.prototype.hasOwnProperty.call(b,I)?b[I]:b[I]=y(I)}function o(I,y){this.h=y;for(var b=[],k=!0,C=I.length-1;0<=C;C--){var R=I[C]|0;k&&R==y||(b[C]=R,k=!1)}this.g=b}var a={};function l(I){return-128<=I&&128>I?s(I,function(y){return new o([y|0],0>y?-1:0)}):new o([I|0],0>I?-1:0)}function c(I){if(isNaN(I)||!isFinite(I))return h;if(0>I)return D(c(-I));for(var y=[],b=1,k=0;I>=b;k++)y[k]=I/b|0,b*=4294967296;return new o(y,0)}function d(I,y){if(I.length==0)throw Error("number format error: empty string");if(y=y||10,2>y||36<y)throw Error("radix out of range: "+y);if(I.charAt(0)=="-")return D(d(I.substring(1),y));if(0<=I.indexOf("-"))throw Error('number format error: interior "-" character');for(var b=c(Math.pow(y,8)),k=h,C=0;C<I.length;C+=8){var R=Math.min(8,I.length-C),P=parseInt(I.substring(C,C+R),y);8>R?(R=c(Math.pow(y,R)),k=k.j(R).add(c(P))):(k=k.j(b),k=k.add(c(P)))}return k}var h=l(0),p=l(1),g=l(16777216);n=o.prototype,n.m=function(){if(S(this))return-D(this).m();for(var I=0,y=1,b=0;b<this.g.length;b++){var k=this.i(b);I+=(0<=k?k:4294967296+k)*y,y*=4294967296}return I},n.toString=function(I){if(I=I||10,2>I||36<I)throw Error("radix out of range: "+I);if(v(this))return"0";if(S(this))return"-"+D(this).toString(I);for(var y=c(Math.pow(I,6)),b=this,k="";;){var C=x(b,y).g;b=w(b,C.j(y));var R=((0<b.g.length?b.g[0]:b.h)>>>0).toString(I);if(b=C,v(b))return R+k;for(;6>R.length;)R="0"+R;k=R+k}},n.i=function(I){return 0>I?0:I<this.g.length?this.g[I]:this.h};function v(I){if(I.h!=0)return!1;for(var y=0;y<I.g.length;y++)if(I.g[y]!=0)return!1;return!0}function S(I){return I.h==-1}n.l=function(I){return I=w(this,I),S(I)?-1:v(I)?0:1};function D(I){for(var y=I.g.length,b=[],k=0;k<y;k++)b[k]=~I.g[k];return new o(b,~I.h).add(p)}n.abs=function(){return S(this)?D(this):this},n.add=function(I){for(var y=Math.max(this.g.length,I.g.length),b=[],k=0,C=0;C<=y;C++){var R=k+(this.i(C)&65535)+(I.i(C)&65535),P=(R>>>16)+(this.i(C)>>>16)+(I.i(C)>>>16);k=P>>>16,R&=65535,P&=65535,b[C]=P<<16|R}return new o(b,b[b.length-1]&-2147483648?-1:0)};function w(I,y){return I.add(D(y))}n.j=function(I){if(v(this)||v(I))return h;if(S(this))return S(I)?D(this).j(D(I)):D(D(this).j(I));if(S(I))return D(this.j(D(I)));if(0>this.l(g)&&0>I.l(g))return c(this.m()*I.m());for(var y=this.g.length+I.g.length,b=[],k=0;k<2*y;k++)b[k]=0;for(k=0;k<this.g.length;k++)for(var C=0;C<I.g.length;C++){var R=this.i(k)>>>16,P=this.i(k)&65535,ne=I.i(C)>>>16,re=I.i(C)&65535;b[2*k+2*C]+=P*re,_(b,2*k+2*C),b[2*k+2*C+1]+=R*re,_(b,2*k+2*C+1),b[2*k+2*C+1]+=P*ne,_(b,2*k+2*C+1),b[2*k+2*C+2]+=R*ne,_(b,2*k+2*C+2)}for(k=0;k<y;k++)b[k]=b[2*k+1]<<16|b[2*k];for(k=y;k<2*y;k++)b[k]=0;return new o(b,0)};function _(I,y){for(;(I[y]&65535)!=I[y];)I[y+1]+=I[y]>>>16,I[y]&=65535,y++}function E(I,y){this.g=I,this.h=y}function x(I,y){if(v(y))throw Error("division by zero");if(v(I))return new E(h,h);if(S(I))return y=x(D(I),y),new E(D(y.g),D(y.h));if(S(y))return y=x(I,D(y)),new E(D(y.g),y.h);if(30<I.g.length){if(S(I)||S(y))throw Error("slowDivide_ only works with positive integers.");for(var b=p,k=y;0>=k.l(I);)b=A(b),k=A(k);var C=L(b,1),R=L(k,1);for(k=L(k,2),b=L(b,2);!v(k);){var P=R.add(k);0>=P.l(I)&&(C=C.add(b),R=P),k=L(k,1),b=L(b,1)}return y=w(I,C.j(y)),new E(C,y)}for(C=h;0<=I.l(y);){for(b=Math.max(1,Math.floor(I.m()/y.m())),k=Math.ceil(Math.log(b)/Math.LN2),k=48>=k?1:Math.pow(2,k-48),R=c(b),P=R.j(y);S(P)||0<P.l(I);)b-=k,R=c(b),P=R.j(y);v(R)&&(R=p),C=C.add(R),I=w(I,P)}return new E(C,I)}n.A=function(I){return x(this,I).h},n.and=function(I){for(var y=Math.max(this.g.length,I.g.length),b=[],k=0;k<y;k++)b[k]=this.i(k)&I.i(k);return new o(b,this.h&I.h)},n.or=function(I){for(var y=Math.max(this.g.length,I.g.length),b=[],k=0;k<y;k++)b[k]=this.i(k)|I.i(k);return new o(b,this.h|I.h)},n.xor=function(I){for(var y=Math.max(this.g.length,I.g.length),b=[],k=0;k<y;k++)b[k]=this.i(k)^I.i(k);return new o(b,this.h^I.h)};function A(I){for(var y=I.g.length+1,b=[],k=0;k<y;k++)b[k]=I.i(k)<<1|I.i(k-1)>>>31;return new o(b,I.h)}function L(I,y){var b=y>>5;y%=32;for(var k=I.g.length-b,C=[],R=0;R<k;R++)C[R]=0<y?I.i(R+b)>>>y|I.i(R+b+1)<<32-y:I.i(R+b);return new o(C,I.h)}r.prototype.digest=r.prototype.v,r.prototype.reset=r.prototype.s,r.prototype.update=r.prototype.u,h1=r,o.prototype.add=o.prototype.add,o.prototype.multiply=o.prototype.j,o.prototype.modulo=o.prototype.A,o.prototype.compare=o.prototype.l,o.prototype.toNumber=o.prototype.m,o.prototype.toString=o.prototype.toString,o.prototype.getBits=o.prototype.i,o.fromNumber=c,o.fromString=d,_s=o}).apply(typeof p0<"u"?p0:typeof self<"u"?self:typeof window<"u"?window:{});var wc=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var f1,p1,cl,m1,Qc,Om,g1,y1,_1;(function(){var n,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(u,f,m){return u==Array.prototype||u==Object.prototype||(u[f]=m.value),u};function t(u){u=[typeof globalThis=="object"&&globalThis,u,typeof window=="object"&&window,typeof self=="object"&&self,typeof wc=="object"&&wc];for(var f=0;f<u.length;++f){var m=u[f];if(m&&m.Math==Math)return m}throw Error("Cannot find global object")}var r=t(this);function i(u,f){if(f)e:{var m=r;u=u.split(".");for(var T=0;T<u.length-1;T++){var M=u[T];if(!(M in m))break e;m=m[M]}u=u[u.length-1],T=m[u],f=f(T),f!=T&&f!=null&&e(m,u,{configurable:!0,writable:!0,value:f})}}function s(u,f){u instanceof String&&(u+="");var m=0,T=!1,M={next:function(){if(!T&&m<u.length){var B=m++;return{value:f(B,u[B]),done:!1}}return T=!0,{done:!0,value:void 0}}};return M[Symbol.iterator]=function(){return M},M}i("Array.prototype.values",function(u){return u||function(){return s(this,function(f,m){return m})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var o=o||{},a=this||self;function l(u){var f=typeof u;return f=f!="object"?f:u?Array.isArray(u)?"array":f:"null",f=="array"||f=="object"&&typeof u.length=="number"}function c(u){var f=typeof u;return f=="object"&&u!=null||f=="function"}function d(u,f,m){return u.call.apply(u.bind,arguments)}function h(u,f,m){if(!u)throw Error();if(2<arguments.length){var T=Array.prototype.slice.call(arguments,2);return function(){var M=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(M,T),u.apply(f,M)}}return function(){return u.apply(f,arguments)}}function p(u,f,m){return p=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?d:h,p.apply(null,arguments)}function g(u,f){var m=Array.prototype.slice.call(arguments,1);return function(){var T=m.slice();return T.push.apply(T,arguments),u.apply(this,T)}}function v(u,f){function m(){}m.prototype=f.prototype,u.aa=f.prototype,u.prototype=new m,u.prototype.constructor=u,u.Qb=function(T,M,B){for(var W=Array(arguments.length-2),xe=2;xe<arguments.length;xe++)W[xe-2]=arguments[xe];return f.prototype[M].apply(T,W)}}function S(u){const f=u.length;if(0<f){const m=Array(f);for(let T=0;T<f;T++)m[T]=u[T];return m}return[]}function D(u,f){for(let m=1;m<arguments.length;m++){const T=arguments[m];if(l(T)){const M=u.length||0,B=T.length||0;u.length=M+B;for(let W=0;W<B;W++)u[M+W]=T[W]}else u.push(T)}}class w{constructor(f,m){this.i=f,this.j=m,this.h=0,this.g=null}get(){let f;return 0<this.h?(this.h--,f=this.g,this.g=f.next,f.next=null):f=this.i(),f}}function _(u){return/^[\s\xa0]*$/.test(u)}function E(){var u=a.navigator;return u&&(u=u.userAgent)?u:""}function x(u){return x[" "](u),u}x[" "]=function(){};var A=E().indexOf("Gecko")!=-1&&!(E().toLowerCase().indexOf("webkit")!=-1&&E().indexOf("Edge")==-1)&&!(E().indexOf("Trident")!=-1||E().indexOf("MSIE")!=-1)&&E().indexOf("Edge")==-1;function L(u,f,m){for(const T in u)f.call(m,u[T],T,u)}function I(u,f){for(const m in u)f.call(void 0,u[m],m,u)}function y(u){const f={};for(const m in u)f[m]=u[m];return f}const b="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function k(u,f){let m,T;for(let M=1;M<arguments.length;M++){T=arguments[M];for(m in T)u[m]=T[m];for(let B=0;B<b.length;B++)m=b[B],Object.prototype.hasOwnProperty.call(T,m)&&(u[m]=T[m])}}function C(u){var f=1;u=u.split(":");const m=[];for(;0<f&&u.length;)m.push(u.shift()),f--;return u.length&&m.push(u.join(":")),m}function R(u){a.setTimeout(()=>{throw u},0)}function P(){var u=Q;let f=null;return u.g&&(f=u.g,u.g=u.g.next,u.g||(u.h=null),f.next=null),f}class ne{constructor(){this.h=this.g=null}add(f,m){const T=re.get();T.set(f,m),this.h?this.h.next=T:this.g=T,this.h=T}}var re=new w(()=>new le,u=>u.reset());class le{constructor(){this.next=this.g=this.h=null}set(f,m){this.h=f,this.g=m,this.next=null}reset(){this.next=this.g=this.h=null}}let ie,q=!1,Q=new ne,se=()=>{const u=a.Promise.resolve(void 0);ie=()=>{u.then($e)}};var $e=()=>{for(var u;u=P();){try{u.h.call(u.g)}catch(m){R(m)}var f=re;f.j(u),100>f.h&&(f.h++,u.next=f.g,f.g=u)}q=!1};function ke(){this.s=this.s,this.C=this.C}ke.prototype.s=!1,ke.prototype.ma=function(){this.s||(this.s=!0,this.N())},ke.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function tt(u,f){this.type=u,this.g=this.target=f,this.defaultPrevented=!1}tt.prototype.h=function(){this.defaultPrevented=!0};var cr=function(){if(!a.addEventListener||!Object.defineProperty)return!1;var u=!1,f=Object.defineProperty({},"passive",{get:function(){u=!0}});try{const m=()=>{};a.addEventListener("test",m,f),a.removeEventListener("test",m,f)}catch{}return u}();function dr(u,f){if(tt.call(this,u?u.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,u){var m=this.type=u.type,T=u.changedTouches&&u.changedTouches.length?u.changedTouches[0]:null;if(this.target=u.target||u.srcElement,this.g=f,f=u.relatedTarget){if(A){e:{try{x(f.nodeName);var M=!0;break e}catch{}M=!1}M||(f=null)}}else m=="mouseover"?f=u.fromElement:m=="mouseout"&&(f=u.toElement);this.relatedTarget=f,T?(this.clientX=T.clientX!==void 0?T.clientX:T.pageX,this.clientY=T.clientY!==void 0?T.clientY:T.pageY,this.screenX=T.screenX||0,this.screenY=T.screenY||0):(this.clientX=u.clientX!==void 0?u.clientX:u.pageX,this.clientY=u.clientY!==void 0?u.clientY:u.pageY,this.screenX=u.screenX||0,this.screenY=u.screenY||0),this.button=u.button,this.key=u.key||"",this.ctrlKey=u.ctrlKey,this.altKey=u.altKey,this.shiftKey=u.shiftKey,this.metaKey=u.metaKey,this.pointerId=u.pointerId||0,this.pointerType=typeof u.pointerType=="string"?u.pointerType:hr[u.pointerType]||"",this.state=u.state,this.i=u,u.defaultPrevented&&dr.aa.h.call(this)}}v(dr,tt);var hr={2:"touch",3:"pen",4:"mouse"};dr.prototype.h=function(){dr.aa.h.call(this);var u=this.i;u.preventDefault?u.preventDefault():u.returnValue=!1};var fr="closure_listenable_"+(1e6*Math.random()|0),ZP=0;function ek(u,f,m,T,M){this.listener=u,this.proxy=null,this.src=f,this.type=m,this.capture=!!T,this.ha=M,this.key=++ZP,this.da=this.fa=!1}function Uu(u){u.da=!0,u.listener=null,u.proxy=null,u.src=null,u.ha=null}function ju(u){this.src=u,this.g={},this.h=0}ju.prototype.add=function(u,f,m,T,M){var B=u.toString();u=this.g[B],u||(u=this.g[B]=[],this.h++);var W=vf(u,f,T,M);return-1<W?(f=u[W],m||(f.fa=!1)):(f=new ek(f,this.src,B,!!T,M),f.fa=m,u.push(f)),f};function _f(u,f){var m=f.type;if(m in u.g){var T=u.g[m],M=Array.prototype.indexOf.call(T,f,void 0),B;(B=0<=M)&&Array.prototype.splice.call(T,M,1),B&&(Uu(f),u.g[m].length==0&&(delete u.g[m],u.h--))}}function vf(u,f,m,T){for(var M=0;M<u.length;++M){var B=u[M];if(!B.da&&B.listener==f&&B.capture==!!m&&B.ha==T)return M}return-1}var wf="closure_lm_"+(1e6*Math.random()|0),Ef={};function W_(u,f,m,T,M){if(Array.isArray(f)){for(var B=0;B<f.length;B++)W_(u,f[B],m,T,M);return null}return m=Q_(m),u&&u[fr]?u.K(f,m,c(T)?!!T.capture:!!T,M):tk(u,f,m,!1,T,M)}function tk(u,f,m,T,M,B){if(!f)throw Error("Invalid event type");var W=c(M)?!!M.capture:!!M,xe=If(u);if(xe||(u[wf]=xe=new ju(u)),m=xe.add(f,m,T,W,B),m.proxy)return m;if(T=nk(),m.proxy=T,T.src=u,T.listener=m,u.addEventListener)cr||(M=W),M===void 0&&(M=!1),u.addEventListener(f.toString(),T,M);else if(u.attachEvent)u.attachEvent(H_(f.toString()),T);else if(u.addListener&&u.removeListener)u.addListener(T);else throw Error("addEventListener and attachEvent are unavailable.");return m}function nk(){function u(m){return f.call(u.src,u.listener,m)}const f=rk;return u}function Y_(u,f,m,T,M){if(Array.isArray(f))for(var B=0;B<f.length;B++)Y_(u,f[B],m,T,M);else T=c(T)?!!T.capture:!!T,m=Q_(m),u&&u[fr]?(u=u.i,f=String(f).toString(),f in u.g&&(B=u.g[f],m=vf(B,m,T,M),-1<m&&(Uu(B[m]),Array.prototype.splice.call(B,m,1),B.length==0&&(delete u.g[f],u.h--)))):u&&(u=If(u))&&(f=u.g[f.toString()],u=-1,f&&(u=vf(f,m,T,M)),(m=-1<u?f[u]:null)&&Tf(m))}function Tf(u){if(typeof u!="number"&&u&&!u.da){var f=u.src;if(f&&f[fr])_f(f.i,u);else{var m=u.type,T=u.proxy;f.removeEventListener?f.removeEventListener(m,T,u.capture):f.detachEvent?f.detachEvent(H_(m),T):f.addListener&&f.removeListener&&f.removeListener(T),(m=If(f))?(_f(m,u),m.h==0&&(m.src=null,f[wf]=null)):Uu(u)}}}function H_(u){return u in Ef?Ef[u]:Ef[u]="on"+u}function rk(u,f){if(u.da)u=!0;else{f=new dr(f,this);var m=u.listener,T=u.ha||u.src;u.fa&&Tf(u),u=m.call(T,f)}return u}function If(u){return u=u[wf],u instanceof ju?u:null}var Sf="__closure_events_fn_"+(1e9*Math.random()>>>0);function Q_(u){return typeof u=="function"?u:(u[Sf]||(u[Sf]=function(f){return u.handleEvent(f)}),u[Sf])}function Pt(){ke.call(this),this.i=new ju(this),this.M=this,this.F=null}v(Pt,ke),Pt.prototype[fr]=!0,Pt.prototype.removeEventListener=function(u,f,m,T){Y_(this,u,f,m,T)};function Vt(u,f){var m,T=u.F;if(T)for(m=[];T;T=T.F)m.push(T);if(u=u.M,T=f.type||f,typeof f=="string")f=new tt(f,u);else if(f instanceof tt)f.target=f.target||u;else{var M=f;f=new tt(T,u),k(f,M)}if(M=!0,m)for(var B=m.length-1;0<=B;B--){var W=f.g=m[B];M=$u(W,T,!0,f)&&M}if(W=f.g=u,M=$u(W,T,!0,f)&&M,M=$u(W,T,!1,f)&&M,m)for(B=0;B<m.length;B++)W=f.g=m[B],M=$u(W,T,!1,f)&&M}Pt.prototype.N=function(){if(Pt.aa.N.call(this),this.i){var u=this.i,f;for(f in u.g){for(var m=u.g[f],T=0;T<m.length;T++)Uu(m[T]);delete u.g[f],u.h--}}this.F=null},Pt.prototype.K=function(u,f,m,T){return this.i.add(String(u),f,!1,m,T)},Pt.prototype.L=function(u,f,m,T){return this.i.add(String(u),f,!0,m,T)};function $u(u,f,m,T){if(f=u.i.g[String(f)],!f)return!0;f=f.concat();for(var M=!0,B=0;B<f.length;++B){var W=f[B];if(W&&!W.da&&W.capture==m){var xe=W.listener,Et=W.ha||W.src;W.fa&&_f(u.i,W),M=xe.call(Et,T)!==!1&&M}}return M&&!T.defaultPrevented}function K_(u,f,m){if(typeof u=="function")m&&(u=p(u,m));else if(u&&typeof u.handleEvent=="function")u=p(u.handleEvent,u);else throw Error("Invalid listener argument");return 2147483647<Number(f)?-1:a.setTimeout(u,f||0)}function G_(u){u.g=K_(()=>{u.g=null,u.i&&(u.i=!1,G_(u))},u.l);const f=u.h;u.h=null,u.m.apply(null,f)}class ik extends ke{constructor(f,m){super(),this.m=f,this.l=m,this.h=null,this.i=!1,this.g=null}j(f){this.h=arguments,this.g?this.i=!0:G_(this)}N(){super.N(),this.g&&(a.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Ca(u){ke.call(this),this.h=u,this.g={}}v(Ca,ke);var X_=[];function J_(u){L(u.g,function(f,m){this.g.hasOwnProperty(m)&&Tf(f)},u),u.g={}}Ca.prototype.N=function(){Ca.aa.N.call(this),J_(this)},Ca.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Df=a.JSON.stringify,sk=a.JSON.parse,ok=class{stringify(u){return a.JSON.stringify(u,void 0)}parse(u){return a.JSON.parse(u,void 0)}};function bf(){}bf.prototype.h=null;function Z_(u){return u.h||(u.h=u.i())}function ev(){}var Ra={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function Pf(){tt.call(this,"d")}v(Pf,tt);function kf(){tt.call(this,"c")}v(kf,tt);var Qi={},tv=null;function zu(){return tv=tv||new Pt}Qi.La="serverreachability";function nv(u){tt.call(this,Qi.La,u)}v(nv,tt);function Aa(u){const f=zu();Vt(f,new nv(f))}Qi.STAT_EVENT="statevent";function rv(u,f){tt.call(this,Qi.STAT_EVENT,u),this.stat=f}v(rv,tt);function Lt(u){const f=zu();Vt(f,new rv(f,u))}Qi.Ma="timingevent";function iv(u,f){tt.call(this,Qi.Ma,u),this.size=f}v(iv,tt);function Na(u,f){if(typeof u!="function")throw Error("Fn must not be null and must be a function");return a.setTimeout(function(){u()},f)}function Ma(){this.g=!0}Ma.prototype.xa=function(){this.g=!1};function ak(u,f,m,T,M,B){u.info(function(){if(u.g)if(B)for(var W="",xe=B.split("&"),Et=0;Et<xe.length;Et++){var ve=xe[Et].split("=");if(1<ve.length){var kt=ve[0];ve=ve[1];var xt=kt.split("_");W=2<=xt.length&&xt[1]=="type"?W+(kt+"="+ve+"&"):W+(kt+"=redacted&")}}else W=null;else W=B;return"XMLHTTP REQ ("+T+") [attempt "+M+"]: "+f+`
`+m+`
`+W})}function lk(u,f,m,T,M,B,W){u.info(function(){return"XMLHTTP RESP ("+T+") [ attempt "+M+"]: "+f+`
`+m+`
`+B+" "+W})}function Js(u,f,m,T){u.info(function(){return"XMLHTTP TEXT ("+f+"): "+ck(u,m)+(T?" "+T:"")})}function uk(u,f){u.info(function(){return"TIMEOUT: "+f})}Ma.prototype.info=function(){};function ck(u,f){if(!u.g)return f;if(!f)return null;try{var m=JSON.parse(f);if(m){for(u=0;u<m.length;u++)if(Array.isArray(m[u])){var T=m[u];if(!(2>T.length)){var M=T[1];if(Array.isArray(M)&&!(1>M.length)){var B=M[0];if(B!="noop"&&B!="stop"&&B!="close")for(var W=1;W<M.length;W++)M[W]=""}}}}return Df(m)}catch{return f}}var qu={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},sv={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},xf;function Wu(){}v(Wu,bf),Wu.prototype.g=function(){return new XMLHttpRequest},Wu.prototype.i=function(){return{}},xf=new Wu;function zr(u,f,m,T){this.j=u,this.i=f,this.l=m,this.R=T||1,this.U=new Ca(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new ov}function ov(){this.i=null,this.g="",this.h=!1}var av={},Cf={};function Rf(u,f,m){u.L=1,u.v=Ku(pr(f)),u.m=m,u.P=!0,lv(u,null)}function lv(u,f){u.F=Date.now(),Yu(u),u.A=pr(u.v);var m=u.A,T=u.R;Array.isArray(T)||(T=[String(T)]),Tv(m.i,"t",T),u.C=0,m=u.j.J,u.h=new ov,u.g=Uv(u.j,m?f:null,!u.m),0<u.O&&(u.M=new ik(p(u.Y,u,u.g),u.O)),f=u.U,m=u.g,T=u.ca;var M="readystatechange";Array.isArray(M)||(M&&(X_[0]=M.toString()),M=X_);for(var B=0;B<M.length;B++){var W=W_(m,M[B],T||f.handleEvent,!1,f.h||f);if(!W)break;f.g[W.key]=W}f=u.H?y(u.H):{},u.m?(u.u||(u.u="POST"),f["Content-Type"]="application/x-www-form-urlencoded",u.g.ea(u.A,u.u,u.m,f)):(u.u="GET",u.g.ea(u.A,u.u,null,f)),Aa(),ak(u.i,u.u,u.A,u.l,u.R,u.m)}zr.prototype.ca=function(u){u=u.target;const f=this.M;f&&mr(u)==3?f.j():this.Y(u)},zr.prototype.Y=function(u){try{if(u==this.g)e:{const xt=mr(this.g);var f=this.g.Ba();const to=this.g.Z();if(!(3>xt)&&(xt!=3||this.g&&(this.h.h||this.g.oa()||xv(this.g)))){this.J||xt!=4||f==7||(f==8||0>=to?Aa(3):Aa(2)),Af(this);var m=this.g.Z();this.X=m;t:if(uv(this)){var T=xv(this.g);u="";var M=T.length,B=mr(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){Ki(this),Oa(this);var W="";break t}this.h.i=new a.TextDecoder}for(f=0;f<M;f++)this.h.h=!0,u+=this.h.i.decode(T[f],{stream:!(B&&f==M-1)});T.length=0,this.h.g+=u,this.C=0,W=this.h.g}else W=this.g.oa();if(this.o=m==200,lk(this.i,this.u,this.A,this.l,this.R,xt,m),this.o){if(this.T&&!this.K){t:{if(this.g){var xe,Et=this.g;if((xe=Et.g?Et.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!_(xe)){var ve=xe;break t}}ve=null}if(m=ve)Js(this.i,this.l,m,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,Nf(this,m);else{this.o=!1,this.s=3,Lt(12),Ki(this),Oa(this);break e}}if(this.P){m=!0;let xn;for(;!this.J&&this.C<W.length;)if(xn=dk(this,W),xn==Cf){xt==4&&(this.s=4,Lt(14),m=!1),Js(this.i,this.l,null,"[Incomplete Response]");break}else if(xn==av){this.s=4,Lt(15),Js(this.i,this.l,W,"[Invalid Chunk]"),m=!1;break}else Js(this.i,this.l,xn,null),Nf(this,xn);if(uv(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),xt!=4||W.length!=0||this.h.h||(this.s=1,Lt(16),m=!1),this.o=this.o&&m,!m)Js(this.i,this.l,W,"[Invalid Chunked Response]"),Ki(this),Oa(this);else if(0<W.length&&!this.W){this.W=!0;var kt=this.j;kt.g==this&&kt.ba&&!kt.M&&(kt.j.info("Great, no buffering proxy detected. Bytes received: "+W.length),Bf(kt),kt.M=!0,Lt(11))}}else Js(this.i,this.l,W,null),Nf(this,W);xt==4&&Ki(this),this.o&&!this.J&&(xt==4?Vv(this.j,this):(this.o=!1,Yu(this)))}else kk(this.g),m==400&&0<W.indexOf("Unknown SID")?(this.s=3,Lt(12)):(this.s=0,Lt(13)),Ki(this),Oa(this)}}}catch{}finally{}};function uv(u){return u.g?u.u=="GET"&&u.L!=2&&u.j.Ca:!1}function dk(u,f){var m=u.C,T=f.indexOf(`
`,m);return T==-1?Cf:(m=Number(f.substring(m,T)),isNaN(m)?av:(T+=1,T+m>f.length?Cf:(f=f.slice(T,T+m),u.C=T+m,f)))}zr.prototype.cancel=function(){this.J=!0,Ki(this)};function Yu(u){u.S=Date.now()+u.I,cv(u,u.I)}function cv(u,f){if(u.B!=null)throw Error("WatchDog timer not null");u.B=Na(p(u.ba,u),f)}function Af(u){u.B&&(a.clearTimeout(u.B),u.B=null)}zr.prototype.ba=function(){this.B=null;const u=Date.now();0<=u-this.S?(uk(this.i,this.A),this.L!=2&&(Aa(),Lt(17)),Ki(this),this.s=2,Oa(this)):cv(this,this.S-u)};function Oa(u){u.j.G==0||u.J||Vv(u.j,u)}function Ki(u){Af(u);var f=u.M;f&&typeof f.ma=="function"&&f.ma(),u.M=null,J_(u.U),u.g&&(f=u.g,u.g=null,f.abort(),f.ma())}function Nf(u,f){try{var m=u.j;if(m.G!=0&&(m.g==u||Mf(m.h,u))){if(!u.K&&Mf(m.h,u)&&m.G==3){try{var T=m.Da.g.parse(f)}catch{T=null}if(Array.isArray(T)&&T.length==3){var M=T;if(M[0]==0){e:if(!m.u){if(m.g)if(m.g.F+3e3<u.F)ec(m),Ju(m);else break e;Ff(m),Lt(18)}}else m.za=M[1],0<m.za-m.T&&37500>M[2]&&m.F&&m.v==0&&!m.C&&(m.C=Na(p(m.Za,m),6e3));if(1>=fv(m.h)&&m.ca){try{m.ca()}catch{}m.ca=void 0}}else Xi(m,11)}else if((u.K||m.g==u)&&ec(m),!_(f))for(M=m.Da.g.parse(f),f=0;f<M.length;f++){let ve=M[f];if(m.T=ve[0],ve=ve[1],m.G==2)if(ve[0]=="c"){m.K=ve[1],m.ia=ve[2];const kt=ve[3];kt!=null&&(m.la=kt,m.j.info("VER="+m.la));const xt=ve[4];xt!=null&&(m.Aa=xt,m.j.info("SVER="+m.Aa));const to=ve[5];to!=null&&typeof to=="number"&&0<to&&(T=1.5*to,m.L=T,m.j.info("backChannelRequestTimeoutMs_="+T)),T=m;const xn=u.g;if(xn){const nc=xn.g?xn.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(nc){var B=T.h;B.g||nc.indexOf("spdy")==-1&&nc.indexOf("quic")==-1&&nc.indexOf("h2")==-1||(B.j=B.l,B.g=new Set,B.h&&(Of(B,B.h),B.h=null))}if(T.D){const Uf=xn.g?xn.g.getResponseHeader("X-HTTP-Session-Id"):null;Uf&&(T.ya=Uf,Ae(T.I,T.D,Uf))}}m.G=3,m.l&&m.l.ua(),m.ba&&(m.R=Date.now()-u.F,m.j.info("Handshake RTT: "+m.R+"ms")),T=m;var W=u;if(T.qa=Bv(T,T.J?T.ia:null,T.W),W.K){pv(T.h,W);var xe=W,Et=T.L;Et&&(xe.I=Et),xe.B&&(Af(xe),Yu(xe)),T.g=W}else Mv(T);0<m.i.length&&Zu(m)}else ve[0]!="stop"&&ve[0]!="close"||Xi(m,7);else m.G==3&&(ve[0]=="stop"||ve[0]=="close"?ve[0]=="stop"?Xi(m,7):Lf(m):ve[0]!="noop"&&m.l&&m.l.ta(ve),m.v=0)}}Aa(4)}catch{}}var hk=class{constructor(u,f){this.g=u,this.map=f}};function dv(u){this.l=u||10,a.PerformanceNavigationTiming?(u=a.performance.getEntriesByType("navigation"),u=0<u.length&&(u[0].nextHopProtocol=="hq"||u[0].nextHopProtocol=="h2")):u=!!(a.chrome&&a.chrome.loadTimes&&a.chrome.loadTimes()&&a.chrome.loadTimes().wasFetchedViaSpdy),this.j=u?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function hv(u){return u.h?!0:u.g?u.g.size>=u.j:!1}function fv(u){return u.h?1:u.g?u.g.size:0}function Mf(u,f){return u.h?u.h==f:u.g?u.g.has(f):!1}function Of(u,f){u.g?u.g.add(f):u.h=f}function pv(u,f){u.h&&u.h==f?u.h=null:u.g&&u.g.has(f)&&u.g.delete(f)}dv.prototype.cancel=function(){if(this.i=mv(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const u of this.g.values())u.cancel();this.g.clear()}};function mv(u){if(u.h!=null)return u.i.concat(u.h.D);if(u.g!=null&&u.g.size!==0){let f=u.i;for(const m of u.g.values())f=f.concat(m.D);return f}return S(u.i)}function fk(u){if(u.V&&typeof u.V=="function")return u.V();if(typeof Map<"u"&&u instanceof Map||typeof Set<"u"&&u instanceof Set)return Array.from(u.values());if(typeof u=="string")return u.split("");if(l(u)){for(var f=[],m=u.length,T=0;T<m;T++)f.push(u[T]);return f}f=[],m=0;for(T in u)f[m++]=u[T];return f}function pk(u){if(u.na&&typeof u.na=="function")return u.na();if(!u.V||typeof u.V!="function"){if(typeof Map<"u"&&u instanceof Map)return Array.from(u.keys());if(!(typeof Set<"u"&&u instanceof Set)){if(l(u)||typeof u=="string"){var f=[];u=u.length;for(var m=0;m<u;m++)f.push(m);return f}f=[],m=0;for(const T in u)f[m++]=T;return f}}}function gv(u,f){if(u.forEach&&typeof u.forEach=="function")u.forEach(f,void 0);else if(l(u)||typeof u=="string")Array.prototype.forEach.call(u,f,void 0);else for(var m=pk(u),T=fk(u),M=T.length,B=0;B<M;B++)f.call(void 0,T[B],m&&m[B],u)}var yv=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function mk(u,f){if(u){u=u.split("&");for(var m=0;m<u.length;m++){var T=u[m].indexOf("="),M=null;if(0<=T){var B=u[m].substring(0,T);M=u[m].substring(T+1)}else B=u[m];f(B,M?decodeURIComponent(M.replace(/\+/g," ")):"")}}}function Gi(u){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,u instanceof Gi){this.h=u.h,Hu(this,u.j),this.o=u.o,this.g=u.g,Qu(this,u.s),this.l=u.l;var f=u.i,m=new Fa;m.i=f.i,f.g&&(m.g=new Map(f.g),m.h=f.h),_v(this,m),this.m=u.m}else u&&(f=String(u).match(yv))?(this.h=!1,Hu(this,f[1]||"",!0),this.o=Va(f[2]||""),this.g=Va(f[3]||"",!0),Qu(this,f[4]),this.l=Va(f[5]||"",!0),_v(this,f[6]||"",!0),this.m=Va(f[7]||"")):(this.h=!1,this.i=new Fa(null,this.h))}Gi.prototype.toString=function(){var u=[],f=this.j;f&&u.push(La(f,vv,!0),":");var m=this.g;return(m||f=="file")&&(u.push("//"),(f=this.o)&&u.push(La(f,vv,!0),"@"),u.push(encodeURIComponent(String(m)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),m=this.s,m!=null&&u.push(":",String(m))),(m=this.l)&&(this.g&&m.charAt(0)!="/"&&u.push("/"),u.push(La(m,m.charAt(0)=="/"?_k:yk,!0))),(m=this.i.toString())&&u.push("?",m),(m=this.m)&&u.push("#",La(m,wk)),u.join("")};function pr(u){return new Gi(u)}function Hu(u,f,m){u.j=m?Va(f,!0):f,u.j&&(u.j=u.j.replace(/:$/,""))}function Qu(u,f){if(f){if(f=Number(f),isNaN(f)||0>f)throw Error("Bad port number "+f);u.s=f}else u.s=null}function _v(u,f,m){f instanceof Fa?(u.i=f,Ek(u.i,u.h)):(m||(f=La(f,vk)),u.i=new Fa(f,u.h))}function Ae(u,f,m){u.i.set(f,m)}function Ku(u){return Ae(u,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),u}function Va(u,f){return u?f?decodeURI(u.replace(/%25/g,"%2525")):decodeURIComponent(u):""}function La(u,f,m){return typeof u=="string"?(u=encodeURI(u).replace(f,gk),m&&(u=u.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),u):null}function gk(u){return u=u.charCodeAt(0),"%"+(u>>4&15).toString(16)+(u&15).toString(16)}var vv=/[#\/\?@]/g,yk=/[#\?:]/g,_k=/[#\?]/g,vk=/[#\?@]/g,wk=/#/g;function Fa(u,f){this.h=this.g=null,this.i=u||null,this.j=!!f}function qr(u){u.g||(u.g=new Map,u.h=0,u.i&&mk(u.i,function(f,m){u.add(decodeURIComponent(f.replace(/\+/g," ")),m)}))}n=Fa.prototype,n.add=function(u,f){qr(this),this.i=null,u=Zs(this,u);var m=this.g.get(u);return m||this.g.set(u,m=[]),m.push(f),this.h+=1,this};function wv(u,f){qr(u),f=Zs(u,f),u.g.has(f)&&(u.i=null,u.h-=u.g.get(f).length,u.g.delete(f))}function Ev(u,f){return qr(u),f=Zs(u,f),u.g.has(f)}n.forEach=function(u,f){qr(this),this.g.forEach(function(m,T){m.forEach(function(M){u.call(f,M,T,this)},this)},this)},n.na=function(){qr(this);const u=Array.from(this.g.values()),f=Array.from(this.g.keys()),m=[];for(let T=0;T<f.length;T++){const M=u[T];for(let B=0;B<M.length;B++)m.push(f[T])}return m},n.V=function(u){qr(this);let f=[];if(typeof u=="string")Ev(this,u)&&(f=f.concat(this.g.get(Zs(this,u))));else{u=Array.from(this.g.values());for(let m=0;m<u.length;m++)f=f.concat(u[m])}return f},n.set=function(u,f){return qr(this),this.i=null,u=Zs(this,u),Ev(this,u)&&(this.h-=this.g.get(u).length),this.g.set(u,[f]),this.h+=1,this},n.get=function(u,f){return u?(u=this.V(u),0<u.length?String(u[0]):f):f};function Tv(u,f,m){wv(u,f),0<m.length&&(u.i=null,u.g.set(Zs(u,f),S(m)),u.h+=m.length)}n.toString=function(){if(this.i)return this.i;if(!this.g)return"";const u=[],f=Array.from(this.g.keys());for(var m=0;m<f.length;m++){var T=f[m];const B=encodeURIComponent(String(T)),W=this.V(T);for(T=0;T<W.length;T++){var M=B;W[T]!==""&&(M+="="+encodeURIComponent(String(W[T]))),u.push(M)}}return this.i=u.join("&")};function Zs(u,f){return f=String(f),u.j&&(f=f.toLowerCase()),f}function Ek(u,f){f&&!u.j&&(qr(u),u.i=null,u.g.forEach(function(m,T){var M=T.toLowerCase();T!=M&&(wv(this,T),Tv(this,M,m))},u)),u.j=f}function Tk(u,f){const m=new Ma;if(a.Image){const T=new Image;T.onload=g(Wr,m,"TestLoadImage: loaded",!0,f,T),T.onerror=g(Wr,m,"TestLoadImage: error",!1,f,T),T.onabort=g(Wr,m,"TestLoadImage: abort",!1,f,T),T.ontimeout=g(Wr,m,"TestLoadImage: timeout",!1,f,T),a.setTimeout(function(){T.ontimeout&&T.ontimeout()},1e4),T.src=u}else f(!1)}function Ik(u,f){const m=new Ma,T=new AbortController,M=setTimeout(()=>{T.abort(),Wr(m,"TestPingServer: timeout",!1,f)},1e4);fetch(u,{signal:T.signal}).then(B=>{clearTimeout(M),B.ok?Wr(m,"TestPingServer: ok",!0,f):Wr(m,"TestPingServer: server error",!1,f)}).catch(()=>{clearTimeout(M),Wr(m,"TestPingServer: error",!1,f)})}function Wr(u,f,m,T,M){try{M&&(M.onload=null,M.onerror=null,M.onabort=null,M.ontimeout=null),T(m)}catch{}}function Sk(){this.g=new ok}function Dk(u,f,m){const T=m||"";try{gv(u,function(M,B){let W=M;c(M)&&(W=Df(M)),f.push(T+B+"="+encodeURIComponent(W))})}catch(M){throw f.push(T+"type="+encodeURIComponent("_badmap")),M}}function Ba(u){this.l=u.Ub||null,this.j=u.eb||!1}v(Ba,bf),Ba.prototype.g=function(){return new Gu(this.l,this.j)},Ba.prototype.i=function(u){return function(){return u}}({});function Gu(u,f){Pt.call(this),this.D=u,this.o=f,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}v(Gu,Pt),n=Gu.prototype,n.open=function(u,f){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=u,this.A=f,this.readyState=1,ja(this)},n.send=function(u){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const f={headers:this.u,method:this.B,credentials:this.m,cache:void 0};u&&(f.body=u),(this.D||a).fetch(new Request(this.A,f)).then(this.Sa.bind(this),this.ga.bind(this))},n.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,Ua(this)),this.readyState=0},n.Sa=function(u){if(this.g&&(this.l=u,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=u.headers,this.readyState=2,ja(this)),this.g&&(this.readyState=3,ja(this),this.g)))if(this.responseType==="arraybuffer")u.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof a.ReadableStream<"u"&&"body"in u){if(this.j=u.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;Iv(this)}else u.text().then(this.Ra.bind(this),this.ga.bind(this))};function Iv(u){u.j.read().then(u.Pa.bind(u)).catch(u.ga.bind(u))}n.Pa=function(u){if(this.g){if(this.o&&u.value)this.response.push(u.value);else if(!this.o){var f=u.value?u.value:new Uint8Array(0);(f=this.v.decode(f,{stream:!u.done}))&&(this.response=this.responseText+=f)}u.done?Ua(this):ja(this),this.readyState==3&&Iv(this)}},n.Ra=function(u){this.g&&(this.response=this.responseText=u,Ua(this))},n.Qa=function(u){this.g&&(this.response=u,Ua(this))},n.ga=function(){this.g&&Ua(this)};function Ua(u){u.readyState=4,u.l=null,u.j=null,u.v=null,ja(u)}n.setRequestHeader=function(u,f){this.u.append(u,f)},n.getResponseHeader=function(u){return this.h&&this.h.get(u.toLowerCase())||""},n.getAllResponseHeaders=function(){if(!this.h)return"";const u=[],f=this.h.entries();for(var m=f.next();!m.done;)m=m.value,u.push(m[0]+": "+m[1]),m=f.next();return u.join(`\r
`)};function ja(u){u.onreadystatechange&&u.onreadystatechange.call(u)}Object.defineProperty(Gu.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(u){this.m=u?"include":"same-origin"}});function Sv(u){let f="";return L(u,function(m,T){f+=T,f+=":",f+=m,f+=`\r
`}),f}function Vf(u,f,m){e:{for(T in m){var T=!1;break e}T=!0}T||(m=Sv(m),typeof u=="string"?m!=null&&encodeURIComponent(String(m)):Ae(u,f,m))}function Ge(u){Pt.call(this),this.headers=new Map,this.o=u||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}v(Ge,Pt);var bk=/^https?$/i,Pk=["POST","PUT"];n=Ge.prototype,n.Ha=function(u){this.J=u},n.ea=function(u,f,m,T){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+u);f=f?f.toUpperCase():"GET",this.D=u,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():xf.g(),this.v=this.o?Z_(this.o):Z_(xf),this.g.onreadystatechange=p(this.Ea,this);try{this.B=!0,this.g.open(f,String(u),!0),this.B=!1}catch(B){Dv(this,B);return}if(u=m||"",m=new Map(this.headers),T)if(Object.getPrototypeOf(T)===Object.prototype)for(var M in T)m.set(M,T[M]);else if(typeof T.keys=="function"&&typeof T.get=="function")for(const B of T.keys())m.set(B,T.get(B));else throw Error("Unknown input type for opt_headers: "+String(T));T=Array.from(m.keys()).find(B=>B.toLowerCase()=="content-type"),M=a.FormData&&u instanceof a.FormData,!(0<=Array.prototype.indexOf.call(Pk,f,void 0))||T||M||m.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[B,W]of m)this.g.setRequestHeader(B,W);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{kv(this),this.u=!0,this.g.send(u),this.u=!1}catch(B){Dv(this,B)}};function Dv(u,f){u.h=!1,u.g&&(u.j=!0,u.g.abort(),u.j=!1),u.l=f,u.m=5,bv(u),Xu(u)}function bv(u){u.A||(u.A=!0,Vt(u,"complete"),Vt(u,"error"))}n.abort=function(u){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=u||7,Vt(this,"complete"),Vt(this,"abort"),Xu(this))},n.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Xu(this,!0)),Ge.aa.N.call(this)},n.Ea=function(){this.s||(this.B||this.u||this.j?Pv(this):this.bb())},n.bb=function(){Pv(this)};function Pv(u){if(u.h&&typeof o<"u"&&(!u.v[1]||mr(u)!=4||u.Z()!=2)){if(u.u&&mr(u)==4)K_(u.Ea,0,u);else if(Vt(u,"readystatechange"),mr(u)==4){u.h=!1;try{const W=u.Z();e:switch(W){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var f=!0;break e;default:f=!1}var m;if(!(m=f)){var T;if(T=W===0){var M=String(u.D).match(yv)[1]||null;!M&&a.self&&a.self.location&&(M=a.self.location.protocol.slice(0,-1)),T=!bk.test(M?M.toLowerCase():"")}m=T}if(m)Vt(u,"complete"),Vt(u,"success");else{u.m=6;try{var B=2<mr(u)?u.g.statusText:""}catch{B=""}u.l=B+" ["+u.Z()+"]",bv(u)}}finally{Xu(u)}}}}function Xu(u,f){if(u.g){kv(u);const m=u.g,T=u.v[0]?()=>{}:null;u.g=null,u.v=null,f||Vt(u,"ready");try{m.onreadystatechange=T}catch{}}}function kv(u){u.I&&(a.clearTimeout(u.I),u.I=null)}n.isActive=function(){return!!this.g};function mr(u){return u.g?u.g.readyState:0}n.Z=function(){try{return 2<mr(this)?this.g.status:-1}catch{return-1}},n.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},n.Oa=function(u){if(this.g){var f=this.g.responseText;return u&&f.indexOf(u)==0&&(f=f.substring(u.length)),sk(f)}};function xv(u){try{if(!u.g)return null;if("response"in u.g)return u.g.response;switch(u.H){case"":case"text":return u.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in u.g)return u.g.mozResponseArrayBuffer}return null}catch{return null}}function kk(u){const f={};u=(u.g&&2<=mr(u)&&u.g.getAllResponseHeaders()||"").split(`\r
`);for(let T=0;T<u.length;T++){if(_(u[T]))continue;var m=C(u[T]);const M=m[0];if(m=m[1],typeof m!="string")continue;m=m.trim();const B=f[M]||[];f[M]=B,B.push(m)}I(f,function(T){return T.join(", ")})}n.Ba=function(){return this.m},n.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function $a(u,f,m){return m&&m.internalChannelParams&&m.internalChannelParams[u]||f}function Cv(u){this.Aa=0,this.i=[],this.j=new Ma,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=$a("failFast",!1,u),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=$a("baseRetryDelayMs",5e3,u),this.cb=$a("retryDelaySeedMs",1e4,u),this.Wa=$a("forwardChannelMaxRetries",2,u),this.wa=$a("forwardChannelRequestTimeoutMs",2e4,u),this.pa=u&&u.xmlHttpFactory||void 0,this.Xa=u&&u.Tb||void 0,this.Ca=u&&u.useFetchStreams||!1,this.L=void 0,this.J=u&&u.supportsCrossDomainXhr||!1,this.K="",this.h=new dv(u&&u.concurrentRequestLimit),this.Da=new Sk,this.P=u&&u.fastHandshake||!1,this.O=u&&u.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=u&&u.Rb||!1,u&&u.xa&&this.j.xa(),u&&u.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&u&&u.detectBufferingProxy||!1,this.ja=void 0,u&&u.longPollingTimeout&&0<u.longPollingTimeout&&(this.ja=u.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}n=Cv.prototype,n.la=8,n.G=1,n.connect=function(u,f,m,T){Lt(0),this.W=u,this.H=f||{},m&&T!==void 0&&(this.H.OSID=m,this.H.OAID=T),this.F=this.X,this.I=Bv(this,null,this.W),Zu(this)};function Lf(u){if(Rv(u),u.G==3){var f=u.U++,m=pr(u.I);if(Ae(m,"SID",u.K),Ae(m,"RID",f),Ae(m,"TYPE","terminate"),za(u,m),f=new zr(u,u.j,f),f.L=2,f.v=Ku(pr(m)),m=!1,a.navigator&&a.navigator.sendBeacon)try{m=a.navigator.sendBeacon(f.v.toString(),"")}catch{}!m&&a.Image&&(new Image().src=f.v,m=!0),m||(f.g=Uv(f.j,null),f.g.ea(f.v)),f.F=Date.now(),Yu(f)}Fv(u)}function Ju(u){u.g&&(Bf(u),u.g.cancel(),u.g=null)}function Rv(u){Ju(u),u.u&&(a.clearTimeout(u.u),u.u=null),ec(u),u.h.cancel(),u.s&&(typeof u.s=="number"&&a.clearTimeout(u.s),u.s=null)}function Zu(u){if(!hv(u.h)&&!u.s){u.s=!0;var f=u.Ga;ie||se(),q||(ie(),q=!0),Q.add(f,u),u.B=0}}function xk(u,f){return fv(u.h)>=u.h.j-(u.s?1:0)?!1:u.s?(u.i=f.D.concat(u.i),!0):u.G==1||u.G==2||u.B>=(u.Va?0:u.Wa)?!1:(u.s=Na(p(u.Ga,u,f),Lv(u,u.B)),u.B++,!0)}n.Ga=function(u){if(this.s)if(this.s=null,this.G==1){if(!u){this.U=Math.floor(1e5*Math.random()),u=this.U++;const M=new zr(this,this.j,u);let B=this.o;if(this.S&&(B?(B=y(B),k(B,this.S)):B=this.S),this.m!==null||this.O||(M.H=B,B=null),this.P)e:{for(var f=0,m=0;m<this.i.length;m++){t:{var T=this.i[m];if("__data__"in T.map&&(T=T.map.__data__,typeof T=="string")){T=T.length;break t}T=void 0}if(T===void 0)break;if(f+=T,4096<f){f=m;break e}if(f===4096||m===this.i.length-1){f=m+1;break e}}f=1e3}else f=1e3;f=Nv(this,M,f),m=pr(this.I),Ae(m,"RID",u),Ae(m,"CVER",22),this.D&&Ae(m,"X-HTTP-Session-Id",this.D),za(this,m),B&&(this.O?f="headers="+encodeURIComponent(String(Sv(B)))+"&"+f:this.m&&Vf(m,this.m,B)),Of(this.h,M),this.Ua&&Ae(m,"TYPE","init"),this.P?(Ae(m,"$req",f),Ae(m,"SID","null"),M.T=!0,Rf(M,m,null)):Rf(M,m,f),this.G=2}}else this.G==3&&(u?Av(this,u):this.i.length==0||hv(this.h)||Av(this))};function Av(u,f){var m;f?m=f.l:m=u.U++;const T=pr(u.I);Ae(T,"SID",u.K),Ae(T,"RID",m),Ae(T,"AID",u.T),za(u,T),u.m&&u.o&&Vf(T,u.m,u.o),m=new zr(u,u.j,m,u.B+1),u.m===null&&(m.H=u.o),f&&(u.i=f.D.concat(u.i)),f=Nv(u,m,1e3),m.I=Math.round(.5*u.wa)+Math.round(.5*u.wa*Math.random()),Of(u.h,m),Rf(m,T,f)}function za(u,f){u.H&&L(u.H,function(m,T){Ae(f,T,m)}),u.l&&gv({},function(m,T){Ae(f,T,m)})}function Nv(u,f,m){m=Math.min(u.i.length,m);var T=u.l?p(u.l.Na,u.l,u):null;e:{var M=u.i;let B=-1;for(;;){const W=["count="+m];B==-1?0<m?(B=M[0].g,W.push("ofs="+B)):B=0:W.push("ofs="+B);let xe=!0;for(let Et=0;Et<m;Et++){let ve=M[Et].g;const kt=M[Et].map;if(ve-=B,0>ve)B=Math.max(0,M[Et].g-100),xe=!1;else try{Dk(kt,W,"req"+ve+"_")}catch{T&&T(kt)}}if(xe){T=W.join("&");break e}}}return u=u.i.splice(0,m),f.D=u,T}function Mv(u){if(!u.g&&!u.u){u.Y=1;var f=u.Fa;ie||se(),q||(ie(),q=!0),Q.add(f,u),u.v=0}}function Ff(u){return u.g||u.u||3<=u.v?!1:(u.Y++,u.u=Na(p(u.Fa,u),Lv(u,u.v)),u.v++,!0)}n.Fa=function(){if(this.u=null,Ov(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var u=2*this.R;this.j.info("BP detection timer enabled: "+u),this.A=Na(p(this.ab,this),u)}},n.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,Lt(10),Ju(this),Ov(this))};function Bf(u){u.A!=null&&(a.clearTimeout(u.A),u.A=null)}function Ov(u){u.g=new zr(u,u.j,"rpc",u.Y),u.m===null&&(u.g.H=u.o),u.g.O=0;var f=pr(u.qa);Ae(f,"RID","rpc"),Ae(f,"SID",u.K),Ae(f,"AID",u.T),Ae(f,"CI",u.F?"0":"1"),!u.F&&u.ja&&Ae(f,"TO",u.ja),Ae(f,"TYPE","xmlhttp"),za(u,f),u.m&&u.o&&Vf(f,u.m,u.o),u.L&&(u.g.I=u.L);var m=u.g;u=u.ia,m.L=1,m.v=Ku(pr(f)),m.m=null,m.P=!0,lv(m,u)}n.Za=function(){this.C!=null&&(this.C=null,Ju(this),Ff(this),Lt(19))};function ec(u){u.C!=null&&(a.clearTimeout(u.C),u.C=null)}function Vv(u,f){var m=null;if(u.g==f){ec(u),Bf(u),u.g=null;var T=2}else if(Mf(u.h,f))m=f.D,pv(u.h,f),T=1;else return;if(u.G!=0){if(f.o)if(T==1){m=f.m?f.m.length:0,f=Date.now()-f.F;var M=u.B;T=zu(),Vt(T,new iv(T,m)),Zu(u)}else Mv(u);else if(M=f.s,M==3||M==0&&0<f.X||!(T==1&&xk(u,f)||T==2&&Ff(u)))switch(m&&0<m.length&&(f=u.h,f.i=f.i.concat(m)),M){case 1:Xi(u,5);break;case 4:Xi(u,10);break;case 3:Xi(u,6);break;default:Xi(u,2)}}}function Lv(u,f){let m=u.Ta+Math.floor(Math.random()*u.cb);return u.isActive()||(m*=2),m*f}function Xi(u,f){if(u.j.info("Error code "+f),f==2){var m=p(u.fb,u),T=u.Xa;const M=!T;T=new Gi(T||"//www.google.com/images/cleardot.gif"),a.location&&a.location.protocol=="http"||Hu(T,"https"),Ku(T),M?Tk(T.toString(),m):Ik(T.toString(),m)}else Lt(2);u.G=0,u.l&&u.l.sa(f),Fv(u),Rv(u)}n.fb=function(u){u?(this.j.info("Successfully pinged google.com"),Lt(2)):(this.j.info("Failed to ping google.com"),Lt(1))};function Fv(u){if(u.G=0,u.ka=[],u.l){const f=mv(u.h);(f.length!=0||u.i.length!=0)&&(D(u.ka,f),D(u.ka,u.i),u.h.i.length=0,S(u.i),u.i.length=0),u.l.ra()}}function Bv(u,f,m){var T=m instanceof Gi?pr(m):new Gi(m);if(T.g!="")f&&(T.g=f+"."+T.g),Qu(T,T.s);else{var M=a.location;T=M.protocol,f=f?f+"."+M.hostname:M.hostname,M=+M.port;var B=new Gi(null);T&&Hu(B,T),f&&(B.g=f),M&&Qu(B,M),m&&(B.l=m),T=B}return m=u.D,f=u.ya,m&&f&&Ae(T,m,f),Ae(T,"VER",u.la),za(u,T),T}function Uv(u,f,m){if(f&&!u.J)throw Error("Can't create secondary domain capable XhrIo object.");return f=u.Ca&&!u.pa?new Ge(new Ba({eb:m})):new Ge(u.pa),f.Ha(u.J),f}n.isActive=function(){return!!this.l&&this.l.isActive(this)};function jv(){}n=jv.prototype,n.ua=function(){},n.ta=function(){},n.sa=function(){},n.ra=function(){},n.isActive=function(){return!0},n.Na=function(){};function tc(){}tc.prototype.g=function(u,f){return new ln(u,f)};function ln(u,f){Pt.call(this),this.g=new Cv(f),this.l=u,this.h=f&&f.messageUrlParams||null,u=f&&f.messageHeaders||null,f&&f.clientProtocolHeaderRequired&&(u?u["X-Client-Protocol"]="webchannel":u={"X-Client-Protocol":"webchannel"}),this.g.o=u,u=f&&f.initMessageHeaders||null,f&&f.messageContentType&&(u?u["X-WebChannel-Content-Type"]=f.messageContentType:u={"X-WebChannel-Content-Type":f.messageContentType}),f&&f.va&&(u?u["X-WebChannel-Client-Profile"]=f.va:u={"X-WebChannel-Client-Profile":f.va}),this.g.S=u,(u=f&&f.Sb)&&!_(u)&&(this.g.m=u),this.v=f&&f.supportsCrossDomainXhr||!1,this.u=f&&f.sendRawJson||!1,(f=f&&f.httpSessionIdParam)&&!_(f)&&(this.g.D=f,u=this.h,u!==null&&f in u&&(u=this.h,f in u&&delete u[f])),this.j=new eo(this)}v(ln,Pt),ln.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},ln.prototype.close=function(){Lf(this.g)},ln.prototype.o=function(u){var f=this.g;if(typeof u=="string"){var m={};m.__data__=u,u=m}else this.u&&(m={},m.__data__=Df(u),u=m);f.i.push(new hk(f.Ya++,u)),f.G==3&&Zu(f)},ln.prototype.N=function(){this.g.l=null,delete this.j,Lf(this.g),delete this.g,ln.aa.N.call(this)};function $v(u){Pf.call(this),u.__headers__&&(this.headers=u.__headers__,this.statusCode=u.__status__,delete u.__headers__,delete u.__status__);var f=u.__sm__;if(f){e:{for(const m in f){u=m;break e}u=void 0}(this.i=u)&&(u=this.i,f=f!==null&&u in f?f[u]:void 0),this.data=f}else this.data=u}v($v,Pf);function zv(){kf.call(this),this.status=1}v(zv,kf);function eo(u){this.g=u}v(eo,jv),eo.prototype.ua=function(){Vt(this.g,"a")},eo.prototype.ta=function(u){Vt(this.g,new $v(u))},eo.prototype.sa=function(u){Vt(this.g,new zv)},eo.prototype.ra=function(){Vt(this.g,"b")},tc.prototype.createWebChannel=tc.prototype.g,ln.prototype.send=ln.prototype.o,ln.prototype.open=ln.prototype.m,ln.prototype.close=ln.prototype.close,_1=function(){return new tc},y1=function(){return zu()},g1=Qi,Om={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},qu.NO_ERROR=0,qu.TIMEOUT=8,qu.HTTP_ERROR=6,Qc=qu,sv.COMPLETE="complete",m1=sv,ev.EventType=Ra,Ra.OPEN="a",Ra.CLOSE="b",Ra.ERROR="c",Ra.MESSAGE="d",Pt.prototype.listen=Pt.prototype.K,cl=ev,p1=Ba,Ge.prototype.listenOnce=Ge.prototype.L,Ge.prototype.getLastError=Ge.prototype.Ka,Ge.prototype.getLastErrorCode=Ge.prototype.Ba,Ge.prototype.getStatus=Ge.prototype.Z,Ge.prototype.getResponseJson=Ge.prototype.Oa,Ge.prototype.getResponseText=Ge.prototype.oa,Ge.prototype.send=Ge.prototype.ea,Ge.prototype.setWithCredentials=Ge.prototype.Ha,f1=Ge}).apply(typeof wc<"u"?wc:typeof self<"u"?self:typeof window<"u"?window:{});const m0="@firebase/firestore";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pt{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}pt.UNAUTHENTICATED=new pt(null),pt.GOOGLE_CREDENTIALS=new pt("google-credentials-uid"),pt.FIRST_PARTY=new pt("first-party-uid"),pt.MOCK_USER=new pt("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let wa="10.12.1";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bi=new vy("@firebase/firestore");function uo(){return bi.logLevel}function LN(n){bi.setLogLevel(n)}function $(n,...e){if(bi.logLevel<=fe.DEBUG){const t=e.map(Sy);bi.debug(`Firestore (${wa}): ${n}`,...t)}}function rt(n,...e){if(bi.logLevel<=fe.ERROR){const t=e.map(Sy);bi.error(`Firestore (${wa}): ${n}`,...t)}}function Bn(n,...e){if(bi.logLevel<=fe.WARN){const t=e.map(Sy);bi.warn(`Firestore (${wa}): ${n}`,...t)}}function Sy(n){if(typeof n=="string")return n;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(t){return JSON.stringify(t)}(n)}catch{return n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function X(n="Unexpected state"){const e=`FIRESTORE (${wa}) INTERNAL ASSERTION FAILED: `+n;throw rt(e),new Error(e)}function ee(n,e){n||X()}function FN(n,e){n||X()}function H(n,e){return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const F={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class j extends ji{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yt{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class v1{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class BN{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(pt.UNAUTHENTICATED))}shutdown(){}}class UN{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable(()=>t(this.token.user))}shutdown(){this.changeListener=null}}class jN{constructor(e){this.t=e,this.currentUser=pt.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){let r=this.i;const i=l=>this.i!==r?(r=this.i,t(l)):Promise.resolve();let s=new yt;this.o=()=>{this.i++,this.currentUser=this.u(),s.resolve(),s=new yt,e.enqueueRetryable(()=>i(this.currentUser))};const o=()=>{const l=s;e.enqueueRetryable(async()=>{await l.promise,await i(this.currentUser)})},a=l=>{$("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=l,this.auth.addAuthTokenListener(this.o),o()};this.t.onInit(l=>a(l)),setTimeout(()=>{if(!this.auth){const l=this.t.getImmediate({optional:!0});l?a(l):($("FirebaseAuthCredentialsProvider","Auth not yet detected"),s.resolve(),s=new yt)}},0),o()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(r=>this.i!==e?($("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(ee(typeof r.accessToken=="string"),new v1(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){const e=this.auth&&this.auth.getUid();return ee(e===null||typeof e=="string"),new pt(e)}}class $N{constructor(e,t,r){this.l=e,this.h=t,this.P=r,this.type="FirstParty",this.user=pt.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);const e=this.T();return e&&this.I.set("Authorization",e),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}}class zN{constructor(e,t,r){this.l=e,this.h=t,this.P=r}getToken(){return Promise.resolve(new $N(this.l,this.h,this.P))}start(e,t){e.enqueueRetryable(()=>t(pt.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class qN{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class WN{constructor(e){this.A=e,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(e,t){const r=s=>{s.error!=null&&$("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${s.error.message}`);const o=s.token!==this.R;return this.R=s.token,$("FirebaseAppCheckTokenProvider",`Received ${o?"new":"existing"} token.`),o?t(s.token):Promise.resolve()};this.o=s=>{e.enqueueRetryable(()=>r(s))};const i=s=>{$("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=s,this.appCheck.addTokenListener(this.o)};this.A.onInit(s=>i(s)),setTimeout(()=>{if(!this.appCheck){const s=this.A.getImmediate({optional:!0});s?i(s):$("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(t=>t?(ee(typeof t.token=="string"),this.R=t.token,new qN(t.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function YN(n){const e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(t);else for(let r=0;r<n;r++)t[r]=Math.floor(256*Math.random());return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class w1{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=Math.floor(256/e.length)*e.length;let r="";for(;r.length<20;){const i=YN(40);for(let s=0;s<i.length;++s)r.length<20&&i[s]<t&&(r+=e.charAt(i[s]%e.length))}return r}}function oe(n,e){return n<e?-1:n>e?1:0}function Go(n,e,t){return n.length===e.length&&n.every((r,i)=>t(r,e[i]))}function E1(n){return n+"\0"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class je{constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new j(F.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new j(F.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<-62135596800)throw new j(F.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new j(F.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return je.fromMillis(Date.now())}static fromDate(e){return je.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),r=Math.floor(1e6*(e-1e3*t));return new je(t,r)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?oe(this.nanoseconds,e.nanoseconds):oe(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class te{constructor(e){this.timestamp=e}static fromTimestamp(e){return new te(e)}static min(){return new te(new je(0,0))}static max(){return new te(new je(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tu{constructor(e,t,r){t===void 0?t=0:t>e.length&&X(),r===void 0?r=e.length-t:r>e.length-t&&X(),this.segments=e,this.offset=t,this.len=r}get length(){return this.len}isEqual(e){return tu.comparator(this,e)===0}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof tu?e.forEach(r=>{t.push(r)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,r=this.limit();t<r;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const r=Math.min(e.length,t.length);for(let i=0;i<r;i++){const s=e.get(i),o=t.get(i);if(s<o)return-1;if(s>o)return 1}return e.length<t.length?-1:e.length>t.length?1:0}}class de extends tu{construct(e,t,r){return new de(e,t,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const t=[];for(const r of e){if(r.indexOf("//")>=0)throw new j(F.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);t.push(...r.split("/").filter(i=>i.length>0))}return new de(t)}static emptyPath(){return new de([])}}const HN=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Be extends tu{construct(e,t,r){return new Be(e,t,r)}static isValidIdentifier(e){return HN.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Be.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)==="__name__"}static keyField(){return new Be(["__name__"])}static fromServerFormat(e){const t=[];let r="",i=0;const s=()=>{if(r.length===0)throw new j(F.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(r),r=""};let o=!1;for(;i<e.length;){const a=e[i];if(a==="\\"){if(i+1===e.length)throw new j(F.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const l=e[i+1];if(l!=="\\"&&l!=="."&&l!=="`")throw new j(F.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=l,i+=2}else a==="`"?(o=!o,i++):a!=="."||o?(r+=a,i++):(s(),i++)}if(s(),o)throw new j(F.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Be(t)}static emptyPath(){return new Be([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Y{constructor(e){this.path=e}static fromPath(e){return new Y(de.fromString(e))}static fromName(e){return new Y(de.fromString(e).popFirst(5))}static empty(){return new Y(de.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&de.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,t){return de.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new Y(new de(e.slice()))}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ud{constructor(e,t,r,i){this.indexId=e,this.collectionGroup=t,this.fields=r,this.indexState=i}}function Vm(n){return n.fields.find(e=>e.kind===2)}function rs(n){return n.fields.filter(e=>e.kind!==2)}Ud.UNKNOWN_ID=-1;class Kc{constructor(e,t){this.fieldPath=e,this.kind=t}}class nu{constructor(e,t){this.sequenceNumber=e,this.offset=t}static empty(){return new nu(0,mn.min())}}function T1(n,e){const t=n.toTimestamp().seconds,r=n.toTimestamp().nanoseconds+1,i=te.fromTimestamp(r===1e9?new je(t+1,0):new je(t,r));return new mn(i,Y.empty(),e)}function I1(n){return new mn(n.readTime,n.key,-1)}class mn{constructor(e,t,r){this.readTime=e,this.documentKey=t,this.largestBatchId=r}static min(){return new mn(te.min(),Y.empty(),-1)}static max(){return new mn(te.max(),Y.empty(),-1)}}function Dy(n,e){let t=n.readTime.compareTo(e.readTime);return t!==0?t:(t=Y.comparator(n.documentKey,e.documentKey),t!==0?t:oe(n.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const S1="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class D1{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function $i(n){if(n.code!==F.FAILED_PRECONDITION||n.message!==S1)throw n;$("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class O{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)},t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&X(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new O((r,i)=>{this.nextCallback=s=>{this.wrapSuccess(e,s).next(r,i)},this.catchCallback=s=>{this.wrapFailure(t,s).next(r,i)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{const t=e();return t instanceof O?t:O.resolve(t)}catch(t){return O.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):O.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):O.reject(t)}static resolve(e){return new O((t,r)=>{t(e)})}static reject(e){return new O((t,r)=>{r(e)})}static waitFor(e){return new O((t,r)=>{let i=0,s=0,o=!1;e.forEach(a=>{++i,a.next(()=>{++s,o&&s===i&&t()},l=>r(l))}),o=!0,s===i&&t()})}static or(e){let t=O.resolve(!1);for(const r of e)t=t.next(i=>i?O.resolve(i):r());return t}static forEach(e,t){const r=[];return e.forEach((i,s)=>{r.push(t.call(this,i,s))}),this.waitFor(r)}static mapArray(e,t){return new O((r,i)=>{const s=e.length,o=new Array(s);let a=0;for(let l=0;l<s;l++){const c=l;t(e[c]).next(d=>{o[c]=d,++a,a===s&&r(o)},d=>i(d))}})}static doWhile(e,t){return new O((r,i)=>{const s=()=>{e()===!0?t().next(()=>{s()},i):r()};s()})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fh{constructor(e,t){this.action=e,this.transaction=t,this.aborted=!1,this.V=new yt,this.transaction.oncomplete=()=>{this.V.resolve()},this.transaction.onabort=()=>{t.error?this.V.reject(new Dl(e,t.error)):this.V.resolve()},this.transaction.onerror=r=>{const i=by(r.target.error);this.V.reject(new Dl(e,i))}}static open(e,t,r,i){try{return new Fh(t,e.transaction(i,r))}catch(s){throw new Dl(t,s)}}get m(){return this.V.promise}abort(e){e&&this.V.reject(e),this.aborted||($("SimpleDb","Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}g(){const e=this.transaction;this.aborted||typeof e.commit!="function"||e.commit()}store(e){const t=this.transaction.objectStore(e);return new KN(t)}}class nr{constructor(e,t,r){this.name=e,this.version=t,this.p=r,nr.S(Fd())===12.2&&rt("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}static delete(e){return $("SimpleDb","Removing database:",e),ss(window.indexedDB.deleteDatabase(e)).toPromise()}static D(){if(!e1())return!1;if(nr.C())return!0;const e=Fd(),t=nr.S(e),r=0<t&&t<10,i=b1(e),s=0<i&&i<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||r||s)}static C(){var e;return typeof process<"u"&&((e=process.__PRIVATE_env)===null||e===void 0?void 0:e.v)==="YES"}static F(e,t){return e.store(t)}static S(e){const t=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),r=t?t[1].split("_").slice(0,2).join("."):"-1";return Number(r)}async M(e){return this.db||($("SimpleDb","Opening database:",this.name),this.db=await new Promise((t,r)=>{const i=indexedDB.open(this.name,this.version);i.onsuccess=s=>{const o=s.target.result;t(o)},i.onblocked=()=>{r(new Dl(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},i.onerror=s=>{const o=s.target.error;o.name==="VersionError"?r(new j(F.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh.")):o.name==="InvalidStateError"?r(new j(F.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+o)):r(new Dl(e,o))},i.onupgradeneeded=s=>{$("SimpleDb",'Database "'+this.name+'" requires upgrade from version:',s.oldVersion);const o=s.target.result;this.p.O(o,i.transaction,s.oldVersion,this.version).next(()=>{$("SimpleDb","Database upgrade to version "+this.version+" complete")})}})),this.N&&(this.db.onversionchange=t=>this.N(t)),this.db}L(e){this.N=e,this.db&&(this.db.onversionchange=t=>e(t))}async runTransaction(e,t,r,i){const s=t==="readonly";let o=0;for(;;){++o;try{this.db=await this.M(e);const a=Fh.open(this.db,e,s?"readonly":"readwrite",r),l=i(a).next(c=>(a.g(),c)).catch(c=>(a.abort(c),O.reject(c))).toPromise();return l.catch(()=>{}),await a.m,l}catch(a){const l=a,c=l.name!=="FirebaseError"&&o<3;if($("SimpleDb","Transaction failed with error:",l.message,"Retrying:",c),this.close(),!c)return Promise.reject(l)}}}close(){this.db&&this.db.close(),this.db=void 0}}function b1(n){const e=n.match(/Android ([\d.]+)/i),t=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(t)}class QN{constructor(e){this.B=e,this.k=!1,this.q=null}get isDone(){return this.k}get K(){return this.q}set cursor(e){this.B=e}done(){this.k=!0}$(e){this.q=e}delete(){return ss(this.B.delete())}}class Dl extends j{constructor(e,t){super(F.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${t}`),this.name="IndexedDbTransactionError"}}function zi(n){return n.name==="IndexedDbTransactionError"}class KN{constructor(e){this.store=e}put(e,t){let r;return t!==void 0?($("SimpleDb","PUT",this.store.name,e,t),r=this.store.put(t,e)):($("SimpleDb","PUT",this.store.name,"<auto-key>",e),r=this.store.put(e)),ss(r)}add(e){return $("SimpleDb","ADD",this.store.name,e,e),ss(this.store.add(e))}get(e){return ss(this.store.get(e)).next(t=>(t===void 0&&(t=null),$("SimpleDb","GET",this.store.name,e,t),t))}delete(e){return $("SimpleDb","DELETE",this.store.name,e),ss(this.store.delete(e))}count(){return $("SimpleDb","COUNT",this.store.name),ss(this.store.count())}U(e,t){const r=this.options(e,t),i=r.index?this.store.index(r.index):this.store;if(typeof i.getAll=="function"){const s=i.getAll(r.range);return new O((o,a)=>{s.onerror=l=>{a(l.target.error)},s.onsuccess=l=>{o(l.target.result)}})}{const s=this.cursor(r),o=[];return this.W(s,(a,l)=>{o.push(l)}).next(()=>o)}}G(e,t){const r=this.store.getAll(e,t===null?void 0:t);return new O((i,s)=>{r.onerror=o=>{s(o.target.error)},r.onsuccess=o=>{i(o.target.result)}})}j(e,t){$("SimpleDb","DELETE ALL",this.store.name);const r=this.options(e,t);r.H=!1;const i=this.cursor(r);return this.W(i,(s,o,a)=>a.delete())}J(e,t){let r;t?r=e:(r={},t=e);const i=this.cursor(r);return this.W(i,t)}Y(e){const t=this.cursor({});return new O((r,i)=>{t.onerror=s=>{const o=by(s.target.error);i(o)},t.onsuccess=s=>{const o=s.target.result;o?e(o.primaryKey,o.value).next(a=>{a?o.continue():r()}):r()}})}W(e,t){const r=[];return new O((i,s)=>{e.onerror=o=>{s(o.target.error)},e.onsuccess=o=>{const a=o.target.result;if(!a)return void i();const l=new QN(a),c=t(a.primaryKey,a.value,l);if(c instanceof O){const d=c.catch(h=>(l.done(),O.reject(h)));r.push(d)}l.isDone?i():l.K===null?a.continue():a.continue(l.K)}}).next(()=>O.waitFor(r))}options(e,t){let r;return e!==void 0&&(typeof e=="string"?r=e:t=e),{index:r,range:t}}cursor(e){let t="next";if(e.reverse&&(t="prev"),e.index){const r=this.store.index(e.index);return e.H?r.openKeyCursor(e.range,t):r.openCursor(e.range,t)}return this.store.openCursor(e.range,t)}}function ss(n){return new O((e,t)=>{n.onsuccess=r=>{const i=r.target.result;e(i)},n.onerror=r=>{const i=by(r.target.error);t(i)}})}let g0=!1;function by(n){const e=nr.S(Fd());if(e>=12.2&&e<13){const t="An internal error was encountered in the Indexed Database server";if(n.message.indexOf(t)>=0){const r=new j("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${t}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return g0||(g0=!0,setTimeout(()=>{throw r},0)),r}}return n}class GN{constructor(e,t){this.asyncQueue=e,this.Z=t,this.task=null}start(){this.X(15e3)}stop(){this.task&&(this.task.cancel(),this.task=null)}get started(){return this.task!==null}X(e){$("IndexBackfiller",`Scheduled in ${e}ms`),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",e,async()=>{this.task=null;try{$("IndexBackfiller",`Documents written: ${await this.Z.ee()}`)}catch(t){zi(t)?$("IndexBackfiller","Ignoring IndexedDB error during index backfill: ",t):await $i(t)}await this.X(6e4)})}}class XN{constructor(e,t){this.localStore=e,this.persistence=t}async ee(e=50){return this.persistence.runTransaction("Backfill Indexes","readwrite-primary",t=>this.te(t,e))}te(e,t){const r=new Set;let i=t,s=!0;return O.doWhile(()=>s===!0&&i>0,()=>this.localStore.indexManager.getNextCollectionGroupToUpdate(e).next(o=>{if(o!==null&&!r.has(o))return $("IndexBackfiller",`Processing collection: ${o}`),this.ne(e,o,i).next(a=>{i-=a,r.add(o)});s=!1})).next(()=>t-i)}ne(e,t,r){return this.localStore.indexManager.getMinOffsetFromCollectionGroup(e,t).next(i=>this.localStore.localDocuments.getNextDocuments(e,t,i,r).next(s=>{const o=s.changes;return this.localStore.indexManager.updateIndexEntries(e,o).next(()=>this.re(i,s)).next(a=>($("IndexBackfiller",`Updating offset: ${a}`),this.localStore.indexManager.updateCollectionGroup(e,t,a))).next(()=>o.size)}))}re(e,t){let r=e;return t.changes.forEach((i,s)=>{const o=I1(s);Dy(o,r)>0&&(r=o)}),new mn(r.readTime,r.documentKey,Math.max(t.batchId,e.largestBatchId))}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tn{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=r=>this.ie(r),this.se=r=>t.writeSequenceNumber(r))}ie(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.se&&this.se(e),e}}tn.oe=-1;function Tu(n){return n==null}function ru(n){return n===0&&1/n==-1/0}function P1(n){return typeof n=="number"&&Number.isInteger(n)&&!ru(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ht(n){let e="";for(let t=0;t<n.length;t++)e.length>0&&(e=y0(e)),e=JN(n.get(t),e);return y0(e)}function JN(n,e){let t=e;const r=n.length;for(let i=0;i<r;i++){const s=n.charAt(i);switch(s){case"\0":t+="";break;case"":t+="";break;default:t+=s}}return t}function y0(n){return n+""}function Xn(n){const e=n.length;if(ee(e>=2),e===2)return ee(n.charAt(0)===""&&n.charAt(1)===""),de.emptyPath();const t=e-2,r=[];let i="";for(let s=0;s<e;){const o=n.indexOf("",s);switch((o<0||o>t)&&X(),n.charAt(o+1)){case"":const a=n.substring(s,o);let l;i.length===0?l=a:(i+=a,l=i,i=""),r.push(l);break;case"":i+=n.substring(s,o),i+="\0";break;case"":i+=n.substring(s,o+1);break;default:X()}s=o+2}return new de(r)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _0=["userId","batchId"];/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Gc(n,e){return[n,Ht(e)]}function k1(n,e,t){return[n,Ht(e),t]}const ZN={},eM=["prefixPath","collectionGroup","readTime","documentId"],tM=["prefixPath","collectionGroup","documentId"],nM=["collectionGroup","readTime","prefixPath","documentId"],rM=["canonicalId","targetId"],iM=["targetId","path"],sM=["path","targetId"],oM=["collectionId","parent"],aM=["indexId","uid"],lM=["uid","sequenceNumber"],uM=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],cM=["indexId","uid","orderedDocumentKey"],dM=["userId","collectionPath","documentId"],hM=["userId","collectionPath","largestBatchId"],fM=["userId","collectionGroup","largestBatchId"],x1=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries"],pM=[...x1,"documentOverlays"],C1=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],R1=C1,A1=[...R1,"indexConfiguration","indexState","indexEntries"],mM=A1;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lm extends D1{constructor(e,t){super(),this._e=e,this.currentSequenceNumber=t}}function _t(n,e){const t=H(n);return nr.F(t._e,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function v0(n){let e=0;for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e++;return e}function Ys(n,e){for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e(t,n[t])}function N1(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Re{constructor(e,t){this.comparator=e,this.root=t||It.EMPTY}insert(e,t){return new Re(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,It.BLACK,null,null))}remove(e){return new Re(this.comparator,this.root.remove(e,this.comparator).copy(null,null,It.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const r=this.comparator(e,t.key);if(r===0)return t.value;r<0?t=t.left:r>0&&(t=t.right)}return null}indexOf(e){let t=0,r=this.root;for(;!r.isEmpty();){const i=this.comparator(e,r.key);if(i===0)return t+r.left.size;i<0?r=r.left:(t+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,r)=>(e(t,r),!1))}toString(){const e=[];return this.inorderTraversal((t,r)=>(e.push(`${t}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Ec(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Ec(this.root,e,this.comparator,!1)}getReverseIterator(){return new Ec(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Ec(this.root,e,this.comparator,!0)}}class Ec{constructor(e,t,r,i){this.isReverse=i,this.nodeStack=[];let s=1;for(;!e.isEmpty();)if(s=t?r(e.key,t):1,t&&i&&(s*=-1),s<0)e=this.isReverse?e.left:e.right;else{if(s===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class It{constructor(e,t,r,i,s){this.key=e,this.value=t,this.color=r??It.RED,this.left=i??It.EMPTY,this.right=s??It.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,r,i,s){return new It(e??this.key,t??this.value,r??this.color,i??this.left,s??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,r){let i=this;const s=r(e,i.key);return i=s<0?i.copy(null,null,null,i.left.insert(e,t,r),null):s===0?i.copy(null,t,null,null,null):i.copy(null,null,null,null,i.right.insert(e,t,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return It.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let r,i=this;if(t(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,t),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),t(e,i.key)===0){if(i.right.isEmpty())return It.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,t))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,It.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,It.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw X();const e=this.left.check();if(e!==this.right.check())throw X();return e+(this.isRed()?0:1)}}It.EMPTY=null,It.RED=!0,It.BLACK=!1;It.EMPTY=new class{constructor(){this.size=0}get key(){throw X()}get value(){throw X()}get color(){throw X()}get left(){throw X()}get right(){throw X()}copy(e,t,r,i,s){return this}insert(e,t,r){return new It(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pe{constructor(e){this.comparator=e,this.data=new Re(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,r)=>(e(t),!1))}forEachInRange(e,t){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;t(i.key)}}forEachWhile(e,t){let r;for(r=t!==void 0?this.data.getIteratorFrom(t):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new w0(this.data.getIterator())}getIteratorFrom(e){return new w0(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(r=>{t=t.add(r)}),t}isEqual(e){if(!(e instanceof Pe)||this.size!==e.size)return!1;const t=this.data.getIterator(),r=e.data.getIterator();for(;t.hasNext();){const i=t.getNext().key,s=r.getNext().key;if(this.comparator(i,s)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(t=>{e.push(t)}),e}toString(){const e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){const t=new Pe(this.comparator);return t.data=e,t}}class w0{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}function ro(n){return n.hasNext()?n.getNext():void 0}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nn{constructor(e){this.fields=e,e.sort(Be.comparator)}static empty(){return new nn([])}unionWith(e){let t=new Pe(Be.comparator);for(const r of this.fields)t=t.add(r);for(const r of e)t=t.add(r);return new nn(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return Go(this.fields,e.fields,(t,r)=>t.isEqual(r))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class M1 extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gM(){return typeof atob<"u"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dt{constructor(e){this.binaryString=e}static fromBase64String(e){const t=function(i){try{return atob(i)}catch(s){throw typeof DOMException<"u"&&s instanceof DOMException?new M1("Invalid base64 string: "+s):s}}(e);return new dt(t)}static fromUint8Array(e){const t=function(i){let s="";for(let o=0;o<i.length;++o)s+=String.fromCharCode(i[o]);return s}(e);return new dt(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(t){return btoa(t)}(this.binaryString)}toUint8Array(){return function(t){const r=new Uint8Array(t.length);for(let i=0;i<t.length;i++)r[i]=t.charCodeAt(i);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return oe(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}dt.EMPTY_BYTE_STRING=new dt("");const yM=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Nr(n){if(ee(!!n),typeof n=="string"){let e=0;const t=yM.exec(n);if(ee(!!t),t[1]){let i=t[1];i=(i+"000000000").substr(0,9),e=Number(i)}const r=new Date(n);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:Je(n.seconds),nanos:Je(n.nanos)}}function Je(n){return typeof n=="number"?n:typeof n=="string"?Number(n):0}function Pi(n){return typeof n=="string"?dt.fromBase64String(n):dt.fromUint8Array(n)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Bh(n){var e,t;return((t=(((e=n==null?void 0:n.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||t===void 0?void 0:t.stringValue)==="server_timestamp"}function Py(n){const e=n.mapValue.fields.__previous_value__;return Bh(e)?Py(e):e}function iu(n){const e=Nr(n.mapValue.fields.__local_write_time__.timestampValue);return new je(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _M{constructor(e,t,r,i,s,o,a,l,c){this.databaseId=e,this.appId=t,this.persistenceKey=r,this.host=i,this.ssl=s,this.forceLongPolling=o,this.autoDetectLongPolling=a,this.longPollingOptions=l,this.useFetchStreams=c}}class ki{constructor(e,t){this.projectId=e,this.database=t||"(default)"}static empty(){return new ki("","")}get isDefaultDatabase(){return this.database==="(default)"}isEqual(e){return e instanceof ki&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const oi={mapValue:{fields:{__type__:{stringValue:"__max__"}}}},Xc={nullValue:"NULL_VALUE"};function Cs(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?Bh(n)?4:O1(n)?9007199254740991:10:X()}function ar(n,e){if(n===e)return!0;const t=Cs(n);if(t!==Cs(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return iu(n).isEqual(iu(e));case 3:return function(i,s){if(typeof i.timestampValue=="string"&&typeof s.timestampValue=="string"&&i.timestampValue.length===s.timestampValue.length)return i.timestampValue===s.timestampValue;const o=Nr(i.timestampValue),a=Nr(s.timestampValue);return o.seconds===a.seconds&&o.nanos===a.nanos}(n,e);case 5:return n.stringValue===e.stringValue;case 6:return function(i,s){return Pi(i.bytesValue).isEqual(Pi(s.bytesValue))}(n,e);case 7:return n.referenceValue===e.referenceValue;case 8:return function(i,s){return Je(i.geoPointValue.latitude)===Je(s.geoPointValue.latitude)&&Je(i.geoPointValue.longitude)===Je(s.geoPointValue.longitude)}(n,e);case 2:return function(i,s){if("integerValue"in i&&"integerValue"in s)return Je(i.integerValue)===Je(s.integerValue);if("doubleValue"in i&&"doubleValue"in s){const o=Je(i.doubleValue),a=Je(s.doubleValue);return o===a?ru(o)===ru(a):isNaN(o)&&isNaN(a)}return!1}(n,e);case 9:return Go(n.arrayValue.values||[],e.arrayValue.values||[],ar);case 10:return function(i,s){const o=i.mapValue.fields||{},a=s.mapValue.fields||{};if(v0(o)!==v0(a))return!1;for(const l in o)if(o.hasOwnProperty(l)&&(a[l]===void 0||!ar(o[l],a[l])))return!1;return!0}(n,e);default:return X()}}function su(n,e){return(n.values||[]).find(t=>ar(t,e))!==void 0}function xi(n,e){if(n===e)return 0;const t=Cs(n),r=Cs(e);if(t!==r)return oe(t,r);switch(t){case 0:case 9007199254740991:return 0;case 1:return oe(n.booleanValue,e.booleanValue);case 2:return function(s,o){const a=Je(s.integerValue||s.doubleValue),l=Je(o.integerValue||o.doubleValue);return a<l?-1:a>l?1:a===l?0:isNaN(a)?isNaN(l)?0:-1:1}(n,e);case 3:return E0(n.timestampValue,e.timestampValue);case 4:return E0(iu(n),iu(e));case 5:return oe(n.stringValue,e.stringValue);case 6:return function(s,o){const a=Pi(s),l=Pi(o);return a.compareTo(l)}(n.bytesValue,e.bytesValue);case 7:return function(s,o){const a=s.split("/"),l=o.split("/");for(let c=0;c<a.length&&c<l.length;c++){const d=oe(a[c],l[c]);if(d!==0)return d}return oe(a.length,l.length)}(n.referenceValue,e.referenceValue);case 8:return function(s,o){const a=oe(Je(s.latitude),Je(o.latitude));return a!==0?a:oe(Je(s.longitude),Je(o.longitude))}(n.geoPointValue,e.geoPointValue);case 9:return function(s,o){const a=s.values||[],l=o.values||[];for(let c=0;c<a.length&&c<l.length;++c){const d=xi(a[c],l[c]);if(d)return d}return oe(a.length,l.length)}(n.arrayValue,e.arrayValue);case 10:return function(s,o){if(s===oi.mapValue&&o===oi.mapValue)return 0;if(s===oi.mapValue)return 1;if(o===oi.mapValue)return-1;const a=s.fields||{},l=Object.keys(a),c=o.fields||{},d=Object.keys(c);l.sort(),d.sort();for(let h=0;h<l.length&&h<d.length;++h){const p=oe(l[h],d[h]);if(p!==0)return p;const g=xi(a[l[h]],c[d[h]]);if(g!==0)return g}return oe(l.length,d.length)}(n.mapValue,e.mapValue);default:throw X()}}function E0(n,e){if(typeof n=="string"&&typeof e=="string"&&n.length===e.length)return oe(n,e);const t=Nr(n),r=Nr(e),i=oe(t.seconds,r.seconds);return i!==0?i:oe(t.nanos,r.nanos)}function Xo(n){return Fm(n)}function Fm(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?function(t){const r=Nr(t);return`time(${r.seconds},${r.nanos})`}(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?function(t){return Pi(t).toBase64()}(n.bytesValue):"referenceValue"in n?function(t){return Y.fromName(t).toString()}(n.referenceValue):"geoPointValue"in n?function(t){return`geo(${t.latitude},${t.longitude})`}(n.geoPointValue):"arrayValue"in n?function(t){let r="[",i=!0;for(const s of t.values||[])i?i=!1:r+=",",r+=Fm(s);return r+"]"}(n.arrayValue):"mapValue"in n?function(t){const r=Object.keys(t.fields||{}).sort();let i="{",s=!0;for(const o of r)s?s=!1:i+=",",i+=`${o}:${Fm(t.fields[o])}`;return i+"}"}(n.mapValue):X()}function Rs(n,e){return{referenceValue:`projects/${n.projectId}/databases/${n.database}/documents/${e.path.canonicalString()}`}}function Bm(n){return!!n&&"integerValue"in n}function ou(n){return!!n&&"arrayValue"in n}function T0(n){return!!n&&"nullValue"in n}function I0(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function Jc(n){return!!n&&"mapValue"in n}function bl(n){if(n.geoPointValue)return{geoPointValue:Object.assign({},n.geoPointValue)};if(n.timestampValue&&typeof n.timestampValue=="object")return{timestampValue:Object.assign({},n.timestampValue)};if(n.mapValue){const e={mapValue:{fields:{}}};return Ys(n.mapValue.fields,(t,r)=>e.mapValue.fields[t]=bl(r)),e}if(n.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(n.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=bl(n.arrayValue.values[t]);return e}return Object.assign({},n)}function O1(n){return(((n.mapValue||{}).fields||{}).__type__||{}).stringValue==="__max__"}function vM(n){return"nullValue"in n?Xc:"booleanValue"in n?{booleanValue:!1}:"integerValue"in n||"doubleValue"in n?{doubleValue:NaN}:"timestampValue"in n?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in n?{stringValue:""}:"bytesValue"in n?{bytesValue:""}:"referenceValue"in n?Rs(ki.empty(),Y.empty()):"geoPointValue"in n?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in n?{arrayValue:{}}:"mapValue"in n?{mapValue:{}}:X()}function wM(n){return"nullValue"in n?{booleanValue:!1}:"booleanValue"in n?{doubleValue:NaN}:"integerValue"in n||"doubleValue"in n?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in n?{stringValue:""}:"stringValue"in n?{bytesValue:""}:"bytesValue"in n?Rs(ki.empty(),Y.empty()):"referenceValue"in n?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in n?{arrayValue:{}}:"arrayValue"in n?{mapValue:{}}:"mapValue"in n?oi:X()}function S0(n,e){const t=xi(n.value,e.value);return t!==0?t:n.inclusive&&!e.inclusive?-1:!n.inclusive&&e.inclusive?1:0}function D0(n,e){const t=xi(n.value,e.value);return t!==0?t:n.inclusive&&!e.inclusive?1:!n.inclusive&&e.inclusive?-1:0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class St{constructor(e){this.value=e}static empty(){return new St({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let r=0;r<e.length-1;++r)if(t=(t.mapValue.fields||{})[e.get(r)],!Jc(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=bl(t)}setAll(e){let t=Be.emptyPath(),r={},i=[];e.forEach((o,a)=>{if(!t.isImmediateParentOf(a)){const l=this.getFieldsMap(t);this.applyChanges(l,r,i),r={},i=[],t=a.popLast()}o?r[a.lastSegment()]=bl(o):i.push(a.lastSegment())});const s=this.getFieldsMap(t);this.applyChanges(s,r,i)}delete(e){const t=this.field(e.popLast());Jc(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return ar(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let r=0;r<e.length;++r){let i=t.mapValue.fields[e.get(r)];Jc(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},t.mapValue.fields[e.get(r)]=i),t=i}return t.mapValue.fields}applyChanges(e,t,r){Ys(t,(i,s)=>e[i]=s);for(const i of r)delete e[i]}clone(){return new St(bl(this.value))}}function V1(n){const e=[];return Ys(n.fields,(t,r)=>{const i=new Be([t]);if(Jc(r)){const s=V1(r.mapValue).fields;if(s.length===0)e.push(i);else for(const o of s)e.push(i.child(o))}else e.push(i)}),new nn(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Me{constructor(e,t,r,i,s,o,a){this.key=e,this.documentType=t,this.version=r,this.readTime=i,this.createTime=s,this.data=o,this.documentState=a}static newInvalidDocument(e){return new Me(e,0,te.min(),te.min(),te.min(),St.empty(),0)}static newFoundDocument(e,t,r,i){return new Me(e,1,t,te.min(),r,i,0)}static newNoDocument(e,t){return new Me(e,2,t,te.min(),te.min(),St.empty(),0)}static newUnknownDocument(e,t){return new Me(e,3,t,te.min(),te.min(),St.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(te.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=St.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=St.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=te.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof Me&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Me(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ci{constructor(e,t){this.position=e,this.inclusive=t}}function b0(n,e,t){let r=0;for(let i=0;i<n.position.length;i++){const s=e[i],o=n.position[i];if(s.field.isKeyField()?r=Y.comparator(Y.fromName(o.referenceValue),t.key):r=xi(o,t.data.field(s.field)),s.dir==="desc"&&(r*=-1),r!==0)break}return r}function P0(n,e){if(n===null)return e===null;if(e===null||n.inclusive!==e.inclusive||n.position.length!==e.position.length)return!1;for(let t=0;t<n.position.length;t++)if(!ar(n.position[t],e.position[t]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class au{constructor(e,t="asc"){this.field=e,this.dir=t}}function EM(n,e){return n.dir===e.dir&&n.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class L1{}class he extends L1{constructor(e,t,r){super(),this.field=e,this.op=t,this.value=r}static create(e,t,r){return e.isKeyField()?t==="in"||t==="not-in"?this.createKeyFieldInFilter(e,t,r):new TM(e,t,r):t==="array-contains"?new DM(e,r):t==="in"?new z1(e,r):t==="not-in"?new bM(e,r):t==="array-contains-any"?new PM(e,r):new he(e,t,r)}static createKeyFieldInFilter(e,t,r){return t==="in"?new IM(e,r):new SM(e,r)}matches(e){const t=e.data.field(this.field);return this.op==="!="?t!==null&&this.matchesComparison(xi(t,this.value)):t!==null&&Cs(this.value)===Cs(t)&&this.matchesComparison(xi(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return X()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class De extends L1{constructor(e,t){super(),this.filters=e,this.op=t,this.ae=null}static create(e,t){return new De(e,t)}matches(e){return Jo(this)?this.filters.find(t=>!t.matches(e))===void 0:this.filters.find(t=>t.matches(e))!==void 0}getFlattenedFilters(){return this.ae!==null||(this.ae=this.filters.reduce((e,t)=>e.concat(t.getFlattenedFilters()),[])),this.ae}getFilters(){return Object.assign([],this.filters)}}function Jo(n){return n.op==="and"}function Um(n){return n.op==="or"}function ky(n){return F1(n)&&Jo(n)}function F1(n){for(const e of n.filters)if(e instanceof De)return!1;return!0}function jm(n){if(n instanceof he)return n.field.canonicalString()+n.op.toString()+Xo(n.value);if(ky(n))return n.filters.map(e=>jm(e)).join(",");{const e=n.filters.map(t=>jm(t)).join(",");return`${n.op}(${e})`}}function B1(n,e){return n instanceof he?function(r,i){return i instanceof he&&r.op===i.op&&r.field.isEqual(i.field)&&ar(r.value,i.value)}(n,e):n instanceof De?function(r,i){return i instanceof De&&r.op===i.op&&r.filters.length===i.filters.length?r.filters.reduce((s,o,a)=>s&&B1(o,i.filters[a]),!0):!1}(n,e):void X()}function U1(n,e){const t=n.filters.concat(e);return De.create(t,n.op)}function j1(n){return n instanceof he?function(t){return`${t.field.canonicalString()} ${t.op} ${Xo(t.value)}`}(n):n instanceof De?function(t){return t.op.toString()+" {"+t.getFilters().map(j1).join(" ,")+"}"}(n):"Filter"}class TM extends he{constructor(e,t,r){super(e,t,r),this.key=Y.fromName(r.referenceValue)}matches(e){const t=Y.comparator(e.key,this.key);return this.matchesComparison(t)}}class IM extends he{constructor(e,t){super(e,"in",t),this.keys=$1("in",t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}}class SM extends he{constructor(e,t){super(e,"not-in",t),this.keys=$1("not-in",t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}}function $1(n,e){var t;return(((t=e.arrayValue)===null||t===void 0?void 0:t.values)||[]).map(r=>Y.fromName(r.referenceValue))}class DM extends he{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return ou(t)&&su(t.arrayValue,this.value)}}class z1 extends he{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return t!==null&&su(this.value.arrayValue,t)}}class bM extends he{constructor(e,t){super(e,"not-in",t)}matches(e){if(su(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return t!==null&&!su(this.value.arrayValue,t)}}class PM extends he{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!ou(t)||!t.arrayValue.values)&&t.arrayValue.values.some(r=>su(this.value.arrayValue,r))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kM{constructor(e,t=null,r=[],i=[],s=null,o=null,a=null){this.path=e,this.collectionGroup=t,this.orderBy=r,this.filters=i,this.limit=s,this.startAt=o,this.endAt=a,this.ue=null}}function $m(n,e=null,t=[],r=[],i=null,s=null,o=null){return new kM(n,e,t,r,i,s,o)}function As(n){const e=H(n);if(e.ue===null){let t=e.path.canonicalString();e.collectionGroup!==null&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map(r=>jm(r)).join(","),t+="|ob:",t+=e.orderBy.map(r=>function(s){return s.field.canonicalString()+s.dir}(r)).join(","),Tu(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(r=>Xo(r)).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(r=>Xo(r)).join(",")),e.ue=t}return e.ue}function Iu(n,e){if(n.limit!==e.limit||n.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<n.orderBy.length;t++)if(!EM(n.orderBy[t],e.orderBy[t]))return!1;if(n.filters.length!==e.filters.length)return!1;for(let t=0;t<n.filters.length;t++)if(!B1(n.filters[t],e.filters[t]))return!1;return n.collectionGroup===e.collectionGroup&&!!n.path.isEqual(e.path)&&!!P0(n.startAt,e.startAt)&&P0(n.endAt,e.endAt)}function jd(n){return Y.isDocumentKey(n.path)&&n.collectionGroup===null&&n.filters.length===0}function $d(n,e){return n.filters.filter(t=>t instanceof he&&t.field.isEqual(e))}function k0(n,e,t){let r=Xc,i=!0;for(const s of $d(n,e)){let o=Xc,a=!0;switch(s.op){case"<":case"<=":o=vM(s.value);break;case"==":case"in":case">=":o=s.value;break;case">":o=s.value,a=!1;break;case"!=":case"not-in":o=Xc}S0({value:r,inclusive:i},{value:o,inclusive:a})<0&&(r=o,i=a)}if(t!==null){for(let s=0;s<n.orderBy.length;++s)if(n.orderBy[s].field.isEqual(e)){const o=t.position[s];S0({value:r,inclusive:i},{value:o,inclusive:t.inclusive})<0&&(r=o,i=t.inclusive);break}}return{value:r,inclusive:i}}function x0(n,e,t){let r=oi,i=!0;for(const s of $d(n,e)){let o=oi,a=!0;switch(s.op){case">=":case">":o=wM(s.value),a=!1;break;case"==":case"in":case"<=":o=s.value;break;case"<":o=s.value,a=!1;break;case"!=":case"not-in":o=oi}D0({value:r,inclusive:i},{value:o,inclusive:a})>0&&(r=o,i=a)}if(t!==null){for(let s=0;s<n.orderBy.length;++s)if(n.orderBy[s].field.isEqual(e)){const o=t.position[s];D0({value:r,inclusive:i},{value:o,inclusive:t.inclusive})>0&&(r=o,i=t.inclusive);break}}return{value:r,inclusive:i}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fr{constructor(e,t=null,r=[],i=[],s=null,o="F",a=null,l=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=r,this.filters=i,this.limit=s,this.limitType=o,this.startAt=a,this.endAt=l,this.ce=null,this.le=null,this.he=null,this.startAt,this.endAt}}function q1(n,e,t,r,i,s,o,a){return new Fr(n,e,t,r,i,s,o,a)}function Ea(n){return new Fr(n)}function C0(n){return n.filters.length===0&&n.limit===null&&n.startAt==null&&n.endAt==null&&(n.explicitOrderBy.length===0||n.explicitOrderBy.length===1&&n.explicitOrderBy[0].field.isKeyField())}function xy(n){return n.collectionGroup!==null}function Mo(n){const e=H(n);if(e.ce===null){e.ce=[];const t=new Set;for(const s of e.explicitOrderBy)e.ce.push(s),t.add(s.field.canonicalString());const r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(o){let a=new Pe(Be.comparator);return o.filters.forEach(l=>{l.getFlattenedFilters().forEach(c=>{c.isInequality()&&(a=a.add(c.field))})}),a})(e).forEach(s=>{t.has(s.canonicalString())||s.isKeyField()||e.ce.push(new au(s,r))}),t.has(Be.keyField().canonicalString())||e.ce.push(new au(Be.keyField(),r))}return e.ce}function Qt(n){const e=H(n);return e.le||(e.le=xM(e,Mo(n))),e.le}function xM(n,e){if(n.limitType==="F")return $m(n.path,n.collectionGroup,e,n.filters,n.limit,n.startAt,n.endAt);{e=e.map(i=>{const s=i.dir==="desc"?"asc":"desc";return new au(i.field,s)});const t=n.endAt?new Ci(n.endAt.position,n.endAt.inclusive):null,r=n.startAt?new Ci(n.startAt.position,n.startAt.inclusive):null;return $m(n.path,n.collectionGroup,e,n.filters,n.limit,t,r)}}function zm(n,e){const t=n.filters.concat([e]);return new Fr(n.path,n.collectionGroup,n.explicitOrderBy.slice(),t,n.limit,n.limitType,n.startAt,n.endAt)}function zd(n,e,t){return new Fr(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),e,t,n.startAt,n.endAt)}function Su(n,e){return Iu(Qt(n),Qt(e))&&n.limitType===e.limitType}function W1(n){return`${As(Qt(n))}|lt:${n.limitType}`}function co(n){return`Query(target=${function(t){let r=t.path.canonicalString();return t.collectionGroup!==null&&(r+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(r+=`, filters: [${t.filters.map(i=>j1(i)).join(", ")}]`),Tu(t.limit)||(r+=", limit: "+t.limit),t.orderBy.length>0&&(r+=`, orderBy: [${t.orderBy.map(i=>function(o){return`${o.field.canonicalString()} (${o.dir})`}(i)).join(", ")}]`),t.startAt&&(r+=", startAt: ",r+=t.startAt.inclusive?"b:":"a:",r+=t.startAt.position.map(i=>Xo(i)).join(",")),t.endAt&&(r+=", endAt: ",r+=t.endAt.inclusive?"a:":"b:",r+=t.endAt.position.map(i=>Xo(i)).join(",")),`Target(${r})`}(Qt(n))}; limitType=${n.limitType})`}function Du(n,e){return e.isFoundDocument()&&function(r,i){const s=i.key.path;return r.collectionGroup!==null?i.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(s):Y.isDocumentKey(r.path)?r.path.isEqual(s):r.path.isImmediateParentOf(s)}(n,e)&&function(r,i){for(const s of Mo(r))if(!s.field.isKeyField()&&i.data.field(s.field)===null)return!1;return!0}(n,e)&&function(r,i){for(const s of r.filters)if(!s.matches(i))return!1;return!0}(n,e)&&function(r,i){return!(r.startAt&&!function(o,a,l){const c=b0(o,a,l);return o.inclusive?c<=0:c<0}(r.startAt,Mo(r),i)||r.endAt&&!function(o,a,l){const c=b0(o,a,l);return o.inclusive?c>=0:c>0}(r.endAt,Mo(r),i))}(n,e)}function Y1(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function H1(n){return(e,t)=>{let r=!1;for(const i of Mo(n)){const s=CM(i,e,t);if(s!==0)return s;r=r||i.field.isKeyField()}return 0}}function CM(n,e,t){const r=n.field.isKeyField()?Y.comparator(e.key,t.key):function(s,o,a){const l=o.data.field(s),c=a.data.field(s);return l!==null&&c!==null?xi(l,c):X()}(n.field,e,t);switch(n.dir){case"asc":return r;case"desc":return-1*r;default:return X()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qi{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),r=this.inner[t];if(r!==void 0){for(const[i,s]of r)if(this.equalsFn(i,e))return s}}has(e){return this.get(e)!==void 0}set(e,t){const r=this.mapKeyFn(e),i=this.inner[r];if(i===void 0)return this.inner[r]=[[e,t]],void this.innerSize++;for(let s=0;s<i.length;s++)if(this.equalsFn(i[s][0],e))return void(i[s]=[e,t]);i.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),r=this.inner[t];if(r===void 0)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return r.length===1?delete this.inner[t]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(e){Ys(this.inner,(t,r)=>{for(const[i,s]of r)e(i,s)})}isEmpty(){return N1(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const RM=new Re(Y.comparator);function rn(){return RM}const Q1=new Re(Y.comparator);function dl(...n){let e=Q1;for(const t of n)e=e.insert(t.key,t);return e}function K1(n){let e=Q1;return n.forEach((t,r)=>e=e.insert(t,r.overlayedDocument)),e}function Jn(){return Pl()}function G1(){return Pl()}function Pl(){return new qi(n=>n.toString(),(n,e)=>n.isEqual(e))}const AM=new Re(Y.comparator),NM=new Pe(Y.comparator);function ae(...n){let e=NM;for(const t of n)e=e.add(t);return e}const MM=new Pe(oe);function Cy(){return MM}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function X1(n,e){if(n.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:ru(e)?"-0":e}}function J1(n){return{integerValue:""+n}}function Z1(n,e){return P1(e)?J1(e):X1(n,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Uh{constructor(){this._=void 0}}function OM(n,e,t){return n instanceof Zo?function(i,s){const o={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:i.seconds,nanos:i.nanoseconds}}}};return s&&Bh(s)&&(s=Py(s)),s&&(o.fields.__previous_value__=s),{mapValue:o}}(t,e):n instanceof Ns?tD(n,e):n instanceof Ms?nD(n,e):function(i,s){const o=eD(i,s),a=R0(o)+R0(i.Pe);return Bm(o)&&Bm(i.Pe)?J1(a):X1(i.serializer,a)}(n,e)}function VM(n,e,t){return n instanceof Ns?tD(n,e):n instanceof Ms?nD(n,e):t}function eD(n,e){return n instanceof ea?function(r){return Bm(r)||function(s){return!!s&&"doubleValue"in s}(r)}(e)?e:{integerValue:0}:null}class Zo extends Uh{}class Ns extends Uh{constructor(e){super(),this.elements=e}}function tD(n,e){const t=rD(e);for(const r of n.elements)t.some(i=>ar(i,r))||t.push(r);return{arrayValue:{values:t}}}class Ms extends Uh{constructor(e){super(),this.elements=e}}function nD(n,e){let t=rD(e);for(const r of n.elements)t=t.filter(i=>!ar(i,r));return{arrayValue:{values:t}}}class ea extends Uh{constructor(e,t){super(),this.serializer=e,this.Pe=t}}function R0(n){return Je(n.integerValue||n.doubleValue)}function rD(n){return ou(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bu{constructor(e,t){this.field=e,this.transform=t}}function LM(n,e){return n.field.isEqual(e.field)&&function(r,i){return r instanceof Ns&&i instanceof Ns||r instanceof Ms&&i instanceof Ms?Go(r.elements,i.elements,ar):r instanceof ea&&i instanceof ea?ar(r.Pe,i.Pe):r instanceof Zo&&i instanceof Zo}(n.transform,e.transform)}class FM{constructor(e,t){this.version=e,this.transformResults=t}}class Ue{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new Ue}static exists(e){return new Ue(void 0,e)}static updateTime(e){return new Ue(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Zc(n,e){return n.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(n.updateTime):n.exists===void 0||n.exists===e.isFoundDocument()}class jh{}function iD(n,e){if(!n.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return n.isNoDocument()?new Ia(n.key,Ue.none()):new Ta(n.key,n.data,Ue.none());{const t=n.data,r=St.empty();let i=new Pe(Be.comparator);for(let s of e.fields)if(!i.has(s)){let o=t.field(s);o===null&&s.length>1&&(s=s.popLast(),o=t.field(s)),o===null?r.delete(s):r.set(s,o),i=i.add(s)}return new Br(n.key,r,new nn(i.toArray()),Ue.none())}}function BM(n,e,t){n instanceof Ta?function(i,s,o){const a=i.value.clone(),l=N0(i.fieldTransforms,s,o.transformResults);a.setAll(l),s.convertToFoundDocument(o.version,a).setHasCommittedMutations()}(n,e,t):n instanceof Br?function(i,s,o){if(!Zc(i.precondition,s))return void s.convertToUnknownDocument(o.version);const a=N0(i.fieldTransforms,s,o.transformResults),l=s.data;l.setAll(sD(i)),l.setAll(a),s.convertToFoundDocument(o.version,l).setHasCommittedMutations()}(n,e,t):function(i,s,o){s.convertToNoDocument(o.version).setHasCommittedMutations()}(0,e,t)}function kl(n,e,t,r){return n instanceof Ta?function(s,o,a,l){if(!Zc(s.precondition,o))return a;const c=s.value.clone(),d=M0(s.fieldTransforms,l,o);return c.setAll(d),o.convertToFoundDocument(o.version,c).setHasLocalMutations(),null}(n,e,t,r):n instanceof Br?function(s,o,a,l){if(!Zc(s.precondition,o))return a;const c=M0(s.fieldTransforms,l,o),d=o.data;return d.setAll(sD(s)),d.setAll(c),o.convertToFoundDocument(o.version,d).setHasLocalMutations(),a===null?null:a.unionWith(s.fieldMask.fields).unionWith(s.fieldTransforms.map(h=>h.field))}(n,e,t,r):function(s,o,a){return Zc(s.precondition,o)?(o.convertToNoDocument(o.version).setHasLocalMutations(),null):a}(n,e,t)}function UM(n,e){let t=null;for(const r of n.fieldTransforms){const i=e.data.field(r.field),s=eD(r.transform,i||null);s!=null&&(t===null&&(t=St.empty()),t.set(r.field,s))}return t||null}function A0(n,e){return n.type===e.type&&!!n.key.isEqual(e.key)&&!!n.precondition.isEqual(e.precondition)&&!!function(r,i){return r===void 0&&i===void 0||!(!r||!i)&&Go(r,i,(s,o)=>LM(s,o))}(n.fieldTransforms,e.fieldTransforms)&&(n.type===0?n.value.isEqual(e.value):n.type!==1||n.data.isEqual(e.data)&&n.fieldMask.isEqual(e.fieldMask))}class Ta extends jh{constructor(e,t,r,i=[]){super(),this.key=e,this.value=t,this.precondition=r,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}}class Br extends jh{constructor(e,t,r,i,s=[]){super(),this.key=e,this.data=t,this.fieldMask=r,this.precondition=i,this.fieldTransforms=s,this.type=1}getFieldMask(){return this.fieldMask}}function sD(n){const e=new Map;return n.fieldMask.fields.forEach(t=>{if(!t.isEmpty()){const r=n.data.field(t);e.set(t,r)}}),e}function N0(n,e,t){const r=new Map;ee(n.length===t.length);for(let i=0;i<t.length;i++){const s=n[i],o=s.transform,a=e.data.field(s.field);r.set(s.field,VM(o,a,t[i]))}return r}function M0(n,e,t){const r=new Map;for(const i of n){const s=i.transform,o=t.data.field(i.field);r.set(i.field,OM(s,o,e))}return r}class Ia extends jh{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class Ry extends jh{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ay{constructor(e,t,r,i){this.batchId=e,this.localWriteTime=t,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(e,t){const r=t.mutationResults;for(let i=0;i<this.mutations.length;i++){const s=this.mutations[i];s.key.isEqual(e.key)&&BM(s,e,r[i])}}applyToLocalView(e,t){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(t=kl(r,e,t,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(t=kl(r,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const r=G1();return this.mutations.forEach(i=>{const s=e.get(i.key),o=s.overlayedDocument;let a=this.applyToLocalView(o,s.mutatedFields);a=t.has(i.key)?null:a;const l=iD(o,a);l!==null&&r.set(i.key,l),o.isValidDocument()||o.convertToNoDocument(te.min())}),r}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),ae())}isEqual(e){return this.batchId===e.batchId&&Go(this.mutations,e.mutations,(t,r)=>A0(t,r))&&Go(this.baseMutations,e.baseMutations,(t,r)=>A0(t,r))}}class Ny{constructor(e,t,r,i){this.batch=e,this.commitVersion=t,this.mutationResults=r,this.docVersions=i}static from(e,t,r){ee(e.mutations.length===r.length);let i=function(){return AM}();const s=e.mutations;for(let o=0;o<s.length;o++)i=i.insert(s[o].key,r[o].version);return new Ny(e,t,r,i)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class My{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jM{constructor(e,t){this.count=e,this.unchangedNames=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var at,pe;function oD(n){switch(n){default:return X();case F.CANCELLED:case F.UNKNOWN:case F.DEADLINE_EXCEEDED:case F.RESOURCE_EXHAUSTED:case F.INTERNAL:case F.UNAVAILABLE:case F.UNAUTHENTICATED:return!1;case F.INVALID_ARGUMENT:case F.NOT_FOUND:case F.ALREADY_EXISTS:case F.PERMISSION_DENIED:case F.FAILED_PRECONDITION:case F.ABORTED:case F.OUT_OF_RANGE:case F.UNIMPLEMENTED:case F.DATA_LOSS:return!0}}function aD(n){if(n===void 0)return rt("GRPC error has no .code"),F.UNKNOWN;switch(n){case at.OK:return F.OK;case at.CANCELLED:return F.CANCELLED;case at.UNKNOWN:return F.UNKNOWN;case at.DEADLINE_EXCEEDED:return F.DEADLINE_EXCEEDED;case at.RESOURCE_EXHAUSTED:return F.RESOURCE_EXHAUSTED;case at.INTERNAL:return F.INTERNAL;case at.UNAVAILABLE:return F.UNAVAILABLE;case at.UNAUTHENTICATED:return F.UNAUTHENTICATED;case at.INVALID_ARGUMENT:return F.INVALID_ARGUMENT;case at.NOT_FOUND:return F.NOT_FOUND;case at.ALREADY_EXISTS:return F.ALREADY_EXISTS;case at.PERMISSION_DENIED:return F.PERMISSION_DENIED;case at.FAILED_PRECONDITION:return F.FAILED_PRECONDITION;case at.ABORTED:return F.ABORTED;case at.OUT_OF_RANGE:return F.OUT_OF_RANGE;case at.UNIMPLEMENTED:return F.UNIMPLEMENTED;case at.DATA_LOSS:return F.DATA_LOSS;default:return X()}}(pe=at||(at={}))[pe.OK=0]="OK",pe[pe.CANCELLED=1]="CANCELLED",pe[pe.UNKNOWN=2]="UNKNOWN",pe[pe.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",pe[pe.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",pe[pe.NOT_FOUND=5]="NOT_FOUND",pe[pe.ALREADY_EXISTS=6]="ALREADY_EXISTS",pe[pe.PERMISSION_DENIED=7]="PERMISSION_DENIED",pe[pe.UNAUTHENTICATED=16]="UNAUTHENTICATED",pe[pe.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",pe[pe.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",pe[pe.ABORTED=10]="ABORTED",pe[pe.OUT_OF_RANGE=11]="OUT_OF_RANGE",pe[pe.UNIMPLEMENTED=12]="UNIMPLEMENTED",pe[pe.INTERNAL=13]="INTERNAL",pe[pe.UNAVAILABLE=14]="UNAVAILABLE",pe[pe.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lD(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $M=new _s([4294967295,4294967295],0);function O0(n){const e=lD().encode(n),t=new h1;return t.update(e),new Uint8Array(t.digest())}function V0(n){const e=new DataView(n.buffer),t=e.getUint32(0,!0),r=e.getUint32(4,!0),i=e.getUint32(8,!0),s=e.getUint32(12,!0);return[new _s([t,r],0),new _s([i,s],0)]}class Oy{constructor(e,t,r){if(this.bitmap=e,this.padding=t,this.hashCount=r,t<0||t>=8)throw new hl(`Invalid padding: ${t}`);if(r<0)throw new hl(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new hl(`Invalid hash count: ${r}`);if(e.length===0&&t!==0)throw new hl(`Invalid padding when bitmap length is 0: ${t}`);this.Ie=8*e.length-t,this.Te=_s.fromNumber(this.Ie)}Ee(e,t,r){let i=e.add(t.multiply(_s.fromNumber(r)));return i.compare($M)===1&&(i=new _s([i.getBits(0),i.getBits(1)],0)),i.modulo(this.Te).toNumber()}de(e){return(this.bitmap[Math.floor(e/8)]&1<<e%8)!=0}mightContain(e){if(this.Ie===0)return!1;const t=O0(e),[r,i]=V0(t);for(let s=0;s<this.hashCount;s++){const o=this.Ee(r,i,s);if(!this.de(o))return!1}return!0}static create(e,t,r){const i=e%8==0?0:8-e%8,s=new Uint8Array(Math.ceil(e/8)),o=new Oy(s,i,t);return r.forEach(a=>o.insert(a)),o}insert(e){if(this.Ie===0)return;const t=O0(e),[r,i]=V0(t);for(let s=0;s<this.hashCount;s++){const o=this.Ee(r,i,s);this.Ae(o)}}Ae(e){const t=Math.floor(e/8),r=e%8;this.bitmap[t]|=1<<r}}class hl extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pu{constructor(e,t,r,i,s){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=s}static createSynthesizedRemoteEventForCurrentChange(e,t,r){const i=new Map;return i.set(e,ku.createSynthesizedTargetChangeForCurrentChange(e,t,r)),new Pu(te.min(),i,new Re(oe),rn(),ae())}}class ku{constructor(e,t,r,i,s){this.resumeToken=e,this.current=t,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=s}static createSynthesizedTargetChangeForCurrentChange(e,t,r){return new ku(r,t,ae(),ae(),ae())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ed{constructor(e,t,r,i){this.Re=e,this.removedTargetIds=t,this.key=r,this.Ve=i}}class uD{constructor(e,t){this.targetId=e,this.me=t}}class cD{constructor(e,t,r=dt.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=t,this.resumeToken=r,this.cause=i}}class L0{constructor(){this.fe=0,this.ge=B0(),this.pe=dt.EMPTY_BYTE_STRING,this.ye=!1,this.we=!0}get current(){return this.ye}get resumeToken(){return this.pe}get Se(){return this.fe!==0}get be(){return this.we}De(e){e.approximateByteSize()>0&&(this.we=!0,this.pe=e)}Ce(){let e=ae(),t=ae(),r=ae();return this.ge.forEach((i,s)=>{switch(s){case 0:e=e.add(i);break;case 2:t=t.add(i);break;case 1:r=r.add(i);break;default:X()}}),new ku(this.pe,this.ye,e,t,r)}ve(){this.we=!1,this.ge=B0()}Fe(e,t){this.we=!0,this.ge=this.ge.insert(e,t)}Me(e){this.we=!0,this.ge=this.ge.remove(e)}xe(){this.fe+=1}Oe(){this.fe-=1,ee(this.fe>=0)}Ne(){this.we=!0,this.ye=!0}}class zM{constructor(e){this.Le=e,this.Be=new Map,this.ke=rn(),this.qe=F0(),this.Qe=new Re(oe)}Ke(e){for(const t of e.Re)e.Ve&&e.Ve.isFoundDocument()?this.$e(t,e.Ve):this.Ue(t,e.key,e.Ve);for(const t of e.removedTargetIds)this.Ue(t,e.key,e.Ve)}We(e){this.forEachTarget(e,t=>{const r=this.Ge(t);switch(e.state){case 0:this.ze(t)&&r.De(e.resumeToken);break;case 1:r.Oe(),r.Se||r.ve(),r.De(e.resumeToken);break;case 2:r.Oe(),r.Se||this.removeTarget(t);break;case 3:this.ze(t)&&(r.Ne(),r.De(e.resumeToken));break;case 4:this.ze(t)&&(this.je(t),r.De(e.resumeToken));break;default:X()}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.Be.forEach((r,i)=>{this.ze(i)&&t(i)})}He(e){const t=e.targetId,r=e.me.count,i=this.Je(t);if(i){const s=i.target;if(jd(s))if(r===0){const o=new Y(s.path);this.Ue(t,o,Me.newNoDocument(o,te.min()))}else ee(r===1);else{const o=this.Ye(t);if(o!==r){const a=this.Ze(e),l=a?this.Xe(a,e,o):1;if(l!==0){this.je(t);const c=l===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Qe=this.Qe.insert(t,c)}}}}}Ze(e){const t=e.me.unchangedNames;if(!t||!t.bits)return null;const{bits:{bitmap:r="",padding:i=0},hashCount:s=0}=t;let o,a;try{o=Pi(r).toUint8Array()}catch(l){if(l instanceof M1)return Bn("Decoding the base64 bloom filter in existence filter failed ("+l.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw l}try{a=new Oy(o,i,s)}catch(l){return Bn(l instanceof hl?"BloomFilter error: ":"Applying bloom filter failed: ",l),null}return a.Ie===0?null:a}Xe(e,t,r){return t.me.count===r-this.nt(e,t.targetId)?0:2}nt(e,t){const r=this.Le.getRemoteKeysForTarget(t);let i=0;return r.forEach(s=>{const o=this.Le.tt(),a=`projects/${o.projectId}/databases/${o.database}/documents/${s.path.canonicalString()}`;e.mightContain(a)||(this.Ue(t,s,null),i++)}),i}rt(e){const t=new Map;this.Be.forEach((s,o)=>{const a=this.Je(o);if(a){if(s.current&&jd(a.target)){const l=new Y(a.target.path);this.ke.get(l)!==null||this.it(o,l)||this.Ue(o,l,Me.newNoDocument(l,e))}s.be&&(t.set(o,s.Ce()),s.ve())}});let r=ae();this.qe.forEach((s,o)=>{let a=!0;o.forEachWhile(l=>{const c=this.Je(l);return!c||c.purpose==="TargetPurposeLimboResolution"||(a=!1,!1)}),a&&(r=r.add(s))}),this.ke.forEach((s,o)=>o.setReadTime(e));const i=new Pu(e,t,this.Qe,this.ke,r);return this.ke=rn(),this.qe=F0(),this.Qe=new Re(oe),i}$e(e,t){if(!this.ze(e))return;const r=this.it(e,t.key)?2:0;this.Ge(e).Fe(t.key,r),this.ke=this.ke.insert(t.key,t),this.qe=this.qe.insert(t.key,this.st(t.key).add(e))}Ue(e,t,r){if(!this.ze(e))return;const i=this.Ge(e);this.it(e,t)?i.Fe(t,1):i.Me(t),this.qe=this.qe.insert(t,this.st(t).delete(e)),r&&(this.ke=this.ke.insert(t,r))}removeTarget(e){this.Be.delete(e)}Ye(e){const t=this.Ge(e).Ce();return this.Le.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}xe(e){this.Ge(e).xe()}Ge(e){let t=this.Be.get(e);return t||(t=new L0,this.Be.set(e,t)),t}st(e){let t=this.qe.get(e);return t||(t=new Pe(oe),this.qe=this.qe.insert(e,t)),t}ze(e){const t=this.Je(e)!==null;return t||$("WatchChangeAggregator","Detected inactive target",e),t}Je(e){const t=this.Be.get(e);return t&&t.Se?null:this.Le.ot(e)}je(e){this.Be.set(e,new L0),this.Le.getRemoteKeysForTarget(e).forEach(t=>{this.Ue(e,t,null)})}it(e,t){return this.Le.getRemoteKeysForTarget(e).has(t)}}function F0(){return new Re(Y.comparator)}function B0(){return new Re(Y.comparator)}const qM={asc:"ASCENDING",desc:"DESCENDING"},WM={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},YM={and:"AND",or:"OR"};class HM{constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function qm(n,e){return n.useProto3Json||Tu(e)?e:{value:e}}function ta(n,e){return n.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function dD(n,e){return n.useProto3Json?e.toBase64():e.toUint8Array()}function QM(n,e){return ta(n,e.toTimestamp())}function ot(n){return ee(!!n),te.fromTimestamp(function(t){const r=Nr(t);return new je(r.seconds,r.nanos)}(n))}function Vy(n,e){return Wm(n,e).canonicalString()}function Wm(n,e){const t=function(i){return new de(["projects",i.projectId,"databases",i.database])}(n).child("documents");return e===void 0?t:t.child(e)}function hD(n){const e=de.fromString(n);return ee(TD(e)),e}function lu(n,e){return Vy(n.databaseId,e.path)}function rr(n,e){const t=hD(e);if(t.get(1)!==n.databaseId.projectId)throw new j(F.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+n.databaseId.projectId);if(t.get(3)!==n.databaseId.database)throw new j(F.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+n.databaseId.database);return new Y(mD(t))}function fD(n,e){return Vy(n.databaseId,e)}function pD(n){const e=hD(n);return e.length===4?de.emptyPath():mD(e)}function Ym(n){return new de(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function mD(n){return ee(n.length>4&&n.get(4)==="documents"),n.popFirst(5)}function U0(n,e,t){return{name:lu(n,e),fields:t.value.mapValue.fields}}function gD(n,e,t){const r=rr(n,e.name),i=ot(e.updateTime),s=e.createTime?ot(e.createTime):te.min(),o=new St({mapValue:{fields:e.fields}}),a=Me.newFoundDocument(r,i,s,o);return t&&a.setHasCommittedMutations(),t?a.setHasCommittedMutations():a}function KM(n,e){return"found"in e?function(r,i){ee(!!i.found),i.found.name,i.found.updateTime;const s=rr(r,i.found.name),o=ot(i.found.updateTime),a=i.found.createTime?ot(i.found.createTime):te.min(),l=new St({mapValue:{fields:i.found.fields}});return Me.newFoundDocument(s,o,a,l)}(n,e):"missing"in e?function(r,i){ee(!!i.missing),ee(!!i.readTime);const s=rr(r,i.missing),o=ot(i.readTime);return Me.newNoDocument(s,o)}(n,e):X()}function GM(n,e){let t;if("targetChange"in e){e.targetChange;const r=function(c){return c==="NO_CHANGE"?0:c==="ADD"?1:c==="REMOVE"?2:c==="CURRENT"?3:c==="RESET"?4:X()}(e.targetChange.targetChangeType||"NO_CHANGE"),i=e.targetChange.targetIds||[],s=function(c,d){return c.useProto3Json?(ee(d===void 0||typeof d=="string"),dt.fromBase64String(d||"")):(ee(d===void 0||d instanceof Buffer||d instanceof Uint8Array),dt.fromUint8Array(d||new Uint8Array))}(n,e.targetChange.resumeToken),o=e.targetChange.cause,a=o&&function(c){const d=c.code===void 0?F.UNKNOWN:aD(c.code);return new j(d,c.message||"")}(o);t=new cD(r,i,s,a||null)}else if("documentChange"in e){e.documentChange;const r=e.documentChange;r.document,r.document.name,r.document.updateTime;const i=rr(n,r.document.name),s=ot(r.document.updateTime),o=r.document.createTime?ot(r.document.createTime):te.min(),a=new St({mapValue:{fields:r.document.fields}}),l=Me.newFoundDocument(i,s,o,a),c=r.targetIds||[],d=r.removedTargetIds||[];t=new ed(c,d,l.key,l)}else if("documentDelete"in e){e.documentDelete;const r=e.documentDelete;r.document;const i=rr(n,r.document),s=r.readTime?ot(r.readTime):te.min(),o=Me.newNoDocument(i,s),a=r.removedTargetIds||[];t=new ed([],a,o.key,o)}else if("documentRemove"in e){e.documentRemove;const r=e.documentRemove;r.document;const i=rr(n,r.document),s=r.removedTargetIds||[];t=new ed([],s,i,null)}else{if(!("filter"in e))return X();{e.filter;const r=e.filter;r.targetId;const{count:i=0,unchangedNames:s}=r,o=new jM(i,s),a=r.targetId;t=new uD(a,o)}}return t}function uu(n,e){let t;if(e instanceof Ta)t={update:U0(n,e.key,e.value)};else if(e instanceof Ia)t={delete:lu(n,e.key)};else if(e instanceof Br)t={update:U0(n,e.key,e.data),updateMask:nO(e.fieldMask)};else{if(!(e instanceof Ry))return X();t={verify:lu(n,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map(r=>function(s,o){const a=o.transform;if(a instanceof Zo)return{fieldPath:o.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(a instanceof Ns)return{fieldPath:o.field.canonicalString(),appendMissingElements:{values:a.elements}};if(a instanceof Ms)return{fieldPath:o.field.canonicalString(),removeAllFromArray:{values:a.elements}};if(a instanceof ea)return{fieldPath:o.field.canonicalString(),increment:a.Pe};throw X()}(0,r))),e.precondition.isNone||(t.currentDocument=function(i,s){return s.updateTime!==void 0?{updateTime:QM(i,s.updateTime)}:s.exists!==void 0?{exists:s.exists}:X()}(n,e.precondition)),t}function Hm(n,e){const t=e.currentDocument?function(s){return s.updateTime!==void 0?Ue.updateTime(ot(s.updateTime)):s.exists!==void 0?Ue.exists(s.exists):Ue.none()}(e.currentDocument):Ue.none(),r=e.updateTransforms?e.updateTransforms.map(i=>function(o,a){let l=null;if("setToServerValue"in a)ee(a.setToServerValue==="REQUEST_TIME"),l=new Zo;else if("appendMissingElements"in a){const d=a.appendMissingElements.values||[];l=new Ns(d)}else if("removeAllFromArray"in a){const d=a.removeAllFromArray.values||[];l=new Ms(d)}else"increment"in a?l=new ea(o,a.increment):X();const c=Be.fromServerFormat(a.fieldPath);return new bu(c,l)}(n,i)):[];if(e.update){e.update.name;const i=rr(n,e.update.name),s=new St({mapValue:{fields:e.update.fields}});if(e.updateMask){const o=function(l){const c=l.fieldPaths||[];return new nn(c.map(d=>Be.fromServerFormat(d)))}(e.updateMask);return new Br(i,s,o,t,r)}return new Ta(i,s,t,r)}if(e.delete){const i=rr(n,e.delete);return new Ia(i,t)}if(e.verify){const i=rr(n,e.verify);return new Ry(i,t)}return X()}function XM(n,e){return n&&n.length>0?(ee(e!==void 0),n.map(t=>function(i,s){let o=i.updateTime?ot(i.updateTime):ot(s);return o.isEqual(te.min())&&(o=ot(s)),new FM(o,i.transformResults||[])}(t,e))):[]}function yD(n,e){return{documents:[fD(n,e.path)]}}function _D(n,e){const t={structuredQuery:{}},r=e.path;let i;e.collectionGroup!==null?(i=r,t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(i=r.popLast(),t.structuredQuery.from=[{collectionId:r.lastSegment()}]),t.parent=fD(n,i);const s=function(c){if(c.length!==0)return ED(De.create(c,"and"))}(e.filters);s&&(t.structuredQuery.where=s);const o=function(c){if(c.length!==0)return c.map(d=>function(p){return{field:ho(p.field),direction:ZM(p.dir)}}(d))}(e.orderBy);o&&(t.structuredQuery.orderBy=o);const a=qm(n,e.limit);return a!==null&&(t.structuredQuery.limit=a),e.startAt&&(t.structuredQuery.startAt=function(c){return{before:c.inclusive,values:c.position}}(e.startAt)),e.endAt&&(t.structuredQuery.endAt=function(c){return{before:!c.inclusive,values:c.position}}(e.endAt)),{_t:t,parent:i}}function vD(n){let e=pD(n.parent);const t=n.structuredQuery,r=t.from?t.from.length:0;let i=null;if(r>0){ee(r===1);const d=t.from[0];d.allDescendants?i=d.collectionId:e=e.child(d.collectionId)}let s=[];t.where&&(s=function(h){const p=wD(h);return p instanceof De&&ky(p)?p.getFilters():[p]}(t.where));let o=[];t.orderBy&&(o=function(h){return h.map(p=>function(v){return new au(fo(v.field),function(D){switch(D){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(v.direction))}(p))}(t.orderBy));let a=null;t.limit&&(a=function(h){let p;return p=typeof h=="object"?h.value:h,Tu(p)?null:p}(t.limit));let l=null;t.startAt&&(l=function(h){const p=!!h.before,g=h.values||[];return new Ci(g,p)}(t.startAt));let c=null;return t.endAt&&(c=function(h){const p=!h.before,g=h.values||[];return new Ci(g,p)}(t.endAt)),q1(e,i,o,s,a,"F",l,c)}function JM(n,e){const t=function(i){switch(i){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return X()}}(e.purpose);return t==null?null:{"goog-listen-tags":t}}function wD(n){return n.unaryFilter!==void 0?function(t){switch(t.unaryFilter.op){case"IS_NAN":const r=fo(t.unaryFilter.field);return he.create(r,"==",{doubleValue:NaN});case"IS_NULL":const i=fo(t.unaryFilter.field);return he.create(i,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const s=fo(t.unaryFilter.field);return he.create(s,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const o=fo(t.unaryFilter.field);return he.create(o,"!=",{nullValue:"NULL_VALUE"});default:return X()}}(n):n.fieldFilter!==void 0?function(t){return he.create(fo(t.fieldFilter.field),function(i){switch(i){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return X()}}(t.fieldFilter.op),t.fieldFilter.value)}(n):n.compositeFilter!==void 0?function(t){return De.create(t.compositeFilter.filters.map(r=>wD(r)),function(i){switch(i){case"AND":return"and";case"OR":return"or";default:return X()}}(t.compositeFilter.op))}(n):X()}function ZM(n){return qM[n]}function eO(n){return WM[n]}function tO(n){return YM[n]}function ho(n){return{fieldPath:n.canonicalString()}}function fo(n){return Be.fromServerFormat(n.fieldPath)}function ED(n){return n instanceof he?function(t){if(t.op==="=="){if(I0(t.value))return{unaryFilter:{field:ho(t.field),op:"IS_NAN"}};if(T0(t.value))return{unaryFilter:{field:ho(t.field),op:"IS_NULL"}}}else if(t.op==="!="){if(I0(t.value))return{unaryFilter:{field:ho(t.field),op:"IS_NOT_NAN"}};if(T0(t.value))return{unaryFilter:{field:ho(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:ho(t.field),op:eO(t.op),value:t.value}}}(n):n instanceof De?function(t){const r=t.getFilters().map(i=>ED(i));return r.length===1?r[0]:{compositeFilter:{op:tO(t.op),filters:r}}}(n):X()}function nO(n){const e=[];return n.fields.forEach(t=>e.push(t.canonicalString())),{fieldPaths:e}}function TD(n){return n.length>=4&&n.get(0)==="projects"&&n.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tr{constructor(e,t,r,i,s=te.min(),o=te.min(),a=dt.EMPTY_BYTE_STRING,l=null){this.target=e,this.targetId=t,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=s,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=a,this.expectedCount=l}withSequenceNumber(e){return new Tr(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new Tr(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new Tr(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new Tr(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ID{constructor(e){this.ct=e}}function rO(n,e){let t;if(e.document)t=gD(n.ct,e.document,!!e.hasCommittedMutations);else if(e.noDocument){const r=Y.fromSegments(e.noDocument.path),i=Vs(e.noDocument.readTime);t=Me.newNoDocument(r,i),e.hasCommittedMutations&&t.setHasCommittedMutations()}else{if(!e.unknownDocument)return X();{const r=Y.fromSegments(e.unknownDocument.path),i=Vs(e.unknownDocument.version);t=Me.newUnknownDocument(r,i)}}return e.readTime&&t.setReadTime(function(i){const s=new je(i[0],i[1]);return te.fromTimestamp(s)}(e.readTime)),t}function j0(n,e){const t=e.key,r={prefixPath:t.getCollectionPath().popLast().toArray(),collectionGroup:t.collectionGroup,documentId:t.path.lastSegment(),readTime:qd(e.readTime),hasCommittedMutations:e.hasCommittedMutations};if(e.isFoundDocument())r.document=function(s,o){return{name:lu(s,o.key),fields:o.data.value.mapValue.fields,updateTime:ta(s,o.version.toTimestamp()),createTime:ta(s,o.createTime.toTimestamp())}}(n.ct,e);else if(e.isNoDocument())r.noDocument={path:t.path.toArray(),readTime:Os(e.version)};else{if(!e.isUnknownDocument())return X();r.unknownDocument={path:t.path.toArray(),version:Os(e.version)}}return r}function qd(n){const e=n.toTimestamp();return[e.seconds,e.nanoseconds]}function Os(n){const e=n.toTimestamp();return{seconds:e.seconds,nanoseconds:e.nanoseconds}}function Vs(n){const e=new je(n.seconds,n.nanoseconds);return te.fromTimestamp(e)}function os(n,e){const t=(e.baseMutations||[]).map(s=>Hm(n.ct,s));for(let s=0;s<e.mutations.length-1;++s){const o=e.mutations[s];if(s+1<e.mutations.length&&e.mutations[s+1].transform!==void 0){const a=e.mutations[s+1];o.updateTransforms=a.transform.fieldTransforms,e.mutations.splice(s+1,1),++s}}const r=e.mutations.map(s=>Hm(n.ct,s)),i=je.fromMillis(e.localWriteTimeMs);return new Ay(e.batchId,i,t,r)}function fl(n){const e=Vs(n.readTime),t=n.lastLimboFreeSnapshotVersion!==void 0?Vs(n.lastLimboFreeSnapshotVersion):te.min();let r;return r=function(s){return s.documents!==void 0}(n.query)?function(s){return ee(s.documents.length===1),Qt(Ea(pD(s.documents[0])))}(n.query):function(s){return Qt(vD(s))}(n.query),new Tr(r,n.targetId,"TargetPurposeListen",n.lastListenSequenceNumber,e,t,dt.fromBase64String(n.resumeToken))}function SD(n,e){const t=Os(e.snapshotVersion),r=Os(e.lastLimboFreeSnapshotVersion);let i;i=jd(e.target)?yD(n.ct,e.target):_D(n.ct,e.target)._t;const s=e.resumeToken.toBase64();return{targetId:e.targetId,canonicalId:As(e.target),readTime:t,resumeToken:s,lastListenSequenceNumber:e.sequenceNumber,lastLimboFreeSnapshotVersion:r,query:i}}function Ly(n){const e=vD({parent:n.parent,structuredQuery:n.structuredQuery});return n.limitType==="LAST"?zd(e,e.limit,"L"):e}function vp(n,e){return new My(e.largestBatchId,Hm(n.ct,e.overlayMutation))}function $0(n,e){const t=e.path.lastSegment();return[n,Ht(e.path.popLast()),t]}function z0(n,e,t,r){return{indexId:n,uid:e,sequenceNumber:t,readTime:Os(r.readTime),documentKey:Ht(r.documentKey.path),largestBatchId:r.largestBatchId}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iO{getBundleMetadata(e,t){return q0(e).get(t).next(r=>{if(r)return function(s){return{id:s.bundleId,createTime:Vs(s.createTime),version:s.version}}(r)})}saveBundleMetadata(e,t){return q0(e).put(function(i){return{bundleId:i.id,createTime:Os(ot(i.createTime)),version:i.version}}(t))}getNamedQuery(e,t){return W0(e).get(t).next(r=>{if(r)return function(s){return{name:s.name,query:Ly(s.bundledQuery),readTime:Vs(s.readTime)}}(r)})}saveNamedQuery(e,t){return W0(e).put(function(i){return{name:i.name,readTime:Os(ot(i.readTime)),bundledQuery:i.bundledQuery}}(t))}}function q0(n){return _t(n,"bundles")}function W0(n){return _t(n,"namedQueries")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $h{constructor(e,t){this.serializer=e,this.userId=t}static lt(e,t){const r=t.uid||"";return new $h(e,r)}getOverlay(e,t){return Ja(e).get($0(this.userId,t)).next(r=>r?vp(this.serializer,r):null)}getOverlays(e,t){const r=Jn();return O.forEach(t,i=>this.getOverlay(e,i).next(s=>{s!==null&&r.set(i,s)})).next(()=>r)}saveOverlays(e,t,r){const i=[];return r.forEach((s,o)=>{const a=new My(t,o);i.push(this.ht(e,a))}),O.waitFor(i)}removeOverlaysForBatchId(e,t,r){const i=new Set;t.forEach(o=>i.add(Ht(o.getCollectionPath())));const s=[];return i.forEach(o=>{const a=IDBKeyRange.bound([this.userId,o,r],[this.userId,o,r+1],!1,!0);s.push(Ja(e).j("collectionPathOverlayIndex",a))}),O.waitFor(s)}getOverlaysForCollection(e,t,r){const i=Jn(),s=Ht(t),o=IDBKeyRange.bound([this.userId,s,r],[this.userId,s,Number.POSITIVE_INFINITY],!0);return Ja(e).U("collectionPathOverlayIndex",o).next(a=>{for(const l of a){const c=vp(this.serializer,l);i.set(c.getKey(),c)}return i})}getOverlaysForCollectionGroup(e,t,r,i){const s=Jn();let o;const a=IDBKeyRange.bound([this.userId,t,r],[this.userId,t,Number.POSITIVE_INFINITY],!0);return Ja(e).J({index:"collectionGroupOverlayIndex",range:a},(l,c,d)=>{const h=vp(this.serializer,c);s.size()<i||h.largestBatchId===o?(s.set(h.getKey(),h),o=h.largestBatchId):d.done()}).next(()=>s)}ht(e,t){return Ja(e).put(function(i,s,o){const[a,l,c]=$0(s,o.mutation.key);return{userId:s,collectionPath:l,documentId:c,collectionGroup:o.mutation.key.getCollectionGroup(),largestBatchId:o.largestBatchId,overlayMutation:uu(i.ct,o.mutation)}}(this.serializer,this.userId,t))}}function Ja(n){return _t(n,"documentOverlays")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class as{constructor(){}Pt(e,t){this.It(e,t),t.Tt()}It(e,t){if("nullValue"in e)this.Et(t,5);else if("booleanValue"in e)this.Et(t,10),t.dt(e.booleanValue?1:0);else if("integerValue"in e)this.Et(t,15),t.dt(Je(e.integerValue));else if("doubleValue"in e){const r=Je(e.doubleValue);isNaN(r)?this.Et(t,13):(this.Et(t,15),ru(r)?t.dt(0):t.dt(r))}else if("timestampValue"in e){let r=e.timestampValue;this.Et(t,20),typeof r=="string"&&(r=Nr(r)),t.At(`${r.seconds||""}`),t.dt(r.nanos||0)}else if("stringValue"in e)this.Rt(e.stringValue,t),this.Vt(t);else if("bytesValue"in e)this.Et(t,30),t.ft(Pi(e.bytesValue)),this.Vt(t);else if("referenceValue"in e)this.gt(e.referenceValue,t);else if("geoPointValue"in e){const r=e.geoPointValue;this.Et(t,45),t.dt(r.latitude||0),t.dt(r.longitude||0)}else"mapValue"in e?O1(e)?this.Et(t,Number.MAX_SAFE_INTEGER):(this.yt(e.mapValue,t),this.Vt(t)):"arrayValue"in e?(this.wt(e.arrayValue,t),this.Vt(t)):X()}Rt(e,t){this.Et(t,25),this.St(e,t)}St(e,t){t.At(e)}yt(e,t){const r=e.fields||{};this.Et(t,55);for(const i of Object.keys(r))this.Rt(i,t),this.It(r[i],t)}wt(e,t){const r=e.values||[];this.Et(t,50);for(const i of r)this.It(i,t)}gt(e,t){this.Et(t,37),Y.fromName(e).path.forEach(r=>{this.Et(t,60),this.St(r,t)})}Et(e,t){e.dt(t)}Vt(e){e.dt(2)}}as.bt=new as;function sO(n){if(n===0)return 8;let e=0;return!(n>>4)&&(e+=4,n<<=4),!(n>>6)&&(e+=2,n<<=2),!(n>>7)&&(e+=1),e}function Y0(n){const e=64-function(r){let i=0;for(let s=0;s<8;++s){const o=sO(255&r[s]);if(i+=o,o!==8)break}return i}(n);return Math.ceil(e/8)}class oO{constructor(){this.buffer=new Uint8Array(1024),this.position=0}Dt(e){const t=e[Symbol.iterator]();let r=t.next();for(;!r.done;)this.Ct(r.value),r=t.next();this.vt()}Ft(e){const t=e[Symbol.iterator]();let r=t.next();for(;!r.done;)this.Mt(r.value),r=t.next();this.xt()}Ot(e){for(const t of e){const r=t.charCodeAt(0);if(r<128)this.Ct(r);else if(r<2048)this.Ct(960|r>>>6),this.Ct(128|63&r);else if(t<"\uD800"||"\uDBFF"<t)this.Ct(480|r>>>12),this.Ct(128|63&r>>>6),this.Ct(128|63&r);else{const i=t.codePointAt(0);this.Ct(240|i>>>18),this.Ct(128|63&i>>>12),this.Ct(128|63&i>>>6),this.Ct(128|63&i)}}this.vt()}Nt(e){for(const t of e){const r=t.charCodeAt(0);if(r<128)this.Mt(r);else if(r<2048)this.Mt(960|r>>>6),this.Mt(128|63&r);else if(t<"\uD800"||"\uDBFF"<t)this.Mt(480|r>>>12),this.Mt(128|63&r>>>6),this.Mt(128|63&r);else{const i=t.codePointAt(0);this.Mt(240|i>>>18),this.Mt(128|63&i>>>12),this.Mt(128|63&i>>>6),this.Mt(128|63&i)}}this.xt()}Lt(e){const t=this.Bt(e),r=Y0(t);this.kt(1+r),this.buffer[this.position++]=255&r;for(let i=t.length-r;i<t.length;++i)this.buffer[this.position++]=255&t[i]}qt(e){const t=this.Bt(e),r=Y0(t);this.kt(1+r),this.buffer[this.position++]=~(255&r);for(let i=t.length-r;i<t.length;++i)this.buffer[this.position++]=~(255&t[i])}Qt(){this.Kt(255),this.Kt(255)}$t(){this.Ut(255),this.Ut(255)}reset(){this.position=0}seed(e){this.kt(e.length),this.buffer.set(e,this.position),this.position+=e.length}Wt(){return this.buffer.slice(0,this.position)}Bt(e){const t=function(s){const o=new DataView(new ArrayBuffer(8));return o.setFloat64(0,s,!1),new Uint8Array(o.buffer)}(e),r=(128&t[0])!=0;t[0]^=r?255:128;for(let i=1;i<t.length;++i)t[i]^=r?255:0;return t}Ct(e){const t=255&e;t===0?(this.Kt(0),this.Kt(255)):t===255?(this.Kt(255),this.Kt(0)):this.Kt(t)}Mt(e){const t=255&e;t===0?(this.Ut(0),this.Ut(255)):t===255?(this.Ut(255),this.Ut(0)):this.Ut(e)}vt(){this.Kt(0),this.Kt(1)}xt(){this.Ut(0),this.Ut(1)}Kt(e){this.kt(1),this.buffer[this.position++]=e}Ut(e){this.kt(1),this.buffer[this.position++]=~e}kt(e){const t=e+this.position;if(t<=this.buffer.length)return;let r=2*this.buffer.length;r<t&&(r=t);const i=new Uint8Array(r);i.set(this.buffer),this.buffer=i}}class aO{constructor(e){this.Gt=e}ft(e){this.Gt.Dt(e)}At(e){this.Gt.Ot(e)}dt(e){this.Gt.Lt(e)}Tt(){this.Gt.Qt()}}class lO{constructor(e){this.Gt=e}ft(e){this.Gt.Ft(e)}At(e){this.Gt.Nt(e)}dt(e){this.Gt.qt(e)}Tt(){this.Gt.$t()}}class Za{constructor(){this.Gt=new oO,this.zt=new aO(this.Gt),this.jt=new lO(this.Gt)}seed(e){this.Gt.seed(e)}Ht(e){return e===0?this.zt:this.jt}Wt(){return this.Gt.Wt()}reset(){this.Gt.reset()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ls{constructor(e,t,r,i){this.indexId=e,this.documentKey=t,this.arrayValue=r,this.directionalValue=i}Jt(){const e=this.directionalValue.length,t=e===0||this.directionalValue[e-1]===255?e+1:e,r=new Uint8Array(t);return r.set(this.directionalValue,0),t!==e?r.set([0],this.directionalValue.length):++r[r.length-1],new ls(this.indexId,this.documentKey,this.arrayValue,r)}}function Hr(n,e){let t=n.indexId-e.indexId;return t!==0?t:(t=H0(n.arrayValue,e.arrayValue),t!==0?t:(t=H0(n.directionalValue,e.directionalValue),t!==0?t:Y.comparator(n.documentKey,e.documentKey)))}function H0(n,e){for(let t=0;t<n.length&&t<e.length;++t){const r=n[t]-e[t];if(r!==0)return r}return n.length-e.length}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Q0{constructor(e){this.Yt=new Pe((t,r)=>Be.comparator(t.field,r.field)),this.collectionId=e.collectionGroup!=null?e.collectionGroup:e.path.lastSegment(),this.Zt=e.orderBy,this.Xt=[];for(const t of e.filters){const r=t;r.isInequality()?this.Yt=this.Yt.add(r):this.Xt.push(r)}}get en(){return this.Yt.size>1}tn(e){if(ee(e.collectionGroup===this.collectionId),this.en)return!1;const t=Vm(e);if(t!==void 0&&!this.nn(t))return!1;const r=rs(e);let i=new Set,s=0,o=0;for(;s<r.length&&this.nn(r[s]);++s)i=i.add(r[s].fieldPath.canonicalString());if(s===r.length)return!0;if(this.Yt.size>0){const a=this.Yt.getIterator().getNext();if(!i.has(a.field.canonicalString())){const l=r[s];if(!this.rn(a,l)||!this.sn(this.Zt[o++],l))return!1}++s}for(;s<r.length;++s){const a=r[s];if(o>=this.Zt.length||!this.sn(this.Zt[o++],a))return!1}return!0}on(){if(this.en)return null;let e=new Pe(Be.comparator);const t=[];for(const r of this.Xt)if(!r.field.isKeyField())if(r.op==="array-contains"||r.op==="array-contains-any")t.push(new Kc(r.field,2));else{if(e.has(r.field))continue;e=e.add(r.field),t.push(new Kc(r.field,0))}for(const r of this.Zt)r.field.isKeyField()||e.has(r.field)||(e=e.add(r.field),t.push(new Kc(r.field,r.dir==="asc"?0:1)));return new Ud(Ud.UNKNOWN_ID,this.collectionId,t,nu.empty())}nn(e){for(const t of this.Xt)if(this.rn(t,e))return!0;return!1}rn(e,t){if(e===void 0||!e.field.isEqual(t.fieldPath))return!1;const r=e.op==="array-contains"||e.op==="array-contains-any";return t.kind===2===r}sn(e,t){return!!e.field.isEqual(t.fieldPath)&&(t.kind===0&&e.dir==="asc"||t.kind===1&&e.dir==="desc")}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function DD(n){var e,t;if(ee(n instanceof he||n instanceof De),n instanceof he){if(n instanceof z1){const i=((t=(e=n.value.arrayValue)===null||e===void 0?void 0:e.values)===null||t===void 0?void 0:t.map(s=>he.create(n.field,"==",s)))||[];return De.create(i,"or")}return n}const r=n.filters.map(i=>DD(i));return De.create(r,n.op)}function uO(n){if(n.getFilters().length===0)return[];const e=Gm(DD(n));return ee(bD(e)),Qm(e)||Km(e)?[e]:e.getFilters()}function Qm(n){return n instanceof he}function Km(n){return n instanceof De&&ky(n)}function bD(n){return Qm(n)||Km(n)||function(t){if(t instanceof De&&Um(t)){for(const r of t.getFilters())if(!Qm(r)&&!Km(r))return!1;return!0}return!1}(n)}function Gm(n){if(ee(n instanceof he||n instanceof De),n instanceof he)return n;if(n.filters.length===1)return Gm(n.filters[0]);const e=n.filters.map(r=>Gm(r));let t=De.create(e,n.op);return t=Wd(t),bD(t)?t:(ee(t instanceof De),ee(Jo(t)),ee(t.filters.length>1),t.filters.reduce((r,i)=>Fy(r,i)))}function Fy(n,e){let t;return ee(n instanceof he||n instanceof De),ee(e instanceof he||e instanceof De),t=n instanceof he?e instanceof he?function(i,s){return De.create([i,s],"and")}(n,e):K0(n,e):e instanceof he?K0(e,n):function(i,s){if(ee(i.filters.length>0&&s.filters.length>0),Jo(i)&&Jo(s))return U1(i,s.getFilters());const o=Um(i)?i:s,a=Um(i)?s:i,l=o.filters.map(c=>Fy(c,a));return De.create(l,"or")}(n,e),Wd(t)}function K0(n,e){if(Jo(e))return U1(e,n.getFilters());{const t=e.filters.map(r=>Fy(n,r));return De.create(t,"or")}}function Wd(n){if(ee(n instanceof he||n instanceof De),n instanceof he)return n;const e=n.getFilters();if(e.length===1)return Wd(e[0]);if(F1(n))return n;const t=e.map(i=>Wd(i)),r=[];return t.forEach(i=>{i instanceof he?r.push(i):i instanceof De&&(i.op===n.op?r.push(...i.filters):r.push(i))}),r.length===1?r[0]:De.create(r,n.op)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cO{constructor(){this._n=new By}addToCollectionParentIndex(e,t){return this._n.add(t),O.resolve()}getCollectionParents(e,t){return O.resolve(this._n.getEntries(t))}addFieldIndex(e,t){return O.resolve()}deleteFieldIndex(e,t){return O.resolve()}deleteAllFieldIndexes(e){return O.resolve()}createTargetIndexes(e,t){return O.resolve()}getDocumentsMatchingTarget(e,t){return O.resolve(null)}getIndexType(e,t){return O.resolve(0)}getFieldIndexes(e,t){return O.resolve([])}getNextCollectionGroupToUpdate(e){return O.resolve(null)}getMinOffset(e,t){return O.resolve(mn.min())}getMinOffsetFromCollectionGroup(e,t){return O.resolve(mn.min())}updateCollectionGroup(e,t,r){return O.resolve()}updateIndexEntries(e,t){return O.resolve()}}class By{constructor(){this.index={}}add(e){const t=e.lastSegment(),r=e.popLast(),i=this.index[t]||new Pe(de.comparator),s=!i.has(r);return this.index[t]=i.add(r),s}has(e){const t=e.lastSegment(),r=e.popLast(),i=this.index[t];return i&&i.has(r)}getEntries(e){return(this.index[e]||new Pe(de.comparator)).toArray()}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Tc=new Uint8Array(0);class dO{constructor(e,t){this.databaseId=t,this.an=new By,this.un=new qi(r=>As(r),(r,i)=>Iu(r,i)),this.uid=e.uid||""}addToCollectionParentIndex(e,t){if(!this.an.has(t)){const r=t.lastSegment(),i=t.popLast();e.addOnCommittedListener(()=>{this.an.add(t)});const s={collectionId:r,parent:Ht(i)};return G0(e).put(s)}return O.resolve()}getCollectionParents(e,t){const r=[],i=IDBKeyRange.bound([t,""],[E1(t),""],!1,!0);return G0(e).U(i).next(s=>{for(const o of s){if(o.collectionId!==t)break;r.push(Xn(o.parent))}return r})}addFieldIndex(e,t){const r=el(e),i=function(a){return{indexId:a.indexId,collectionGroup:a.collectionGroup,fields:a.fields.map(l=>[l.fieldPath.canonicalString(),l.kind])}}(t);delete i.indexId;const s=r.add(i);if(t.indexState){const o=so(e);return s.next(a=>{o.put(z0(a,this.uid,t.indexState.sequenceNumber,t.indexState.offset))})}return s.next()}deleteFieldIndex(e,t){const r=el(e),i=so(e),s=io(e);return r.delete(t.indexId).next(()=>i.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0))).next(()=>s.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0)))}deleteAllFieldIndexes(e){const t=el(e),r=io(e),i=so(e);return t.j().next(()=>r.j()).next(()=>i.j())}createTargetIndexes(e,t){return O.forEach(this.cn(t),r=>this.getIndexType(e,r).next(i=>{if(i===0||i===1){const s=new Q0(r).on();if(s!=null)return this.addFieldIndex(e,s)}}))}getDocumentsMatchingTarget(e,t){const r=io(e);let i=!0;const s=new Map;return O.forEach(this.cn(t),o=>this.ln(e,o).next(a=>{i&&(i=!!a),s.set(o,a)})).next(()=>{if(i){let o=ae();const a=[];return O.forEach(s,(l,c)=>{$("IndexedDbIndexManager",`Using index ${function(E){return`id=${E.indexId}|cg=${E.collectionGroup}|f=${E.fields.map(x=>`${x.fieldPath}:${x.kind}`).join(",")}`}(l)} to execute ${As(t)}`);const d=function(E,x){const A=Vm(x);if(A===void 0)return null;for(const L of $d(E,A.fieldPath))switch(L.op){case"array-contains-any":return L.value.arrayValue.values||[];case"array-contains":return[L.value]}return null}(c,l),h=function(E,x){const A=new Map;for(const L of rs(x))for(const I of $d(E,L.fieldPath))switch(I.op){case"==":case"in":A.set(L.fieldPath.canonicalString(),I.value);break;case"not-in":case"!=":return A.set(L.fieldPath.canonicalString(),I.value),Array.from(A.values())}return null}(c,l),p=function(E,x){const A=[];let L=!0;for(const I of rs(x)){const y=I.kind===0?k0(E,I.fieldPath,E.startAt):x0(E,I.fieldPath,E.startAt);A.push(y.value),L&&(L=y.inclusive)}return new Ci(A,L)}(c,l),g=function(E,x){const A=[];let L=!0;for(const I of rs(x)){const y=I.kind===0?x0(E,I.fieldPath,E.endAt):k0(E,I.fieldPath,E.endAt);A.push(y.value),L&&(L=y.inclusive)}return new Ci(A,L)}(c,l),v=this.hn(l,c,p),S=this.hn(l,c,g),D=this.Pn(l,c,h),w=this.In(l.indexId,d,v,p.inclusive,S,g.inclusive,D);return O.forEach(w,_=>r.G(_,t.limit).next(E=>{E.forEach(x=>{const A=Y.fromSegments(x.documentKey);o.has(A)||(o=o.add(A),a.push(A))})}))}).next(()=>a)}return O.resolve(null)})}cn(e){let t=this.un.get(e);return t||(e.filters.length===0?t=[e]:t=uO(De.create(e.filters,"and")).map(r=>$m(e.path,e.collectionGroup,e.orderBy,r.getFilters(),e.limit,e.startAt,e.endAt)),this.un.set(e,t),t)}In(e,t,r,i,s,o,a){const l=(t!=null?t.length:1)*Math.max(r.length,s.length),c=l/(t!=null?t.length:1),d=[];for(let h=0;h<l;++h){const p=t?this.Tn(t[h/c]):Tc,g=this.En(e,p,r[h%c],i),v=this.dn(e,p,s[h%c],o),S=a.map(D=>this.En(e,p,D,!0));d.push(...this.createRange(g,v,S))}return d}En(e,t,r,i){const s=new ls(e,Y.empty(),t,r);return i?s:s.Jt()}dn(e,t,r,i){const s=new ls(e,Y.empty(),t,r);return i?s.Jt():s}ln(e,t){const r=new Q0(t),i=t.collectionGroup!=null?t.collectionGroup:t.path.lastSegment();return this.getFieldIndexes(e,i).next(s=>{let o=null;for(const a of s)r.tn(a)&&(!o||a.fields.length>o.fields.length)&&(o=a);return o})}getIndexType(e,t){let r=2;const i=this.cn(t);return O.forEach(i,s=>this.ln(e,s).next(o=>{o?r!==0&&o.fields.length<function(l){let c=new Pe(Be.comparator),d=!1;for(const h of l.filters)for(const p of h.getFlattenedFilters())p.field.isKeyField()||(p.op==="array-contains"||p.op==="array-contains-any"?d=!0:c=c.add(p.field));for(const h of l.orderBy)h.field.isKeyField()||(c=c.add(h.field));return c.size+(d?1:0)}(s)&&(r=1):r=0})).next(()=>function(o){return o.limit!==null}(t)&&i.length>1&&r===2?1:r)}An(e,t){const r=new Za;for(const i of rs(e)){const s=t.data.field(i.fieldPath);if(s==null)return null;const o=r.Ht(i.kind);as.bt.Pt(s,o)}return r.Wt()}Tn(e){const t=new Za;return as.bt.Pt(e,t.Ht(0)),t.Wt()}Rn(e,t){const r=new Za;return as.bt.Pt(Rs(this.databaseId,t),r.Ht(function(s){const o=rs(s);return o.length===0?0:o[o.length-1].kind}(e))),r.Wt()}Pn(e,t,r){if(r===null)return[];let i=[];i.push(new Za);let s=0;for(const o of rs(e)){const a=r[s++];for(const l of i)if(this.Vn(t,o.fieldPath)&&ou(a))i=this.mn(i,o,a);else{const c=l.Ht(o.kind);as.bt.Pt(a,c)}}return this.fn(i)}hn(e,t,r){return this.Pn(e,t,r.position)}fn(e){const t=[];for(let r=0;r<e.length;++r)t[r]=e[r].Wt();return t}mn(e,t,r){const i=[...e],s=[];for(const o of r.arrayValue.values||[])for(const a of i){const l=new Za;l.seed(a.Wt()),as.bt.Pt(o,l.Ht(t.kind)),s.push(l)}return s}Vn(e,t){return!!e.filters.find(r=>r instanceof he&&r.field.isEqual(t)&&(r.op==="in"||r.op==="not-in"))}getFieldIndexes(e,t){const r=el(e),i=so(e);return(t?r.U("collectionGroupIndex",IDBKeyRange.bound(t,t)):r.U()).next(s=>{const o=[];return O.forEach(s,a=>i.get([a.indexId,this.uid]).next(l=>{o.push(function(d,h){const p=h?new nu(h.sequenceNumber,new mn(Vs(h.readTime),new Y(Xn(h.documentKey)),h.largestBatchId)):nu.empty(),g=d.fields.map(([v,S])=>new Kc(Be.fromServerFormat(v),S));return new Ud(d.indexId,d.collectionGroup,g,p)}(a,l))})).next(()=>o)})}getNextCollectionGroupToUpdate(e){return this.getFieldIndexes(e).next(t=>t.length===0?null:(t.sort((r,i)=>{const s=r.indexState.sequenceNumber-i.indexState.sequenceNumber;return s!==0?s:oe(r.collectionGroup,i.collectionGroup)}),t[0].collectionGroup))}updateCollectionGroup(e,t,r){const i=el(e),s=so(e);return this.gn(e).next(o=>i.U("collectionGroupIndex",IDBKeyRange.bound(t,t)).next(a=>O.forEach(a,l=>s.put(z0(l.indexId,this.uid,o,r)))))}updateIndexEntries(e,t){const r=new Map;return O.forEach(t,(i,s)=>{const o=r.get(i.collectionGroup);return(o?O.resolve(o):this.getFieldIndexes(e,i.collectionGroup)).next(a=>(r.set(i.collectionGroup,a),O.forEach(a,l=>this.pn(e,i,l).next(c=>{const d=this.yn(s,l);return c.isEqual(d)?O.resolve():this.wn(e,s,l,c,d)}))))})}Sn(e,t,r,i){return io(e).put({indexId:i.indexId,uid:this.uid,arrayValue:i.arrayValue,directionalValue:i.directionalValue,orderedDocumentKey:this.Rn(r,t.key),documentKey:t.key.path.toArray()})}bn(e,t,r,i){return io(e).delete([i.indexId,this.uid,i.arrayValue,i.directionalValue,this.Rn(r,t.key),t.key.path.toArray()])}pn(e,t,r){const i=io(e);let s=new Pe(Hr);return i.J({index:"documentKeyIndex",range:IDBKeyRange.only([r.indexId,this.uid,this.Rn(r,t)])},(o,a)=>{s=s.add(new ls(r.indexId,t,a.arrayValue,a.directionalValue))}).next(()=>s)}yn(e,t){let r=new Pe(Hr);const i=this.An(t,e);if(i==null)return r;const s=Vm(t);if(s!=null){const o=e.data.field(s.fieldPath);if(ou(o))for(const a of o.arrayValue.values||[])r=r.add(new ls(t.indexId,e.key,this.Tn(a),i))}else r=r.add(new ls(t.indexId,e.key,Tc,i));return r}wn(e,t,r,i,s){$("IndexedDbIndexManager","Updating index entries for document '%s'",t.key);const o=[];return function(l,c,d,h,p){const g=l.getIterator(),v=c.getIterator();let S=ro(g),D=ro(v);for(;S||D;){let w=!1,_=!1;if(S&&D){const E=d(S,D);E<0?_=!0:E>0&&(w=!0)}else S!=null?_=!0:w=!0;w?(h(D),D=ro(v)):_?(p(S),S=ro(g)):(S=ro(g),D=ro(v))}}(i,s,Hr,a=>{o.push(this.Sn(e,t,r,a))},a=>{o.push(this.bn(e,t,r,a))}),O.waitFor(o)}gn(e){let t=1;return so(e).J({index:"sequenceNumberIndex",reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},(r,i,s)=>{s.done(),t=i.sequenceNumber+1}).next(()=>t)}createRange(e,t,r){r=r.sort((o,a)=>Hr(o,a)).filter((o,a,l)=>!a||Hr(o,l[a-1])!==0);const i=[];i.push(e);for(const o of r){const a=Hr(o,e),l=Hr(o,t);if(a===0)i[0]=e.Jt();else if(a>0&&l<0)i.push(o),i.push(o.Jt());else if(l>0)break}i.push(t);const s=[];for(let o=0;o<i.length;o+=2){if(this.Dn(i[o],i[o+1]))return[];const a=[i[o].indexId,this.uid,i[o].arrayValue,i[o].directionalValue,Tc,[]],l=[i[o+1].indexId,this.uid,i[o+1].arrayValue,i[o+1].directionalValue,Tc,[]];s.push(IDBKeyRange.bound(a,l))}return s}Dn(e,t){return Hr(e,t)>0}getMinOffsetFromCollectionGroup(e,t){return this.getFieldIndexes(e,t).next(X0)}getMinOffset(e,t){return O.mapArray(this.cn(t),r=>this.ln(e,r).next(i=>i||X())).next(X0)}}function G0(n){return _t(n,"collectionParents")}function io(n){return _t(n,"indexEntries")}function el(n){return _t(n,"indexConfiguration")}function so(n){return _t(n,"indexState")}function X0(n){ee(n.length!==0);let e=n[0].indexState.offset,t=e.largestBatchId;for(let r=1;r<n.length;r++){const i=n[r].indexState.offset;Dy(i,e)<0&&(e=i),t<i.largestBatchId&&(t=i.largestBatchId)}return new mn(e.readTime,e.documentKey,t)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const J0={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0};class Jt{constructor(e,t,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=r}static withCacheSize(e){return new Jt(e,Jt.DEFAULT_COLLECTION_PERCENTILE,Jt.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function PD(n,e,t){const r=n.store("mutations"),i=n.store("documentMutations"),s=[],o=IDBKeyRange.only(t.batchId);let a=0;const l=r.J({range:o},(d,h,p)=>(a++,p.delete()));s.push(l.next(()=>{ee(a===1)}));const c=[];for(const d of t.mutations){const h=k1(e,d.key.path,t.batchId);s.push(i.delete(h)),c.push(d.key)}return O.waitFor(s).next(()=>c)}function Yd(n){if(!n)return 0;let e;if(n.document)e=n.document;else if(n.unknownDocument)e=n.unknownDocument;else{if(!n.noDocument)throw X();e=n.noDocument}return JSON.stringify(e).length}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Jt.DEFAULT_COLLECTION_PERCENTILE=10,Jt.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Jt.DEFAULT=new Jt(41943040,Jt.DEFAULT_COLLECTION_PERCENTILE,Jt.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Jt.DISABLED=new Jt(-1,0,0);class zh{constructor(e,t,r,i){this.userId=e,this.serializer=t,this.indexManager=r,this.referenceDelegate=i,this.Cn={}}static lt(e,t,r,i){ee(e.uid!=="");const s=e.isAuthenticated()?e.uid:"";return new zh(s,t,r,i)}checkEmpty(e){let t=!0;const r=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return Qr(e).J({index:"userMutationsIndex",range:r},(i,s,o)=>{t=!1,o.done()}).next(()=>t)}addMutationBatch(e,t,r,i){const s=po(e),o=Qr(e);return o.add({}).next(a=>{ee(typeof a=="number");const l=new Ay(a,t,r,i),c=function(g,v,S){const D=S.baseMutations.map(_=>uu(g.ct,_)),w=S.mutations.map(_=>uu(g.ct,_));return{userId:v,batchId:S.batchId,localWriteTimeMs:S.localWriteTime.toMillis(),baseMutations:D,mutations:w}}(this.serializer,this.userId,l),d=[];let h=new Pe((p,g)=>oe(p.canonicalString(),g.canonicalString()));for(const p of i){const g=k1(this.userId,p.key.path,a);h=h.add(p.key.path.popLast()),d.push(o.put(c)),d.push(s.put(g,ZN))}return h.forEach(p=>{d.push(this.indexManager.addToCollectionParentIndex(e,p))}),e.addOnCommittedListener(()=>{this.Cn[a]=l.keys()}),O.waitFor(d).next(()=>l)})}lookupMutationBatch(e,t){return Qr(e).get(t).next(r=>r?(ee(r.userId===this.userId),os(this.serializer,r)):null)}vn(e,t){return this.Cn[t]?O.resolve(this.Cn[t]):this.lookupMutationBatch(e,t).next(r=>{if(r){const i=r.keys();return this.Cn[t]=i,i}return null})}getNextMutationBatchAfterBatchId(e,t){const r=t+1,i=IDBKeyRange.lowerBound([this.userId,r]);let s=null;return Qr(e).J({index:"userMutationsIndex",range:i},(o,a,l)=>{a.userId===this.userId&&(ee(a.batchId>=r),s=os(this.serializer,a)),l.done()}).next(()=>s)}getHighestUnacknowledgedBatchId(e){const t=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]);let r=-1;return Qr(e).J({index:"userMutationsIndex",range:t,reverse:!0},(i,s,o)=>{r=s.batchId,o.done()}).next(()=>r)}getAllMutationBatches(e){const t=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return Qr(e).U("userMutationsIndex",t).next(r=>r.map(i=>os(this.serializer,i)))}getAllMutationBatchesAffectingDocumentKey(e,t){const r=Gc(this.userId,t.path),i=IDBKeyRange.lowerBound(r),s=[];return po(e).J({range:i},(o,a,l)=>{const[c,d,h]=o,p=Xn(d);if(c===this.userId&&t.path.isEqual(p))return Qr(e).get(h).next(g=>{if(!g)throw X();ee(g.userId===this.userId),s.push(os(this.serializer,g))});l.done()}).next(()=>s)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new Pe(oe);const i=[];return t.forEach(s=>{const o=Gc(this.userId,s.path),a=IDBKeyRange.lowerBound(o),l=po(e).J({range:a},(c,d,h)=>{const[p,g,v]=c,S=Xn(g);p===this.userId&&s.path.isEqual(S)?r=r.add(v):h.done()});i.push(l)}),O.waitFor(i).next(()=>this.Fn(e,r))}getAllMutationBatchesAffectingQuery(e,t){const r=t.path,i=r.length+1,s=Gc(this.userId,r),o=IDBKeyRange.lowerBound(s);let a=new Pe(oe);return po(e).J({range:o},(l,c,d)=>{const[h,p,g]=l,v=Xn(p);h===this.userId&&r.isPrefixOf(v)?v.length===i&&(a=a.add(g)):d.done()}).next(()=>this.Fn(e,a))}Fn(e,t){const r=[],i=[];return t.forEach(s=>{i.push(Qr(e).get(s).next(o=>{if(o===null)throw X();ee(o.userId===this.userId),r.push(os(this.serializer,o))}))}),O.waitFor(i).next(()=>r)}removeMutationBatch(e,t){return PD(e._e,this.userId,t).next(r=>(e.addOnCommittedListener(()=>{this.Mn(t.batchId)}),O.forEach(r,i=>this.referenceDelegate.markPotentiallyOrphaned(e,i))))}Mn(e){delete this.Cn[e]}performConsistencyCheck(e){return this.checkEmpty(e).next(t=>{if(!t)return O.resolve();const r=IDBKeyRange.lowerBound(function(o){return[o]}(this.userId)),i=[];return po(e).J({range:r},(s,o,a)=>{if(s[0]===this.userId){const l=Xn(s[1]);i.push(l)}else a.done()}).next(()=>{ee(i.length===0)})})}containsKey(e,t){return kD(e,this.userId,t)}xn(e){return xD(e).get(this.userId).next(t=>t||{userId:this.userId,lastAcknowledgedBatchId:-1,lastStreamToken:""})}}function kD(n,e,t){const r=Gc(e,t.path),i=r[1],s=IDBKeyRange.lowerBound(r);let o=!1;return po(n).J({range:s,H:!0},(a,l,c)=>{const[d,h,p]=a;d===e&&h===i&&(o=!0),c.done()}).next(()=>o)}function Qr(n){return _t(n,"mutations")}function po(n){return _t(n,"documentMutations")}function xD(n){return _t(n,"mutationQueues")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ls{constructor(e){this.On=e}next(){return this.On+=2,this.On}static Nn(){return new Ls(0)}static Ln(){return new Ls(-1)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hO{constructor(e,t){this.referenceDelegate=e,this.serializer=t}allocateTargetId(e){return this.Bn(e).next(t=>{const r=new Ls(t.highestTargetId);return t.highestTargetId=r.next(),this.kn(e,t).next(()=>t.highestTargetId)})}getLastRemoteSnapshotVersion(e){return this.Bn(e).next(t=>te.fromTimestamp(new je(t.lastRemoteSnapshotVersion.seconds,t.lastRemoteSnapshotVersion.nanoseconds)))}getHighestSequenceNumber(e){return this.Bn(e).next(t=>t.highestListenSequenceNumber)}setTargetsMetadata(e,t,r){return this.Bn(e).next(i=>(i.highestListenSequenceNumber=t,r&&(i.lastRemoteSnapshotVersion=r.toTimestamp()),t>i.highestListenSequenceNumber&&(i.highestListenSequenceNumber=t),this.kn(e,i)))}addTargetData(e,t){return this.qn(e,t).next(()=>this.Bn(e).next(r=>(r.targetCount+=1,this.Qn(t,r),this.kn(e,r))))}updateTargetData(e,t){return this.qn(e,t)}removeTargetData(e,t){return this.removeMatchingKeysForTargetId(e,t.targetId).next(()=>oo(e).delete(t.targetId)).next(()=>this.Bn(e)).next(r=>(ee(r.targetCount>0),r.targetCount-=1,this.kn(e,r)))}removeTargets(e,t,r){let i=0;const s=[];return oo(e).J((o,a)=>{const l=fl(a);l.sequenceNumber<=t&&r.get(l.targetId)===null&&(i++,s.push(this.removeTargetData(e,l)))}).next(()=>O.waitFor(s)).next(()=>i)}forEachTarget(e,t){return oo(e).J((r,i)=>{const s=fl(i);t(s)})}Bn(e){return Z0(e).get("targetGlobalKey").next(t=>(ee(t!==null),t))}kn(e,t){return Z0(e).put("targetGlobalKey",t)}qn(e,t){return oo(e).put(SD(this.serializer,t))}Qn(e,t){let r=!1;return e.targetId>t.highestTargetId&&(t.highestTargetId=e.targetId,r=!0),e.sequenceNumber>t.highestListenSequenceNumber&&(t.highestListenSequenceNumber=e.sequenceNumber,r=!0),r}getTargetCount(e){return this.Bn(e).next(t=>t.targetCount)}getTargetData(e,t){const r=As(t),i=IDBKeyRange.bound([r,Number.NEGATIVE_INFINITY],[r,Number.POSITIVE_INFINITY]);let s=null;return oo(e).J({range:i,index:"queryTargetsIndex"},(o,a,l)=>{const c=fl(a);Iu(t,c.target)&&(s=c,l.done())}).next(()=>s)}addMatchingKeys(e,t,r){const i=[],s=ti(e);return t.forEach(o=>{const a=Ht(o.path);i.push(s.put({targetId:r,path:a})),i.push(this.referenceDelegate.addReference(e,r,o))}),O.waitFor(i)}removeMatchingKeys(e,t,r){const i=ti(e);return O.forEach(t,s=>{const o=Ht(s.path);return O.waitFor([i.delete([r,o]),this.referenceDelegate.removeReference(e,r,s)])})}removeMatchingKeysForTargetId(e,t){const r=ti(e),i=IDBKeyRange.bound([t],[t+1],!1,!0);return r.delete(i)}getMatchingKeysForTargetId(e,t){const r=IDBKeyRange.bound([t],[t+1],!1,!0),i=ti(e);let s=ae();return i.J({range:r,H:!0},(o,a,l)=>{const c=Xn(o[1]),d=new Y(c);s=s.add(d)}).next(()=>s)}containsKey(e,t){const r=Ht(t.path),i=IDBKeyRange.bound([r],[E1(r)],!1,!0);let s=0;return ti(e).J({index:"documentTargetsIndex",H:!0,range:i},([o,a],l,c)=>{o!==0&&(s++,c.done())}).next(()=>s>0)}ot(e,t){return oo(e).get(t).next(r=>r?fl(r):null)}}function oo(n){return _t(n,"targets")}function Z0(n){return _t(n,"targetGlobal")}function ti(n){return _t(n,"targetDocuments")}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function eE([n,e],[t,r]){const i=oe(n,t);return i===0?oe(e,r):i}class fO{constructor(e){this.Kn=e,this.buffer=new Pe(eE),this.$n=0}Un(){return++this.$n}Wn(e){const t=[e,this.Un()];if(this.buffer.size<this.Kn)this.buffer=this.buffer.add(t);else{const r=this.buffer.last();eE(t,r)<0&&(this.buffer=this.buffer.delete(r).add(t))}}get maxValue(){return this.buffer.last()[0]}}class pO{constructor(e,t,r){this.garbageCollector=e,this.asyncQueue=t,this.localStore=r,this.Gn=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.zn(6e4)}stop(){this.Gn&&(this.Gn.cancel(),this.Gn=null)}get started(){return this.Gn!==null}zn(e){$("LruGarbageCollector",`Garbage collection scheduled in ${e}ms`),this.Gn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,async()=>{this.Gn=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(t){zi(t)?$("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",t):await $i(t)}await this.zn(3e5)})}}class mO{constructor(e,t){this.jn=e,this.params=t}calculateTargetCount(e,t){return this.jn.Hn(e).next(r=>Math.floor(t/100*r))}nthSequenceNumber(e,t){if(t===0)return O.resolve(tn.oe);const r=new fO(t);return this.jn.forEachTarget(e,i=>r.Wn(i.sequenceNumber)).next(()=>this.jn.Jn(e,i=>r.Wn(i))).next(()=>r.maxValue)}removeTargets(e,t,r){return this.jn.removeTargets(e,t,r)}removeOrphanedDocuments(e,t){return this.jn.removeOrphanedDocuments(e,t)}collect(e,t){return this.params.cacheSizeCollectionThreshold===-1?($("LruGarbageCollector","Garbage collection skipped; disabled"),O.resolve(J0)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?($("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),J0):this.Yn(e,t))}getCacheSize(e){return this.jn.getCacheSize(e)}Yn(e,t){let r,i,s,o,a,l,c;const d=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(h=>(h>this.params.maximumSequenceNumbersToCollect?($("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${h}`),i=this.params.maximumSequenceNumbersToCollect):i=h,o=Date.now(),this.nthSequenceNumber(e,i))).next(h=>(r=h,a=Date.now(),this.removeTargets(e,r,t))).next(h=>(s=h,l=Date.now(),this.removeOrphanedDocuments(e,r))).next(h=>(c=Date.now(),uo()<=fe.DEBUG&&$("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${o-d}ms
	Determined least recently used ${i} in `+(a-o)+`ms
	Removed ${s} targets in `+(l-a)+`ms
	Removed ${h} documents in `+(c-l)+`ms
Total Duration: ${c-d}ms`),O.resolve({didRun:!0,sequenceNumbersCollected:i,targetsRemoved:s,documentsRemoved:h})))}}function gO(n,e){return new mO(n,e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yO{constructor(e,t){this.db=e,this.garbageCollector=gO(this,t)}Hn(e){const t=this.Zn(e);return this.db.getTargetCache().getTargetCount(e).next(r=>t.next(i=>r+i))}Zn(e){let t=0;return this.Jn(e,r=>{t++}).next(()=>t)}forEachTarget(e,t){return this.db.getTargetCache().forEachTarget(e,t)}Jn(e,t){return this.Xn(e,(r,i)=>t(i))}addReference(e,t,r){return Ic(e,r)}removeReference(e,t,r){return Ic(e,r)}removeTargets(e,t,r){return this.db.getTargetCache().removeTargets(e,t,r)}markPotentiallyOrphaned(e,t){return Ic(e,t)}er(e,t){return function(i,s){let o=!1;return xD(i).Y(a=>kD(i,a,s).next(l=>(l&&(o=!0),O.resolve(!l)))).next(()=>o)}(e,t)}removeOrphanedDocuments(e,t){const r=this.db.getRemoteDocumentCache().newChangeBuffer(),i=[];let s=0;return this.Xn(e,(o,a)=>{if(a<=t){const l=this.er(e,o).next(c=>{if(!c)return s++,r.getEntry(e,o).next(()=>(r.removeEntry(o,te.min()),ti(e).delete(function(h){return[0,Ht(h.path)]}(o))))});i.push(l)}}).next(()=>O.waitFor(i)).next(()=>r.apply(e)).next(()=>s)}removeTarget(e,t){const r=t.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,r)}updateLimboDocument(e,t){return Ic(e,t)}Xn(e,t){const r=ti(e);let i,s=tn.oe;return r.J({index:"documentTargetsIndex"},([o,a],{path:l,sequenceNumber:c})=>{o===0?(s!==tn.oe&&t(new Y(Xn(i)),s),s=c,i=l):s=tn.oe}).next(()=>{s!==tn.oe&&t(new Y(Xn(i)),s)})}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}}function Ic(n,e){return ti(n).put(function(r,i){return{targetId:0,path:Ht(r.path),sequenceNumber:i}}(e,n.currentSequenceNumber))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CD{constructor(){this.changes=new qi(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,Me.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const r=this.changes.get(t);return r!==void 0?O.resolve(r):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _O{constructor(e){this.serializer=e}setIndexManager(e){this.indexManager=e}addEntry(e,t,r){return Zi(e).put(r)}removeEntry(e,t,r){return Zi(e).delete(function(s,o){const a=s.path.toArray();return[a.slice(0,a.length-2),a[a.length-2],qd(o),a[a.length-1]]}(t,r))}updateMetadata(e,t){return this.getMetadata(e).next(r=>(r.byteSize+=t,this.tr(e,r)))}getEntry(e,t){let r=Me.newInvalidDocument(t);return Zi(e).J({index:"documentKeyIndex",range:IDBKeyRange.only(tl(t))},(i,s)=>{r=this.nr(t,s)}).next(()=>r)}rr(e,t){let r={size:0,document:Me.newInvalidDocument(t)};return Zi(e).J({index:"documentKeyIndex",range:IDBKeyRange.only(tl(t))},(i,s)=>{r={document:this.nr(t,s),size:Yd(s)}}).next(()=>r)}getEntries(e,t){let r=rn();return this.ir(e,t,(i,s)=>{const o=this.nr(i,s);r=r.insert(i,o)}).next(()=>r)}sr(e,t){let r=rn(),i=new Re(Y.comparator);return this.ir(e,t,(s,o)=>{const a=this.nr(s,o);r=r.insert(s,a),i=i.insert(s,Yd(o))}).next(()=>({documents:r,_r:i}))}ir(e,t,r){if(t.isEmpty())return O.resolve();let i=new Pe(rE);t.forEach(l=>i=i.add(l));const s=IDBKeyRange.bound(tl(i.first()),tl(i.last())),o=i.getIterator();let a=o.getNext();return Zi(e).J({index:"documentKeyIndex",range:s},(l,c,d)=>{const h=Y.fromSegments([...c.prefixPath,c.collectionGroup,c.documentId]);for(;a&&rE(a,h)<0;)r(a,null),a=o.getNext();a&&a.isEqual(h)&&(r(a,c),a=o.hasNext()?o.getNext():null),a?d.$(tl(a)):d.done()}).next(()=>{for(;a;)r(a,null),a=o.hasNext()?o.getNext():null})}getDocumentsMatchingQuery(e,t,r,i,s){const o=t.path,a=[o.popLast().toArray(),o.lastSegment(),qd(r.readTime),r.documentKey.path.isEmpty()?"":r.documentKey.path.lastSegment()],l=[o.popLast().toArray(),o.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return Zi(e).U(IDBKeyRange.bound(a,l,!0)).next(c=>{s==null||s.incrementDocumentReadCount(c.length);let d=rn();for(const h of c){const p=this.nr(Y.fromSegments(h.prefixPath.concat(h.collectionGroup,h.documentId)),h);p.isFoundDocument()&&(Du(t,p)||i.has(p.key))&&(d=d.insert(p.key,p))}return d})}getAllFromCollectionGroup(e,t,r,i){let s=rn();const o=nE(t,r),a=nE(t,mn.max());return Zi(e).J({index:"collectionGroupIndex",range:IDBKeyRange.bound(o,a,!0)},(l,c,d)=>{const h=this.nr(Y.fromSegments(c.prefixPath.concat(c.collectionGroup,c.documentId)),c);s=s.insert(h.key,h),s.size===i&&d.done()}).next(()=>s)}newChangeBuffer(e){return new vO(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next(t=>t.byteSize)}getMetadata(e){return tE(e).get("remoteDocumentGlobalKey").next(t=>(ee(!!t),t))}tr(e,t){return tE(e).put("remoteDocumentGlobalKey",t)}nr(e,t){if(t){const r=rO(this.serializer,t);if(!(r.isNoDocument()&&r.version.isEqual(te.min())))return r}return Me.newInvalidDocument(e)}}function RD(n){return new _O(n)}class vO extends CD{constructor(e,t){super(),this.ar=e,this.trackRemovals=t,this.ur=new qi(r=>r.toString(),(r,i)=>r.isEqual(i))}applyChanges(e){const t=[];let r=0,i=new Pe((s,o)=>oe(s.canonicalString(),o.canonicalString()));return this.changes.forEach((s,o)=>{const a=this.ur.get(s);if(t.push(this.ar.removeEntry(e,s,a.readTime)),o.isValidDocument()){const l=j0(this.ar.serializer,o);i=i.add(s.path.popLast());const c=Yd(l);r+=c-a.size,t.push(this.ar.addEntry(e,s,l))}else if(r-=a.size,this.trackRemovals){const l=j0(this.ar.serializer,o.convertToNoDocument(te.min()));t.push(this.ar.addEntry(e,s,l))}}),i.forEach(s=>{t.push(this.ar.indexManager.addToCollectionParentIndex(e,s))}),t.push(this.ar.updateMetadata(e,r)),O.waitFor(t)}getFromCache(e,t){return this.ar.rr(e,t).next(r=>(this.ur.set(t,{size:r.size,readTime:r.document.readTime}),r.document))}getAllFromCache(e,t){return this.ar.sr(e,t).next(({documents:r,_r:i})=>(i.forEach((s,o)=>{this.ur.set(s,{size:o,readTime:r.get(s).readTime})}),r))}}function tE(n){return _t(n,"remoteDocumentGlobal")}function Zi(n){return _t(n,"remoteDocumentsV14")}function tl(n){const e=n.path.toArray();return[e.slice(0,e.length-2),e[e.length-2],e[e.length-1]]}function nE(n,e){const t=e.documentKey.path.toArray();return[n,qd(e.readTime),t.slice(0,t.length-2),t.length>0?t[t.length-1]:""]}function rE(n,e){const t=n.path.toArray(),r=e.path.toArray();let i=0;for(let s=0;s<t.length-2&&s<r.length-2;++s)if(i=oe(t[s],r[s]),i)return i;return i=oe(t.length,r.length),i||(i=oe(t[t.length-2],r[r.length-2]),i||oe(t[t.length-1],r[r.length-1]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wO{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AD{constructor(e,t,r,i){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=r,this.indexManager=i}getDocument(e,t){let r=null;return this.documentOverlayCache.getOverlay(e,t).next(i=>(r=i,this.remoteDocumentCache.getEntry(e,t))).next(i=>(r!==null&&kl(r.mutation,i,nn.empty(),je.now()),i))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.getLocalViewOfDocuments(e,r,ae()).next(()=>r))}getLocalViewOfDocuments(e,t,r=ae()){const i=Jn();return this.populateOverlays(e,i,t).next(()=>this.computeViews(e,t,i,r).next(s=>{let o=dl();return s.forEach((a,l)=>{o=o.insert(a,l.overlayedDocument)}),o}))}getOverlayedDocuments(e,t){const r=Jn();return this.populateOverlays(e,r,t).next(()=>this.computeViews(e,t,r,ae()))}populateOverlays(e,t,r){const i=[];return r.forEach(s=>{t.has(s)||i.push(s)}),this.documentOverlayCache.getOverlays(e,i).next(s=>{s.forEach((o,a)=>{t.set(o,a)})})}computeViews(e,t,r,i){let s=rn();const o=Pl(),a=function(){return Pl()}();return t.forEach((l,c)=>{const d=r.get(c.key);i.has(c.key)&&(d===void 0||d.mutation instanceof Br)?s=s.insert(c.key,c):d!==void 0?(o.set(c.key,d.mutation.getFieldMask()),kl(d.mutation,c,d.mutation.getFieldMask(),je.now())):o.set(c.key,nn.empty())}),this.recalculateAndSaveOverlays(e,s).next(l=>(l.forEach((c,d)=>o.set(c,d)),t.forEach((c,d)=>{var h;return a.set(c,new wO(d,(h=o.get(c))!==null&&h!==void 0?h:null))}),a))}recalculateAndSaveOverlays(e,t){const r=Pl();let i=new Re((o,a)=>o-a),s=ae();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next(o=>{for(const a of o)a.keys().forEach(l=>{const c=t.get(l);if(c===null)return;let d=r.get(l)||nn.empty();d=a.applyToLocalView(c,d),r.set(l,d);const h=(i.get(a.batchId)||ae()).add(l);i=i.insert(a.batchId,h)})}).next(()=>{const o=[],a=i.getReverseIterator();for(;a.hasNext();){const l=a.getNext(),c=l.key,d=l.value,h=G1();d.forEach(p=>{if(!s.has(p)){const g=iD(t.get(p),r.get(p));g!==null&&h.set(p,g),s=s.add(p)}}),o.push(this.documentOverlayCache.saveOverlays(e,c,h))}return O.waitFor(o)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,t,r,i){return function(o){return Y.isDocumentKey(o.path)&&o.collectionGroup===null&&o.filters.length===0}(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):xy(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,r,i):this.getDocumentsMatchingCollectionQuery(e,t,r,i)}getNextDocuments(e,t,r,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,r,i).next(s=>{const o=i-s.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,r.largestBatchId,i-s.size):O.resolve(Jn());let a=-1,l=s;return o.next(c=>O.forEach(c,(d,h)=>(a<h.largestBatchId&&(a=h.largestBatchId),s.get(d)?O.resolve():this.remoteDocumentCache.getEntry(e,d).next(p=>{l=l.insert(d,p)}))).next(()=>this.populateOverlays(e,c,s)).next(()=>this.computeViews(e,l,c,ae())).next(d=>({batchId:a,changes:K1(d)})))})}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new Y(t)).next(r=>{let i=dl();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i})}getDocumentsMatchingCollectionGroupQuery(e,t,r,i){const s=t.collectionGroup;let o=dl();return this.indexManager.getCollectionParents(e,s).next(a=>O.forEach(a,l=>{const c=function(h,p){return new Fr(p,null,h.explicitOrderBy.slice(),h.filters.slice(),h.limit,h.limitType,h.startAt,h.endAt)}(t,l.child(s));return this.getDocumentsMatchingCollectionQuery(e,c,r,i).next(d=>{d.forEach((h,p)=>{o=o.insert(h,p)})})}).next(()=>o))}getDocumentsMatchingCollectionQuery(e,t,r,i){let s;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,r.largestBatchId).next(o=>(s=o,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,r,s,i))).next(o=>{s.forEach((l,c)=>{const d=c.getKey();o.get(d)===null&&(o=o.insert(d,Me.newInvalidDocument(d)))});let a=dl();return o.forEach((l,c)=>{const d=s.get(l);d!==void 0&&kl(d.mutation,c,nn.empty(),je.now()),Du(t,c)&&(a=a.insert(l,c))}),a})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class EO{constructor(e){this.serializer=e,this.cr=new Map,this.lr=new Map}getBundleMetadata(e,t){return O.resolve(this.cr.get(t))}saveBundleMetadata(e,t){return this.cr.set(t.id,function(i){return{id:i.id,version:i.version,createTime:ot(i.createTime)}}(t)),O.resolve()}getNamedQuery(e,t){return O.resolve(this.lr.get(t))}saveNamedQuery(e,t){return this.lr.set(t.name,function(i){return{name:i.name,query:Ly(i.bundledQuery),readTime:ot(i.readTime)}}(t)),O.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TO{constructor(){this.overlays=new Re(Y.comparator),this.hr=new Map}getOverlay(e,t){return O.resolve(this.overlays.get(t))}getOverlays(e,t){const r=Jn();return O.forEach(t,i=>this.getOverlay(e,i).next(s=>{s!==null&&r.set(i,s)})).next(()=>r)}saveOverlays(e,t,r){return r.forEach((i,s)=>{this.ht(e,t,s)}),O.resolve()}removeOverlaysForBatchId(e,t,r){const i=this.hr.get(r);return i!==void 0&&(i.forEach(s=>this.overlays=this.overlays.remove(s)),this.hr.delete(r)),O.resolve()}getOverlaysForCollection(e,t,r){const i=Jn(),s=t.length+1,o=new Y(t.child("")),a=this.overlays.getIteratorFrom(o);for(;a.hasNext();){const l=a.getNext().value,c=l.getKey();if(!t.isPrefixOf(c.path))break;c.path.length===s&&l.largestBatchId>r&&i.set(l.getKey(),l)}return O.resolve(i)}getOverlaysForCollectionGroup(e,t,r,i){let s=new Re((c,d)=>c-d);const o=this.overlays.getIterator();for(;o.hasNext();){const c=o.getNext().value;if(c.getKey().getCollectionGroup()===t&&c.largestBatchId>r){let d=s.get(c.largestBatchId);d===null&&(d=Jn(),s=s.insert(c.largestBatchId,d)),d.set(c.getKey(),c)}}const a=Jn(),l=s.getIterator();for(;l.hasNext()&&(l.getNext().value.forEach((c,d)=>a.set(c,d)),!(a.size()>=i)););return O.resolve(a)}ht(e,t,r){const i=this.overlays.get(r.key);if(i!==null){const o=this.hr.get(i.largestBatchId).delete(r.key);this.hr.set(i.largestBatchId,o)}this.overlays=this.overlays.insert(r.key,new My(t,r));let s=this.hr.get(t);s===void 0&&(s=ae(),this.hr.set(t,s)),this.hr.set(t,s.add(r.key))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Uy{constructor(){this.Pr=new Pe(ht.Ir),this.Tr=new Pe(ht.Er)}isEmpty(){return this.Pr.isEmpty()}addReference(e,t){const r=new ht(e,t);this.Pr=this.Pr.add(r),this.Tr=this.Tr.add(r)}dr(e,t){e.forEach(r=>this.addReference(r,t))}removeReference(e,t){this.Ar(new ht(e,t))}Rr(e,t){e.forEach(r=>this.removeReference(r,t))}Vr(e){const t=new Y(new de([])),r=new ht(t,e),i=new ht(t,e+1),s=[];return this.Tr.forEachInRange([r,i],o=>{this.Ar(o),s.push(o.key)}),s}mr(){this.Pr.forEach(e=>this.Ar(e))}Ar(e){this.Pr=this.Pr.delete(e),this.Tr=this.Tr.delete(e)}gr(e){const t=new Y(new de([])),r=new ht(t,e),i=new ht(t,e+1);let s=ae();return this.Tr.forEachInRange([r,i],o=>{s=s.add(o.key)}),s}containsKey(e){const t=new ht(e,0),r=this.Pr.firstAfterOrEqual(t);return r!==null&&e.isEqual(r.key)}}class ht{constructor(e,t){this.key=e,this.pr=t}static Ir(e,t){return Y.comparator(e.key,t.key)||oe(e.pr,t.pr)}static Er(e,t){return oe(e.pr,t.pr)||Y.comparator(e.key,t.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class IO{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.yr=1,this.wr=new Pe(ht.Ir)}checkEmpty(e){return O.resolve(this.mutationQueue.length===0)}addMutationBatch(e,t,r,i){const s=this.yr;this.yr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const o=new Ay(s,t,r,i);this.mutationQueue.push(o);for(const a of i)this.wr=this.wr.add(new ht(a.key,s)),this.indexManager.addToCollectionParentIndex(e,a.key.path.popLast());return O.resolve(o)}lookupMutationBatch(e,t){return O.resolve(this.Sr(t))}getNextMutationBatchAfterBatchId(e,t){const r=t+1,i=this.br(r),s=i<0?0:i;return O.resolve(this.mutationQueue.length>s?this.mutationQueue[s]:null)}getHighestUnacknowledgedBatchId(){return O.resolve(this.mutationQueue.length===0?-1:this.yr-1)}getAllMutationBatches(e){return O.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const r=new ht(t,0),i=new ht(t,Number.POSITIVE_INFINITY),s=[];return this.wr.forEachInRange([r,i],o=>{const a=this.Sr(o.pr);s.push(a)}),O.resolve(s)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new Pe(oe);return t.forEach(i=>{const s=new ht(i,0),o=new ht(i,Number.POSITIVE_INFINITY);this.wr.forEachInRange([s,o],a=>{r=r.add(a.pr)})}),O.resolve(this.Dr(r))}getAllMutationBatchesAffectingQuery(e,t){const r=t.path,i=r.length+1;let s=r;Y.isDocumentKey(s)||(s=s.child(""));const o=new ht(new Y(s),0);let a=new Pe(oe);return this.wr.forEachWhile(l=>{const c=l.key.path;return!!r.isPrefixOf(c)&&(c.length===i&&(a=a.add(l.pr)),!0)},o),O.resolve(this.Dr(a))}Dr(e){const t=[];return e.forEach(r=>{const i=this.Sr(r);i!==null&&t.push(i)}),t}removeMutationBatch(e,t){ee(this.Cr(t.batchId,"removed")===0),this.mutationQueue.shift();let r=this.wr;return O.forEach(t.mutations,i=>{const s=new ht(i.key,t.batchId);return r=r.delete(s),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)}).next(()=>{this.wr=r})}Mn(e){}containsKey(e,t){const r=new ht(t,0),i=this.wr.firstAfterOrEqual(r);return O.resolve(t.isEqual(i&&i.key))}performConsistencyCheck(e){return this.mutationQueue.length,O.resolve()}Cr(e,t){return this.br(e)}br(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Sr(e){const t=this.br(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SO{constructor(e){this.vr=e,this.docs=function(){return new Re(Y.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const r=t.key,i=this.docs.get(r),s=i?i.size:0,o=this.vr(t);return this.docs=this.docs.insert(r,{document:t.mutableCopy(),size:o}),this.size+=o-s,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const r=this.docs.get(t);return O.resolve(r?r.document.mutableCopy():Me.newInvalidDocument(t))}getEntries(e,t){let r=rn();return t.forEach(i=>{const s=this.docs.get(i);r=r.insert(i,s?s.document.mutableCopy():Me.newInvalidDocument(i))}),O.resolve(r)}getDocumentsMatchingQuery(e,t,r,i){let s=rn();const o=t.path,a=new Y(o.child("")),l=this.docs.getIteratorFrom(a);for(;l.hasNext();){const{key:c,value:{document:d}}=l.getNext();if(!o.isPrefixOf(c.path))break;c.path.length>o.length+1||Dy(I1(d),r)<=0||(i.has(d.key)||Du(t,d))&&(s=s.insert(d.key,d.mutableCopy()))}return O.resolve(s)}getAllFromCollectionGroup(e,t,r,i){X()}Fr(e,t){return O.forEach(this.docs,r=>t(r))}newChangeBuffer(e){return new DO(this)}getSize(e){return O.resolve(this.size)}}class DO extends CD{constructor(e){super(),this.ar=e}applyChanges(e){const t=[];return this.changes.forEach((r,i)=>{i.isValidDocument()?t.push(this.ar.addEntry(e,i)):this.ar.removeEntry(r)}),O.waitFor(t)}getFromCache(e,t){return this.ar.getEntry(e,t)}getAllFromCache(e,t){return this.ar.getEntries(e,t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bO{constructor(e){this.persistence=e,this.Mr=new qi(t=>As(t),Iu),this.lastRemoteSnapshotVersion=te.min(),this.highestTargetId=0,this.Or=0,this.Nr=new Uy,this.targetCount=0,this.Lr=Ls.Nn()}forEachTarget(e,t){return this.Mr.forEach((r,i)=>t(i)),O.resolve()}getLastRemoteSnapshotVersion(e){return O.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return O.resolve(this.Or)}allocateTargetId(e){return this.highestTargetId=this.Lr.next(),O.resolve(this.highestTargetId)}setTargetsMetadata(e,t,r){return r&&(this.lastRemoteSnapshotVersion=r),t>this.Or&&(this.Or=t),O.resolve()}qn(e){this.Mr.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.Lr=new Ls(t),this.highestTargetId=t),e.sequenceNumber>this.Or&&(this.Or=e.sequenceNumber)}addTargetData(e,t){return this.qn(t),this.targetCount+=1,O.resolve()}updateTargetData(e,t){return this.qn(t),O.resolve()}removeTargetData(e,t){return this.Mr.delete(t.target),this.Nr.Vr(t.targetId),this.targetCount-=1,O.resolve()}removeTargets(e,t,r){let i=0;const s=[];return this.Mr.forEach((o,a)=>{a.sequenceNumber<=t&&r.get(a.targetId)===null&&(this.Mr.delete(o),s.push(this.removeMatchingKeysForTargetId(e,a.targetId)),i++)}),O.waitFor(s).next(()=>i)}getTargetCount(e){return O.resolve(this.targetCount)}getTargetData(e,t){const r=this.Mr.get(t)||null;return O.resolve(r)}addMatchingKeys(e,t,r){return this.Nr.dr(t,r),O.resolve()}removeMatchingKeys(e,t,r){this.Nr.Rr(t,r);const i=this.persistence.referenceDelegate,s=[];return i&&t.forEach(o=>{s.push(i.markPotentiallyOrphaned(e,o))}),O.waitFor(s)}removeMatchingKeysForTargetId(e,t){return this.Nr.Vr(t),O.resolve()}getMatchingKeysForTargetId(e,t){const r=this.Nr.gr(t);return O.resolve(r)}containsKey(e,t){return O.resolve(this.Nr.containsKey(t))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ND{constructor(e,t){this.Br={},this.overlays={},this.kr=new tn(0),this.qr=!1,this.qr=!0,this.referenceDelegate=e(this),this.Qr=new bO(this),this.indexManager=new cO,this.remoteDocumentCache=function(i){return new SO(i)}(r=>this.referenceDelegate.Kr(r)),this.serializer=new ID(t),this.$r=new EO(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.qr=!1,Promise.resolve()}get started(){return this.qr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new TO,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let r=this.Br[e.toKey()];return r||(r=new IO(t,this.referenceDelegate),this.Br[e.toKey()]=r),r}getTargetCache(){return this.Qr}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.$r}runTransaction(e,t,r){$("MemoryPersistence","Starting transaction:",e);const i=new PO(this.kr.next());return this.referenceDelegate.Ur(),r(i).next(s=>this.referenceDelegate.Wr(i).next(()=>s)).toPromise().then(s=>(i.raiseOnCommittedEvent(),s))}Gr(e,t){return O.or(Object.values(this.Br).map(r=>()=>r.containsKey(e,t)))}}class PO extends D1{constructor(e){super(),this.currentSequenceNumber=e}}class qh{constructor(e){this.persistence=e,this.zr=new Uy,this.jr=null}static Hr(e){return new qh(e)}get Jr(){if(this.jr)return this.jr;throw X()}addReference(e,t,r){return this.zr.addReference(r,t),this.Jr.delete(r.toString()),O.resolve()}removeReference(e,t,r){return this.zr.removeReference(r,t),this.Jr.add(r.toString()),O.resolve()}markPotentiallyOrphaned(e,t){return this.Jr.add(t.toString()),O.resolve()}removeTarget(e,t){this.zr.Vr(t.targetId).forEach(i=>this.Jr.add(i.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,t.targetId).next(i=>{i.forEach(s=>this.Jr.add(s.toString()))}).next(()=>r.removeTargetData(e,t))}Ur(){this.jr=new Set}Wr(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return O.forEach(this.Jr,r=>{const i=Y.fromPath(r);return this.Yr(e,i).next(s=>{s||t.removeEntry(i,te.min())})}).next(()=>(this.jr=null,t.apply(e)))}updateLimboDocument(e,t){return this.Yr(e,t).next(r=>{r?this.Jr.delete(t.toString()):this.Jr.add(t.toString())})}Kr(e){return 0}Yr(e,t){return O.or([()=>O.resolve(this.zr.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Gr(e,t)])}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kO{constructor(e){this.serializer=e}O(e,t,r,i){const s=new Fh("createOrUpgrade",t);r<1&&i>=1&&(function(l){l.createObjectStore("owner")}(e),function(l){l.createObjectStore("mutationQueues",{keyPath:"userId"}),l.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",_0,{unique:!0}),l.createObjectStore("documentMutations")}(e),iE(e),function(l){l.createObjectStore("remoteDocuments")}(e));let o=O.resolve();return r<3&&i>=3&&(r!==0&&(function(l){l.deleteObjectStore("targetDocuments"),l.deleteObjectStore("targets"),l.deleteObjectStore("targetGlobal")}(e),iE(e)),o=o.next(()=>function(l){const c=l.store("targetGlobal"),d={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:te.min().toTimestamp(),targetCount:0};return c.put("targetGlobalKey",d)}(s))),r<4&&i>=4&&(r!==0&&(o=o.next(()=>function(l,c){return c.store("mutations").U().next(d=>{l.deleteObjectStore("mutations"),l.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",_0,{unique:!0});const h=c.store("mutations"),p=d.map(g=>h.put(g));return O.waitFor(p)})}(e,s))),o=o.next(()=>{(function(l){l.createObjectStore("clientMetadata",{keyPath:"clientId"})})(e)})),r<5&&i>=5&&(o=o.next(()=>this.Xr(s))),r<6&&i>=6&&(o=o.next(()=>(function(l){l.createObjectStore("remoteDocumentGlobal")}(e),this.ei(s)))),r<7&&i>=7&&(o=o.next(()=>this.ti(s))),r<8&&i>=8&&(o=o.next(()=>this.ni(e,s))),r<9&&i>=9&&(o=o.next(()=>{(function(l){l.objectStoreNames.contains("remoteDocumentChanges")&&l.deleteObjectStore("remoteDocumentChanges")})(e)})),r<10&&i>=10&&(o=o.next(()=>this.ri(s))),r<11&&i>=11&&(o=o.next(()=>{(function(l){l.createObjectStore("bundles",{keyPath:"bundleId"})})(e),function(l){l.createObjectStore("namedQueries",{keyPath:"name"})}(e)})),r<12&&i>=12&&(o=o.next(()=>{(function(l){const c=l.createObjectStore("documentOverlays",{keyPath:dM});c.createIndex("collectionPathOverlayIndex",hM,{unique:!1}),c.createIndex("collectionGroupOverlayIndex",fM,{unique:!1})})(e)})),r<13&&i>=13&&(o=o.next(()=>function(l){const c=l.createObjectStore("remoteDocumentsV14",{keyPath:eM});c.createIndex("documentKeyIndex",tM),c.createIndex("collectionGroupIndex",nM)}(e)).next(()=>this.ii(e,s)).next(()=>e.deleteObjectStore("remoteDocuments"))),r<14&&i>=14&&(o=o.next(()=>this.si(e,s))),r<15&&i>=15&&(o=o.next(()=>function(l){l.createObjectStore("indexConfiguration",{keyPath:"indexId",autoIncrement:!0}).createIndex("collectionGroupIndex","collectionGroup",{unique:!1}),l.createObjectStore("indexState",{keyPath:aM}).createIndex("sequenceNumberIndex",lM,{unique:!1}),l.createObjectStore("indexEntries",{keyPath:uM}).createIndex("documentKeyIndex",cM,{unique:!1})}(e))),r<16&&i>=16&&(o=o.next(()=>{t.objectStore("indexState").clear()}).next(()=>{t.objectStore("indexEntries").clear()})),o}ei(e){let t=0;return e.store("remoteDocuments").J((r,i)=>{t+=Yd(i)}).next(()=>{const r={byteSize:t};return e.store("remoteDocumentGlobal").put("remoteDocumentGlobalKey",r)})}Xr(e){const t=e.store("mutationQueues"),r=e.store("mutations");return t.U().next(i=>O.forEach(i,s=>{const o=IDBKeyRange.bound([s.userId,-1],[s.userId,s.lastAcknowledgedBatchId]);return r.U("userMutationsIndex",o).next(a=>O.forEach(a,l=>{ee(l.userId===s.userId);const c=os(this.serializer,l);return PD(e,s.userId,c).next(()=>{})}))}))}ti(e){const t=e.store("targetDocuments"),r=e.store("remoteDocuments");return e.store("targetGlobal").get("targetGlobalKey").next(i=>{const s=[];return r.J((o,a)=>{const l=new de(o),c=function(h){return[0,Ht(h)]}(l);s.push(t.get(c).next(d=>d?O.resolve():(h=>t.put({targetId:0,path:Ht(h),sequenceNumber:i.highestListenSequenceNumber}))(l)))}).next(()=>O.waitFor(s))})}ni(e,t){e.createObjectStore("collectionParents",{keyPath:oM});const r=t.store("collectionParents"),i=new By,s=o=>{if(i.add(o)){const a=o.lastSegment(),l=o.popLast();return r.put({collectionId:a,parent:Ht(l)})}};return t.store("remoteDocuments").J({H:!0},(o,a)=>{const l=new de(o);return s(l.popLast())}).next(()=>t.store("documentMutations").J({H:!0},([o,a,l],c)=>{const d=Xn(a);return s(d.popLast())}))}ri(e){const t=e.store("targets");return t.J((r,i)=>{const s=fl(i),o=SD(this.serializer,s);return t.put(o)})}ii(e,t){const r=t.store("remoteDocuments"),i=[];return r.J((s,o)=>{const a=t.store("remoteDocumentsV14"),l=function(h){return h.document?new Y(de.fromString(h.document.name).popFirst(5)):h.noDocument?Y.fromSegments(h.noDocument.path):h.unknownDocument?Y.fromSegments(h.unknownDocument.path):X()}(o).path.toArray(),c={prefixPath:l.slice(0,l.length-2),collectionGroup:l[l.length-2],documentId:l[l.length-1],readTime:o.readTime||[0,0],unknownDocument:o.unknownDocument,noDocument:o.noDocument,document:o.document,hasCommittedMutations:!!o.hasCommittedMutations};i.push(a.put(c))}).next(()=>O.waitFor(i))}si(e,t){const r=t.store("mutations"),i=RD(this.serializer),s=new ND(qh.Hr,this.serializer.ct);return r.U().next(o=>{const a=new Map;return o.forEach(l=>{var c;let d=(c=a.get(l.userId))!==null&&c!==void 0?c:ae();os(this.serializer,l).keys().forEach(h=>d=d.add(h)),a.set(l.userId,d)}),O.forEach(a,(l,c)=>{const d=new pt(c),h=$h.lt(this.serializer,d),p=s.getIndexManager(d),g=zh.lt(d,this.serializer,p,s.referenceDelegate);return new AD(i,g,h,p).recalculateAndSaveOverlaysForDocumentKeys(new Lm(t,tn.oe),l).next()})})}}function iE(n){n.createObjectStore("targetDocuments",{keyPath:iM}).createIndex("documentTargetsIndex",sM,{unique:!0}),n.createObjectStore("targets",{keyPath:"targetId"}).createIndex("queryTargetsIndex",rM,{unique:!0}),n.createObjectStore("targetGlobal")}const wp="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.";class jy{constructor(e,t,r,i,s,o,a,l,c,d,h=16){if(this.allowTabSynchronization=e,this.persistenceKey=t,this.clientId=r,this.oi=s,this.window=o,this.document=a,this._i=c,this.ai=d,this.ui=h,this.kr=null,this.qr=!1,this.isPrimary=!1,this.networkEnabled=!0,this.ci=null,this.inForeground=!1,this.li=null,this.hi=null,this.Pi=Number.NEGATIVE_INFINITY,this.Ii=p=>Promise.resolve(),!jy.D())throw new j(F.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new yO(this,i),this.Ti=t+"main",this.serializer=new ID(l),this.Ei=new nr(this.Ti,this.ui,new kO(this.serializer)),this.Qr=new hO(this.referenceDelegate,this.serializer),this.remoteDocumentCache=RD(this.serializer),this.$r=new iO,this.window&&this.window.localStorage?this.di=this.window.localStorage:(this.di=null,d===!1&&rt("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.Ai().then(()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new j(F.FAILED_PRECONDITION,wp);return this.Ri(),this.Vi(),this.mi(),this.runTransaction("getHighestListenSequenceNumber","readonly",e=>this.Qr.getHighestSequenceNumber(e))}).then(e=>{this.kr=new tn(e,this._i)}).then(()=>{this.qr=!0}).catch(e=>(this.Ei&&this.Ei.close(),Promise.reject(e)))}fi(e){return this.Ii=async t=>{if(this.started)return e(t)},e(this.isPrimary)}setDatabaseDeletedListener(e){this.Ei.L(async t=>{t.newVersion===null&&await e()})}setNetworkEnabled(e){this.networkEnabled!==e&&(this.networkEnabled=e,this.oi.enqueueAndForget(async()=>{this.started&&await this.Ai()}))}Ai(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",e=>Sc(e).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next(()=>{if(this.isPrimary)return this.gi(e).next(t=>{t||(this.isPrimary=!1,this.oi.enqueueRetryable(()=>this.Ii(!1)))})}).next(()=>this.pi(e)).next(t=>this.isPrimary&&!t?this.yi(e).next(()=>!1):!!t&&this.wi(e).next(()=>!0))).catch(e=>{if(zi(e))return $("IndexedDbPersistence","Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return $("IndexedDbPersistence","Releasing owner lease after error during lease refresh",e),!1}).then(e=>{this.isPrimary!==e&&this.oi.enqueueRetryable(()=>this.Ii(e)),this.isPrimary=e})}gi(e){return nl(e).get("owner").next(t=>O.resolve(this.Si(t)))}bi(e){return Sc(e).delete(this.clientId)}async Di(){if(this.isPrimary&&!this.Ci(this.Pi,18e5)){this.Pi=Date.now();const e=await this.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",t=>{const r=_t(t,"clientMetadata");return r.U().next(i=>{const s=this.vi(i,18e5),o=i.filter(a=>s.indexOf(a)===-1);return O.forEach(o,a=>r.delete(a.clientId)).next(()=>o)})}).catch(()=>[]);if(this.di)for(const t of e)this.di.removeItem(this.Fi(t.clientId))}}mi(){this.hi=this.oi.enqueueAfterDelay("client_metadata_refresh",4e3,()=>this.Ai().then(()=>this.Di()).then(()=>this.mi()))}Si(e){return!!e&&e.ownerId===this.clientId}pi(e){return this.ai?O.resolve(!0):nl(e).get("owner").next(t=>{if(t!==null&&this.Ci(t.leaseTimestampMs,5e3)&&!this.Mi(t.ownerId)){if(this.Si(t)&&this.networkEnabled)return!0;if(!this.Si(t)){if(!t.allowTabSynchronization)throw new j(F.FAILED_PRECONDITION,wp);return!1}}return!(!this.networkEnabled||!this.inForeground)||Sc(e).U().next(r=>this.vi(r,5e3).find(i=>{if(this.clientId!==i.clientId){const s=!this.networkEnabled&&i.networkEnabled,o=!this.inForeground&&i.inForeground,a=this.networkEnabled===i.networkEnabled;if(s||o&&a)return!0}return!1})===void 0)}).next(t=>(this.isPrimary!==t&&$("IndexedDbPersistence",`Client ${t?"is":"is not"} eligible for a primary lease.`),t))}async shutdown(){this.qr=!1,this.xi(),this.hi&&(this.hi.cancel(),this.hi=null),this.Oi(),this.Ni(),await this.Ei.runTransaction("shutdown","readwrite",["owner","clientMetadata"],e=>{const t=new Lm(e,tn.oe);return this.yi(t).next(()=>this.bi(t))}),this.Ei.close(),this.Li()}vi(e,t){return e.filter(r=>this.Ci(r.updateTimeMs,t)&&!this.Mi(r.clientId))}Bi(){return this.runTransaction("getActiveClients","readonly",e=>Sc(e).U().next(t=>this.vi(t,18e5).map(r=>r.clientId)))}get started(){return this.qr}getMutationQueue(e,t){return zh.lt(e,this.serializer,t,this.referenceDelegate)}getTargetCache(){return this.Qr}getRemoteDocumentCache(){return this.remoteDocumentCache}getIndexManager(e){return new dO(e,this.serializer.ct.databaseId)}getDocumentOverlayCache(e){return $h.lt(this.serializer,e)}getBundleCache(){return this.$r}runTransaction(e,t,r){$("IndexedDbPersistence","Starting transaction:",e);const i=t==="readonly"?"readonly":"readwrite",s=function(l){return l===16?mM:l===15?A1:l===14?R1:l===13?C1:l===12?pM:l===11?x1:void X()}(this.ui);let o;return this.Ei.runTransaction(e,i,s,a=>(o=new Lm(a,this.kr?this.kr.next():tn.oe),t==="readwrite-primary"?this.gi(o).next(l=>!!l||this.pi(o)).next(l=>{if(!l)throw rt(`Failed to obtain primary lease for action '${e}'.`),this.isPrimary=!1,this.oi.enqueueRetryable(()=>this.Ii(!1)),new j(F.FAILED_PRECONDITION,S1);return r(o)}).next(l=>this.wi(o).next(()=>l)):this.ki(o).next(()=>r(o)))).then(a=>(o.raiseOnCommittedEvent(),a))}ki(e){return nl(e).get("owner").next(t=>{if(t!==null&&this.Ci(t.leaseTimestampMs,5e3)&&!this.Mi(t.ownerId)&&!this.Si(t)&&!(this.ai||this.allowTabSynchronization&&t.allowTabSynchronization))throw new j(F.FAILED_PRECONDITION,wp)})}wi(e){const t={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return nl(e).put("owner",t)}static D(){return nr.D()}yi(e){const t=nl(e);return t.get("owner").next(r=>this.Si(r)?($("IndexedDbPersistence","Releasing primary lease."),t.delete("owner")):O.resolve())}Ci(e,t){const r=Date.now();return!(e<r-t)&&(!(e>r)||(rt(`Detected an update time that is in the future: ${e} > ${r}`),!1))}Ri(){this.document!==null&&typeof this.document.addEventListener=="function"&&(this.li=()=>{this.oi.enqueueAndForget(()=>(this.inForeground=this.document.visibilityState==="visible",this.Ai()))},this.document.addEventListener("visibilitychange",this.li),this.inForeground=this.document.visibilityState==="visible")}Oi(){this.li&&(this.document.removeEventListener("visibilitychange",this.li),this.li=null)}Vi(){var e;typeof((e=this.window)===null||e===void 0?void 0:e.addEventListener)=="function"&&(this.ci=()=>{this.xi();const t=/(?:Version|Mobile)\/1[456]/;ZS()&&(navigator.appVersion.match(t)||navigator.userAgent.match(t))&&this.oi.enterRestrictedMode(!0),this.oi.enqueueAndForget(()=>this.shutdown())},this.window.addEventListener("pagehide",this.ci))}Ni(){this.ci&&(this.window.removeEventListener("pagehide",this.ci),this.ci=null)}Mi(e){var t;try{const r=((t=this.di)===null||t===void 0?void 0:t.getItem(this.Fi(e)))!==null;return $("IndexedDbPersistence",`Client '${e}' ${r?"is":"is not"} zombied in LocalStorage`),r}catch(r){return rt("IndexedDbPersistence","Failed to get zombied client id.",r),!1}}xi(){if(this.di)try{this.di.setItem(this.Fi(this.clientId),String(Date.now()))}catch(e){rt("Failed to set zombie client id.",e)}}Li(){if(this.di)try{this.di.removeItem(this.Fi(this.clientId))}catch{}}Fi(e){return`firestore_zombie_${this.persistenceKey}_${e}`}}function nl(n){return _t(n,"owner")}function Sc(n){return _t(n,"clientMetadata")}function $y(n,e){let t=n.projectId;return n.isDefaultDatabase||(t+="."+n.database),"firestore/"+e+"/"+t+"/"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zy{constructor(e,t,r,i){this.targetId=e,this.fromCache=t,this.qi=r,this.Qi=i}static Ki(e,t){let r=ae(),i=ae();for(const s of t.docChanges)switch(s.type){case 0:r=r.add(s.doc.key);break;case 1:i=i.add(s.doc.key)}return new zy(e,t.fromCache,r,i)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xO{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class MD{constructor(){this.$i=!1,this.Ui=!1,this.Wi=100,this.Gi=function(){return ZS()?8:b1(Fd())>0?6:4}()}initialize(e,t){this.zi=e,this.indexManager=t,this.$i=!0}getDocumentsMatchingQuery(e,t,r,i){const s={result:null};return this.ji(e,t).next(o=>{s.result=o}).next(()=>{if(!s.result)return this.Hi(e,t,i,r).next(o=>{s.result=o})}).next(()=>{if(s.result)return;const o=new xO;return this.Ji(e,t,o).next(a=>{if(s.result=a,this.Ui)return this.Yi(e,t,o,a.size)})}).next(()=>s.result)}Yi(e,t,r,i){return r.documentReadCount<this.Wi?(uo()<=fe.DEBUG&&$("QueryEngine","SDK will not create cache indexes for query:",co(t),"since it only creates cache indexes for collection contains","more than or equal to",this.Wi,"documents"),O.resolve()):(uo()<=fe.DEBUG&&$("QueryEngine","Query:",co(t),"scans",r.documentReadCount,"local documents and returns",i,"documents as results."),r.documentReadCount>this.Gi*i?(uo()<=fe.DEBUG&&$("QueryEngine","The SDK decides to create cache indexes for query:",co(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Qt(t))):O.resolve())}ji(e,t){if(C0(t))return O.resolve(null);let r=Qt(t);return this.indexManager.getIndexType(e,r).next(i=>i===0?null:(t.limit!==null&&i===1&&(t=zd(t,null,"F"),r=Qt(t)),this.indexManager.getDocumentsMatchingTarget(e,r).next(s=>{const o=ae(...s);return this.zi.getDocuments(e,o).next(a=>this.indexManager.getMinOffset(e,r).next(l=>{const c=this.Zi(t,a);return this.Xi(t,c,o,l.readTime)?this.ji(e,zd(t,null,"F")):this.es(e,c,t,l)}))})))}Hi(e,t,r,i){return C0(t)||i.isEqual(te.min())?O.resolve(null):this.zi.getDocuments(e,r).next(s=>{const o=this.Zi(t,s);return this.Xi(t,o,r,i)?O.resolve(null):(uo()<=fe.DEBUG&&$("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),co(t)),this.es(e,o,t,T1(i,-1)).next(a=>a))})}Zi(e,t){let r=new Pe(H1(e));return t.forEach((i,s)=>{Du(e,s)&&(r=r.add(s))}),r}Xi(e,t,r,i){if(e.limit===null)return!1;if(r.size!==t.size)return!0;const s=e.limitType==="F"?t.last():t.first();return!!s&&(s.hasPendingWrites||s.version.compareTo(i)>0)}Ji(e,t,r){return uo()<=fe.DEBUG&&$("QueryEngine","Using full collection scan to execute query:",co(t)),this.zi.getDocumentsMatchingQuery(e,t,mn.min(),r)}es(e,t,r,i){return this.zi.getDocumentsMatchingQuery(e,r,i).next(s=>(t.forEach(o=>{s=s.insert(o.key,o)}),s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CO{constructor(e,t,r,i){this.persistence=e,this.ts=t,this.serializer=i,this.ns=new Re(oe),this.rs=new qi(s=>As(s),Iu),this.ss=new Map,this.os=e.getRemoteDocumentCache(),this.Qr=e.getTargetCache(),this.$r=e.getBundleCache(),this._s(r)}_s(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new AD(this.os,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.os.setIndexManager(this.indexManager),this.ts.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.ns))}}function OD(n,e,t,r){return new CO(n,e,t,r)}async function VD(n,e){const t=H(n);return await t.persistence.runTransaction("Handle user change","readonly",r=>{let i;return t.mutationQueue.getAllMutationBatches(r).next(s=>(i=s,t._s(e),t.mutationQueue.getAllMutationBatches(r))).next(s=>{const o=[],a=[];let l=ae();for(const c of i){o.push(c.batchId);for(const d of c.mutations)l=l.add(d.key)}for(const c of s){a.push(c.batchId);for(const d of c.mutations)l=l.add(d.key)}return t.localDocuments.getDocuments(r,l).next(c=>({us:c,removedBatchIds:o,addedBatchIds:a}))})})}function RO(n,e){const t=H(n);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const i=e.batch.keys(),s=t.os.newChangeBuffer({trackRemovals:!0});return function(a,l,c,d){const h=c.batch,p=h.keys();let g=O.resolve();return p.forEach(v=>{g=g.next(()=>d.getEntry(l,v)).next(S=>{const D=c.docVersions.get(v);ee(D!==null),S.version.compareTo(D)<0&&(h.applyToRemoteDocument(S,c),S.isValidDocument()&&(S.setReadTime(c.commitVersion),d.addEntry(S)))})}),g.next(()=>a.mutationQueue.removeMutationBatch(l,h))}(t,r,e,s).next(()=>s.apply(r)).next(()=>t.mutationQueue.performConsistencyCheck(r)).next(()=>t.documentOverlayCache.removeOverlaysForBatchId(r,i,e.batch.batchId)).next(()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(a){let l=ae();for(let c=0;c<a.mutationResults.length;++c)a.mutationResults[c].transformResults.length>0&&(l=l.add(a.batch.mutations[c].key));return l}(e))).next(()=>t.localDocuments.getDocuments(r,i))})}function LD(n){const e=H(n);return e.persistence.runTransaction("Get last remote snapshot version","readonly",t=>e.Qr.getLastRemoteSnapshotVersion(t))}function AO(n,e){const t=H(n),r=e.snapshotVersion;let i=t.ns;return t.persistence.runTransaction("Apply remote event","readwrite-primary",s=>{const o=t.os.newChangeBuffer({trackRemovals:!0});i=t.ns;const a=[];e.targetChanges.forEach((d,h)=>{const p=i.get(h);if(!p)return;a.push(t.Qr.removeMatchingKeys(s,d.removedDocuments,h).next(()=>t.Qr.addMatchingKeys(s,d.addedDocuments,h)));let g=p.withSequenceNumber(s.currentSequenceNumber);e.targetMismatches.get(h)!==null?g=g.withResumeToken(dt.EMPTY_BYTE_STRING,te.min()).withLastLimboFreeSnapshotVersion(te.min()):d.resumeToken.approximateByteSize()>0&&(g=g.withResumeToken(d.resumeToken,r)),i=i.insert(h,g),function(S,D,w){return S.resumeToken.approximateByteSize()===0||D.snapshotVersion.toMicroseconds()-S.snapshotVersion.toMicroseconds()>=3e8?!0:w.addedDocuments.size+w.modifiedDocuments.size+w.removedDocuments.size>0}(p,g,d)&&a.push(t.Qr.updateTargetData(s,g))});let l=rn(),c=ae();if(e.documentUpdates.forEach(d=>{e.resolvedLimboDocuments.has(d)&&a.push(t.persistence.referenceDelegate.updateLimboDocument(s,d))}),a.push(FD(s,o,e.documentUpdates).next(d=>{l=d.cs,c=d.ls})),!r.isEqual(te.min())){const d=t.Qr.getLastRemoteSnapshotVersion(s).next(h=>t.Qr.setTargetsMetadata(s,s.currentSequenceNumber,r));a.push(d)}return O.waitFor(a).next(()=>o.apply(s)).next(()=>t.localDocuments.getLocalViewOfDocuments(s,l,c)).next(()=>l)}).then(s=>(t.ns=i,s))}function FD(n,e,t){let r=ae(),i=ae();return t.forEach(s=>r=r.add(s)),e.getEntries(n,r).next(s=>{let o=rn();return t.forEach((a,l)=>{const c=s.get(a);l.isFoundDocument()!==c.isFoundDocument()&&(i=i.add(a)),l.isNoDocument()&&l.version.isEqual(te.min())?(e.removeEntry(a,l.readTime),o=o.insert(a,l)):!c.isValidDocument()||l.version.compareTo(c.version)>0||l.version.compareTo(c.version)===0&&c.hasPendingWrites?(e.addEntry(l),o=o.insert(a,l)):$("LocalStore","Ignoring outdated watch update for ",a,". Current version:",c.version," Watch version:",l.version)}),{cs:o,ls:i}})}function NO(n,e){const t=H(n);return t.persistence.runTransaction("Get next mutation batch","readonly",r=>(e===void 0&&(e=-1),t.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function na(n,e){const t=H(n);return t.persistence.runTransaction("Allocate target","readwrite",r=>{let i;return t.Qr.getTargetData(r,e).next(s=>s?(i=s,O.resolve(i)):t.Qr.allocateTargetId(r).next(o=>(i=new Tr(e,o,"TargetPurposeListen",r.currentSequenceNumber),t.Qr.addTargetData(r,i).next(()=>i))))}).then(r=>{const i=t.ns.get(r.targetId);return(i===null||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(t.ns=t.ns.insert(r.targetId,r),t.rs.set(e,r.targetId)),r})}async function ra(n,e,t){const r=H(n),i=r.ns.get(e),s=t?"readwrite":"readwrite-primary";try{t||await r.persistence.runTransaction("Release target",s,o=>r.persistence.referenceDelegate.removeTarget(o,i))}catch(o){if(!zi(o))throw o;$("LocalStore",`Failed to update sequence numbers for target ${e}: ${o}`)}r.ns=r.ns.remove(e),r.rs.delete(i.target)}function Hd(n,e,t){const r=H(n);let i=te.min(),s=ae();return r.persistence.runTransaction("Execute query","readwrite",o=>function(l,c,d){const h=H(l),p=h.rs.get(d);return p!==void 0?O.resolve(h.ns.get(p)):h.Qr.getTargetData(c,d)}(r,o,Qt(e)).next(a=>{if(a)return i=a.lastLimboFreeSnapshotVersion,r.Qr.getMatchingKeysForTargetId(o,a.targetId).next(l=>{s=l})}).next(()=>r.ts.getDocumentsMatchingQuery(o,e,t?i:te.min(),t?s:ae())).next(a=>(jD(r,Y1(e),a),{documents:a,hs:s})))}function BD(n,e){const t=H(n),r=H(t.Qr),i=t.ns.get(e);return i?Promise.resolve(i.target):t.persistence.runTransaction("Get target data","readonly",s=>r.ot(s,e).next(o=>o?o.target:null))}function UD(n,e){const t=H(n),r=t.ss.get(e)||te.min();return t.persistence.runTransaction("Get new document changes","readonly",i=>t.os.getAllFromCollectionGroup(i,e,T1(r,-1),Number.MAX_SAFE_INTEGER)).then(i=>(jD(t,e,i),i))}function jD(n,e,t){let r=n.ss.get(e)||te.min();t.forEach((i,s)=>{s.readTime.compareTo(r)>0&&(r=s.readTime)}),n.ss.set(e,r)}async function MO(n,e,t,r){const i=H(n);let s=ae(),o=rn();for(const c of t){const d=e.Ps(c.metadata.name);c.document&&(s=s.add(d));const h=e.Is(c);h.setReadTime(e.Ts(c.metadata.readTime)),o=o.insert(d,h)}const a=i.os.newChangeBuffer({trackRemovals:!0}),l=await na(i,function(d){return Qt(Ea(de.fromString(`__bundle__/docs/${d}`)))}(r));return i.persistence.runTransaction("Apply bundle documents","readwrite",c=>FD(c,a,o).next(d=>(a.apply(c),d)).next(d=>i.Qr.removeMatchingKeysForTargetId(c,l.targetId).next(()=>i.Qr.addMatchingKeys(c,s,l.targetId)).next(()=>i.localDocuments.getLocalViewOfDocuments(c,d.cs,d.ls)).next(()=>d.cs)))}async function OO(n,e,t=ae()){const r=await na(n,Qt(Ly(e.bundledQuery))),i=H(n);return i.persistence.runTransaction("Save named query","readwrite",s=>{const o=ot(e.readTime);if(r.snapshotVersion.compareTo(o)>=0)return i.$r.saveNamedQuery(s,e);const a=r.withResumeToken(dt.EMPTY_BYTE_STRING,o);return i.ns=i.ns.insert(a.targetId,a),i.Qr.updateTargetData(s,a).next(()=>i.Qr.removeMatchingKeysForTargetId(s,r.targetId)).next(()=>i.Qr.addMatchingKeys(s,t,r.targetId)).next(()=>i.$r.saveNamedQuery(s,e))})}function sE(n,e){return`firestore_clients_${n}_${e}`}function oE(n,e,t){let r=`firestore_mutations_${n}_${t}`;return e.isAuthenticated()&&(r+=`_${e.uid}`),r}function Ep(n,e){return`firestore_targets_${n}_${e}`}class Qd{constructor(e,t,r,i){this.user=e,this.batchId=t,this.state=r,this.error=i}static Es(e,t,r){const i=JSON.parse(r);let s,o=typeof i=="object"&&["pending","acknowledged","rejected"].indexOf(i.state)!==-1&&(i.error===void 0||typeof i.error=="object");return o&&i.error&&(o=typeof i.error.message=="string"&&typeof i.error.code=="string",o&&(s=new j(i.error.code,i.error.message))),o?new Qd(e,t,i.state,s):(rt("SharedClientState",`Failed to parse mutation state for ID '${t}': ${r}`),null)}ds(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class xl{constructor(e,t,r){this.targetId=e,this.state=t,this.error=r}static Es(e,t){const r=JSON.parse(t);let i,s=typeof r=="object"&&["not-current","current","rejected"].indexOf(r.state)!==-1&&(r.error===void 0||typeof r.error=="object");return s&&r.error&&(s=typeof r.error.message=="string"&&typeof r.error.code=="string",s&&(i=new j(r.error.code,r.error.message))),s?new xl(e,r.state,i):(rt("SharedClientState",`Failed to parse target state for ID '${e}': ${t}`),null)}ds(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class Kd{constructor(e,t){this.clientId=e,this.activeTargetIds=t}static Es(e,t){const r=JSON.parse(t);let i=typeof r=="object"&&r.activeTargetIds instanceof Array,s=Cy();for(let o=0;i&&o<r.activeTargetIds.length;++o)i=P1(r.activeTargetIds[o]),s=s.add(r.activeTargetIds[o]);return i?new Kd(e,s):(rt("SharedClientState",`Failed to parse client data for instance '${e}': ${t}`),null)}}class qy{constructor(e,t){this.clientId=e,this.onlineState=t}static Es(e){const t=JSON.parse(e);return typeof t=="object"&&["Unknown","Online","Offline"].indexOf(t.onlineState)!==-1&&typeof t.clientId=="string"?new qy(t.clientId,t.onlineState):(rt("SharedClientState",`Failed to parse online state: ${e}`),null)}}class Xm{constructor(){this.activeTargetIds=Cy()}As(e){this.activeTargetIds=this.activeTargetIds.add(e)}Rs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}ds(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class Tp{constructor(e,t,r,i,s){this.window=e,this.oi=t,this.persistenceKey=r,this.Vs=i,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.fs=this.gs.bind(this),this.ps=new Re(oe),this.started=!1,this.ys=[];const o=r.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=s,this.ws=sE(this.persistenceKey,this.Vs),this.Ss=function(l){return`firestore_sequence_number_${l}`}(this.persistenceKey),this.ps=this.ps.insert(this.Vs,new Xm),this.bs=new RegExp(`^firestore_clients_${o}_([^_]*)$`),this.Ds=new RegExp(`^firestore_mutations_${o}_(\\d+)(?:_(.*))?$`),this.Cs=new RegExp(`^firestore_targets_${o}_(\\d+)$`),this.vs=function(l){return`firestore_online_state_${l}`}(this.persistenceKey),this.Fs=function(l){return`firestore_bundle_loaded_v2_${l}`}(this.persistenceKey),this.window.addEventListener("storage",this.fs)}static D(e){return!(!e||!e.localStorage)}async start(){const e=await this.syncEngine.Bi();for(const r of e){if(r===this.Vs)continue;const i=this.getItem(sE(this.persistenceKey,r));if(i){const s=Kd.Es(r,i);s&&(this.ps=this.ps.insert(s.clientId,s))}}this.Ms();const t=this.storage.getItem(this.vs);if(t){const r=this.xs(t);r&&this.Os(r)}for(const r of this.ys)this.gs(r);this.ys=[],this.window.addEventListener("pagehide",()=>this.shutdown()),this.started=!0}writeSequenceNumber(e){this.setItem(this.Ss,JSON.stringify(e))}getAllActiveQueryTargets(){return this.Ns(this.ps)}isActiveQueryTarget(e){let t=!1;return this.ps.forEach((r,i)=>{i.activeTargetIds.has(e)&&(t=!0)}),t}addPendingMutation(e){this.Ls(e,"pending")}updateMutationState(e,t,r){this.Ls(e,t,r),this.Bs(e)}addLocalQueryTarget(e){let t="not-current";if(this.isActiveQueryTarget(e)){const r=this.storage.getItem(Ep(this.persistenceKey,e));if(r){const i=xl.Es(e,r);i&&(t=i.state)}}return this.ks.As(e),this.Ms(),t}removeLocalQueryTarget(e){this.ks.Rs(e),this.Ms()}isLocalQueryTarget(e){return this.ks.activeTargetIds.has(e)}clearQueryState(e){this.removeItem(Ep(this.persistenceKey,e))}updateQueryState(e,t,r){this.qs(e,t,r)}handleUserChange(e,t,r){t.forEach(i=>{this.Bs(i)}),this.currentUser=e,r.forEach(i=>{this.addPendingMutation(i)})}setOnlineState(e){this.Qs(e)}notifyBundleLoaded(e){this.Ks(e)}shutdown(){this.started&&(this.window.removeEventListener("storage",this.fs),this.removeItem(this.ws),this.started=!1)}getItem(e){const t=this.storage.getItem(e);return $("SharedClientState","READ",e,t),t}setItem(e,t){$("SharedClientState","SET",e,t),this.storage.setItem(e,t)}removeItem(e){$("SharedClientState","REMOVE",e),this.storage.removeItem(e)}gs(e){const t=e;if(t.storageArea===this.storage){if($("SharedClientState","EVENT",t.key,t.newValue),t.key===this.ws)return void rt("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.oi.enqueueRetryable(async()=>{if(this.started){if(t.key!==null){if(this.bs.test(t.key)){if(t.newValue==null){const r=this.$s(t.key);return this.Us(r,null)}{const r=this.Ws(t.key,t.newValue);if(r)return this.Us(r.clientId,r)}}else if(this.Ds.test(t.key)){if(t.newValue!==null){const r=this.Gs(t.key,t.newValue);if(r)return this.zs(r)}}else if(this.Cs.test(t.key)){if(t.newValue!==null){const r=this.js(t.key,t.newValue);if(r)return this.Hs(r)}}else if(t.key===this.vs){if(t.newValue!==null){const r=this.xs(t.newValue);if(r)return this.Os(r)}}else if(t.key===this.Ss){const r=function(s){let o=tn.oe;if(s!=null)try{const a=JSON.parse(s);ee(typeof a=="number"),o=a}catch(a){rt("SharedClientState","Failed to read sequence number from WebStorage",a)}return o}(t.newValue);r!==tn.oe&&this.sequenceNumberHandler(r)}else if(t.key===this.Fs){const r=this.Js(t.newValue);await Promise.all(r.map(i=>this.syncEngine.Ys(i)))}}}else this.ys.push(t)})}}get ks(){return this.ps.get(this.Vs)}Ms(){this.setItem(this.ws,this.ks.ds())}Ls(e,t,r){const i=new Qd(this.currentUser,e,t,r),s=oE(this.persistenceKey,this.currentUser,e);this.setItem(s,i.ds())}Bs(e){const t=oE(this.persistenceKey,this.currentUser,e);this.removeItem(t)}Qs(e){const t={clientId:this.Vs,onlineState:e};this.storage.setItem(this.vs,JSON.stringify(t))}qs(e,t,r){const i=Ep(this.persistenceKey,e),s=new xl(e,t,r);this.setItem(i,s.ds())}Ks(e){const t=JSON.stringify(Array.from(e));this.setItem(this.Fs,t)}$s(e){const t=this.bs.exec(e);return t?t[1]:null}Ws(e,t){const r=this.$s(e);return Kd.Es(r,t)}Gs(e,t){const r=this.Ds.exec(e),i=Number(r[1]),s=r[2]!==void 0?r[2]:null;return Qd.Es(new pt(s),i,t)}js(e,t){const r=this.Cs.exec(e),i=Number(r[1]);return xl.Es(i,t)}xs(e){return qy.Es(e)}Js(e){return JSON.parse(e)}async zs(e){if(e.user.uid===this.currentUser.uid)return this.syncEngine.Zs(e.batchId,e.state,e.error);$("SharedClientState",`Ignoring mutation for non-active user ${e.user.uid}`)}Hs(e){return this.syncEngine.Xs(e.targetId,e.state,e.error)}Us(e,t){const r=t?this.ps.insert(e,t):this.ps.remove(e),i=this.Ns(this.ps),s=this.Ns(r),o=[],a=[];return s.forEach(l=>{i.has(l)||o.push(l)}),i.forEach(l=>{s.has(l)||a.push(l)}),this.syncEngine.eo(o,a).then(()=>{this.ps=r})}Os(e){this.ps.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}Ns(e){let t=Cy();return e.forEach((r,i)=>{t=t.unionWith(i.activeTargetIds)}),t}}class $D{constructor(){this.no=new Xm,this.ro={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,r){}addLocalQueryTarget(e){return this.no.As(e),this.ro[e]||"not-current"}updateQueryState(e,t,r){this.ro[e]=t}removeLocalQueryTarget(e){this.no.Rs(e)}isLocalQueryTarget(e){return this.no.activeTargetIds.has(e)}clearQueryState(e){delete this.ro[e]}getAllActiveQueryTargets(){return this.no.activeTargetIds}isActiveQueryTarget(e){return this.no.activeTargetIds.has(e)}start(){return this.no=new Xm,Promise.resolve()}handleUserChange(e,t,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VO{io(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aE{constructor(){this.so=()=>this.oo(),this._o=()=>this.ao(),this.uo=[],this.co()}io(e){this.uo.push(e)}shutdown(){window.removeEventListener("online",this.so),window.removeEventListener("offline",this._o)}co(){window.addEventListener("online",this.so),window.addEventListener("offline",this._o)}oo(){$("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.uo)e(0)}ao(){$("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.uo)e(1)}static D(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Dc=null;function Ip(){return Dc===null?Dc=function(){return 268435456+Math.round(2147483648*Math.random())}():Dc++,"0x"+Dc.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const LO={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FO{constructor(e){this.lo=e.lo,this.ho=e.ho}Po(e){this.Io=e}To(e){this.Eo=e}Ao(e){this.Ro=e}onMessage(e){this.Vo=e}close(){this.ho()}send(e){this.lo(e)}mo(){this.Io()}fo(){this.Eo()}po(e){this.Ro(e)}yo(e){this.Vo(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const At="WebChannelConnection";class BO extends class{constructor(t){this.databaseInfo=t,this.databaseId=t.databaseId;const r=t.ssl?"https":"http",i=encodeURIComponent(this.databaseId.projectId),s=encodeURIComponent(this.databaseId.database);this.wo=r+"://"+t.host,this.So=`projects/${i}/databases/${s}`,this.bo=this.databaseId.database==="(default)"?`project_id=${i}`:`project_id=${i}&database_id=${s}`}get Do(){return!1}Co(t,r,i,s,o){const a=Ip(),l=this.vo(t,r.toUriEncodedString());$("RestConnection",`Sending RPC '${t}' ${a}:`,l,i);const c={"google-cloud-resource-prefix":this.So,"x-goog-request-params":this.bo};return this.Fo(c,s,o),this.Mo(t,l,c,i).then(d=>($("RestConnection",`Received RPC '${t}' ${a}: `,d),d),d=>{throw Bn("RestConnection",`RPC '${t}' ${a} failed with error: `,d,"url: ",l,"request:",i),d})}xo(t,r,i,s,o,a){return this.Co(t,r,i,s,o)}Fo(t,r,i){t["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+wa}(),t["Content-Type"]="text/plain",this.databaseInfo.appId&&(t["X-Firebase-GMPID"]=this.databaseInfo.appId),r&&r.headers.forEach((s,o)=>t[o]=s),i&&i.headers.forEach((s,o)=>t[o]=s)}vo(t,r){const i=LO[t];return`${this.wo}/v1/${r}:${i}`}terminate(){}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Mo(e,t,r,i){const s=Ip();return new Promise((o,a)=>{const l=new f1;l.setWithCredentials(!0),l.listenOnce(m1.COMPLETE,()=>{try{switch(l.getLastErrorCode()){case Qc.NO_ERROR:const d=l.getResponseJson();$(At,`XHR for RPC '${e}' ${s} received:`,JSON.stringify(d)),o(d);break;case Qc.TIMEOUT:$(At,`RPC '${e}' ${s} timed out`),a(new j(F.DEADLINE_EXCEEDED,"Request time out"));break;case Qc.HTTP_ERROR:const h=l.getStatus();if($(At,`RPC '${e}' ${s} failed with status:`,h,"response text:",l.getResponseText()),h>0){let p=l.getResponseJson();Array.isArray(p)&&(p=p[0]);const g=p==null?void 0:p.error;if(g&&g.status&&g.message){const v=function(D){const w=D.toLowerCase().replace(/_/g,"-");return Object.values(F).indexOf(w)>=0?w:F.UNKNOWN}(g.status);a(new j(v,g.message))}else a(new j(F.UNKNOWN,"Server responded with status "+l.getStatus()))}else a(new j(F.UNAVAILABLE,"Connection failed."));break;default:X()}}finally{$(At,`RPC '${e}' ${s} completed.`)}});const c=JSON.stringify(i);$(At,`RPC '${e}' ${s} sending request:`,i),l.send(t,"POST",c,r,15)})}Oo(e,t,r){const i=Ip(),s=[this.wo,"/","google.firestore.v1.Firestore","/",e,"/channel"],o=_1(),a=y1(),l={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},c=this.longPollingOptions.timeoutSeconds;c!==void 0&&(l.longPollingTimeout=Math.round(1e3*c)),this.useFetchStreams&&(l.xmlHttpFactory=new p1({})),this.Fo(l.initMessageHeaders,t,r),l.encodeInitMessageHeaders=!0;const d=s.join("");$(At,`Creating RPC '${e}' stream ${i}: ${d}`,l);const h=o.createWebChannel(d,l);let p=!1,g=!1;const v=new FO({lo:D=>{g?$(At,`Not sending because RPC '${e}' stream ${i} is closed:`,D):(p||($(At,`Opening RPC '${e}' stream ${i} transport.`),h.open(),p=!0),$(At,`RPC '${e}' stream ${i} sending:`,D),h.send(D))},ho:()=>h.close()}),S=(D,w,_)=>{D.listen(w,E=>{try{_(E)}catch(x){setTimeout(()=>{throw x},0)}})};return S(h,cl.EventType.OPEN,()=>{g||($(At,`RPC '${e}' stream ${i} transport opened.`),v.mo())}),S(h,cl.EventType.CLOSE,()=>{g||(g=!0,$(At,`RPC '${e}' stream ${i} transport closed`),v.po())}),S(h,cl.EventType.ERROR,D=>{g||(g=!0,Bn(At,`RPC '${e}' stream ${i} transport errored:`,D),v.po(new j(F.UNAVAILABLE,"The operation could not be completed")))}),S(h,cl.EventType.MESSAGE,D=>{var w;if(!g){const _=D.data[0];ee(!!_);const E=_,x=E.error||((w=E[0])===null||w===void 0?void 0:w.error);if(x){$(At,`RPC '${e}' stream ${i} received error:`,x);const A=x.status;let L=function(b){const k=at[b];if(k!==void 0)return aD(k)}(A),I=x.message;L===void 0&&(L=F.INTERNAL,I="Unknown error status: "+A+" with message "+x.message),g=!0,v.po(new j(L,I)),h.close()}else $(At,`RPC '${e}' stream ${i} received:`,_),v.yo(_)}}),S(a,g1.STAT_EVENT,D=>{D.stat===Om.PROXY?$(At,`RPC '${e}' stream ${i} detected buffering proxy`):D.stat===Om.NOPROXY&&$(At,`RPC '${e}' stream ${i} detected no buffering proxy`)}),setTimeout(()=>{v.fo()},0),v}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zD(){return typeof window<"u"?window:null}function td(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xu(n){return new HM(n,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wy{constructor(e,t,r=1e3,i=1.5,s=6e4){this.oi=e,this.timerId=t,this.No=r,this.Lo=i,this.Bo=s,this.ko=0,this.qo=null,this.Qo=Date.now(),this.reset()}reset(){this.ko=0}Ko(){this.ko=this.Bo}$o(e){this.cancel();const t=Math.floor(this.ko+this.Uo()),r=Math.max(0,Date.now()-this.Qo),i=Math.max(0,t-r);i>0&&$("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.ko} ms, delay with jitter: ${t} ms, last attempt: ${r} ms ago)`),this.qo=this.oi.enqueueAfterDelay(this.timerId,i,()=>(this.Qo=Date.now(),e())),this.ko*=this.Lo,this.ko<this.No&&(this.ko=this.No),this.ko>this.Bo&&(this.ko=this.Bo)}Wo(){this.qo!==null&&(this.qo.skipDelay(),this.qo=null)}cancel(){this.qo!==null&&(this.qo.cancel(),this.qo=null)}Uo(){return(Math.random()-.5)*this.ko}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qD{constructor(e,t,r,i,s,o,a,l){this.oi=e,this.Go=r,this.zo=i,this.connection=s,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=a,this.listener=l,this.state=0,this.jo=0,this.Ho=null,this.Jo=null,this.stream=null,this.Yo=new Wy(e,t)}Zo(){return this.state===1||this.state===5||this.Xo()}Xo(){return this.state===2||this.state===3}start(){this.state!==4?this.auth():this.e_()}async stop(){this.Zo()&&await this.close(0)}t_(){this.state=0,this.Yo.reset()}n_(){this.Xo()&&this.Ho===null&&(this.Ho=this.oi.enqueueAfterDelay(this.Go,6e4,()=>this.r_()))}i_(e){this.s_(),this.stream.send(e)}async r_(){if(this.Xo())return this.close(0)}s_(){this.Ho&&(this.Ho.cancel(),this.Ho=null)}o_(){this.Jo&&(this.Jo.cancel(),this.Jo=null)}async close(e,t){this.s_(),this.o_(),this.Yo.cancel(),this.jo++,e!==4?this.Yo.reset():t&&t.code===F.RESOURCE_EXHAUSTED?(rt(t.toString()),rt("Using maximum backoff delay to prevent overloading the backend."),this.Yo.Ko()):t&&t.code===F.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.__(),this.stream.close(),this.stream=null),this.state=e,await this.listener.Ao(t)}__(){}auth(){this.state=1;const e=this.a_(this.jo),t=this.jo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,i])=>{this.jo===t&&this.u_(r,i)},r=>{e(()=>{const i=new j(F.UNKNOWN,"Fetching auth token failed: "+r.message);return this.c_(i)})})}u_(e,t){const r=this.a_(this.jo);this.stream=this.l_(e,t),this.stream.Po(()=>{r(()=>this.listener.Po())}),this.stream.To(()=>{r(()=>(this.state=2,this.Jo=this.oi.enqueueAfterDelay(this.zo,1e4,()=>(this.Xo()&&(this.state=3),Promise.resolve())),this.listener.To()))}),this.stream.Ao(i=>{r(()=>this.c_(i))}),this.stream.onMessage(i=>{r(()=>this.onMessage(i))})}e_(){this.state=5,this.Yo.$o(async()=>{this.state=0,this.start()})}c_(e){return $("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}a_(e){return t=>{this.oi.enqueueAndForget(()=>this.jo===e?t():($("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class UO extends qD{constructor(e,t,r,i,s,o){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,r,i,o),this.serializer=s}l_(e,t){return this.connection.Oo("Listen",e,t)}onMessage(e){this.Yo.reset();const t=GM(this.serializer,e),r=function(s){if(!("targetChange"in s))return te.min();const o=s.targetChange;return o.targetIds&&o.targetIds.length?te.min():o.readTime?ot(o.readTime):te.min()}(e);return this.listener.h_(t,r)}P_(e){const t={};t.database=Ym(this.serializer),t.addTarget=function(s,o){let a;const l=o.target;if(a=jd(l)?{documents:yD(s,l)}:{query:_D(s,l)._t},a.targetId=o.targetId,o.resumeToken.approximateByteSize()>0){a.resumeToken=dD(s,o.resumeToken);const c=qm(s,o.expectedCount);c!==null&&(a.expectedCount=c)}else if(o.snapshotVersion.compareTo(te.min())>0){a.readTime=ta(s,o.snapshotVersion.toTimestamp());const c=qm(s,o.expectedCount);c!==null&&(a.expectedCount=c)}return a}(this.serializer,e);const r=JM(this.serializer,e);r&&(t.labels=r),this.i_(t)}I_(e){const t={};t.database=Ym(this.serializer),t.removeTarget=e,this.i_(t)}}class jO extends qD{constructor(e,t,r,i,s,o){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,r,i,o),this.serializer=s,this.T_=!1}get E_(){return this.T_}start(){this.T_=!1,this.lastStreamToken=void 0,super.start()}__(){this.T_&&this.d_([])}l_(e,t){return this.connection.Oo("Write",e,t)}onMessage(e){if(ee(!!e.streamToken),this.lastStreamToken=e.streamToken,this.T_){this.Yo.reset();const t=XM(e.writeResults,e.commitTime),r=ot(e.commitTime);return this.listener.A_(r,t)}return ee(!e.writeResults||e.writeResults.length===0),this.T_=!0,this.listener.R_()}V_(){const e={};e.database=Ym(this.serializer),this.i_(e)}d_(e){const t={streamToken:this.lastStreamToken,writes:e.map(r=>uu(this.serializer,r))};this.i_(t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $O extends class{}{constructor(e,t,r,i){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=r,this.serializer=i,this.m_=!1}f_(){if(this.m_)throw new j(F.FAILED_PRECONDITION,"The client has already been terminated.")}Co(e,t,r,i){return this.f_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,o])=>this.connection.Co(e,Wm(t,r),i,s,o)).catch(s=>{throw s.name==="FirebaseError"?(s.code===F.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new j(F.UNKNOWN,s.toString())})}xo(e,t,r,i,s){return this.f_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,a])=>this.connection.xo(e,Wm(t,r),i,o,a,s)).catch(o=>{throw o.name==="FirebaseError"?(o.code===F.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new j(F.UNKNOWN,o.toString())})}terminate(){this.m_=!0,this.connection.terminate()}}class zO{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.g_=0,this.p_=null,this.y_=!0}w_(){this.g_===0&&(this.S_("Unknown"),this.p_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.p_=null,this.b_("Backend didn't respond within 10 seconds."),this.S_("Offline"),Promise.resolve())))}D_(e){this.state==="Online"?this.S_("Unknown"):(this.g_++,this.g_>=1&&(this.C_(),this.b_(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.S_("Offline")))}set(e){this.C_(),this.g_=0,e==="Online"&&(this.y_=!1),this.S_(e)}S_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}b_(e){const t=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.y_?(rt(t),this.y_=!1):$("OnlineStateTracker",t)}C_(){this.p_!==null&&(this.p_.cancel(),this.p_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qO{constructor(e,t,r,i,s){this.localStore=e,this.datastore=t,this.asyncQueue=r,this.remoteSyncer={},this.v_=[],this.F_=new Map,this.M_=new Set,this.x_=[],this.O_=s,this.O_.io(o=>{r.enqueueAndForget(async()=>{Wi(this)&&($("RemoteStore","Restarting streams for network reachability change."),await async function(l){const c=H(l);c.M_.add(4),await Sa(c),c.N_.set("Unknown"),c.M_.delete(4),await Cu(c)}(this))})}),this.N_=new zO(r,i)}}async function Cu(n){if(Wi(n))for(const e of n.x_)await e(!0)}async function Sa(n){for(const e of n.x_)await e(!1)}function Wh(n,e){const t=H(n);t.F_.has(e.targetId)||(t.F_.set(e.targetId,e),Qy(t)?Hy(t):ba(t).Xo()&&Yy(t,e))}function ia(n,e){const t=H(n),r=ba(t);t.F_.delete(e),r.Xo()&&WD(t,e),t.F_.size===0&&(r.Xo()?r.n_():Wi(t)&&t.N_.set("Unknown"))}function Yy(n,e){if(n.L_.xe(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(te.min())>0){const t=n.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(t)}ba(n).P_(e)}function WD(n,e){n.L_.xe(e),ba(n).I_(e)}function Hy(n){n.L_=new zM({getRemoteKeysForTarget:e=>n.remoteSyncer.getRemoteKeysForTarget(e),ot:e=>n.F_.get(e)||null,tt:()=>n.datastore.serializer.databaseId}),ba(n).start(),n.N_.w_()}function Qy(n){return Wi(n)&&!ba(n).Zo()&&n.F_.size>0}function Wi(n){return H(n).M_.size===0}function YD(n){n.L_=void 0}async function WO(n){n.N_.set("Online")}async function YO(n){n.F_.forEach((e,t)=>{Yy(n,e)})}async function HO(n,e){YD(n),Qy(n)?(n.N_.D_(e),Hy(n)):n.N_.set("Unknown")}async function QO(n,e,t){if(n.N_.set("Online"),e instanceof cD&&e.state===2&&e.cause)try{await async function(i,s){const o=s.cause;for(const a of s.targetIds)i.F_.has(a)&&(await i.remoteSyncer.rejectListen(a,o),i.F_.delete(a),i.L_.removeTarget(a))}(n,e)}catch(r){$("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),await Gd(n,r)}else if(e instanceof ed?n.L_.Ke(e):e instanceof uD?n.L_.He(e):n.L_.We(e),!t.isEqual(te.min()))try{const r=await LD(n.localStore);t.compareTo(r)>=0&&await function(s,o){const a=s.L_.rt(o);return a.targetChanges.forEach((l,c)=>{if(l.resumeToken.approximateByteSize()>0){const d=s.F_.get(c);d&&s.F_.set(c,d.withResumeToken(l.resumeToken,o))}}),a.targetMismatches.forEach((l,c)=>{const d=s.F_.get(l);if(!d)return;s.F_.set(l,d.withResumeToken(dt.EMPTY_BYTE_STRING,d.snapshotVersion)),WD(s,l);const h=new Tr(d.target,l,c,d.sequenceNumber);Yy(s,h)}),s.remoteSyncer.applyRemoteEvent(a)}(n,t)}catch(r){$("RemoteStore","Failed to raise snapshot:",r),await Gd(n,r)}}async function Gd(n,e,t){if(!zi(e))throw e;n.M_.add(1),await Sa(n),n.N_.set("Offline"),t||(t=()=>LD(n.localStore)),n.asyncQueue.enqueueRetryable(async()=>{$("RemoteStore","Retrying IndexedDB access"),await t(),n.M_.delete(1),await Cu(n)})}function HD(n,e){return e().catch(t=>Gd(n,t,e))}async function Da(n){const e=H(n),t=Ri(e);let r=e.v_.length>0?e.v_[e.v_.length-1].batchId:-1;for(;KO(e);)try{const i=await NO(e.localStore,r);if(i===null){e.v_.length===0&&t.n_();break}r=i.batchId,GO(e,i)}catch(i){await Gd(e,i)}QD(e)&&KD(e)}function KO(n){return Wi(n)&&n.v_.length<10}function GO(n,e){n.v_.push(e);const t=Ri(n);t.Xo()&&t.E_&&t.d_(e.mutations)}function QD(n){return Wi(n)&&!Ri(n).Zo()&&n.v_.length>0}function KD(n){Ri(n).start()}async function XO(n){Ri(n).V_()}async function JO(n){const e=Ri(n);for(const t of n.v_)e.d_(t.mutations)}async function ZO(n,e,t){const r=n.v_.shift(),i=Ny.from(r,e,t);await HD(n,()=>n.remoteSyncer.applySuccessfulWrite(i)),await Da(n)}async function eV(n,e){e&&Ri(n).E_&&await async function(r,i){if(function(o){return oD(o)&&o!==F.ABORTED}(i.code)){const s=r.v_.shift();Ri(r).t_(),await HD(r,()=>r.remoteSyncer.rejectFailedWrite(s.batchId,i)),await Da(r)}}(n,e),QD(n)&&KD(n)}async function lE(n,e){const t=H(n);t.asyncQueue.verifyOperationInProgress(),$("RemoteStore","RemoteStore received new credentials");const r=Wi(t);t.M_.add(3),await Sa(t),r&&t.N_.set("Unknown"),await t.remoteSyncer.handleCredentialChange(e),t.M_.delete(3),await Cu(t)}async function Jm(n,e){const t=H(n);e?(t.M_.delete(2),await Cu(t)):e||(t.M_.add(2),await Sa(t),t.N_.set("Unknown"))}function ba(n){return n.B_||(n.B_=function(t,r,i){const s=H(t);return s.f_(),new UO(r,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,i)}(n.datastore,n.asyncQueue,{Po:WO.bind(null,n),To:YO.bind(null,n),Ao:HO.bind(null,n),h_:QO.bind(null,n)}),n.x_.push(async e=>{e?(n.B_.t_(),Qy(n)?Hy(n):n.N_.set("Unknown")):(await n.B_.stop(),YD(n))})),n.B_}function Ri(n){return n.k_||(n.k_=function(t,r,i){const s=H(t);return s.f_(),new jO(r,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,i)}(n.datastore,n.asyncQueue,{Po:()=>Promise.resolve(),To:XO.bind(null,n),Ao:eV.bind(null,n),R_:JO.bind(null,n),A_:ZO.bind(null,n)}),n.x_.push(async e=>{e?(n.k_.t_(),await Da(n)):(await n.k_.stop(),n.v_.length>0&&($("RemoteStore",`Stopping write stream with ${n.v_.length} pending writes`),n.v_=[]))})),n.k_}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ky{constructor(e,t,r,i,s){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=r,this.op=i,this.removalCallback=s,this.deferred=new yt,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(o=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,t,r,i,s){const o=Date.now()+r,a=new Ky(e,t,o,i,s);return a.start(r),a}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new j(F.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Pa(n,e){if(rt("AsyncQueue",`${e}: ${n}`),zi(n))return new j(F.UNAVAILABLE,`${e}: ${n}`);throw n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Oo{constructor(e){this.comparator=e?(t,r)=>e(t,r)||Y.comparator(t.key,r.key):(t,r)=>Y.comparator(t.key,r.key),this.keyedMap=dl(),this.sortedSet=new Re(this.comparator)}static emptySet(e){return new Oo(e.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,r)=>(e(t),!1))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof Oo)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;t.hasNext();){const i=t.getNext().key,s=r.getNext().key;if(!i.isEqual(s))return!1}return!0}toString(){const e=[];return this.forEach(t=>{e.push(t.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,t){const r=new Oo;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=t,r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uE{constructor(){this.q_=new Re(Y.comparator)}track(e){const t=e.doc.key,r=this.q_.get(t);r?e.type!==0&&r.type===3?this.q_=this.q_.insert(t,e):e.type===3&&r.type!==1?this.q_=this.q_.insert(t,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.q_=this.q_.insert(t,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.q_=this.q_.insert(t,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.q_=this.q_.remove(t):e.type===1&&r.type===2?this.q_=this.q_.insert(t,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.q_=this.q_.insert(t,{type:2,doc:e.doc}):X():this.q_=this.q_.insert(t,e)}Q_(){const e=[];return this.q_.inorderTraversal((t,r)=>{e.push(r)}),e}}class sa{constructor(e,t,r,i,s,o,a,l,c){this.query=e,this.docs=t,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=s,this.fromCache=o,this.syncStateChanged=a,this.excludesMetadataChanges=l,this.hasCachedResults=c}static fromInitialDocuments(e,t,r,i,s){const o=[];return t.forEach(a=>{o.push({type:0,doc:a})}),new sa(e,t,Oo.emptySet(t),o,r,i,!0,!1,s)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Su(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,r=e.docChanges;if(t.length!==r.length)return!1;for(let i=0;i<t.length;i++)if(t[i].type!==r[i].type||!t[i].doc.isEqual(r[i].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tV{constructor(){this.K_=void 0,this.U_=[]}W_(){return this.U_.some(e=>e.G_())}}class nV{constructor(){this.queries=new qi(e=>W1(e),Su),this.onlineState="Unknown",this.z_=new Set}}async function Gy(n,e){const t=H(n);let r=3;const i=e.query;let s=t.queries.get(i);s?!s.W_()&&e.G_()&&(r=2):(s=new tV,r=e.G_()?0:1);try{switch(r){case 0:s.K_=await t.onListen(i,!0);break;case 1:s.K_=await t.onListen(i,!1);break;case 2:await t.onFirstRemoteStoreListen(i)}}catch(o){const a=Pa(o,`Initialization of query '${co(e.query)}' failed`);return void e.onError(a)}t.queries.set(i,s),s.U_.push(e),e.j_(t.onlineState),s.K_&&e.H_(s.K_)&&Jy(t)}async function Xy(n,e){const t=H(n),r=e.query;let i=3;const s=t.queries.get(r);if(s){const o=s.U_.indexOf(e);o>=0&&(s.U_.splice(o,1),s.U_.length===0?i=e.G_()?0:1:!s.W_()&&e.G_()&&(i=2))}switch(i){case 0:return t.queries.delete(r),t.onUnlisten(r,!0);case 1:return t.queries.delete(r),t.onUnlisten(r,!1);case 2:return t.onLastRemoteStoreUnlisten(r);default:return}}function rV(n,e){const t=H(n);let r=!1;for(const i of e){const s=i.query,o=t.queries.get(s);if(o){for(const a of o.U_)a.H_(i)&&(r=!0);o.K_=i}}r&&Jy(t)}function iV(n,e,t){const r=H(n),i=r.queries.get(e);if(i)for(const s of i.U_)s.onError(t);r.queries.delete(e)}function Jy(n){n.z_.forEach(e=>{e.next()})}var Zm,cE;(cE=Zm||(Zm={})).J_="default",cE.Cache="cache";class Zy{constructor(e,t,r){this.query=e,this.Y_=t,this.Z_=!1,this.X_=null,this.onlineState="Unknown",this.options=r||{}}H_(e){if(!this.options.includeMetadataChanges){const r=[];for(const i of e.docChanges)i.type!==3&&r.push(i);e=new sa(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.Z_?this.ea(e)&&(this.Y_.next(e),t=!0):this.ta(e,this.onlineState)&&(this.na(e),t=!0),this.X_=e,t}onError(e){this.Y_.error(e)}j_(e){this.onlineState=e;let t=!1;return this.X_&&!this.Z_&&this.ta(this.X_,e)&&(this.na(this.X_),t=!0),t}ta(e,t){if(!e.fromCache||!this.G_())return!0;const r=t!=="Offline";return(!this.options.ra||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||t==="Offline")}ea(e){if(e.docChanges.length>0)return!0;const t=this.X_&&this.X_.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&this.options.includeMetadataChanges===!0}na(e){e=sa.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Z_=!0,this.Y_.next(e)}G_(){return this.options.source!==Zm.Cache}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sV{constructor(e,t){this.ia=e,this.byteLength=t}sa(){return"metadata"in this.ia}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dE{constructor(e){this.serializer=e}Ps(e){return rr(this.serializer,e)}Is(e){return e.metadata.exists?gD(this.serializer,e.document,!1):Me.newNoDocument(this.Ps(e.metadata.name),this.Ts(e.metadata.readTime))}Ts(e){return ot(e)}}class oV{constructor(e,t,r){this.oa=e,this.localStore=t,this.serializer=r,this.queries=[],this.documents=[],this.collectionGroups=new Set,this.progress=GD(e)}_a(e){this.progress.bytesLoaded+=e.byteLength;let t=this.progress.documentsLoaded;if(e.ia.namedQuery)this.queries.push(e.ia.namedQuery);else if(e.ia.documentMetadata){this.documents.push({metadata:e.ia.documentMetadata}),e.ia.documentMetadata.exists||++t;const r=de.fromString(e.ia.documentMetadata.name);this.collectionGroups.add(r.get(r.length-2))}else e.ia.document&&(this.documents[this.documents.length-1].document=e.ia.document,++t);return t!==this.progress.documentsLoaded?(this.progress.documentsLoaded=t,Object.assign({},this.progress)):null}aa(e){const t=new Map,r=new dE(this.serializer);for(const i of e)if(i.metadata.queries){const s=r.Ps(i.metadata.name);for(const o of i.metadata.queries){const a=(t.get(o)||ae()).add(s);t.set(o,a)}}return t}async complete(){const e=await MO(this.localStore,new dE(this.serializer),this.documents,this.oa.id),t=this.aa(this.documents);for(const r of this.queries)await OO(this.localStore,r,t.get(r.name));return this.progress.taskState="Success",{progress:this.progress,ua:this.collectionGroups,ca:e}}}function GD(n){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:n.totalDocuments,totalBytes:n.totalBytes}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XD{constructor(e){this.key=e}}class JD{constructor(e){this.key=e}}class ZD{constructor(e,t){this.query=e,this.la=t,this.ha=null,this.hasCachedResults=!1,this.current=!1,this.Pa=ae(),this.mutatedKeys=ae(),this.Ia=H1(e),this.Ta=new Oo(this.Ia)}get Ea(){return this.la}da(e,t){const r=t?t.Aa:new uE,i=t?t.Ta:this.Ta;let s=t?t.mutatedKeys:this.mutatedKeys,o=i,a=!1;const l=this.query.limitType==="F"&&i.size===this.query.limit?i.last():null,c=this.query.limitType==="L"&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((d,h)=>{const p=i.get(d),g=Du(this.query,h)?h:null,v=!!p&&this.mutatedKeys.has(p.key),S=!!g&&(g.hasLocalMutations||this.mutatedKeys.has(g.key)&&g.hasCommittedMutations);let D=!1;p&&g?p.data.isEqual(g.data)?v!==S&&(r.track({type:3,doc:g}),D=!0):this.Ra(p,g)||(r.track({type:2,doc:g}),D=!0,(l&&this.Ia(g,l)>0||c&&this.Ia(g,c)<0)&&(a=!0)):!p&&g?(r.track({type:0,doc:g}),D=!0):p&&!g&&(r.track({type:1,doc:p}),D=!0,(l||c)&&(a=!0)),D&&(g?(o=o.add(g),s=S?s.add(d):s.delete(d)):(o=o.delete(d),s=s.delete(d)))}),this.query.limit!==null)for(;o.size>this.query.limit;){const d=this.query.limitType==="F"?o.last():o.first();o=o.delete(d.key),s=s.delete(d.key),r.track({type:1,doc:d})}return{Ta:o,Aa:r,Xi:a,mutatedKeys:s}}Ra(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,r,i){const s=this.Ta;this.Ta=e.Ta,this.mutatedKeys=e.mutatedKeys;const o=e.Aa.Q_();o.sort((d,h)=>function(g,v){const S=D=>{switch(D){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return X()}};return S(g)-S(v)}(d.type,h.type)||this.Ia(d.doc,h.doc)),this.Va(r),i=i!=null&&i;const a=t&&!i?this.ma():[],l=this.Pa.size===0&&this.current&&!i?1:0,c=l!==this.ha;return this.ha=l,o.length!==0||c?{snapshot:new sa(this.query,e.Ta,s,o,e.mutatedKeys,l===0,c,!1,!!r&&r.resumeToken.approximateByteSize()>0),fa:a}:{fa:a}}j_(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({Ta:this.Ta,Aa:new uE,mutatedKeys:this.mutatedKeys,Xi:!1},!1)):{fa:[]}}ga(e){return!this.la.has(e)&&!!this.Ta.has(e)&&!this.Ta.get(e).hasLocalMutations}Va(e){e&&(e.addedDocuments.forEach(t=>this.la=this.la.add(t)),e.modifiedDocuments.forEach(t=>{}),e.removedDocuments.forEach(t=>this.la=this.la.delete(t)),this.current=e.current)}ma(){if(!this.current)return[];const e=this.Pa;this.Pa=ae(),this.Ta.forEach(r=>{this.ga(r.key)&&(this.Pa=this.Pa.add(r.key))});const t=[];return e.forEach(r=>{this.Pa.has(r)||t.push(new JD(r))}),this.Pa.forEach(r=>{e.has(r)||t.push(new XD(r))}),t}pa(e){this.la=e.hs,this.Pa=ae();const t=this.da(e.documents);return this.applyChanges(t,!0)}ya(){return sa.fromInitialDocuments(this.query,this.Ta,this.mutatedKeys,this.ha===0,this.hasCachedResults)}}class aV{constructor(e,t,r){this.query=e,this.targetId=t,this.view=r}}class lV{constructor(e){this.key=e,this.wa=!1}}class uV{constructor(e,t,r,i,s,o){this.localStore=e,this.remoteStore=t,this.eventManager=r,this.sharedClientState=i,this.currentUser=s,this.maxConcurrentLimboResolutions=o,this.Sa={},this.ba=new qi(a=>W1(a),Su),this.Da=new Map,this.Ca=new Set,this.va=new Re(Y.comparator),this.Fa=new Map,this.Ma=new Uy,this.xa={},this.Oa=new Map,this.Na=Ls.Ln(),this.onlineState="Unknown",this.La=void 0}get isPrimaryClient(){return this.La===!0}}async function cV(n,e,t=!0){const r=Yh(n);let i;const s=r.ba.get(e);return s?(r.sharedClientState.addLocalQueryTarget(s.targetId),i=s.view.ya()):i=await eb(r,e,t,!0),i}async function dV(n,e){const t=Yh(n);await eb(t,e,!0,!1)}async function eb(n,e,t,r){const i=await na(n.localStore,Qt(e)),s=i.targetId,o=t?n.sharedClientState.addLocalQueryTarget(s):"not-current";let a;return r&&(a=await e_(n,e,s,o==="current",i.resumeToken)),n.isPrimaryClient&&t&&Wh(n.remoteStore,i),a}async function e_(n,e,t,r,i){n.Ba=(h,p,g)=>async function(S,D,w,_){let E=D.view.da(w);E.Xi&&(E=await Hd(S.localStore,D.query,!1).then(({documents:I})=>D.view.da(I,E)));const x=_&&_.targetChanges.get(D.targetId),A=_&&_.targetMismatches.get(D.targetId)!=null,L=D.view.applyChanges(E,S.isPrimaryClient,x,A);return eg(S,D.targetId,L.fa),L.snapshot}(n,h,p,g);const s=await Hd(n.localStore,e,!0),o=new ZD(e,s.hs),a=o.da(s.documents),l=ku.createSynthesizedTargetChangeForCurrentChange(t,r&&n.onlineState!=="Offline",i),c=o.applyChanges(a,n.isPrimaryClient,l);eg(n,t,c.fa);const d=new aV(e,t,o);return n.ba.set(e,d),n.Da.has(t)?n.Da.get(t).push(e):n.Da.set(t,[e]),c.snapshot}async function hV(n,e,t){const r=H(n),i=r.ba.get(e),s=r.Da.get(i.targetId);if(s.length>1)return r.Da.set(i.targetId,s.filter(o=>!Su(o,e))),void r.ba.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(i.targetId),r.sharedClientState.isActiveQueryTarget(i.targetId)||await ra(r.localStore,i.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(i.targetId),t&&ia(r.remoteStore,i.targetId),oa(r,i.targetId)}).catch($i)):(oa(r,i.targetId),await ra(r.localStore,i.targetId,!0))}async function fV(n,e){const t=H(n),r=t.ba.get(e),i=t.Da.get(r.targetId);t.isPrimaryClient&&i.length===1&&(t.sharedClientState.removeLocalQueryTarget(r.targetId),ia(t.remoteStore,r.targetId))}async function pV(n,e,t){const r=i_(n);try{const i=await function(o,a){const l=H(o),c=je.now(),d=a.reduce((g,v)=>g.add(v.key),ae());let h,p;return l.persistence.runTransaction("Locally write mutations","readwrite",g=>{let v=rn(),S=ae();return l.os.getEntries(g,d).next(D=>{v=D,v.forEach((w,_)=>{_.isValidDocument()||(S=S.add(w))})}).next(()=>l.localDocuments.getOverlayedDocuments(g,v)).next(D=>{h=D;const w=[];for(const _ of a){const E=UM(_,h.get(_.key).overlayedDocument);E!=null&&w.push(new Br(_.key,E,V1(E.value.mapValue),Ue.exists(!0)))}return l.mutationQueue.addMutationBatch(g,c,w,a)}).next(D=>{p=D;const w=D.applyToLocalDocumentSet(h,S);return l.documentOverlayCache.saveOverlays(g,D.batchId,w)})}).then(()=>({batchId:p.batchId,changes:K1(h)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(i.batchId),function(o,a,l){let c=o.xa[o.currentUser.toKey()];c||(c=new Re(oe)),c=c.insert(a,l),o.xa[o.currentUser.toKey()]=c}(r,i.batchId,t),await Ur(r,i.changes),await Da(r.remoteStore)}catch(i){const s=Pa(i,"Failed to persist write");t.reject(s)}}async function tb(n,e){const t=H(n);try{const r=await AO(t.localStore,e);e.targetChanges.forEach((i,s)=>{const o=t.Fa.get(s);o&&(ee(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1),i.addedDocuments.size>0?o.wa=!0:i.modifiedDocuments.size>0?ee(o.wa):i.removedDocuments.size>0&&(ee(o.wa),o.wa=!1))}),await Ur(t,r,e)}catch(r){await $i(r)}}function hE(n,e,t){const r=H(n);if(r.isPrimaryClient&&t===0||!r.isPrimaryClient&&t===1){const i=[];r.ba.forEach((s,o)=>{const a=o.view.j_(e);a.snapshot&&i.push(a.snapshot)}),function(o,a){const l=H(o);l.onlineState=a;let c=!1;l.queries.forEach((d,h)=>{for(const p of h.U_)p.j_(a)&&(c=!0)}),c&&Jy(l)}(r.eventManager,e),i.length&&r.Sa.h_(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function mV(n,e,t){const r=H(n);r.sharedClientState.updateQueryState(e,"rejected",t);const i=r.Fa.get(e),s=i&&i.key;if(s){let o=new Re(Y.comparator);o=o.insert(s,Me.newNoDocument(s,te.min()));const a=ae().add(s),l=new Pu(te.min(),new Map,new Re(oe),o,a);await tb(r,l),r.va=r.va.remove(s),r.Fa.delete(e),r_(r)}else await ra(r.localStore,e,!1).then(()=>oa(r,e,t)).catch($i)}async function gV(n,e){const t=H(n),r=e.batch.batchId;try{const i=await RO(t.localStore,e);n_(t,r,null),t_(t,r),t.sharedClientState.updateMutationState(r,"acknowledged"),await Ur(t,i)}catch(i){await $i(i)}}async function yV(n,e,t){const r=H(n);try{const i=await function(o,a){const l=H(o);return l.persistence.runTransaction("Reject batch","readwrite-primary",c=>{let d;return l.mutationQueue.lookupMutationBatch(c,a).next(h=>(ee(h!==null),d=h.keys(),l.mutationQueue.removeMutationBatch(c,h))).next(()=>l.mutationQueue.performConsistencyCheck(c)).next(()=>l.documentOverlayCache.removeOverlaysForBatchId(c,d,a)).next(()=>l.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(c,d)).next(()=>l.localDocuments.getDocuments(c,d))})}(r.localStore,e);n_(r,e,t),t_(r,e),r.sharedClientState.updateMutationState(e,"rejected",t),await Ur(r,i)}catch(i){await $i(i)}}async function _V(n,e){const t=H(n);Wi(t.remoteStore)||$("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled.");try{const r=await function(o){const a=H(o);return a.persistence.runTransaction("Get highest unacknowledged batch id","readonly",l=>a.mutationQueue.getHighestUnacknowledgedBatchId(l))}(t.localStore);if(r===-1)return void e.resolve();const i=t.Oa.get(r)||[];i.push(e),t.Oa.set(r,i)}catch(r){const i=Pa(r,"Initialization of waitForPendingWrites() operation failed");e.reject(i)}}function t_(n,e){(n.Oa.get(e)||[]).forEach(t=>{t.resolve()}),n.Oa.delete(e)}function n_(n,e,t){const r=H(n);let i=r.xa[r.currentUser.toKey()];if(i){const s=i.get(e);s&&(t?s.reject(t):s.resolve(),i=i.remove(e)),r.xa[r.currentUser.toKey()]=i}}function oa(n,e,t=null){n.sharedClientState.removeLocalQueryTarget(e);for(const r of n.Da.get(e))n.ba.delete(r),t&&n.Sa.ka(r,t);n.Da.delete(e),n.isPrimaryClient&&n.Ma.Vr(e).forEach(r=>{n.Ma.containsKey(r)||nb(n,r)})}function nb(n,e){n.Ca.delete(e.path.canonicalString());const t=n.va.get(e);t!==null&&(ia(n.remoteStore,t),n.va=n.va.remove(e),n.Fa.delete(t),r_(n))}function eg(n,e,t){for(const r of t)r instanceof XD?(n.Ma.addReference(r.key,e),vV(n,r)):r instanceof JD?($("SyncEngine","Document no longer in limbo: "+r.key),n.Ma.removeReference(r.key,e),n.Ma.containsKey(r.key)||nb(n,r.key)):X()}function vV(n,e){const t=e.key,r=t.path.canonicalString();n.va.get(t)||n.Ca.has(r)||($("SyncEngine","New document in limbo: "+t),n.Ca.add(r),r_(n))}function r_(n){for(;n.Ca.size>0&&n.va.size<n.maxConcurrentLimboResolutions;){const e=n.Ca.values().next().value;n.Ca.delete(e);const t=new Y(de.fromString(e)),r=n.Na.next();n.Fa.set(r,new lV(t)),n.va=n.va.insert(t,r),Wh(n.remoteStore,new Tr(Qt(Ea(t.path)),r,"TargetPurposeLimboResolution",tn.oe))}}async function Ur(n,e,t){const r=H(n),i=[],s=[],o=[];r.ba.isEmpty()||(r.ba.forEach((a,l)=>{o.push(r.Ba(l,e,t).then(c=>{if((c||t)&&r.isPrimaryClient){const d=c&&!c.fromCache;r.sharedClientState.updateQueryState(l.targetId,d?"current":"not-current")}if(c){i.push(c);const d=zy.Ki(l.targetId,c);s.push(d)}}))}),await Promise.all(o),r.Sa.h_(i),await async function(l,c){const d=H(l);try{await d.persistence.runTransaction("notifyLocalViewChanges","readwrite",h=>O.forEach(c,p=>O.forEach(p.qi,g=>d.persistence.referenceDelegate.addReference(h,p.targetId,g)).next(()=>O.forEach(p.Qi,g=>d.persistence.referenceDelegate.removeReference(h,p.targetId,g)))))}catch(h){if(!zi(h))throw h;$("LocalStore","Failed to update sequence numbers: "+h)}for(const h of c){const p=h.targetId;if(!h.fromCache){const g=d.ns.get(p),v=g.snapshotVersion,S=g.withLastLimboFreeSnapshotVersion(v);d.ns=d.ns.insert(p,S)}}}(r.localStore,s))}async function wV(n,e){const t=H(n);if(!t.currentUser.isEqual(e)){$("SyncEngine","User change. New user:",e.toKey());const r=await VD(t.localStore,e);t.currentUser=e,function(s,o){s.Oa.forEach(a=>{a.forEach(l=>{l.reject(new j(F.CANCELLED,o))})}),s.Oa.clear()}(t,"'waitForPendingWrites' promise is rejected due to a user change."),t.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await Ur(t,r.us)}}function EV(n,e){const t=H(n),r=t.Fa.get(e);if(r&&r.wa)return ae().add(r.key);{let i=ae();const s=t.Da.get(e);if(!s)return i;for(const o of s){const a=t.ba.get(o);i=i.unionWith(a.view.Ea)}return i}}async function TV(n,e){const t=H(n),r=await Hd(t.localStore,e.query,!0),i=e.view.pa(r);return t.isPrimaryClient&&eg(t,e.targetId,i.fa),i}async function IV(n,e){const t=H(n);return UD(t.localStore,e).then(r=>Ur(t,r))}async function SV(n,e,t,r){const i=H(n),s=await function(a,l){const c=H(a),d=H(c.mutationQueue);return c.persistence.runTransaction("Lookup mutation documents","readonly",h=>d.vn(h,l).next(p=>p?c.localDocuments.getDocuments(h,p):O.resolve(null)))}(i.localStore,e);s!==null?(t==="pending"?await Da(i.remoteStore):t==="acknowledged"||t==="rejected"?(n_(i,e,r||null),t_(i,e),function(a,l){H(H(a).mutationQueue).Mn(l)}(i.localStore,e)):X(),await Ur(i,s)):$("SyncEngine","Cannot apply mutation batch with id: "+e)}async function DV(n,e){const t=H(n);if(Yh(t),i_(t),e===!0&&t.La!==!0){const r=t.sharedClientState.getAllActiveQueryTargets(),i=await fE(t,r.toArray());t.La=!0,await Jm(t.remoteStore,!0);for(const s of i)Wh(t.remoteStore,s)}else if(e===!1&&t.La!==!1){const r=[];let i=Promise.resolve();t.Da.forEach((s,o)=>{t.sharedClientState.isLocalQueryTarget(o)?r.push(o):i=i.then(()=>(oa(t,o),ra(t.localStore,o,!0))),ia(t.remoteStore,o)}),await i,await fE(t,r),function(o){const a=H(o);a.Fa.forEach((l,c)=>{ia(a.remoteStore,c)}),a.Ma.mr(),a.Fa=new Map,a.va=new Re(Y.comparator)}(t),t.La=!1,await Jm(t.remoteStore,!1)}}async function fE(n,e,t){const r=H(n),i=[],s=[];for(const o of e){let a;const l=r.Da.get(o);if(l&&l.length!==0){a=await na(r.localStore,Qt(l[0]));for(const c of l){const d=r.ba.get(c),h=await TV(r,d);h.snapshot&&s.push(h.snapshot)}}else{const c=await BD(r.localStore,o);a=await na(r.localStore,c),await e_(r,rb(c),o,!1,a.resumeToken)}i.push(a)}return r.Sa.h_(s),i}function rb(n){return q1(n.path,n.collectionGroup,n.orderBy,n.filters,n.limit,"F",n.startAt,n.endAt)}function bV(n){return function(t){return H(H(t).persistence).Bi()}(H(n).localStore)}async function PV(n,e,t,r){const i=H(n);if(i.La)return void $("SyncEngine","Ignoring unexpected query state notification.");const s=i.Da.get(e);if(s&&s.length>0)switch(t){case"current":case"not-current":{const o=await UD(i.localStore,Y1(s[0])),a=Pu.createSynthesizedRemoteEventForCurrentChange(e,t==="current",dt.EMPTY_BYTE_STRING);await Ur(i,o,a);break}case"rejected":await ra(i.localStore,e,!0),oa(i,e,r);break;default:X()}}async function kV(n,e,t){const r=Yh(n);if(r.La){for(const i of e){if(r.Da.has(i)&&r.sharedClientState.isActiveQueryTarget(i)){$("SyncEngine","Adding an already active target "+i);continue}const s=await BD(r.localStore,i),o=await na(r.localStore,s);await e_(r,rb(s),o.targetId,!1,o.resumeToken),Wh(r.remoteStore,o)}for(const i of t)r.Da.has(i)&&await ra(r.localStore,i,!1).then(()=>{ia(r.remoteStore,i),oa(r,i)}).catch($i)}}function Yh(n){const e=H(n);return e.remoteStore.remoteSyncer.applyRemoteEvent=tb.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=EV.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=mV.bind(null,e),e.Sa.h_=rV.bind(null,e.eventManager),e.Sa.ka=iV.bind(null,e.eventManager),e}function i_(n){const e=H(n);return e.remoteStore.remoteSyncer.applySuccessfulWrite=gV.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=yV.bind(null,e),e}function xV(n,e,t){const r=H(n);(async function(s,o,a){try{const l=await o.getMetadata();if(await function(g,v){const S=H(g),D=ot(v.createTime);return S.persistence.runTransaction("hasNewerBundle","readonly",w=>S.$r.getBundleMetadata(w,v.id)).then(w=>!!w&&w.createTime.compareTo(D)>=0)}(s.localStore,l))return await o.close(),a._completeWith(function(g){return{taskState:"Success",documentsLoaded:g.totalDocuments,bytesLoaded:g.totalBytes,totalDocuments:g.totalDocuments,totalBytes:g.totalBytes}}(l)),Promise.resolve(new Set);a._updateProgress(GD(l));const c=new oV(l,s.localStore,o.serializer);let d=await o.qa();for(;d;){const p=await c._a(d);p&&a._updateProgress(p),d=await o.qa()}const h=await c.complete();return await Ur(s,h.ca,void 0),await function(g,v){const S=H(g);return S.persistence.runTransaction("Save bundle","readwrite",D=>S.$r.saveBundleMetadata(D,v))}(s.localStore,l),a._completeWith(h.progress),Promise.resolve(h.ua)}catch(l){return Bn("SyncEngine",`Loading bundle failed with ${l}`),a._failWith(l),Promise.resolve(new Set)}})(r,e,t).then(i=>{r.sharedClientState.notifyBundleLoaded(i)})}class tg{constructor(){this.synchronizeTabs=!1}async initialize(e){this.serializer=xu(e.databaseInfo.databaseId),this.sharedClientState=this.createSharedClientState(e),this.persistence=this.createPersistence(e),await this.persistence.start(),this.localStore=this.createLocalStore(e),this.gcScheduler=this.createGarbageCollectionScheduler(e,this.localStore),this.indexBackfillerScheduler=this.createIndexBackfillerScheduler(e,this.localStore)}createGarbageCollectionScheduler(e,t){return null}createIndexBackfillerScheduler(e,t){return null}createLocalStore(e){return OD(this.persistence,new MD,e.initialUser,this.serializer)}createPersistence(e){return new ND(qh.Hr,this.serializer)}createSharedClientState(e){return new $D}async terminate(){var e,t;(e=this.gcScheduler)===null||e===void 0||e.stop(),(t=this.indexBackfillerScheduler)===null||t===void 0||t.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}class ib extends tg{constructor(e,t,r){super(),this.Qa=e,this.cacheSizeBytes=t,this.forceOwnership=r,this.synchronizeTabs=!1}async initialize(e){await super.initialize(e),await this.Qa.initialize(this,e),await i_(this.Qa.syncEngine),await Da(this.Qa.remoteStore),await this.persistence.fi(()=>(this.gcScheduler&&!this.gcScheduler.started&&this.gcScheduler.start(),this.indexBackfillerScheduler&&!this.indexBackfillerScheduler.started&&this.indexBackfillerScheduler.start(),Promise.resolve()))}createLocalStore(e){return OD(this.persistence,new MD,e.initialUser,this.serializer)}createGarbageCollectionScheduler(e,t){const r=this.persistence.referenceDelegate.garbageCollector;return new pO(r,e.asyncQueue,t)}createIndexBackfillerScheduler(e,t){const r=new XN(t,this.persistence);return new GN(e.asyncQueue,r)}createPersistence(e){const t=$y(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),r=this.cacheSizeBytes!==void 0?Jt.withCacheSize(this.cacheSizeBytes):Jt.DEFAULT;return new jy(this.synchronizeTabs,t,e.clientId,r,e.asyncQueue,zD(),td(),this.serializer,this.sharedClientState,!!this.forceOwnership)}createSharedClientState(e){return new $D}}class CV extends ib{constructor(e,t){super(e,t,!1),this.Qa=e,this.cacheSizeBytes=t,this.synchronizeTabs=!0}async initialize(e){await super.initialize(e);const t=this.Qa.syncEngine;this.sharedClientState instanceof Tp&&(this.sharedClientState.syncEngine={Zs:SV.bind(null,t),Xs:PV.bind(null,t),eo:kV.bind(null,t),Bi:bV.bind(null,t),Ys:IV.bind(null,t)},await this.sharedClientState.start()),await this.persistence.fi(async r=>{await DV(this.Qa.syncEngine,r),this.gcScheduler&&(r&&!this.gcScheduler.started?this.gcScheduler.start():r||this.gcScheduler.stop()),this.indexBackfillerScheduler&&(r&&!this.indexBackfillerScheduler.started?this.indexBackfillerScheduler.start():r||this.indexBackfillerScheduler.stop())})}createSharedClientState(e){const t=zD();if(!Tp.D(t))throw new j(F.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");const r=$y(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new Tp(t,e.asyncQueue,r,e.clientId,e.initialUser)}}class s_{async initialize(e,t){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(t),this.remoteStore=this.createRemoteStore(t),this.eventManager=this.createEventManager(t),this.syncEngine=this.createSyncEngine(t,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>hE(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=wV.bind(null,this.syncEngine),await Jm(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new nV}()}createDatastore(e){const t=xu(e.databaseInfo.databaseId),r=function(s){return new BO(s)}(e.databaseInfo);return function(s,o,a,l){return new $O(s,o,a,l)}(e.authCredentials,e.appCheckCredentials,r,t)}createRemoteStore(e){return function(r,i,s,o,a){return new qO(r,i,s,o,a)}(this.localStore,this.datastore,e.asyncQueue,t=>hE(this.syncEngine,t,0),function(){return aE.D()?new aE:new VO}())}createSyncEngine(e,t){return function(i,s,o,a,l,c,d){const h=new uV(i,s,o,a,l,c);return d&&(h.La=!0),h}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}async terminate(){var e;await async function(r){const i=H(r);$("RemoteStore","RemoteStore shutting down."),i.M_.add(5),await Sa(i),i.O_.shutdown(),i.N_.set("Unknown")}(this.remoteStore),(e=this.datastore)===null||e===void 0||e.terminate()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pE(n,e=10240){let t=0;return{async read(){if(t<n.byteLength){const r={value:n.slice(t,t+e),done:!1};return t+=e,r}return{done:!0}},async cancel(){},releaseLock(){},closed:Promise.resolve()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hh{constructor(e){this.observer=e,this.muted=!1}next(e){this.observer.next&&this.Ka(this.observer.next,e)}error(e){this.observer.error?this.Ka(this.observer.error,e):rt("Uncaught Error in snapshot listener:",e.toString())}$a(){this.muted=!0}Ka(e,t){this.muted||setTimeout(()=>{this.muted||e(t)},0)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RV{constructor(e,t){this.Ua=e,this.serializer=t,this.metadata=new yt,this.buffer=new Uint8Array,this.Wa=function(){return new TextDecoder("utf-8")}(),this.Ga().then(r=>{r&&r.sa()?this.metadata.resolve(r.ia.metadata):this.metadata.reject(new Error(`The first element of the bundle is not a metadata, it is
             ${JSON.stringify(r==null?void 0:r.ia)}`))},r=>this.metadata.reject(r))}close(){return this.Ua.cancel()}async getMetadata(){return this.metadata.promise}async qa(){return await this.getMetadata(),this.Ga()}async Ga(){const e=await this.za();if(e===null)return null;const t=this.Wa.decode(e),r=Number(t);isNaN(r)&&this.ja(`length string (${t}) is not valid number`);const i=await this.Ha(r);return new sV(JSON.parse(i),e.length+r)}Ja(){return this.buffer.findIndex(e=>e===123)}async za(){for(;this.Ja()<0&&!await this.Ya(););if(this.buffer.length===0)return null;const e=this.Ja();e<0&&this.ja("Reached the end of bundle when a length string is expected.");const t=this.buffer.slice(0,e);return this.buffer=this.buffer.slice(e),t}async Ha(e){for(;this.buffer.length<e;)await this.Ya()&&this.ja("Reached the end of bundle when more is expected.");const t=this.Wa.decode(this.buffer.slice(0,e));return this.buffer=this.buffer.slice(e),t}ja(e){throw this.Ua.cancel(),new Error(`Invalid bundle format: ${e}`)}async Ya(){const e=await this.Ua.read();if(!e.done){const t=new Uint8Array(this.buffer.length+e.value.length);t.set(this.buffer),t.set(e.value,this.buffer.length),this.buffer=t}return e.done}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AV{constructor(e){this.datastore=e,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastTransactionError=null,this.writtenDocs=new Set}async lookup(e){if(this.ensureCommitNotCalled(),this.mutations.length>0)throw this.lastTransactionError=new j(F.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes."),this.lastTransactionError;const t=await async function(i,s){const o=H(i),a={documents:s.map(h=>lu(o.serializer,h))},l=await o.xo("BatchGetDocuments",o.serializer.databaseId,de.emptyPath(),a,s.length),c=new Map;l.forEach(h=>{const p=KM(o.serializer,h);c.set(p.key.toString(),p)});const d=[];return s.forEach(h=>{const p=c.get(h.toString());ee(!!p),d.push(p)}),d}(this.datastore,e);return t.forEach(r=>this.recordVersion(r)),t}set(e,t){this.write(t.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}update(e,t){try{this.write(t.toMutation(e,this.preconditionForUpdate(e)))}catch(r){this.lastTransactionError=r}this.writtenDocs.add(e.toString())}delete(e){this.write(new Ia(e,this.precondition(e))),this.writtenDocs.add(e.toString())}async commit(){if(this.ensureCommitNotCalled(),this.lastTransactionError)throw this.lastTransactionError;const e=this.readVersions;this.mutations.forEach(t=>{e.delete(t.key.toString())}),e.forEach((t,r)=>{const i=Y.fromPath(r);this.mutations.push(new Ry(i,this.precondition(i)))}),await async function(r,i){const s=H(r),o={writes:i.map(a=>uu(s.serializer,a))};await s.Co("Commit",s.serializer.databaseId,de.emptyPath(),o)}(this.datastore,this.mutations),this.committed=!0}recordVersion(e){let t;if(e.isFoundDocument())t=e.version;else{if(!e.isNoDocument())throw X();t=te.min()}const r=this.readVersions.get(e.key.toString());if(r){if(!t.isEqual(r))throw new j(F.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),t)}precondition(e){const t=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&t?t.isEqual(te.min())?Ue.exists(!1):Ue.updateTime(t):Ue.none()}preconditionForUpdate(e){const t=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&t){if(t.isEqual(te.min()))throw new j(F.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return Ue.updateTime(t)}return Ue.exists(!0)}write(e){this.ensureCommitNotCalled(),this.mutations.push(e)}ensureCommitNotCalled(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class NV{constructor(e,t,r,i,s){this.asyncQueue=e,this.datastore=t,this.options=r,this.updateFunction=i,this.deferred=s,this.Za=r.maxAttempts,this.Yo=new Wy(this.asyncQueue,"transaction_retry")}Xa(){this.Za-=1,this.eu()}eu(){this.Yo.$o(async()=>{const e=new AV(this.datastore),t=this.tu(e);t&&t.then(r=>{this.asyncQueue.enqueueAndForget(()=>e.commit().then(()=>{this.deferred.resolve(r)}).catch(i=>{this.nu(i)}))}).catch(r=>{this.nu(r)})})}tu(e){try{const t=this.updateFunction(e);return!Tu(t)&&t.catch&&t.then?t:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(t){return this.deferred.reject(t),null}}nu(e){this.Za>0&&this.ru(e)?(this.Za-=1,this.asyncQueue.enqueueAndForget(()=>(this.eu(),Promise.resolve()))):this.deferred.reject(e)}ru(e){if(e.name==="FirebaseError"){const t=e.code;return t==="aborted"||t==="failed-precondition"||t==="already-exists"||!oD(t)}return!1}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class MV{constructor(e,t,r,i){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=r,this.databaseInfo=i,this.user=pt.UNAUTHENTICATED,this.clientId=w1.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(r,async s=>{$("FirestoreClient","Received user=",s.uid),await this.authCredentialListener(s),this.user=s}),this.appCheckCredentials.start(r,s=>($("FirestoreClient","Received new app check token=",s),this.appCheckCredentialListener(s,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new j(F.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){this.asyncQueue.enterRestrictedMode();const e=new yt;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){const r=Pa(t,"Failed to shutdown persistence");e.reject(r)}}),e.promise}}async function nd(n,e){n.asyncQueue.verifyOperationInProgress(),$("FirestoreClient","Initializing OfflineComponentProvider");const t=n.configuration;await e.initialize(t);let r=t.initialUser;n.setCredentialChangeListener(async i=>{r.isEqual(i)||(await VD(e.localStore,i),r=i)}),e.persistence.setDatabaseDeletedListener(()=>n.terminate()),n._offlineComponents=e}async function ng(n,e){n.asyncQueue.verifyOperationInProgress();const t=await o_(n);$("FirestoreClient","Initializing OnlineComponentProvider"),await e.initialize(t,n.configuration),n.setCredentialChangeListener(r=>lE(e.remoteStore,r)),n.setAppCheckTokenChangeListener((r,i)=>lE(e.remoteStore,i)),n._onlineComponents=e}function sb(n){return n.name==="FirebaseError"?n.code===F.FAILED_PRECONDITION||n.code===F.UNIMPLEMENTED:!(typeof DOMException<"u"&&n instanceof DOMException)||n.code===22||n.code===20||n.code===11}async function o_(n){if(!n._offlineComponents)if(n._uninitializedComponentsProvider){$("FirestoreClient","Using user provided OfflineComponentProvider");try{await nd(n,n._uninitializedComponentsProvider._offline)}catch(e){const t=e;if(!sb(t))throw t;Bn("Error using user provided cache. Falling back to memory cache: "+t),await nd(n,new tg)}}else $("FirestoreClient","Using default OfflineComponentProvider"),await nd(n,new tg);return n._offlineComponents}async function Qh(n){return n._onlineComponents||(n._uninitializedComponentsProvider?($("FirestoreClient","Using user provided OnlineComponentProvider"),await ng(n,n._uninitializedComponentsProvider._online)):($("FirestoreClient","Using default OnlineComponentProvider"),await ng(n,new s_))),n._onlineComponents}function ob(n){return o_(n).then(e=>e.persistence)}function a_(n){return o_(n).then(e=>e.localStore)}function ab(n){return Qh(n).then(e=>e.remoteStore)}function l_(n){return Qh(n).then(e=>e.syncEngine)}function OV(n){return Qh(n).then(e=>e.datastore)}async function aa(n){const e=await Qh(n),t=e.eventManager;return t.onListen=cV.bind(null,e.syncEngine),t.onUnlisten=hV.bind(null,e.syncEngine),t.onFirstRemoteStoreListen=dV.bind(null,e.syncEngine),t.onLastRemoteStoreUnlisten=fV.bind(null,e.syncEngine),t}function VV(n){return n.asyncQueue.enqueue(async()=>{const e=await ob(n),t=await ab(n);return e.setNetworkEnabled(!0),function(i){const s=H(i);return s.M_.delete(0),Cu(s)}(t)})}function LV(n){return n.asyncQueue.enqueue(async()=>{const e=await ob(n),t=await ab(n);return e.setNetworkEnabled(!1),async function(i){const s=H(i);s.M_.add(0),await Sa(s),s.N_.set("Offline")}(t)})}function FV(n,e){const t=new yt;return n.asyncQueue.enqueueAndForget(async()=>async function(i,s,o){try{const a=await function(c,d){const h=H(c);return h.persistence.runTransaction("read document","readonly",p=>h.localDocuments.getDocument(p,d))}(i,s);a.isFoundDocument()?o.resolve(a):a.isNoDocument()?o.resolve(null):o.reject(new j(F.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)"))}catch(a){const l=Pa(a,`Failed to get document '${s} from cache`);o.reject(l)}}(await a_(n),e,t)),t.promise}function lb(n,e,t={}){const r=new yt;return n.asyncQueue.enqueueAndForget(async()=>function(s,o,a,l,c){const d=new Hh({next:p=>{o.enqueueAndForget(()=>Xy(s,h));const g=p.docs.has(a);!g&&p.fromCache?c.reject(new j(F.UNAVAILABLE,"Failed to get document because the client is offline.")):g&&p.fromCache&&l&&l.source==="server"?c.reject(new j(F.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):c.resolve(p)},error:p=>c.reject(p)}),h=new Zy(Ea(a.path),d,{includeMetadataChanges:!0,ra:!0});return Gy(s,h)}(await aa(n),n.asyncQueue,e,t,r)),r.promise}function BV(n,e){const t=new yt;return n.asyncQueue.enqueueAndForget(async()=>async function(i,s,o){try{const a=await Hd(i,s,!0),l=new ZD(s,a.hs),c=l.da(a.documents),d=l.applyChanges(c,!1);o.resolve(d.snapshot)}catch(a){const l=Pa(a,`Failed to execute query '${s} against cache`);o.reject(l)}}(await a_(n),e,t)),t.promise}function ub(n,e,t={}){const r=new yt;return n.asyncQueue.enqueueAndForget(async()=>function(s,o,a,l,c){const d=new Hh({next:p=>{o.enqueueAndForget(()=>Xy(s,h)),p.fromCache&&l.source==="server"?c.reject(new j(F.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):c.resolve(p)},error:p=>c.reject(p)}),h=new Zy(a,d,{includeMetadataChanges:!0,ra:!0});return Gy(s,h)}(await aa(n),n.asyncQueue,e,t,r)),r.promise}function UV(n,e){const t=new Hh(e);return n.asyncQueue.enqueueAndForget(async()=>function(i,s){H(i).z_.add(s),s.next()}(await aa(n),t)),()=>{t.$a(),n.asyncQueue.enqueueAndForget(async()=>function(i,s){H(i).z_.delete(s)}(await aa(n),t))}}function jV(n,e,t,r){const i=function(o,a){let l;return l=typeof o=="string"?lD().encode(o):o,function(d,h){return new RV(d,h)}(function(d,h){if(d instanceof Uint8Array)return pE(d,h);if(d instanceof ArrayBuffer)return pE(new Uint8Array(d),h);if(d instanceof ReadableStream)return d.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")}(l),a)}(t,xu(e));n.asyncQueue.enqueueAndForget(async()=>{xV(await l_(n),i,r)})}function $V(n,e){return n.asyncQueue.enqueue(async()=>function(r,i){const s=H(r);return s.persistence.runTransaction("Get named query","readonly",o=>s.$r.getNamedQuery(o,i))}(await a_(n),e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cb(n){const e={};return n.timeoutSeconds!==void 0&&(e.timeoutSeconds=n.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mE=new Map;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function u_(n,e,t){if(!t)throw new j(F.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${e}.`)}function db(n,e,t,r){if(e===!0&&r===!0)throw new j(F.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)}function gE(n){if(!Y.isDocumentKey(n))throw new j(F.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function yE(n){if(Y.isDocumentKey(n))throw new j(F.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function Kh(n){if(n===void 0)return"undefined";if(n===null)return"null";if(typeof n=="string")return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if(typeof n=="number"||typeof n=="boolean")return""+n;if(typeof n=="object"){if(n instanceof Array)return"an array";{const e=function(r){return r.constructor?r.constructor.name:null}(n);return e?`a custom ${e} object`:"an object"}}return typeof n=="function"?"a function":X()}function _e(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new j(F.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=Kh(n);throw new j(F.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}function hb(n,e){if(e<=0)throw new j(F.INVALID_ARGUMENT,`Function ${n}() requires a positive number, but it was: ${e}.`)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _E{constructor(e){var t,r;if(e.host===void 0){if(e.ssl!==void 0)throw new j(F.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=(t=e.ssl)===null||t===void 0||t;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=41943040;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<1048576)throw new j(F.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}db("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=cb((r=e.experimentalLongPollingOptions)!==null&&r!==void 0?r:{}),function(s){if(s.timeoutSeconds!==void 0){if(isNaN(s.timeoutSeconds))throw new j(F.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (must not be NaN)`);if(s.timeoutSeconds<5)throw new j(F.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (minimum allowed value is 5)`);if(s.timeoutSeconds>30)throw new j(F.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(r,i){return r.timeoutSeconds===i.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Ru{constructor(e,t,r,i){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new _E({}),this._settingsFrozen=!1}get app(){if(!this._app)throw new j(F.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!==void 0}_setSettings(e){if(this._settingsFrozen)throw new j(F.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new _E(e),e.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new BN;switch(r.type){case"firstParty":return new zN(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new j(F.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(t){const r=mE.get(t);r&&($("ComponentProvider","Removing Datastore"),mE.delete(t),r.terminate())}(this),Promise.resolve()}}function fb(n,e,t,r={}){var i;const s=(n=_e(n,Ru))._getSettings(),o=`${e}:${t}`;if(s.host!=="firestore.googleapis.com"&&s.host!==o&&Bn("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),n._setSettings(Object.assign(Object.assign({},s),{host:o,ssl:!1})),r.mockUserToken){let a,l;if(typeof r.mockUserToken=="string")a=r.mockUserToken,l=pt.MOCK_USER;else{a=XS(r.mockUserToken,(i=n._app)===null||i===void 0?void 0:i.options.projectId);const c=r.mockUserToken.sub||r.mockUserToken.user_id;if(!c)throw new j(F.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");l=new pt(c)}n._authCredentials=new UN(new v1(a,l))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Kt=class pb{constructor(e,t,r){this.converter=t,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new pb(this.firestore,e,this._query)}},He=class mb{constructor(e,t,r){this.converter=t,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new vi(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new mb(this.firestore,e,this._key)}},vi=class gb extends Kt{constructor(e,t,r){super(e,t,Ea(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new He(this.firestore,null,new Y(e))}withConverter(e){return new gb(this.firestore,e,this._path)}};function Xd(n,e,...t){if(n=Ee(n),u_("collection","path",e),n instanceof Ru){const r=de.fromString(e,...t);return yE(r),new vi(n,null,r)}{if(!(n instanceof He||n instanceof vi))throw new j(F.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(de.fromString(e,...t));return yE(r),new vi(n.firestore,null,r)}}function zV(n,e){if(n=_e(n,Ru),u_("collectionGroup","collection id",e),e.indexOf("/")>=0)throw new j(F.INVALID_ARGUMENT,`Invalid collection ID '${e}' passed to function collectionGroup(). Collection IDs must not contain '/'.`);return new Kt(n,null,function(r){return new Fr(de.emptyPath(),r)}(e))}function Jd(n,e,...t){if(n=Ee(n),arguments.length===1&&(e=w1.newId()),u_("doc","path",e),n instanceof Ru){const r=de.fromString(e,...t);return gE(r),new He(n,null,new Y(r))}{if(!(n instanceof He||n instanceof vi))throw new j(F.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(de.fromString(e,...t));return gE(r),new He(n.firestore,n instanceof vi?n.converter:null,new Y(r))}}function yb(n,e){return n=Ee(n),e=Ee(e),(n instanceof He||n instanceof vi)&&(e instanceof He||e instanceof vi)&&n.firestore===e.firestore&&n.path===e.path&&n.converter===e.converter}function _b(n,e){return n=Ee(n),e=Ee(e),n instanceof Kt&&e instanceof Kt&&n.firestore===e.firestore&&Su(n._query,e._query)&&n.converter===e.converter}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qV{constructor(){this.iu=Promise.resolve(),this.su=[],this.ou=!1,this._u=[],this.au=null,this.uu=!1,this.cu=!1,this.lu=[],this.Yo=new Wy(this,"async_queue_retry"),this.hu=()=>{const t=td();t&&$("AsyncQueue","Visibility state changed to "+t.visibilityState),this.Yo.Wo()};const e=td();e&&typeof e.addEventListener=="function"&&e.addEventListener("visibilitychange",this.hu)}get isShuttingDown(){return this.ou}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.Pu(),this.Iu(e)}enterRestrictedMode(e){if(!this.ou){this.ou=!0,this.cu=e||!1;const t=td();t&&typeof t.removeEventListener=="function"&&t.removeEventListener("visibilitychange",this.hu)}}enqueue(e){if(this.Pu(),this.ou)return new Promise(()=>{});const t=new yt;return this.Iu(()=>this.ou&&this.cu?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.su.push(e),this.Tu()))}async Tu(){if(this.su.length!==0){try{await this.su[0](),this.su.shift(),this.Yo.reset()}catch(e){if(!zi(e))throw e;$("AsyncQueue","Operation failed with retryable error: "+e)}this.su.length>0&&this.Yo.$o(()=>this.Tu())}}Iu(e){const t=this.iu.then(()=>(this.uu=!0,e().catch(r=>{this.au=r,this.uu=!1;const i=function(o){let a=o.message||"";return o.stack&&(a=o.stack.includes(o.message)?o.stack:o.message+`
`+o.stack),a}(r);throw rt("INTERNAL UNHANDLED ERROR: ",i),r}).then(r=>(this.uu=!1,r))));return this.iu=t,t}enqueueAfterDelay(e,t,r){this.Pu(),this.lu.indexOf(e)>-1&&(t=0);const i=Ky.createAndSchedule(this,e,t,r,s=>this.Eu(s));return this._u.push(i),i}Pu(){this.au&&X()}verifyOperationInProgress(){}async du(){let e;do e=this.iu,await e;while(e!==this.iu)}Au(e){for(const t of this._u)if(t.timerId===e)return!0;return!1}Ru(e){return this.du().then(()=>{this._u.sort((t,r)=>t.targetTimeMs-r.targetTimeMs);for(const t of this._u)if(t.skipDelay(),e!=="all"&&t.timerId===e)break;return this.du()})}Vu(e){this.lu.push(e)}Eu(e){const t=this._u.indexOf(e);this._u.splice(t,1)}}function rg(n){return function(t,r){if(typeof t!="object"||t===null)return!1;const i=t;for(const s of r)if(s in i&&typeof i[s]=="function")return!0;return!1}(n,["next","error","complete"])}class WV{constructor(){this._progressObserver={},this._taskCompletionResolver=new yt,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}onProgress(e,t,r){this._progressObserver={next:e,error:t,complete:r}}catch(e){return this._taskCompletionResolver.promise.catch(e)}then(e,t){return this._taskCompletionResolver.promise.then(e,t)}_completeWith(e){this._updateProgress(e),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(e)}_failWith(e){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(e),this._taskCompletionResolver.reject(e)}_updateProgress(e){this._lastProgress=e,this._progressObserver.next&&this._progressObserver.next(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const YV=-1;let Ze=class extends Ru{constructor(e,t,r,i){super(e,t,r,i),this.type="firestore",this._queue=function(){return new qV}(),this._persistenceKey=(i==null?void 0:i.name)||"[DEFAULT]"}_terminate(){return this._firestoreClient||vb(this),this._firestoreClient.terminate()}};function HV(n,e){const t=typeof n=="object"?n:Ty(),r=typeof n=="string"?n:"(default)",i=Vh(t,"firestore").getImmediate({identifier:r});if(!i._initialized){const s=KS("firestore");s&&fb(i,...s)}return i}function vt(n){return n._firestoreClient||vb(n),n._firestoreClient.verifyNotTerminated(),n._firestoreClient}function vb(n){var e,t,r;const i=n._freezeSettings(),s=function(a,l,c,d){return new _M(a,l,c,d.host,d.ssl,d.experimentalForceLongPolling,d.experimentalAutoDetectLongPolling,cb(d.experimentalLongPollingOptions),d.useFetchStreams)}(n._databaseId,((e=n._app)===null||e===void 0?void 0:e.options.appId)||"",n._persistenceKey,i);n._firestoreClient=new MV(n._authCredentials,n._appCheckCredentials,n._queue,s),!((t=i.localCache)===null||t===void 0)&&t._offlineComponentProvider&&(!((r=i.localCache)===null||r===void 0)&&r._onlineComponentProvider)&&(n._firestoreClient._uninitializedComponentsProvider={_offlineKind:i.localCache.kind,_offline:i.localCache._offlineComponentProvider,_online:i.localCache._onlineComponentProvider})}function QV(n,e){Eb(n=_e(n,Ze));const t=vt(n);if(t._uninitializedComponentsProvider)throw new j(F.FAILED_PRECONDITION,"SDK cache is already specified.");Bn("enableIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");const r=n._freezeSettings(),i=new s_;return wb(t,i,new ib(i,r.cacheSizeBytes,e==null?void 0:e.forceOwnership))}function KV(n){Eb(n=_e(n,Ze));const e=vt(n);if(e._uninitializedComponentsProvider)throw new j(F.FAILED_PRECONDITION,"SDK cache is already specified.");Bn("enableMultiTabIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");const t=n._freezeSettings(),r=new s_;return wb(e,r,new CV(r,t.cacheSizeBytes))}function wb(n,e,t){const r=new yt;return n.asyncQueue.enqueue(async()=>{try{await nd(n,t),await ng(n,e),r.resolve()}catch(i){const s=i;if(!sb(s))throw s;Bn("Error enabling indexeddb cache. Falling back to memory cache: "+s),r.reject(s)}}).then(()=>r.promise)}function GV(n){if(n._initialized&&!n._terminated)throw new j(F.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");const e=new yt;return n._queue.enqueueAndForgetEvenWhileRestricted(async()=>{try{await async function(r){if(!nr.D())return Promise.resolve();const i=r+"main";await nr.delete(i)}($y(n._databaseId,n._persistenceKey)),e.resolve()}catch(t){e.reject(t)}}),e.promise}function XV(n){return function(t){const r=new yt;return t.asyncQueue.enqueueAndForget(async()=>_V(await l_(t),r)),r.promise}(vt(n=_e(n,Ze)))}function JV(n){return VV(vt(n=_e(n,Ze)))}function ZV(n){return LV(vt(n=_e(n,Ze)))}function e2(n,e){const t=vt(n=_e(n,Ze)),r=new WV;return jV(t,n._databaseId,e,r),r}function t2(n,e){return $V(vt(n=_e(n,Ze)),e).then(t=>t?new Kt(n,null,t.query):null)}function Eb(n){if(n._initialized||n._terminated)throw new j(F.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.")}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lr{constructor(e){this._byteString=e}static fromBase64String(e){try{return new lr(dt.fromBase64String(e))}catch(t){throw new j(F.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new lr(dt.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Ai=class{constructor(...e){for(let t=0;t<e.length;++t)if(e[t].length===0)throw new j(F.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Be(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Hs=class{constructor(e){this._methodName=e}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gh{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new j(F.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new j(F.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return oe(this._lat,e._lat)||oe(this._long,e._long)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const n2=/^__.*__$/;class r2{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return this.fieldMask!==null?new Br(e,this.data,this.fieldMask,t,this.fieldTransforms):new Ta(e,this.data,t,this.fieldTransforms)}}class Tb{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return new Br(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function Ib(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw X()}}class Xh{constructor(e,t,r,i,s,o){this.settings=e,this.databaseId=t,this.serializer=r,this.ignoreUndefinedProperties=i,s===void 0&&this.mu(),this.fieldTransforms=s||[],this.fieldMask=o||[]}get path(){return this.settings.path}get fu(){return this.settings.fu}gu(e){return new Xh(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}pu(e){var t;const r=(t=this.path)===null||t===void 0?void 0:t.child(e),i=this.gu({path:r,yu:!1});return i.wu(e),i}Su(e){var t;const r=(t=this.path)===null||t===void 0?void 0:t.child(e),i=this.gu({path:r,yu:!1});return i.mu(),i}bu(e){return this.gu({path:void 0,yu:!0})}Du(e){return Zd(e,this.settings.methodName,this.settings.Cu||!1,this.path,this.settings.vu)}contains(e){return this.fieldMask.find(t=>e.isPrefixOf(t))!==void 0||this.fieldTransforms.find(t=>e.isPrefixOf(t.field))!==void 0}mu(){if(this.path)for(let e=0;e<this.path.length;e++)this.wu(this.path.get(e))}wu(e){if(e.length===0)throw this.Du("Document fields must not be empty");if(Ib(this.fu)&&n2.test(e))throw this.Du('Document fields cannot begin and end with "__"')}}class i2{constructor(e,t,r){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=r||xu(e)}Fu(e,t,r,i=!1){return new Xh({fu:e,methodName:t,vu:r,path:Be.emptyPath(),yu:!1,Cu:i},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function Qs(n){const e=n._freezeSettings(),t=xu(n._databaseId);return new i2(n._databaseId,!!e.ignoreUndefinedProperties,t)}function Jh(n,e,t,r,i,s={}){const o=n.Fu(s.merge||s.mergeFields?2:0,e,t,i);g_("Data must be an object, but it was:",o,r);const a=bb(r,o);let l,c;if(s.merge)l=new nn(o.fieldMask),c=o.fieldTransforms;else if(s.mergeFields){const d=[];for(const h of s.mergeFields){const p=ig(e,h,t);if(!o.contains(p))throw new j(F.INVALID_ARGUMENT,`Field '${p}' is specified in your field mask but missing from your input data.`);kb(d,p)||d.push(p)}l=new nn(d),c=o.fieldTransforms.filter(h=>l.covers(h.field))}else l=null,c=o.fieldTransforms;return new r2(new St(a),l,c)}class Au extends Hs{_toFieldTransform(e){if(e.fu!==2)throw e.fu===1?e.Du(`${this._methodName}() can only appear at the top level of your update data`):e.Du(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof Au}}function Sb(n,e,t){return new Xh({fu:3,vu:e.settings.vu,methodName:n._methodName,yu:t},e.databaseId,e.serializer,e.ignoreUndefinedProperties)}class c_ extends Hs{_toFieldTransform(e){return new bu(e.path,new Zo)}isEqual(e){return e instanceof c_}}class d_ extends Hs{constructor(e,t){super(e),this.Mu=t}_toFieldTransform(e){const t=Sb(this,e,!0),r=this.Mu.map(s=>Ks(s,t)),i=new Ns(r);return new bu(e.path,i)}isEqual(e){return e instanceof d_&&Jl(this.Mu,e.Mu)}}class h_ extends Hs{constructor(e,t){super(e),this.Mu=t}_toFieldTransform(e){const t=Sb(this,e,!0),r=this.Mu.map(s=>Ks(s,t)),i=new Ms(r);return new bu(e.path,i)}isEqual(e){return e instanceof h_&&Jl(this.Mu,e.Mu)}}class f_ extends Hs{constructor(e,t){super(e),this.xu=t}_toFieldTransform(e){const t=new ea(e.serializer,Z1(e.serializer,this.xu));return new bu(e.path,t)}isEqual(e){return e instanceof f_&&this.xu===e.xu}}function p_(n,e,t,r){const i=n.Fu(1,e,t);g_("Data must be an object, but it was:",i,r);const s=[],o=St.empty();Ys(r,(l,c)=>{const d=y_(e,l,t);c=Ee(c);const h=i.Su(d);if(c instanceof Au)s.push(d);else{const p=Ks(c,h);p!=null&&(s.push(d),o.set(d,p))}});const a=new nn(s);return new Tb(o,a,i.fieldTransforms)}function m_(n,e,t,r,i,s){const o=n.Fu(1,e,t),a=[ig(e,r,t)],l=[i];if(s.length%2!=0)throw new j(F.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let p=0;p<s.length;p+=2)a.push(ig(e,s[p])),l.push(s[p+1]);const c=[],d=St.empty();for(let p=a.length-1;p>=0;--p)if(!kb(c,a[p])){const g=a[p];let v=l[p];v=Ee(v);const S=o.Su(g);if(v instanceof Au)c.push(g);else{const D=Ks(v,S);D!=null&&(c.push(g),d.set(g,D))}}const h=new nn(c);return new Tb(d,h,o.fieldTransforms)}function Db(n,e,t,r=!1){return Ks(t,n.Fu(r?4:3,e))}function Ks(n,e){if(Pb(n=Ee(n)))return g_("Unsupported field value:",e,n),bb(n,e);if(n instanceof Hs)return function(r,i){if(!Ib(i.fu))throw i.Du(`${r._methodName}() can only be used with update() and set()`);if(!i.path)throw i.Du(`${r._methodName}() is not currently supported inside arrays`);const s=r._toFieldTransform(i);s&&i.fieldTransforms.push(s)}(n,e),null;if(n===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),n instanceof Array){if(e.settings.yu&&e.fu!==4)throw e.Du("Nested arrays are not supported");return function(r,i){const s=[];let o=0;for(const a of r){let l=Ks(a,i.bu(o));l==null&&(l={nullValue:"NULL_VALUE"}),s.push(l),o++}return{arrayValue:{values:s}}}(n,e)}return function(r,i){if((r=Ee(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return Z1(i.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const s=je.fromDate(r);return{timestampValue:ta(i.serializer,s)}}if(r instanceof je){const s=new je(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:ta(i.serializer,s)}}if(r instanceof Gh)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof lr)return{bytesValue:dD(i.serializer,r._byteString)};if(r instanceof He){const s=i.databaseId,o=r.firestore._databaseId;if(!o.isEqual(s))throw i.Du(`Document reference is for database ${o.projectId}/${o.database} but should be for database ${s.projectId}/${s.database}`);return{referenceValue:Vy(r.firestore._databaseId||i.databaseId,r._key.path)}}throw i.Du(`Unsupported field value: ${Kh(r)}`)}(n,e)}function bb(n,e){const t={};return N1(n)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Ys(n,(r,i)=>{const s=Ks(i,e.pu(r));s!=null&&(t[r]=s)}),{mapValue:{fields:t}}}function Pb(n){return!(typeof n!="object"||n===null||n instanceof Array||n instanceof Date||n instanceof je||n instanceof Gh||n instanceof lr||n instanceof He||n instanceof Hs)}function g_(n,e,t){if(!Pb(t)||!function(i){return typeof i=="object"&&i!==null&&(Object.getPrototypeOf(i)===Object.prototype||Object.getPrototypeOf(i)===null)}(t)){const r=Kh(t);throw r==="an object"?e.Du(n+" a custom object"):e.Du(n+" "+r)}}function ig(n,e,t){if((e=Ee(e))instanceof Ai)return e._internalPath;if(typeof e=="string")return y_(n,e);throw Zd("Field path arguments must be of type string or ",n,!1,void 0,t)}const s2=new RegExp("[~\\*/\\[\\]]");function y_(n,e,t){if(e.search(s2)>=0)throw Zd(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,t);try{return new Ai(...e.split("."))._internalPath}catch{throw Zd(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,t)}}function Zd(n,e,t,r,i){const s=r&&!r.isEmpty(),o=i!==void 0;let a=`Function ${e}() called with invalid data`;t&&(a+=" (via `toFirestore()`)"),a+=". ";let l="";return(s||o)&&(l+=" (found",s&&(l+=` in field ${r}`),o&&(l+=` in document ${i}`),l+=")"),new j(F.INVALID_ARGUMENT,a+n+l)}function kb(n,e){return n.some(t=>t.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cu{constructor(e,t,r,i,s){this._firestore=e,this._userDataWriter=t,this._key=r,this._document=i,this._converter=s}get id(){return this._key.path.lastSegment()}get ref(){return new He(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new o2(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(Zh("DocumentSnapshot.get",e));if(t!==null)return this._userDataWriter.convertValue(t)}}}class o2 extends cu{data(){return super.data()}}function Zh(n,e){return typeof e=="string"?y_(n,e):e instanceof Ai?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xb(n){if(n.limitType==="L"&&n.explicitOrderBy.length===0)throw new j(F.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class __{}class Nu extends __{}function Kr(n,e,...t){let r=[];e instanceof __&&r.push(e),r=r.concat(t),function(s){const o=s.filter(l=>l instanceof v_).length,a=s.filter(l=>l instanceof ef).length;if(o>1||o>0&&a>0)throw new j(F.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(r);for(const i of r)n=i._apply(n);return n}class ef extends Nu{constructor(e,t,r){super(),this._field=e,this._op=t,this._value=r,this.type="where"}static _create(e,t,r){return new ef(e,t,r)}_apply(e){const t=this._parse(e);return Rb(e._query,t),new Kt(e.firestore,e.converter,zm(e._query,t))}_parse(e){const t=Qs(e.firestore);return function(s,o,a,l,c,d,h){let p;if(c.isKeyField()){if(d==="array-contains"||d==="array-contains-any")throw new j(F.INVALID_ARGUMENT,`Invalid Query. You can't perform '${d}' queries on documentId().`);if(d==="in"||d==="not-in"){wE(h,d);const g=[];for(const v of h)g.push(vE(l,s,v));p={arrayValue:{values:g}}}else p=vE(l,s,h)}else d!=="in"&&d!=="not-in"&&d!=="array-contains-any"||wE(h,d),p=Db(a,o,h,d==="in"||d==="not-in");return he.create(c,d,p)}(e._query,"where",t,e.firestore._databaseId,this._field,this._op,this._value)}}function a2(n,e,t){const r=e,i=Zh("where",n);return ef._create(i,r,t)}class v_ extends __{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new v_(e,t)}_parse(e){const t=this._queryConstraints.map(r=>r._parse(e)).filter(r=>r.getFilters().length>0);return t.length===1?t[0]:De.create(t,this._getOperator())}_apply(e){const t=this._parse(e);return t.getFilters().length===0?e:(function(i,s){let o=i;const a=s.getFlattenedFilters();for(const l of a)Rb(o,l),o=zm(o,l)}(e._query,t),new Kt(e.firestore,e.converter,zm(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class w_ extends Nu{constructor(e,t){super(),this._field=e,this._direction=t,this.type="orderBy"}static _create(e,t){return new w_(e,t)}_apply(e){const t=function(i,s,o){if(i.startAt!==null)throw new j(F.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(i.endAt!==null)throw new j(F.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new au(s,o)}(e._query,this._field,this._direction);return new Kt(e.firestore,e.converter,function(i,s){const o=i.explicitOrderBy.concat([s]);return new Fr(i.path,i.collectionGroup,o,i.filters.slice(),i.limit,i.limitType,i.startAt,i.endAt)}(e._query,t))}}function l2(n,e="asc"){const t=e,r=Zh("orderBy",n);return w_._create(r,t)}class tf extends Nu{constructor(e,t,r){super(),this.type=e,this._limit=t,this._limitType=r}static _create(e,t,r){return new tf(e,t,r)}_apply(e){return new Kt(e.firestore,e.converter,zd(e._query,this._limit,this._limitType))}}function u2(n){return hb("limit",n),tf._create("limit",n,"F")}function c2(n){return hb("limitToLast",n),tf._create("limitToLast",n,"L")}class nf extends Nu{constructor(e,t,r){super(),this.type=e,this._docOrFields=t,this._inclusive=r}static _create(e,t,r){return new nf(e,t,r)}_apply(e){const t=Cb(e,this.type,this._docOrFields,this._inclusive);return new Kt(e.firestore,e.converter,function(i,s){return new Fr(i.path,i.collectionGroup,i.explicitOrderBy.slice(),i.filters.slice(),i.limit,i.limitType,s,i.endAt)}(e._query,t))}}function d2(...n){return nf._create("startAt",n,!0)}function h2(...n){return nf._create("startAfter",n,!1)}class rf extends Nu{constructor(e,t,r){super(),this.type=e,this._docOrFields=t,this._inclusive=r}static _create(e,t,r){return new rf(e,t,r)}_apply(e){const t=Cb(e,this.type,this._docOrFields,this._inclusive);return new Kt(e.firestore,e.converter,function(i,s){return new Fr(i.path,i.collectionGroup,i.explicitOrderBy.slice(),i.filters.slice(),i.limit,i.limitType,i.startAt,s)}(e._query,t))}}function f2(...n){return rf._create("endBefore",n,!1)}function p2(...n){return rf._create("endAt",n,!0)}function Cb(n,e,t,r){if(t[0]=Ee(t[0]),t[0]instanceof cu)return function(s,o,a,l,c){if(!l)throw new j(F.NOT_FOUND,`Can't use a DocumentSnapshot that doesn't exist for ${a}().`);const d=[];for(const h of Mo(s))if(h.field.isKeyField())d.push(Rs(o,l.key));else{const p=l.data.field(h.field);if(Bh(p))throw new j(F.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+h.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(p===null){const g=h.field.canonicalString();throw new j(F.INVALID_ARGUMENT,`Invalid query. You are trying to start or end a query using a document for which the field '${g}' (used as the orderBy) does not exist.`)}d.push(p)}return new Ci(d,c)}(n._query,n.firestore._databaseId,e,t[0]._document,r);{const i=Qs(n.firestore);return function(o,a,l,c,d,h){const p=o.explicitOrderBy;if(d.length>p.length)throw new j(F.INVALID_ARGUMENT,`Too many arguments provided to ${c}(). The number of arguments must be less than or equal to the number of orderBy() clauses`);const g=[];for(let v=0;v<d.length;v++){const S=d[v];if(p[v].field.isKeyField()){if(typeof S!="string")throw new j(F.INVALID_ARGUMENT,`Invalid query. Expected a string for document ID in ${c}(), but got a ${typeof S}`);if(!xy(o)&&S.indexOf("/")!==-1)throw new j(F.INVALID_ARGUMENT,`Invalid query. When querying a collection and ordering by documentId(), the value passed to ${c}() must be a plain document ID, but '${S}' contains a slash.`);const D=o.path.child(de.fromString(S));if(!Y.isDocumentKey(D))throw new j(F.INVALID_ARGUMENT,`Invalid query. When querying a collection group and ordering by documentId(), the value passed to ${c}() must result in a valid document path, but '${D}' is not because it contains an odd number of segments.`);const w=new Y(D);g.push(Rs(a,w))}else{const D=Db(l,c,S);g.push(D)}}return new Ci(g,h)}(n._query,n.firestore._databaseId,i,e,t,r)}}function vE(n,e,t){if(typeof(t=Ee(t))=="string"){if(t==="")throw new j(F.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!xy(e)&&t.indexOf("/")!==-1)throw new j(F.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);const r=e.path.child(de.fromString(t));if(!Y.isDocumentKey(r))throw new j(F.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return Rs(n,new Y(r))}if(t instanceof He)return Rs(n,t._key);throw new j(F.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${Kh(t)}.`)}function wE(n,e){if(!Array.isArray(n)||n.length===0)throw new j(F.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function Rb(n,e){const t=function(i,s){for(const o of i)for(const a of o.getFlattenedFilters())if(s.indexOf(a.op)>=0)return a.op;return null}(n.filters,function(i){switch(i){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(t!==null)throw t===e.op?new j(F.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new j(F.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${t.toString()}' filters.`)}class E_{convertValue(e,t="none"){switch(Cs(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Je(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(Pi(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 10:return this.convertObject(e.mapValue,t);default:throw X()}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){const r={};return Ys(e,(i,s)=>{r[i]=this.convertValue(s,t)}),r}convertGeoPoint(e){return new Gh(Je(e.latitude),Je(e.longitude))}convertArray(e,t){return(e.values||[]).map(r=>this.convertValue(r,t))}convertServerTimestamp(e,t){switch(t){case"previous":const r=Py(e);return r==null?null:this.convertValue(r,t);case"estimate":return this.convertTimestamp(iu(e));default:return null}}convertTimestamp(e){const t=Nr(e);return new je(t.seconds,t.nanos)}convertDocumentKey(e,t){const r=de.fromString(e);ee(TD(r));const i=new ki(r.get(1),r.get(3)),s=new Y(r.popFirst(5));return i.isEqual(t)||rt(`Document ${s} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),s}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sf(n,e,t){let r;return r=n?t&&(t.merge||t.mergeFields)?n.toFirestore(e,t):n.toFirestore(e):e,r}class m2 extends E_{constructor(e){super(),this.firestore=e}convertBytes(e){return new lr(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new He(this.firestore,null,t)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fs{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}let Mr=class extends cu{constructor(e,t,r,i,s,o){super(e,t,r,i,o),this._firestore=e,this._firestoreImpl=e,this.metadata=s}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new Cl(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const r=this._document.data.field(Zh("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,t.serverTimestamps)}}},Cl=class extends Mr{data(e={}){return super.data(e)}},Ni=class{constructor(e,t,r,i){this._firestore=e,this._userDataWriter=t,this._snapshot=i,this.metadata=new fs(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){const e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,t){this._snapshot.docs.forEach(r=>{e.call(t,new Cl(this._firestore,this._userDataWriter,r.key,r,new fs(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new j(F.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(i,s){if(i._snapshot.oldDocs.isEmpty()){let o=0;return i._snapshot.docChanges.map(a=>{const l=new Cl(i._firestore,i._userDataWriter,a.doc.key,a.doc,new fs(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter);return a.doc,{type:"added",doc:l,oldIndex:-1,newIndex:o++}})}{let o=i._snapshot.oldDocs;return i._snapshot.docChanges.filter(a=>s||a.type!==3).map(a=>{const l=new Cl(i._firestore,i._userDataWriter,a.doc.key,a.doc,new fs(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter);let c=-1,d=-1;return a.type!==0&&(c=o.indexOf(a.doc.key),o=o.delete(a.doc.key)),a.type!==1&&(o=o.add(a.doc),d=o.indexOf(a.doc.key)),{type:g2(a.type),doc:l,oldIndex:c,newIndex:d}})}}(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}};function g2(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return X()}}function Ab(n,e){return n instanceof Mr&&e instanceof Mr?n._firestore===e._firestore&&n._key.isEqual(e._key)&&(n._document===null?e._document===null:n._document.isEqual(e._document))&&n._converter===e._converter:n instanceof Ni&&e instanceof Ni&&n._firestore===e._firestore&&_b(n.query,e.query)&&n.metadata.isEqual(e.metadata)&&n._snapshot.isEqual(e._snapshot)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function y2(n){n=_e(n,He);const e=_e(n.firestore,Ze);return lb(vt(e),n._key).then(t=>T_(e,n,t))}class Gs extends E_{constructor(e){super(),this.firestore=e}convertBytes(e){return new lr(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new He(this.firestore,null,t)}}function _2(n){n=_e(n,He);const e=_e(n.firestore,Ze),t=vt(e),r=new Gs(e);return FV(t,n._key).then(i=>new Mr(e,r,n._key,i,new fs(i!==null&&i.hasLocalMutations,!0),n.converter))}function v2(n){n=_e(n,He);const e=_e(n.firestore,Ze);return lb(vt(e),n._key,{source:"server"}).then(t=>T_(e,n,t))}function Nb(n){n=_e(n,Kt);const e=_e(n.firestore,Ze),t=vt(e),r=new Gs(e);return xb(n._query),ub(t,n._query).then(i=>new Ni(e,r,n,i))}function w2(n){n=_e(n,Kt);const e=_e(n.firestore,Ze),t=vt(e),r=new Gs(e);return BV(t,n._query).then(i=>new Ni(e,r,n,i))}function E2(n){n=_e(n,Kt);const e=_e(n.firestore,Ze),t=vt(e),r=new Gs(e);return ub(t,n._query,{source:"server"}).then(i=>new Ni(e,r,n,i))}function EE(n,e,t){n=_e(n,He);const r=_e(n.firestore,Ze),i=sf(n.converter,e,t);return Mu(r,[Jh(Qs(r),"setDoc",n._key,i,n.converter!==null,t).toMutation(n._key,Ue.none())])}function TE(n,e,t,...r){n=_e(n,He);const i=_e(n.firestore,Ze),s=Qs(i);let o;return o=typeof(e=Ee(e))=="string"||e instanceof Ai?m_(s,"updateDoc",n._key,e,t,r):p_(s,"updateDoc",n._key,e),Mu(i,[o.toMutation(n._key,Ue.exists(!0))])}function T2(n){return Mu(_e(n.firestore,Ze),[new Ia(n._key,Ue.none())])}function Mb(n,e){const t=_e(n.firestore,Ze),r=Jd(n),i=sf(n.converter,e);return Mu(t,[Jh(Qs(n.firestore),"addDoc",r._key,i,n.converter!==null,{}).toMutation(r._key,Ue.exists(!1))]).then(()=>r)}function Ob(n,...e){var t,r,i;n=Ee(n);let s={includeMetadataChanges:!1,source:"default"},o=0;typeof e[o]!="object"||rg(e[o])||(s=e[o],o++);const a={includeMetadataChanges:s.includeMetadataChanges,source:s.source};if(rg(e[o])){const h=e[o];e[o]=(t=h.next)===null||t===void 0?void 0:t.bind(h),e[o+1]=(r=h.error)===null||r===void 0?void 0:r.bind(h),e[o+2]=(i=h.complete)===null||i===void 0?void 0:i.bind(h)}let l,c,d;if(n instanceof He)c=_e(n.firestore,Ze),d=Ea(n._key.path),l={next:h=>{e[o]&&e[o](T_(c,n,h))},error:e[o+1],complete:e[o+2]};else{const h=_e(n,Kt);c=_e(h.firestore,Ze),d=h._query;const p=new Gs(c);l={next:g=>{e[o]&&e[o](new Ni(c,p,h,g))},error:e[o+1],complete:e[o+2]},xb(n._query)}return function(p,g,v,S){const D=new Hh(S),w=new Zy(g,D,v);return p.asyncQueue.enqueueAndForget(async()=>Gy(await aa(p),w)),()=>{D.$a(),p.asyncQueue.enqueueAndForget(async()=>Xy(await aa(p),w))}}(vt(c),d,a,l)}function I2(n,e){return UV(vt(n=_e(n,Ze)),rg(e)?e:{next:e})}function Mu(n,e){return function(r,i){const s=new yt;return r.asyncQueue.enqueueAndForget(async()=>pV(await l_(r),i,s)),s.promise}(vt(n),e)}function T_(n,e,t){const r=t.docs.get(e._key),i=new Gs(n);return new Mr(n,i,e._key,r,new fs(t.hasPendingWrites,t.fromCache),e.converter)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const S2={maxAttempts:5};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let D2=class{constructor(e,t){this._firestore=e,this._commitHandler=t,this._mutations=[],this._committed=!1,this._dataReader=Qs(e)}set(e,t,r){this._verifyNotCommitted();const i=ni(e,this._firestore),s=sf(i.converter,t,r),o=Jh(this._dataReader,"WriteBatch.set",i._key,s,i.converter!==null,r);return this._mutations.push(o.toMutation(i._key,Ue.none())),this}update(e,t,r,...i){this._verifyNotCommitted();const s=ni(e,this._firestore);let o;return o=typeof(t=Ee(t))=="string"||t instanceof Ai?m_(this._dataReader,"WriteBatch.update",s._key,t,r,i):p_(this._dataReader,"WriteBatch.update",s._key,t),this._mutations.push(o.toMutation(s._key,Ue.exists(!0))),this}delete(e){this._verifyNotCommitted();const t=ni(e,this._firestore);return this._mutations=this._mutations.concat(new Ia(t._key,Ue.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new j(F.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}};function ni(n,e){if((n=Ee(n)).firestore!==e)throw new j(F.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let b2=class extends class{constructor(t,r){this._firestore=t,this._transaction=r,this._dataReader=Qs(t)}get(t){const r=ni(t,this._firestore),i=new m2(this._firestore);return this._transaction.lookup([r._key]).then(s=>{if(!s||s.length!==1)return X();const o=s[0];if(o.isFoundDocument())return new cu(this._firestore,i,o.key,o,r.converter);if(o.isNoDocument())return new cu(this._firestore,i,r._key,null,r.converter);throw X()})}set(t,r,i){const s=ni(t,this._firestore),o=sf(s.converter,r,i),a=Jh(this._dataReader,"Transaction.set",s._key,o,s.converter!==null,i);return this._transaction.set(s._key,a),this}update(t,r,i,...s){const o=ni(t,this._firestore);let a;return a=typeof(r=Ee(r))=="string"||r instanceof Ai?m_(this._dataReader,"Transaction.update",o._key,r,i,s):p_(this._dataReader,"Transaction.update",o._key,r),this._transaction.update(o._key,a),this}delete(t){const r=ni(t,this._firestore);return this._transaction.delete(r._key),this}}{constructor(e,t){super(e,t),this._firestore=e}get(e){const t=ni(e,this._firestore),r=new Gs(this._firestore);return super.get(e).then(i=>new Mr(this._firestore,r,t._key,i._document,new fs(!1,!1),t.converter))}};function P2(n,e,t){n=_e(n,Ze);const r=Object.assign(Object.assign({},S2),t);return function(s){if(s.maxAttempts<1)throw new j(F.INVALID_ARGUMENT,"Max attempts must be at least 1")}(r),function(s,o,a){const l=new yt;return s.asyncQueue.enqueueAndForget(async()=>{const c=await OV(s);new NV(s.asyncQueue,c,a,o,l).Xa()}),l.promise}(vt(n),i=>e(new b2(n,i)),r)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function k2(){return new Au("deleteField")}function x2(){return new c_("serverTimestamp")}function C2(...n){return new d_("arrayUnion",n)}function R2(...n){return new h_("arrayRemove",n)}function A2(n){return new f_("increment",n)}(function(e,t=!0){(function(i){wa=i})(Lh),xs(new Ar("firestore",(r,{instanceIdentifier:i,options:s})=>{const o=r.getProvider("app").getImmediate(),a=new Ze(new jN(r.getProvider("auth-internal")),new WN(r.getProvider("app-check-internal")),function(c,d){if(!Object.prototype.hasOwnProperty.apply(c.options,["projectId"]))throw new j(F.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new ki(c.options.projectId,d)}(o,i),o);return s=Object.assign({useFetchStreams:t},s),a._setSettings(s),a},"PUBLIC").setMultipleInstances(!0)),Ln(m0,"4.6.3",e),Ln(m0,"4.6.3","esm2017")})();/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Vb="firebasestorage.googleapis.com",Lb="storageBucket",N2=2*60*1e3,M2=10*60*1e3,O2=1e3;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ke extends ji{constructor(e,t,r=0){super(Sp(e),`Firebase Storage: ${t} (${Sp(e)})`),this.status_=r,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,Ke.prototype)}get status(){return this.status_}set status(e){this.status_=e}_codeEquals(e){return Sp(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.customData.serverResponse?this.message=`${this._baseMessage}
${this.customData.serverResponse}`:this.message=this._baseMessage}}var Le;(function(n){n.UNKNOWN="unknown",n.OBJECT_NOT_FOUND="object-not-found",n.BUCKET_NOT_FOUND="bucket-not-found",n.PROJECT_NOT_FOUND="project-not-found",n.QUOTA_EXCEEDED="quota-exceeded",n.UNAUTHENTICATED="unauthenticated",n.UNAUTHORIZED="unauthorized",n.UNAUTHORIZED_APP="unauthorized-app",n.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",n.INVALID_CHECKSUM="invalid-checksum",n.CANCELED="canceled",n.INVALID_EVENT_NAME="invalid-event-name",n.INVALID_URL="invalid-url",n.INVALID_DEFAULT_BUCKET="invalid-default-bucket",n.NO_DEFAULT_BUCKET="no-default-bucket",n.CANNOT_SLICE_BLOB="cannot-slice-blob",n.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",n.NO_DOWNLOAD_URL="no-download-url",n.INVALID_ARGUMENT="invalid-argument",n.INVALID_ARGUMENT_COUNT="invalid-argument-count",n.APP_DELETED="app-deleted",n.INVALID_ROOT_OPERATION="invalid-root-operation",n.INVALID_FORMAT="invalid-format",n.INTERNAL_ERROR="internal-error",n.UNSUPPORTED_ENVIRONMENT="unsupported-environment"})(Le||(Le={}));function Sp(n){return"storage/"+n}function I_(){const n="An unknown error occurred, please check the error payload for server response.";return new Ke(Le.UNKNOWN,n)}function V2(n){return new Ke(Le.OBJECT_NOT_FOUND,"Object '"+n+"' does not exist.")}function L2(n){return new Ke(Le.QUOTA_EXCEEDED,"Quota for bucket '"+n+"' exceeded, please view quota on https://firebase.google.com/pricing/.")}function F2(){const n="User is not authenticated, please authenticate using Firebase Authentication and try again.";return new Ke(Le.UNAUTHENTICATED,n)}function B2(){return new Ke(Le.UNAUTHORIZED_APP,"This app does not have permission to access Firebase Storage on this project.")}function U2(n){return new Ke(Le.UNAUTHORIZED,"User does not have permission to access '"+n+"'.")}function Fb(){return new Ke(Le.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function Bb(){return new Ke(Le.CANCELED,"User canceled the upload/download.")}function j2(n){return new Ke(Le.INVALID_URL,"Invalid URL '"+n+"'.")}function $2(n){return new Ke(Le.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+n+"'.")}function z2(){return new Ke(Le.NO_DEFAULT_BUCKET,"No default bucket found. Did you set the '"+Lb+"' property when initializing the app?")}function Ub(){return new Ke(Le.CANNOT_SLICE_BLOB,"Cannot slice blob for upload. Please retry the upload.")}function q2(){return new Ke(Le.SERVER_FILE_WRONG_SIZE,"Server recorded incorrect upload file size, please retry the upload.")}function W2(){return new Ke(Le.NO_DOWNLOAD_URL,"The given file does not have any download URLs.")}function Y2(n){return new Ke(Le.UNSUPPORTED_ENVIRONMENT,`${n} is missing. Make sure to install the required polyfills. See https://firebase.google.com/docs/web/environments-js-sdk#polyfills for more information.`)}function Vo(n){return new Ke(Le.INVALID_ARGUMENT,n)}function jb(){return new Ke(Le.APP_DELETED,"The Firebase app was deleted.")}function $b(n){return new Ke(Le.INVALID_ROOT_OPERATION,"The operation '"+n+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function Rl(n,e){return new Ke(Le.INVALID_FORMAT,"String does not match format '"+n+"': "+e)}function rl(n){throw new Ke(Le.INTERNAL_ERROR,"Internal error: "+n)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mt{constructor(e,t){this.bucket=e,this.path_=t}get path(){return this.path_}get isRoot(){return this.path.length===0}fullServerUrl(){const e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,t){let r;try{r=Mt.makeFromUrl(e,t)}catch{return new Mt(e,"")}if(r.path==="")return r;throw $2(e)}static makeFromUrl(e,t){let r=null;const i="([A-Za-z0-9.\\-_]+)";function s(x){x.path.charAt(x.path.length-1)==="/"&&(x.path_=x.path_.slice(0,-1))}const o="(/(.*))?$",a=new RegExp("^gs://"+i+o,"i"),l={bucket:1,path:3};function c(x){x.path_=decodeURIComponent(x.path)}const d="v[A-Za-z0-9_]+",h=t.replace(/[.]/g,"\\."),p="(/([^?#]*).*)?$",g=new RegExp(`^https?://${h}/${d}/b/${i}/o${p}`,"i"),v={bucket:1,path:3},S=t===Vb?"(?:storage.googleapis.com|storage.cloud.google.com)":t,D="([^?#]*)",w=new RegExp(`^https?://${S}/${i}/${D}`,"i"),E=[{regex:a,indices:l,postModify:s},{regex:g,indices:v,postModify:c},{regex:w,indices:{bucket:1,path:2},postModify:c}];for(let x=0;x<E.length;x++){const A=E[x],L=A.regex.exec(e);if(L){const I=L[A.indices.bucket];let y=L[A.indices.path];y||(y=""),r=new Mt(I,y),A.postModify(r);break}}if(r==null)throw j2(e);return r}}class H2{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(e=!1){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Q2(n,e,t){let r=1,i=null,s=null,o=!1,a=0;function l(){return a===2}let c=!1;function d(...D){c||(c=!0,e.apply(null,D))}function h(D){i=setTimeout(()=>{i=null,n(g,l())},D)}function p(){s&&clearTimeout(s)}function g(D,...w){if(c){p();return}if(D){p(),d.call(null,D,...w);return}if(l()||o){p(),d.call(null,D,...w);return}r<64&&(r*=2);let E;a===1?(a=2,E=0):E=(r+Math.random())*1e3,h(E)}let v=!1;function S(D){v||(v=!0,p(),!c&&(i!==null?(D||(a=2),clearTimeout(i),h(0)):D||(a=1)))}return h(0),s=setTimeout(()=>{o=!0,S(!0)},t),S}function K2(n){n(!1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function G2(n){return n!==void 0}function X2(n){return typeof n=="function"}function J2(n){return typeof n=="object"&&!Array.isArray(n)}function of(n){return typeof n=="string"||n instanceof String}function IE(n){return S_()&&n instanceof Blob}function S_(){return typeof Blob<"u"}function sg(n,e,t,r){if(r<e)throw Vo(`Invalid value for '${n}'. Expected ${e} or greater.`);if(r>t)throw Vo(`Invalid value for '${n}'. Expected ${t} or less.`)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Yi(n,e,t){let r=e;return t==null&&(r=`https://${e}`),`${t}://${r}/v0${n}`}function zb(n){const e=encodeURIComponent;let t="?";for(const r in n)if(n.hasOwnProperty(r)){const i=e(r)+"="+e(n[r]);t=t+i+"&"}return t=t.slice(0,-1),t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var vs;(function(n){n[n.NO_ERROR=0]="NO_ERROR",n[n.NETWORK_ERROR=1]="NETWORK_ERROR",n[n.ABORT=2]="ABORT"})(vs||(vs={}));/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qb(n,e){const t=n>=500&&n<600,i=[408,429].indexOf(n)!==-1,s=e.indexOf(n)!==-1;return t||i||s}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Z2{constructor(e,t,r,i,s,o,a,l,c,d,h,p=!0){this.url_=e,this.method_=t,this.headers_=r,this.body_=i,this.successCodes_=s,this.additionalRetryCodes_=o,this.callback_=a,this.errorCallback_=l,this.timeout_=c,this.progressCallback_=d,this.connectionFactory_=h,this.retry=p,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((g,v)=>{this.resolve_=g,this.reject_=v,this.start_()})}start_(){const e=(r,i)=>{if(i){r(!1,new bc(!1,null,!0));return}const s=this.connectionFactory_();this.pendingConnection_=s;const o=a=>{const l=a.loaded,c=a.lengthComputable?a.total:-1;this.progressCallback_!==null&&this.progressCallback_(l,c)};this.progressCallback_!==null&&s.addUploadProgressListener(o),s.send(this.url_,this.method_,this.body_,this.headers_).then(()=>{this.progressCallback_!==null&&s.removeUploadProgressListener(o),this.pendingConnection_=null;const a=s.getErrorCode()===vs.NO_ERROR,l=s.getStatus();if(!a||qb(l,this.additionalRetryCodes_)&&this.retry){const d=s.getErrorCode()===vs.ABORT;r(!1,new bc(!1,null,d));return}const c=this.successCodes_.indexOf(l)!==-1;r(!0,new bc(c,s))})},t=(r,i)=>{const s=this.resolve_,o=this.reject_,a=i.connection;if(i.wasSuccessCode)try{const l=this.callback_(a,a.getResponse());G2(l)?s(l):s()}catch(l){o(l)}else if(a!==null){const l=I_();l.serverResponse=a.getErrorText(),this.errorCallback_?o(this.errorCallback_(a,l)):o(l)}else if(i.canceled){const l=this.appDelete_?jb():Bb();o(l)}else{const l=Fb();o(l)}};this.canceled_?t(!1,new bc(!1,null,!0)):this.backoffId_=Q2(e,t,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,this.backoffId_!==null&&K2(this.backoffId_),this.pendingConnection_!==null&&this.pendingConnection_.abort()}}class bc{constructor(e,t,r){this.wasSuccessCode=e,this.connection=t,this.canceled=!!r}}function eL(n,e){e!==null&&e.length>0&&(n.Authorization="Firebase "+e)}function tL(n,e){n["X-Firebase-Storage-Version"]="webjs/"+(e??"AppManager")}function nL(n,e){e&&(n["X-Firebase-GMPID"]=e)}function rL(n,e){e!==null&&(n["X-Firebase-AppCheck"]=e)}function iL(n,e,t,r,i,s,o=!0){const a=zb(n.urlParams),l=n.url+a,c=Object.assign({},n.headers);return nL(c,e),eL(c,t),tL(c,s),rL(c,r),new Z2(l,n.method,c,n.body,n.successCodes,n.additionalRetryCodes,n.handler,n.errorHandler,n.timeout,n.progressCallback,i,o)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sL(){return typeof BlobBuilder<"u"?BlobBuilder:typeof WebKitBlobBuilder<"u"?WebKitBlobBuilder:void 0}function oL(...n){const e=sL();if(e!==void 0){const t=new e;for(let r=0;r<n.length;r++)t.append(n[r]);return t.getBlob()}else{if(S_())return new Blob(n);throw new Ke(Le.UNSUPPORTED_ENVIRONMENT,"This browser doesn't seem to support creating Blobs")}}function aL(n,e,t){return n.webkitSlice?n.webkitSlice(e,t):n.mozSlice?n.mozSlice(e,t):n.slice?n.slice(e,t):null}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lL(n){if(typeof atob>"u")throw Y2("base-64");return atob(n)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Tn={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"};class Dp{constructor(e,t){this.data=e,this.contentType=t||null}}function Wb(n,e){switch(n){case Tn.RAW:return new Dp(Yb(e));case Tn.BASE64:case Tn.BASE64URL:return new Dp(Hb(n,e));case Tn.DATA_URL:return new Dp(cL(e),dL(e))}throw I_()}function Yb(n){const e=[];for(let t=0;t<n.length;t++){let r=n.charCodeAt(t);if(r<=127)e.push(r);else if(r<=2047)e.push(192|r>>6,128|r&63);else if((r&64512)===55296)if(!(t<n.length-1&&(n.charCodeAt(t+1)&64512)===56320))e.push(239,191,189);else{const s=r,o=n.charCodeAt(++t);r=65536|(s&1023)<<10|o&1023,e.push(240|r>>18,128|r>>12&63,128|r>>6&63,128|r&63)}else(r&64512)===56320?e.push(239,191,189):e.push(224|r>>12,128|r>>6&63,128|r&63)}return new Uint8Array(e)}function uL(n){let e;try{e=decodeURIComponent(n)}catch{throw Rl(Tn.DATA_URL,"Malformed data URL.")}return Yb(e)}function Hb(n,e){switch(n){case Tn.BASE64:{const i=e.indexOf("-")!==-1,s=e.indexOf("_")!==-1;if(i||s)throw Rl(n,"Invalid character '"+(i?"-":"_")+"' found: is it base64url encoded?");break}case Tn.BASE64URL:{const i=e.indexOf("+")!==-1,s=e.indexOf("/")!==-1;if(i||s)throw Rl(n,"Invalid character '"+(i?"+":"/")+"' found: is it base64 encoded?");e=e.replace(/-/g,"+").replace(/_/g,"/");break}}let t;try{t=lL(e)}catch(i){throw i.message.includes("polyfill")?i:Rl(n,"Invalid character found")}const r=new Uint8Array(t.length);for(let i=0;i<t.length;i++)r[i]=t.charCodeAt(i);return r}class Qb{constructor(e){this.base64=!1,this.contentType=null;const t=e.match(/^data:([^,]+)?,/);if(t===null)throw Rl(Tn.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");const r=t[1]||null;r!=null&&(this.base64=hL(r,";base64"),this.contentType=this.base64?r.substring(0,r.length-7):r),this.rest=e.substring(e.indexOf(",")+1)}}function cL(n){const e=new Qb(n);return e.base64?Hb(Tn.BASE64,e.rest):uL(e.rest)}function dL(n){return new Qb(n).contentType}function hL(n,e){return n.length>=e.length?n.substring(n.length-e.length)===e:!1}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yn{constructor(e,t){let r=0,i="";IE(e)?(this.data_=e,r=e.size,i=e.type):e instanceof ArrayBuffer?(t?this.data_=new Uint8Array(e):(this.data_=new Uint8Array(e.byteLength),this.data_.set(new Uint8Array(e))),r=this.data_.length):e instanceof Uint8Array&&(t?this.data_=e:(this.data_=new Uint8Array(e.length),this.data_.set(e)),r=e.length),this.size_=r,this.type_=i}size(){return this.size_}type(){return this.type_}slice(e,t){if(IE(this.data_)){const r=this.data_,i=aL(r,e,t);return i===null?null:new Yn(i)}else{const r=new Uint8Array(this.data_.buffer,e,t-e);return new Yn(r,!0)}}static getBlob(...e){if(S_()){const t=e.map(r=>r instanceof Yn?r.data_:r);return new Yn(oL.apply(null,t))}else{const t=e.map(o=>of(o)?Wb(Tn.RAW,o).data:o.data_);let r=0;t.forEach(o=>{r+=o.byteLength});const i=new Uint8Array(r);let s=0;return t.forEach(o=>{for(let a=0;a<o.length;a++)i[s++]=o[a]}),new Yn(i,!0)}}uploadData(){return this.data_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function D_(n){let e;try{e=JSON.parse(n)}catch{return null}return J2(e)?e:null}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fL(n){if(n.length===0)return null;const e=n.lastIndexOf("/");return e===-1?"":n.slice(0,e)}function pL(n,e){const t=e.split("/").filter(r=>r.length>0).join("/");return n.length===0?t:n+"/"+t}function Kb(n){const e=n.lastIndexOf("/",n.length-2);return e===-1?n:n.slice(e+1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mL(n,e){return e}class Ft{constructor(e,t,r,i){this.server=e,this.local=t||e,this.writable=!!r,this.xform=i||mL}}let Pc=null;function gL(n){return!of(n)||n.length<2?n:Kb(n)}function Ou(){if(Pc)return Pc;const n=[];n.push(new Ft("bucket")),n.push(new Ft("generation")),n.push(new Ft("metageneration")),n.push(new Ft("name","fullPath",!0));function e(s,o){return gL(o)}const t=new Ft("name");t.xform=e,n.push(t);function r(s,o){return o!==void 0?Number(o):o}const i=new Ft("size");return i.xform=r,n.push(i),n.push(new Ft("timeCreated")),n.push(new Ft("updated")),n.push(new Ft("md5Hash",null,!0)),n.push(new Ft("cacheControl",null,!0)),n.push(new Ft("contentDisposition",null,!0)),n.push(new Ft("contentEncoding",null,!0)),n.push(new Ft("contentLanguage",null,!0)),n.push(new Ft("contentType",null,!0)),n.push(new Ft("metadata","customMetadata",!0)),Pc=n,Pc}function yL(n,e){function t(){const r=n.bucket,i=n.fullPath,s=new Mt(r,i);return e._makeStorageReference(s)}Object.defineProperty(n,"ref",{get:t})}function _L(n,e,t){const r={};r.type="file";const i=t.length;for(let s=0;s<i;s++){const o=t[s];r[o.local]=o.xform(r,e[o.server])}return yL(r,n),r}function Gb(n,e,t){const r=D_(e);return r===null?null:_L(n,r,t)}function vL(n,e,t,r){const i=D_(e);if(i===null||!of(i.downloadTokens))return null;const s=i.downloadTokens;if(s.length===0)return null;const o=encodeURIComponent;return s.split(",").map(c=>{const d=n.bucket,h=n.fullPath,p="/b/"+o(d)+"/o/"+o(h),g=Yi(p,t,r),v=zb({alt:"media",token:c});return g+v})[0]}function b_(n,e){const t={},r=e.length;for(let i=0;i<r;i++){const s=e[i];s.writable&&(t[s.server]=n[s.local])}return JSON.stringify(t)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const SE="prefixes",DE="items";function wL(n,e,t){const r={prefixes:[],items:[],nextPageToken:t.nextPageToken};if(t[SE])for(const i of t[SE]){const s=i.replace(/\/$/,""),o=n._makeStorageReference(new Mt(e,s));r.prefixes.push(o)}if(t[DE])for(const i of t[DE]){const s=n._makeStorageReference(new Mt(e,i.name));r.items.push(s)}return r}function EL(n,e,t){const r=D_(t);return r===null?null:wL(n,e,r)}class jr{constructor(e,t,r,i){this.url=e,this.method=t,this.handler=r,this.timeout=i,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ir(n){if(!n)throw I_()}function af(n,e){function t(r,i){const s=Gb(n,i,e);return ir(s!==null),s}return t}function TL(n,e){function t(r,i){const s=EL(n,e,i);return ir(s!==null),s}return t}function IL(n,e){function t(r,i){const s=Gb(n,i,e);return ir(s!==null),vL(s,i,n.host,n._protocol)}return t}function ka(n){function e(t,r){let i;return t.getStatus()===401?t.getErrorText().includes("Firebase App Check token is invalid")?i=B2():i=F2():t.getStatus()===402?i=L2(n.bucket):t.getStatus()===403?i=U2(n.path):i=r,i.status=t.getStatus(),i.serverResponse=r.serverResponse,i}return e}function lf(n){const e=ka(n);function t(r,i){let s=e(r,i);return r.getStatus()===404&&(s=V2(n.path)),s.serverResponse=i.serverResponse,s}return t}function Xb(n,e,t){const r=e.fullServerUrl(),i=Yi(r,n.host,n._protocol),s="GET",o=n.maxOperationRetryTime,a=new jr(i,s,af(n,t),o);return a.errorHandler=lf(e),a}function SL(n,e,t,r,i){const s={};e.isRoot?s.prefix="":s.prefix=e.path+"/",t.length>0&&(s.delimiter=t),r&&(s.pageToken=r),i&&(s.maxResults=i);const o=e.bucketOnlyServerUrl(),a=Yi(o,n.host,n._protocol),l="GET",c=n.maxOperationRetryTime,d=new jr(a,l,TL(n,e.bucket),c);return d.urlParams=s,d.errorHandler=ka(e),d}function DL(n,e,t){const r=e.fullServerUrl(),i=Yi(r,n.host,n._protocol),s="GET",o=n.maxOperationRetryTime,a=new jr(i,s,IL(n,t),o);return a.errorHandler=lf(e),a}function bL(n,e,t,r){const i=e.fullServerUrl(),s=Yi(i,n.host,n._protocol),o="PATCH",a=b_(t,r),l={"Content-Type":"application/json; charset=utf-8"},c=n.maxOperationRetryTime,d=new jr(s,o,af(n,r),c);return d.headers=l,d.body=a,d.errorHandler=lf(e),d}function PL(n,e){const t=e.fullServerUrl(),r=Yi(t,n.host,n._protocol),i="DELETE",s=n.maxOperationRetryTime;function o(l,c){}const a=new jr(r,i,o,s);return a.successCodes=[200,204],a.errorHandler=lf(e),a}function kL(n,e){return n&&n.contentType||e&&e.type()||"application/octet-stream"}function Jb(n,e,t){const r=Object.assign({},t);return r.fullPath=n.path,r.size=e.size(),r.contentType||(r.contentType=kL(null,e)),r}function Zb(n,e,t,r,i){const s=e.bucketOnlyServerUrl(),o={"X-Goog-Upload-Protocol":"multipart"};function a(){let E="";for(let x=0;x<2;x++)E=E+Math.random().toString().slice(2);return E}const l=a();o["Content-Type"]="multipart/related; boundary="+l;const c=Jb(e,r,i),d=b_(c,t),h="--"+l+`\r
Content-Type: application/json; charset=utf-8\r
\r
`+d+`\r
--`+l+`\r
Content-Type: `+c.contentType+`\r
\r
`,p=`\r
--`+l+"--",g=Yn.getBlob(h,r,p);if(g===null)throw Ub();const v={name:c.fullPath},S=Yi(s,n.host,n._protocol),D="POST",w=n.maxUploadRetryTime,_=new jr(S,D,af(n,t),w);return _.urlParams=v,_.headers=o,_.body=g.uploadData(),_.errorHandler=ka(e),_}class eh{constructor(e,t,r,i){this.current=e,this.total=t,this.finalized=!!r,this.metadata=i||null}}function P_(n,e){let t=null;try{t=n.getResponseHeader("X-Goog-Upload-Status")}catch{ir(!1)}return ir(!!t&&(e||["active"]).indexOf(t)!==-1),t}function xL(n,e,t,r,i){const s=e.bucketOnlyServerUrl(),o=Jb(e,r,i),a={name:o.fullPath},l=Yi(s,n.host,n._protocol),c="POST",d={"X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":`${r.size()}`,"X-Goog-Upload-Header-Content-Type":o.contentType,"Content-Type":"application/json; charset=utf-8"},h=b_(o,t),p=n.maxUploadRetryTime;function g(S){P_(S);let D;try{D=S.getResponseHeader("X-Goog-Upload-URL")}catch{ir(!1)}return ir(of(D)),D}const v=new jr(l,c,g,p);return v.urlParams=a,v.headers=d,v.body=h,v.errorHandler=ka(e),v}function CL(n,e,t,r){const i={"X-Goog-Upload-Command":"query"};function s(c){const d=P_(c,["active","final"]);let h=null;try{h=c.getResponseHeader("X-Goog-Upload-Size-Received")}catch{ir(!1)}h||ir(!1);const p=Number(h);return ir(!isNaN(p)),new eh(p,r.size(),d==="final")}const o="POST",a=n.maxUploadRetryTime,l=new jr(t,o,s,a);return l.headers=i,l.errorHandler=ka(e),l}const bE=256*1024;function RL(n,e,t,r,i,s,o,a){const l=new eh(0,0);if(o?(l.current=o.current,l.total=o.total):(l.current=0,l.total=r.size()),r.size()!==l.total)throw q2();const c=l.total-l.current;let d=c;i>0&&(d=Math.min(d,i));const h=l.current,p=h+d;let g="";d===0?g="finalize":c===d?g="upload, finalize":g="upload";const v={"X-Goog-Upload-Command":g,"X-Goog-Upload-Offset":`${l.current}`},S=r.slice(h,p);if(S===null)throw Ub();function D(x,A){const L=P_(x,["active","final"]),I=l.current+d,y=r.size();let b;return L==="final"?b=af(e,s)(x,A):b=null,new eh(I,y,L==="final",b)}const w="POST",_=e.maxUploadRetryTime,E=new jr(t,w,D,_);return E.headers=v,E.body=S.uploadData(),E.progressCallback=a||null,E.errorHandler=ka(n),E}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const AL={STATE_CHANGED:"state_changed"},jt={RUNNING:"running",PAUSED:"paused",SUCCESS:"success",CANCELED:"canceled",ERROR:"error"};function bp(n){switch(n){case"running":case"pausing":case"canceling":return jt.RUNNING;case"paused":return jt.PAUSED;case"success":return jt.SUCCESS;case"canceled":return jt.CANCELED;case"error":return jt.ERROR;default:return jt.ERROR}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class NL{constructor(e,t,r){if(X2(e)||t!=null||r!=null)this.next=e,this.error=t??void 0,this.complete=r??void 0;else{const s=e;this.next=s.next,this.error=s.error,this.complete=s.complete}}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ao(n){return(...e)=>{Promise.resolve().then(()=>n(...e))}}class ML{constructor(){this.sent_=!1,this.xhr_=new XMLHttpRequest,this.initXhr(),this.errorCode_=vs.NO_ERROR,this.sendPromise_=new Promise(e=>{this.xhr_.addEventListener("abort",()=>{this.errorCode_=vs.ABORT,e()}),this.xhr_.addEventListener("error",()=>{this.errorCode_=vs.NETWORK_ERROR,e()}),this.xhr_.addEventListener("load",()=>{e()})})}send(e,t,r,i){if(this.sent_)throw rl("cannot .send() more than once");if(this.sent_=!0,this.xhr_.open(t,e,!0),i!==void 0)for(const s in i)i.hasOwnProperty(s)&&this.xhr_.setRequestHeader(s,i[s].toString());return r!==void 0?this.xhr_.send(r):this.xhr_.send(),this.sendPromise_}getErrorCode(){if(!this.sent_)throw rl("cannot .getErrorCode() before sending");return this.errorCode_}getStatus(){if(!this.sent_)throw rl("cannot .getStatus() before sending");try{return this.xhr_.status}catch{return-1}}getResponse(){if(!this.sent_)throw rl("cannot .getResponse() before sending");return this.xhr_.response}getErrorText(){if(!this.sent_)throw rl("cannot .getErrorText() before sending");return this.xhr_.statusText}abort(){this.xhr_.abort()}getResponseHeader(e){return this.xhr_.getResponseHeader(e)}addUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.addEventListener("progress",e)}removeUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.removeEventListener("progress",e)}}class OL extends ML{initXhr(){this.xhr_.responseType="text"}}function Mn(){return new OL}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eP{constructor(e,t,r=null){this._transferred=0,this._needToFetchStatus=!1,this._needToFetchMetadata=!1,this._observers=[],this._error=void 0,this._uploadUrl=void 0,this._request=void 0,this._chunkMultiplier=1,this._resolve=void 0,this._reject=void 0,this._ref=e,this._blob=t,this._metadata=r,this._mappings=Ou(),this._resumable=this._shouldDoResumable(this._blob),this._state="running",this._errorHandler=i=>{if(this._request=void 0,this._chunkMultiplier=1,i._codeEquals(Le.CANCELED))this._needToFetchStatus=!0,this.completeTransitions_();else{const s=this.isExponentialBackoffExpired();if(qb(i.status,[]))if(s)i=Fb();else{this.sleepTime=Math.max(this.sleepTime*2,O2),this._needToFetchStatus=!0,this.completeTransitions_();return}this._error=i,this._transition("error")}},this._metadataErrorHandler=i=>{this._request=void 0,i._codeEquals(Le.CANCELED)?this.completeTransitions_():(this._error=i,this._transition("error"))},this.sleepTime=0,this.maxSleepTime=this._ref.storage.maxUploadRetryTime,this._promise=new Promise((i,s)=>{this._resolve=i,this._reject=s,this._start()}),this._promise.then(null,()=>{})}isExponentialBackoffExpired(){return this.sleepTime>this.maxSleepTime}_makeProgressCallback(){const e=this._transferred;return t=>this._updateProgress(e+t)}_shouldDoResumable(e){return e.size()>256*1024}_start(){this._state==="running"&&this._request===void 0&&(this._resumable?this._uploadUrl===void 0?this._createResumable():this._needToFetchStatus?this._fetchStatus():this._needToFetchMetadata?this._fetchMetadata():this.pendingTimeout=setTimeout(()=>{this.pendingTimeout=void 0,this._continueUpload()},this.sleepTime):this._oneShotUpload())}_resolveToken(e){Promise.all([this._ref.storage._getAuthToken(),this._ref.storage._getAppCheckToken()]).then(([t,r])=>{switch(this._state){case"running":e(t,r);break;case"canceling":this._transition("canceled");break;case"pausing":this._transition("paused");break}})}_createResumable(){this._resolveToken((e,t)=>{const r=xL(this._ref.storage,this._ref._location,this._mappings,this._blob,this._metadata),i=this._ref.storage._makeRequest(r,Mn,e,t);this._request=i,i.getPromise().then(s=>{this._request=void 0,this._uploadUrl=s,this._needToFetchStatus=!1,this.completeTransitions_()},this._errorHandler)})}_fetchStatus(){const e=this._uploadUrl;this._resolveToken((t,r)=>{const i=CL(this._ref.storage,this._ref._location,e,this._blob),s=this._ref.storage._makeRequest(i,Mn,t,r);this._request=s,s.getPromise().then(o=>{o=o,this._request=void 0,this._updateProgress(o.current),this._needToFetchStatus=!1,o.finalized&&(this._needToFetchMetadata=!0),this.completeTransitions_()},this._errorHandler)})}_continueUpload(){const e=bE*this._chunkMultiplier,t=new eh(this._transferred,this._blob.size()),r=this._uploadUrl;this._resolveToken((i,s)=>{let o;try{o=RL(this._ref._location,this._ref.storage,r,this._blob,e,this._mappings,t,this._makeProgressCallback())}catch(l){this._error=l,this._transition("error");return}const a=this._ref.storage._makeRequest(o,Mn,i,s,!1);this._request=a,a.getPromise().then(l=>{this._increaseMultiplier(),this._request=void 0,this._updateProgress(l.current),l.finalized?(this._metadata=l.metadata,this._transition("success")):this.completeTransitions_()},this._errorHandler)})}_increaseMultiplier(){bE*this._chunkMultiplier*2<32*1024*1024&&(this._chunkMultiplier*=2)}_fetchMetadata(){this._resolveToken((e,t)=>{const r=Xb(this._ref.storage,this._ref._location,this._mappings),i=this._ref.storage._makeRequest(r,Mn,e,t);this._request=i,i.getPromise().then(s=>{this._request=void 0,this._metadata=s,this._transition("success")},this._metadataErrorHandler)})}_oneShotUpload(){this._resolveToken((e,t)=>{const r=Zb(this._ref.storage,this._ref._location,this._mappings,this._blob,this._metadata),i=this._ref.storage._makeRequest(r,Mn,e,t);this._request=i,i.getPromise().then(s=>{this._request=void 0,this._metadata=s,this._updateProgress(this._blob.size()),this._transition("success")},this._errorHandler)})}_updateProgress(e){const t=this._transferred;this._transferred=e,this._transferred!==t&&this._notifyObservers()}_transition(e){if(this._state!==e)switch(e){case"canceling":case"pausing":this._state=e,this._request!==void 0?this._request.cancel():this.pendingTimeout&&(clearTimeout(this.pendingTimeout),this.pendingTimeout=void 0,this.completeTransitions_());break;case"running":const t=this._state==="paused";this._state=e,t&&(this._notifyObservers(),this._start());break;case"paused":this._state=e,this._notifyObservers();break;case"canceled":this._error=Bb(),this._state=e,this._notifyObservers();break;case"error":this._state=e,this._notifyObservers();break;case"success":this._state=e,this._notifyObservers();break}}completeTransitions_(){switch(this._state){case"pausing":this._transition("paused");break;case"canceling":this._transition("canceled");break;case"running":this._start();break}}get snapshot(){const e=bp(this._state);return{bytesTransferred:this._transferred,totalBytes:this._blob.size(),state:e,metadata:this._metadata,task:this,ref:this._ref}}on(e,t,r,i){const s=new NL(t||void 0,r||void 0,i||void 0);return this._addObserver(s),()=>{this._removeObserver(s)}}then(e,t){return this._promise.then(e,t)}catch(e){return this.then(null,e)}_addObserver(e){this._observers.push(e),this._notifyObserver(e)}_removeObserver(e){const t=this._observers.indexOf(e);t!==-1&&this._observers.splice(t,1)}_notifyObservers(){this._finishPromise(),this._observers.slice().forEach(t=>{this._notifyObserver(t)})}_finishPromise(){if(this._resolve!==void 0){let e=!0;switch(bp(this._state)){case jt.SUCCESS:ao(this._resolve.bind(null,this.snapshot))();break;case jt.CANCELED:case jt.ERROR:const t=this._reject;ao(t.bind(null,this._error))();break;default:e=!1;break}e&&(this._resolve=void 0,this._reject=void 0)}}_notifyObserver(e){switch(bp(this._state)){case jt.RUNNING:case jt.PAUSED:e.next&&ao(e.next.bind(e,this.snapshot))();break;case jt.SUCCESS:e.complete&&ao(e.complete.bind(e))();break;case jt.CANCELED:case jt.ERROR:e.error&&ao(e.error.bind(e,this._error))();break;default:e.error&&ao(e.error.bind(e,this._error))()}}resume(){const e=this._state==="paused"||this._state==="pausing";return e&&this._transition("running"),e}pause(){const e=this._state==="running";return e&&this._transition("pausing"),e}cancel(){const e=this._state==="running"||this._state==="pausing";return e&&this._transition("canceling"),e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fs{constructor(e,t){this._service=e,t instanceof Mt?this._location=t:this._location=Mt.makeFromUrl(t,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,t){return new Fs(e,t)}get root(){const e=new Mt(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return Kb(this._location.path)}get storage(){return this._service}get parent(){const e=fL(this._location.path);if(e===null)return null;const t=new Mt(this._location.bucket,e);return new Fs(this._service,t)}_throwIfRoot(e){if(this._location.path==="")throw $b(e)}}function VL(n,e,t){n._throwIfRoot("uploadBytes");const r=Zb(n.storage,n._location,Ou(),new Yn(e,!0),t);return n.storage.makeRequestWithTokens(r,Mn).then(i=>({metadata:i,ref:n}))}function LL(n,e,t){return n._throwIfRoot("uploadBytesResumable"),new eP(n,new Yn(e),t)}function FL(n){const e={prefixes:[],items:[]};return tP(n,e).then(()=>e)}async function tP(n,e,t){const i=await nP(n,{pageToken:t});e.prefixes.push(...i.prefixes),e.items.push(...i.items),i.nextPageToken!=null&&await tP(n,e,i.nextPageToken)}function nP(n,e){e!=null&&typeof e.maxResults=="number"&&sg("options.maxResults",1,1e3,e.maxResults);const t=e||{},r=SL(n.storage,n._location,"/",t.pageToken,t.maxResults);return n.storage.makeRequestWithTokens(r,Mn)}function BL(n){n._throwIfRoot("getMetadata");const e=Xb(n.storage,n._location,Ou());return n.storage.makeRequestWithTokens(e,Mn)}function UL(n,e){n._throwIfRoot("updateMetadata");const t=bL(n.storage,n._location,e,Ou());return n.storage.makeRequestWithTokens(t,Mn)}function jL(n){n._throwIfRoot("getDownloadURL");const e=DL(n.storage,n._location,Ou());return n.storage.makeRequestWithTokens(e,Mn).then(t=>{if(t===null)throw W2();return t})}function $L(n){n._throwIfRoot("deleteObject");const e=PL(n.storage,n._location);return n.storage.makeRequestWithTokens(e,Mn)}function rP(n,e){const t=pL(n._location.path,e),r=new Mt(n._location.bucket,t);return new Fs(n.storage,r)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zL(n){return/^[A-Za-z]+:\/\//.test(n)}function qL(n,e){return new Fs(n,e)}function iP(n,e){if(n instanceof k_){const t=n;if(t._bucket==null)throw z2();const r=new Fs(t,t._bucket);return e!=null?iP(r,e):r}else return e!==void 0?rP(n,e):n}function WL(n,e){if(e&&zL(e)){if(n instanceof k_)return qL(n,e);throw Vo("To use ref(service, url), the first argument must be a Storage instance.")}else return iP(n,e)}function PE(n,e){const t=e==null?void 0:e[Lb];return t==null?null:Mt.makeFromBucketSpec(t,n)}function YL(n,e,t,r={}){n.host=`${e}:${t}`,n._protocol="http";const{mockUserToken:i}=r;i&&(n._overrideAuthToken=typeof i=="string"?i:XS(i,n.app.options.projectId))}class k_{constructor(e,t,r,i,s){this.app=e,this._authProvider=t,this._appCheckProvider=r,this._url=i,this._firebaseVersion=s,this._bucket=null,this._host=Vb,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=N2,this._maxUploadRetryTime=M2,this._requests=new Set,i!=null?this._bucket=Mt.makeFromBucketSpec(i,this._host):this._bucket=PE(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,this._url!=null?this._bucket=Mt.makeFromBucketSpec(this._url,e):this._bucket=PE(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){sg("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){sg("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}async _getAuthToken(){if(this._overrideAuthToken)return this._overrideAuthToken;const e=this._authProvider.getImmediate({optional:!0});if(e){const t=await e.getToken();if(t!==null)return t.accessToken}return null}async _getAppCheckToken(){const e=this._appCheckProvider.getImmediate({optional:!0});return e?(await e.getToken()).token:null}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(e=>e.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new Fs(this,e)}_makeRequest(e,t,r,i,s=!0){if(this._deleted)return new H2(jb());{const o=iL(e,this._appId,r,i,t,this._firebaseVersion,s);return this._requests.add(o),o.getPromise().then(()=>this._requests.delete(o),()=>this._requests.delete(o)),o}}async makeRequestWithTokens(e,t){const[r,i]=await Promise.all([this._getAuthToken(),this._getAppCheckToken()]);return this._makeRequest(e,t,r,i).getPromise()}}const kE="@firebase/storage",xE="0.12.5";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sP="storage";function HL(n,e,t){return n=Ee(n),VL(n,e,t)}function QL(n,e,t){return n=Ee(n),LL(n,e,t)}function KL(n){return n=Ee(n),BL(n)}function GL(n,e){return n=Ee(n),UL(n,e)}function XL(n,e){return n=Ee(n),nP(n,e)}function JL(n){return n=Ee(n),FL(n)}function oP(n){return n=Ee(n),jL(n)}function ZL(n){return n=Ee(n),$L(n)}function og(n,e){return n=Ee(n),WL(n,e)}function eF(n,e){return rP(n,e)}function tF(n=Ty(),e){n=Ee(n);const r=Vh(n,sP).getImmediate({identifier:e}),i=KS("storage");return i&&aP(r,...i),r}function aP(n,e,t,r={}){YL(n,e,t,r)}function nF(n,{instanceIdentifier:e}){const t=n.getProvider("app").getImmediate(),r=n.getProvider("auth-internal"),i=n.getProvider("app-check-internal");return new k_(t,r,i,e,Lh)}function rF(){xs(new Ar(sP,nF,"PUBLIC").setMultipleInstances(!0)),Ln(kE,xE,""),Ln(kE,xE,"esm2017")}rF();/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iF{constructor(e,t){this._delegate=e,this.firebase=t,Zl(e,new Ar("app-compat",()=>this,"PUBLIC")),this.container=e.container}get automaticDataCollectionEnabled(){return this._delegate.automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this._delegate.automaticDataCollectionEnabled=e}get name(){return this._delegate.name}get options(){return this._delegate.options}delete(){return new Promise(e=>{this._delegate.checkDestroyed(),e()}).then(()=>(this.firebase.INTERNAL.removeApp(this.name),Iy(this._delegate)))}_getService(e,t=Si){var r;this._delegate.checkDestroyed();const i=this._delegate.container.getProvider(e);return!i.isInitialized()&&((r=i.getComponent())===null||r===void 0?void 0:r.instantiationMode)==="EXPLICIT"&&i.initialize(),i.getImmediate({identifier:t})}_removeServiceInstance(e,t=Si){this._delegate.container.getProvider(e).clearInstance(t)}_addComponent(e){Zl(this._delegate,e)}_addOrOverwriteComponent(e){s1(this._delegate,e)}toJSON(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sF={"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance."},CE=new Oh("app-compat","Firebase",sF);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function oF(n){const e={},t={__esModule:!0,initializeApp:s,app:i,registerVersion:Ln,setLogLevel:u1,onLog:l1,apps:null,SDK_VERSION:Lh,INTERNAL:{registerComponent:a,removeApp:r,useAsService:l,modularAPIs:VN}};t.default=t,Object.defineProperty(t,"apps",{get:o});function r(c){delete e[c]}function i(c){if(c=c||Si,!o0(e,c))throw CE.create("no-app",{appName:c});return e[c]}i.App=n;function s(c,d={}){const h=Ey(c,d);if(o0(e,h.name))return e[h.name];const p=new n(h,t);return e[h.name]=p,p}function o(){return Object.keys(e).map(c=>e[c])}function a(c){const d=c.name,h=d.replace("-compat","");if(xs(c)&&c.type==="PUBLIC"){const p=(g=i())=>{if(typeof g[h]!="function")throw CE.create("invalid-app-argument",{appName:d});return g[h]()};c.serviceProps!==void 0&&Ld(p,c.serviceProps),t[h]=p,n.prototype[h]=function(...g){return this._getService.bind(this,d).apply(this,c.multipleInstances?g:[])}}return c.type==="PUBLIC"?t[h]:null}function l(c,d){return d==="serverAuth"?null:d}return t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lP(){const n=oF(iF);n.INTERNAL=Object.assign(Object.assign({},n.INTERNAL),{createFirebaseNamespace:lP,extendNamespace:e,createSubscribe:IA,ErrorFactory:Oh,deepExtend:Ld});function e(t){Ld(n,t)}return n}const aF=lP();/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const RE=new vy("@firebase/app-compat"),lF="@firebase/app-compat",uF="0.2.35";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cF(n){Ln(lF,uF,n)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */if(JS()&&self.firebase!==void 0){RE.warn(`
    Warning: Firebase is already defined in the global scope. Please make sure
    Firebase library is only loaded once.
  `);const n=self.firebase.SDK_VERSION;n&&n.indexOf("LITE")>=0&&RE.warn(`
    Warning: You are trying to load Firebase while using Firebase Performance standalone script.
    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.
    `)}const uf=aF;cF();var dF="firebase",hF="10.12.2";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */uf.registerVersion(dF,hF,"app-compat");const fF="@firebase/firestore-compat",pF="0.3.32";/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function x_(n,e){if(e===void 0)return{merge:!1};if(e.mergeFields!==void 0&&e.merge!==void 0)throw new j("invalid-argument",`Invalid options passed to function ${n}(): You cannot specify both "merge" and "mergeFields".`);return e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function AE(){if(typeof Uint8Array>"u")throw new j("unimplemented","Uint8Arrays are not available in this environment.")}function NE(){if(!gM())throw new j("unimplemented","Blobs are unavailable in Firestore in this environment.")}let uP=class ag{constructor(e){this._delegate=e}static fromBase64String(e){return NE(),new ag(lr.fromBase64String(e))}static fromUint8Array(e){return AE(),new ag(lr.fromUint8Array(e))}toBase64(){return NE(),this._delegate.toBase64()}toUint8Array(){return AE(),this._delegate.toUint8Array()}isEqual(e){return this._delegate.isEqual(e._delegate)}toString(){return"Blob(base64: "+this.toBase64()+")"}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lg(n){return mF(n,["next","error","complete"])}function mF(n,e){if(typeof n!="object"||n===null)return!1;const t=n;for(const r of e)if(r in t&&typeof t[r]=="function")return!0;return!1}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gF{enableIndexedDbPersistence(e,t){return QV(e._delegate,{forceOwnership:t})}enableMultiTabIndexedDbPersistence(e){return KV(e._delegate)}clearIndexedDbPersistence(e){return GV(e._delegate)}}class cP{constructor(e,t,r){this._delegate=t,this._persistenceProvider=r,this.INTERNAL={delete:()=>this.terminate()},e instanceof ki||(this._appCompat=e)}get _databaseId(){return this._delegate._databaseId}settings(e){const t=this._delegate._getSettings();!e.merge&&t.host!==e.host&&Bn("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),e.merge&&(e=Object.assign(Object.assign({},t),e),delete e.merge),this._delegate._setSettings(e)}useEmulator(e,t,r={}){fb(this._delegate,e,t,r)}enableNetwork(){return JV(this._delegate)}disableNetwork(){return ZV(this._delegate)}enablePersistence(e){let t=!1,r=!1;return e&&(t=!!e.synchronizeTabs,r=!!e.experimentalForceOwningTab,db("synchronizeTabs",t,"experimentalForceOwningTab",r)),t?this._persistenceProvider.enableMultiTabIndexedDbPersistence(this):this._persistenceProvider.enableIndexedDbPersistence(this,r)}clearPersistence(){return this._persistenceProvider.clearIndexedDbPersistence(this)}terminate(){return this._appCompat&&(this._appCompat._removeServiceInstance("firestore-compat"),this._appCompat._removeServiceInstance("firestore")),this._delegate._delete()}waitForPendingWrites(){return XV(this._delegate)}onSnapshotsInSync(e){return I2(this._delegate,e)}get app(){if(!this._appCompat)throw new j("failed-precondition","Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._appCompat}collection(e){try{return new la(this,Xd(this._delegate,e))}catch(t){throw $t(t,"collection()","Firestore.collection()")}}doc(e){try{return new In(this,Jd(this._delegate,e))}catch(t){throw $t(t,"doc()","Firestore.doc()")}}collectionGroup(e){try{return new Ut(this,zV(this._delegate,e))}catch(t){throw $t(t,"collectionGroup()","Firestore.collectionGroup()")}}runTransaction(e){return P2(this._delegate,t=>e(new dP(this,t)))}batch(){return vt(this._delegate),new hP(new D2(this._delegate,e=>Mu(this._delegate,e)))}loadBundle(e){return e2(this._delegate,e)}namedQuery(e){return t2(this._delegate,e).then(t=>t?new Ut(this,t):null)}}class cf extends E_{constructor(e){super(),this.firestore=e}convertBytes(e){return new uP(new lr(e))}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return In.forKey(t,this.firestore,null)}}function yF(n){LN(n)}class dP{constructor(e,t){this._firestore=e,this._delegate=t,this._userDataWriter=new cf(e)}get(e){const t=ps(e);return this._delegate.get(t).then(r=>new du(this._firestore,new Mr(this._firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,t.converter)))}set(e,t,r){const i=ps(e);return r?(x_("Transaction.set",r),this._delegate.set(i,t,r)):this._delegate.set(i,t),this}update(e,t,r,...i){const s=ps(e);return arguments.length===2?this._delegate.update(s,t):this._delegate.update(s,t,r,...i),this}delete(e){const t=ps(e);return this._delegate.delete(t),this}}class hP{constructor(e){this._delegate=e}set(e,t,r){const i=ps(e);return r?(x_("WriteBatch.set",r),this._delegate.set(i,t,r)):this._delegate.set(i,t),this}update(e,t,r,...i){const s=ps(e);return arguments.length===2?this._delegate.update(s,t):this._delegate.update(s,t,r,...i),this}delete(e){const t=ps(e);return this._delegate.delete(t),this}commit(){return this._delegate.commit()}}class Bs{constructor(e,t,r){this._firestore=e,this._userDataWriter=t,this._delegate=r}fromFirestore(e,t){const r=new Cl(this._firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,null);return this._delegate.fromFirestore(new hu(this._firestore,r),t??{})}toFirestore(e,t){return t?this._delegate.toFirestore(e,t):this._delegate.toFirestore(e)}static getInstance(e,t){const r=Bs.INSTANCES;let i=r.get(e);i||(i=new WeakMap,r.set(e,i));let s=i.get(t);return s||(s=new Bs(e,new cf(e),t),i.set(t,s)),s}}Bs.INSTANCES=new WeakMap;class In{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new cf(e)}static forPath(e,t,r){if(e.length%2!==0)throw new j("invalid-argument",`Invalid document reference. Document references must have an even number of segments, but ${e.canonicalString()} has ${e.length}`);return new In(t,new He(t._delegate,r,new Y(e)))}static forKey(e,t,r){return new In(t,new He(t._delegate,r,e))}get id(){return this._delegate.id}get parent(){return new la(this.firestore,this._delegate.parent)}get path(){return this._delegate.path}collection(e){try{return new la(this.firestore,Xd(this._delegate,e))}catch(t){throw $t(t,"collection()","DocumentReference.collection()")}}isEqual(e){return e=Ee(e),e instanceof He?yb(this._delegate,e):!1}set(e,t){t=x_("DocumentReference.set",t);try{return t?EE(this._delegate,e,t):EE(this._delegate,e)}catch(r){throw $t(r,"setDoc()","DocumentReference.set()")}}update(e,t,...r){try{return arguments.length===1?TE(this._delegate,e):TE(this._delegate,e,t,...r)}catch(i){throw $t(i,"updateDoc()","DocumentReference.update()")}}delete(){return T2(this._delegate)}onSnapshot(...e){const t=fP(e),r=pP(e,i=>new du(this.firestore,new Mr(this.firestore._delegate,this._userDataWriter,i._key,i._document,i.metadata,this._delegate.converter)));return Ob(this._delegate,t,r)}get(e){let t;return(e==null?void 0:e.source)==="cache"?t=_2(this._delegate):(e==null?void 0:e.source)==="server"?t=v2(this._delegate):t=y2(this._delegate),t.then(r=>new du(this.firestore,new Mr(this.firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,this._delegate.converter)))}withConverter(e){return new In(this.firestore,e?this._delegate.withConverter(Bs.getInstance(this.firestore,e)):this._delegate.withConverter(null))}}function $t(n,e,t){return n.message=n.message.replace(e,t),n}function fP(n){for(const e of n)if(typeof e=="object"&&!lg(e))return e;return{}}function pP(n,e){var t,r;let i;return lg(n[0])?i=n[0]:lg(n[1])?i=n[1]:typeof n[0]=="function"?i={next:n[0],error:n[1],complete:n[2]}:i={next:n[1],error:n[2],complete:n[3]},{next:s=>{i.next&&i.next(e(s))},error:(t=i.error)===null||t===void 0?void 0:t.bind(i),complete:(r=i.complete)===null||r===void 0?void 0:r.bind(i)}}class du{constructor(e,t){this._firestore=e,this._delegate=t}get ref(){return new In(this._firestore,this._delegate.ref)}get id(){return this._delegate.id}get metadata(){return this._delegate.metadata}get exists(){return this._delegate.exists()}data(e){return this._delegate.data(e)}get(e,t){return this._delegate.get(e,t)}isEqual(e){return Ab(this._delegate,e._delegate)}}class hu extends du{data(e){const t=this._delegate.data(e);return this._delegate._converter||FN(t!==void 0),t}}class Ut{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new cf(e)}where(e,t,r){try{return new Ut(this.firestore,Kr(this._delegate,a2(e,t,r)))}catch(i){throw $t(i,/(orderBy|where)\(\)/,"Query.$1()")}}orderBy(e,t){try{return new Ut(this.firestore,Kr(this._delegate,l2(e,t)))}catch(r){throw $t(r,/(orderBy|where)\(\)/,"Query.$1()")}}limit(e){try{return new Ut(this.firestore,Kr(this._delegate,u2(e)))}catch(t){throw $t(t,"limit()","Query.limit()")}}limitToLast(e){try{return new Ut(this.firestore,Kr(this._delegate,c2(e)))}catch(t){throw $t(t,"limitToLast()","Query.limitToLast()")}}startAt(...e){try{return new Ut(this.firestore,Kr(this._delegate,d2(...e)))}catch(t){throw $t(t,"startAt()","Query.startAt()")}}startAfter(...e){try{return new Ut(this.firestore,Kr(this._delegate,h2(...e)))}catch(t){throw $t(t,"startAfter()","Query.startAfter()")}}endBefore(...e){try{return new Ut(this.firestore,Kr(this._delegate,f2(...e)))}catch(t){throw $t(t,"endBefore()","Query.endBefore()")}}endAt(...e){try{return new Ut(this.firestore,Kr(this._delegate,p2(...e)))}catch(t){throw $t(t,"endAt()","Query.endAt()")}}isEqual(e){return _b(this._delegate,e._delegate)}get(e){let t;return(e==null?void 0:e.source)==="cache"?t=w2(this._delegate):(e==null?void 0:e.source)==="server"?t=E2(this._delegate):t=Nb(this._delegate),t.then(r=>new ug(this.firestore,new Ni(this.firestore._delegate,this._userDataWriter,this._delegate,r._snapshot)))}onSnapshot(...e){const t=fP(e),r=pP(e,i=>new ug(this.firestore,new Ni(this.firestore._delegate,this._userDataWriter,this._delegate,i._snapshot)));return Ob(this._delegate,t,r)}withConverter(e){return new Ut(this.firestore,e?this._delegate.withConverter(Bs.getInstance(this.firestore,e)):this._delegate.withConverter(null))}}class _F{constructor(e,t){this._firestore=e,this._delegate=t}get type(){return this._delegate.type}get doc(){return new hu(this._firestore,this._delegate.doc)}get oldIndex(){return this._delegate.oldIndex}get newIndex(){return this._delegate.newIndex}}class ug{constructor(e,t){this._firestore=e,this._delegate=t}get query(){return new Ut(this._firestore,this._delegate.query)}get metadata(){return this._delegate.metadata}get size(){return this._delegate.size}get empty(){return this._delegate.empty}get docs(){return this._delegate.docs.map(e=>new hu(this._firestore,e))}docChanges(e){return this._delegate.docChanges(e).map(t=>new _F(this._firestore,t))}forEach(e,t){this._delegate.forEach(r=>{e.call(t,new hu(this._firestore,r))})}isEqual(e){return Ab(this._delegate,e._delegate)}}class la extends Ut{constructor(e,t){super(e,t),this.firestore=e,this._delegate=t}get id(){return this._delegate.id}get path(){return this._delegate.path}get parent(){const e=this._delegate.parent;return e?new In(this.firestore,e):null}doc(e){try{return e===void 0?new In(this.firestore,Jd(this._delegate)):new In(this.firestore,Jd(this._delegate,e))}catch(t){throw $t(t,"doc()","CollectionReference.doc()")}}add(e){return Mb(this._delegate,e).then(t=>new In(this.firestore,t))}isEqual(e){return yb(this._delegate,e._delegate)}withConverter(e){return new la(this.firestore,e?this._delegate.withConverter(Bs.getInstance(this.firestore,e)):this._delegate.withConverter(null))}}function ps(n){return _e(n,He)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class C_{constructor(...e){this._delegate=new Ai(...e)}static documentId(){return new C_(Be.keyField().canonicalString())}isEqual(e){return e=Ee(e),e instanceof Ai?this._delegate._internalPath.isEqual(e._internalPath):!1}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class us{constructor(e){this._delegate=e}static serverTimestamp(){const e=x2();return e._methodName="FieldValue.serverTimestamp",new us(e)}static delete(){const e=k2();return e._methodName="FieldValue.delete",new us(e)}static arrayUnion(...e){const t=C2(...e);return t._methodName="FieldValue.arrayUnion",new us(t)}static arrayRemove(...e){const t=R2(...e);return t._methodName="FieldValue.arrayRemove",new us(t)}static increment(e){const t=A2(e);return t._methodName="FieldValue.increment",new us(t)}isEqual(e){return this._delegate.isEqual(e._delegate)}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vF={Firestore:cP,GeoPoint:Gh,Timestamp:je,Blob:uP,Transaction:dP,WriteBatch:hP,DocumentReference:In,DocumentSnapshot:du,Query:Ut,QueryDocumentSnapshot:hu,QuerySnapshot:ug,CollectionReference:la,FieldPath:C_,FieldValue:us,setLogLevel:yF,CACHE_SIZE_UNLIMITED:YV};function wF(n,e){n.INTERNAL.registerComponent(new Ar("firestore-compat",t=>{const r=t.getProvider("app-compat").getImmediate(),i=t.getProvider("firestore").getImmediate();return e(r,i)},"PUBLIC").setServiceProps(Object.assign({},vF)))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function EF(n){wF(n,(e,t)=>new cP(e,t,new gF)),n.registerVersion(fF,pF)}EF(uf);/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kc{constructor(e,t,r){this._delegate=e,this.task=t,this.ref=r}get bytesTransferred(){return this._delegate.bytesTransferred}get metadata(){return this._delegate.metadata}get state(){return this._delegate.state}get totalBytes(){return this._delegate.totalBytes}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ME{constructor(e,t){this._delegate=e,this._ref=t,this.cancel=this._delegate.cancel.bind(this._delegate),this.catch=this._delegate.catch.bind(this._delegate),this.pause=this._delegate.pause.bind(this._delegate),this.resume=this._delegate.resume.bind(this._delegate)}get snapshot(){return new kc(this._delegate.snapshot,this,this._ref)}then(e,t){return this._delegate.then(r=>{if(e)return e(new kc(r,this,this._ref))},t)}on(e,t,r,i){let s;return t&&(typeof t=="function"?s=o=>t(new kc(o,this,this._ref)):s={next:t.next?o=>t.next(new kc(o,this,this._ref)):void 0,complete:t.complete||void 0,error:t.error||void 0}),this._delegate.on(e,s,r||void 0,i||void 0)}}class OE{constructor(e,t){this._delegate=e,this._service=t}get prefixes(){return this._delegate.prefixes.map(e=>new Sr(e,this._service))}get items(){return this._delegate.items.map(e=>new Sr(e,this._service))}get nextPageToken(){return this._delegate.nextPageToken||null}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *  http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sr{constructor(e,t){this._delegate=e,this.storage=t}get name(){return this._delegate.name}get bucket(){return this._delegate.bucket}get fullPath(){return this._delegate.fullPath}toString(){return this._delegate.toString()}child(e){const t=eF(this._delegate,e);return new Sr(t,this.storage)}get root(){return new Sr(this._delegate.root,this.storage)}get parent(){const e=this._delegate.parent;return e==null?null:new Sr(e,this.storage)}put(e,t){return this._throwIfRoot("put"),new ME(QL(this._delegate,e,t),this)}putString(e,t=Tn.RAW,r){this._throwIfRoot("putString");const i=Wb(t,e),s=Object.assign({},r);return s.contentType==null&&i.contentType!=null&&(s.contentType=i.contentType),new ME(new eP(this._delegate,new Yn(i.data,!0),s),this)}listAll(){return JL(this._delegate).then(e=>new OE(e,this.storage))}list(e){return XL(this._delegate,e||void 0).then(t=>new OE(t,this.storage))}getMetadata(){return KL(this._delegate)}updateMetadata(e){return GL(this._delegate,e)}getDownloadURL(){return oP(this._delegate)}delete(){return this._throwIfRoot("delete"),ZL(this._delegate)}_throwIfRoot(e){if(this._delegate._location.path==="")throw $b(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mP{constructor(e,t){this.app=e,this._delegate=t}get maxOperationRetryTime(){return this._delegate.maxOperationRetryTime}get maxUploadRetryTime(){return this._delegate.maxUploadRetryTime}ref(e){if(VE(e))throw Vo("ref() expected a child path but got a URL, use refFromURL instead.");return new Sr(og(this._delegate,e),this)}refFromURL(e){if(!VE(e))throw Vo("refFromURL() expected a full URL but got a child path, use ref() instead.");try{Mt.makeFromUrl(e,this._delegate.host)}catch{throw Vo("refFromUrl() expected a valid full URL but got an invalid one.")}return new Sr(og(this._delegate,e),this)}setMaxUploadRetryTime(e){this._delegate.maxUploadRetryTime=e}setMaxOperationRetryTime(e){this._delegate.maxOperationRetryTime=e}useEmulator(e,t,r={}){aP(this._delegate,e,t,r)}}function VE(n){return/^[A-Za-z]+:\/\//.test(n)}const TF="@firebase/storage-compat",IF="0.3.8";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const SF="storage-compat";function DF(n,{instanceIdentifier:e}){const t=n.getProvider("app-compat").getImmediate(),r=n.getProvider("storage").getImmediate({identifier:e});return new mP(t,r)}function bF(n){const e={TaskState:jt,TaskEvent:AL,StringFormat:Tn,Storage:mP,Reference:Sr};n.INTERNAL.registerComponent(new Ar(SF,DF,"PUBLIC").setServiceProps(e).setMultipleInstances(!0)),n.registerVersion(TF,IF)}bF(uf);const gP=uf.initializeApp({apiKey:"AIzaSyBHgG4mwWSEUBLPS1p2XFtaC8GwPIv2xN8",authDomain:"arquidiocesishermosillo-776dd.firebaseapp.com",projectId:"arquidiocesishermosillo-776dd",storageBucket:"arquidiocesishermosillo-776dd.appspot.com",messagingSenderId:"767127814821",appId:"1:767127814821:web:6c159d62075bcd1271c34c"}),LE=HV(gP),PF=tF(gP);function yP(n){var e,t,r="";if(typeof n=="string"||typeof n=="number")r+=n;else if(typeof n=="object")if(Array.isArray(n)){var i=n.length;for(e=0;e<i;e++)n[e]&&(t=yP(n[e]))&&(r&&(r+=" "),r+=t)}else for(t in n)n[t]&&(r&&(r+=" "),r+=t);return r}function mt(){for(var n,e,t=0,r="",i=arguments.length;t<i;t++)(n=arguments[t])&&(e=yP(n))&&(r&&(r+=" "),r+=e);return r}function kF(n,e){n.prototype=Object.create(e.prototype),n.prototype.constructor=n,cg(n,e)}function cg(n,e){return cg=Object.setPrototypeOf||function(r,i){return r.__proto__=i,r},cg(n,e)}function xF(n,e){if(n==null)return{};var t={},r=Object.keys(n),i,s;for(s=0;s<r.length;s++)i=r[s],!(e.indexOf(i)>=0)&&(t[i]=n[i]);return t}function FE(n){if(n===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return n}function CF(n,e,t){return n===e?!0:n.correspondingElement?n.correspondingElement.classList.contains(t):n.classList.contains(t)}function RF(n,e,t){if(n===e)return!0;for(;n.parentNode||n.host;){if(n.parentNode&&CF(n,e,t))return!0;n=n.parentNode||n.host}return n}function AF(n){return document.documentElement.clientWidth<=n.clientX||document.documentElement.clientHeight<=n.clientY}var NF=function(){if(!(typeof window>"u"||typeof window.addEventListener!="function")){var e=!1,t=Object.defineProperty({},"passive",{get:function(){e=!0}}),r=function(){};return window.addEventListener("testPassiveEventSupport",r,t),window.removeEventListener("testPassiveEventSupport",r,t),e}};function MF(n){return n===void 0&&(n=0),function(){return++n}}var OF=MF(),dg,xc={},Pp={},VF=["touchstart","touchmove"],LF="ignore-react-onclickoutside";function BE(n,e){var t={},r=VF.indexOf(e)!==-1;return r&&dg&&(t.passive=!n.props.preventDefault),t}function df(n,e){var t,r,i=n.displayName||n.name||"Component";return r=t=function(s){kF(o,s);function o(l){var c;return c=s.call(this,l)||this,c.__outsideClickHandler=function(d){if(typeof c.__clickOutsideHandlerProp=="function"){c.__clickOutsideHandlerProp(d);return}var h=c.getInstance();if(typeof h.props.handleClickOutside=="function"){h.props.handleClickOutside(d);return}if(typeof h.handleClickOutside=="function"){h.handleClickOutside(d);return}throw new Error("WrappedComponent: "+i+" lacks a handleClickOutside(event) function for processing outside click events.")},c.__getComponentNode=function(){var d=c.getInstance();return typeof d.setClickOutsideRef=="function"?d.setClickOutsideRef():Rh.findDOMNode(d)},c.enableOnClickOutside=function(){if(!(typeof document>"u"||Pp[c._uid])){typeof dg>"u"&&(dg=NF()),Pp[c._uid]=!0;var d=c.props.eventTypes;d.forEach||(d=[d]),xc[c._uid]=function(h){if(c.componentNode!==null&&!(c.initTimeStamp>h.timeStamp)&&(c.props.preventDefault&&h.preventDefault(),c.props.stopPropagation&&h.stopPropagation(),!(c.props.excludeScrollbar&&AF(h)))){var p=h.composed&&h.composedPath&&h.composedPath().shift()||h.target;RF(p,c.componentNode,c.props.outsideClickIgnoreClass)===document&&c.__outsideClickHandler(h)}},d.forEach(function(h){document.addEventListener(h,xc[c._uid],BE(FE(c),h))})}},c.disableOnClickOutside=function(){delete Pp[c._uid];var d=xc[c._uid];if(d&&typeof document<"u"){var h=c.props.eventTypes;h.forEach||(h=[h]),h.forEach(function(p){return document.removeEventListener(p,d,BE(FE(c),p))}),delete xc[c._uid]}},c.getRef=function(d){return c.instanceRef=d},c._uid=OF(),c.initTimeStamp=performance.now(),c}var a=o.prototype;return a.getInstance=function(){if(n.prototype&&!n.prototype.isReactComponent)return this;var c=this.instanceRef;return c.getInstance?c.getInstance():c},a.componentDidMount=function(){typeof document>"u"||!document.createElement||(this.getInstance(),this.componentNode=this.__getComponentNode(),!this.props.disableOnClickOutside&&this.enableOnClickOutside())},a.componentDidUpdate=function(){this.componentNode=this.__getComponentNode()},a.componentWillUnmount=function(){this.disableOnClickOutside()},a.render=function(){var c=this.props;c.excludeScrollbar;var d=xF(c,["excludeScrollbar"]);return n.prototype&&n.prototype.isReactComponent?d.ref=this.getRef:d.wrappedRef=this.getRef,d.disableOnClickOutside=this.disableOnClickOutside,d.enableOnClickOutside=this.enableOnClickOutside,N.createElement(n,d)},o}(N.Component),t.displayName="OnClickOutside("+i+")",t.defaultProps={eventTypes:["mousedown","touchstart"],excludeScrollbar:!1,outsideClickIgnoreClass:LF,preventDefault:!1,stopPropagation:!1},t.getClass=function(){return n.getClass?n.getClass():n},r}function J(n){const e=Object.prototype.toString.call(n);return n instanceof Date||typeof n=="object"&&e==="[object Date]"?new n.constructor(+n):typeof n=="number"||e==="[object Number]"||typeof n=="string"||e==="[object String]"?new Date(n):new Date(NaN)}function Ie(n,e){return n instanceof Date?new n.constructor(e):new Date(e)}function Hi(n,e){const t=J(n);return isNaN(e)?Ie(n,NaN):(e&&t.setDate(t.getDate()+e),t)}function R_(n,e){const t=+J(n);return Ie(n,t+e)}const _P=6048e5,FF=864e5,hf=6e4,ff=36e5,BF=1e3;function UF(n,e){return R_(n,e*ff)}function hg(n,e){return R_(n,e*hf)}function Un(n,e){const t=J(n);if(isNaN(e))return Ie(n,NaN);if(!e)return t;const r=t.getDate(),i=Ie(n,t.getTime());i.setMonth(t.getMonth()+e+1,0);const s=i.getDate();return r>=s?i:(t.setFullYear(i.getFullYear(),i.getMonth(),r),t)}function A_(n,e){const t=e*3;return Un(n,t)}function jF(n,e){return R_(n,e*1e3)}function th(n,e){const t=e*7;return Hi(n,t)}function Dr(n,e){return Un(n,e*12)}function Us(n){const e=J(n);return e.setHours(0,0,0,0),e}function nh(n){const e=J(n),t=new Date(Date.UTC(e.getFullYear(),e.getMonth(),e.getDate(),e.getHours(),e.getMinutes(),e.getSeconds(),e.getMilliseconds()));return t.setUTCFullYear(e.getFullYear()),+n-+t}function fu(n,e){const t=Us(n),r=Us(e),i=+t-nh(t),s=+r-nh(r);return Math.round((i-s)/FF)}function rh(n,e){const t=J(n),r=J(e),i=t.getFullYear()-r.getFullYear(),s=t.getMonth()-r.getMonth();return i*12+s}function ws(n){const e=J(n);return Math.trunc(e.getMonth()/3)+1}function ih(n,e){const t=J(n),r=J(e),i=t.getFullYear()-r.getFullYear(),s=ws(t)-ws(r);return i*4+s}function sh(n,e){const t=J(n),r=J(e);return t.getFullYear()-r.getFullYear()}function vP(n){const e=J(n);return e.setHours(23,59,59,999),e}function $F(n){const e=J(n),t=e.getMonth();return e.setFullYear(e.getFullYear(),t+1,0),e.setHours(23,59,59,999),e}let zF={};function Xs(){return zF}function qF(n,e){var a,l;const t=Xs(),r=t.weekStartsOn??((l=(a=t.locale)==null?void 0:a.options)==null?void 0:l.weekStartsOn)??0,i=J(n),s=i.getDay(),o=(s<r?-7:0)+6-(s-r);return i.setDate(i.getDate()+o),i.setHours(23,59,59,999),i}function wP(n){const e=J(n),t=e.getFullYear();return e.setFullYear(t+1,0,0),e.setHours(23,59,59,999),e}const WF={lessThanXSeconds:{one:"less than a second",other:"less than {{count}} seconds"},xSeconds:{one:"1 second",other:"{{count}} seconds"},halfAMinute:"half a minute",lessThanXMinutes:{one:"less than a minute",other:"less than {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"about 1 hour",other:"about {{count}} hours"},xHours:{one:"1 hour",other:"{{count}} hours"},xDays:{one:"1 day",other:"{{count}} days"},aboutXWeeks:{one:"about 1 week",other:"about {{count}} weeks"},xWeeks:{one:"1 week",other:"{{count}} weeks"},aboutXMonths:{one:"about 1 month",other:"about {{count}} months"},xMonths:{one:"1 month",other:"{{count}} months"},aboutXYears:{one:"about 1 year",other:"about {{count}} years"},xYears:{one:"1 year",other:"{{count}} years"},overXYears:{one:"over 1 year",other:"over {{count}} years"},almostXYears:{one:"almost 1 year",other:"almost {{count}} years"}},YF=(n,e,t)=>{let r;const i=WF[n];return typeof i=="string"?r=i:e===1?r=i.one:r=i.other.replace("{{count}}",e.toString()),t!=null&&t.addSuffix?t.comparison&&t.comparison>0?"in "+r:r+" ago":r};function Lo(n){return(e={})=>{const t=e.width?String(e.width):n.defaultWidth;return n.formats[t]||n.formats[n.defaultWidth]}}const HF={full:"EEEE, MMMM do, y",long:"MMMM do, y",medium:"MMM d, y",short:"MM/dd/yyyy"},QF={full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},KF={full:"{{date}} 'at' {{time}}",long:"{{date}} 'at' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},GF={date:Lo({formats:HF,defaultWidth:"full"}),time:Lo({formats:QF,defaultWidth:"full"}),dateTime:Lo({formats:KF,defaultWidth:"full"})},XF={lastWeek:"'last' eeee 'at' p",yesterday:"'yesterday at' p",today:"'today at' p",tomorrow:"'tomorrow at' p",nextWeek:"eeee 'at' p",other:"P"},JF=(n,e,t,r)=>XF[n];function Hn(n){return(e,t)=>{const r=t!=null&&t.context?String(t.context):"standalone";let i;if(r==="formatting"&&n.formattingValues){const o=n.defaultFormattingWidth||n.defaultWidth,a=t!=null&&t.width?String(t.width):o;i=n.formattingValues[a]||n.formattingValues[o]}else{const o=n.defaultWidth,a=t!=null&&t.width?String(t.width):n.defaultWidth;i=n.values[a]||n.values[o]}const s=n.argumentCallback?n.argumentCallback(e):e;return i[s]}}const ZF={narrow:["B","A"],abbreviated:["BC","AD"],wide:["Before Christ","Anno Domini"]},eB={narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["1st quarter","2nd quarter","3rd quarter","4th quarter"]},tB={narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],wide:["January","February","March","April","May","June","July","August","September","October","November","December"]},nB={narrow:["S","M","T","W","T","F","S"],short:["Su","Mo","Tu","We","Th","Fr","Sa"],abbreviated:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],wide:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},rB={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"}},iB={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"}},sB=(n,e)=>{const t=Number(n),r=t%100;if(r>20||r<10)switch(r%10){case 1:return t+"st";case 2:return t+"nd";case 3:return t+"rd"}return t+"th"},oB={ordinalNumber:sB,era:Hn({values:ZF,defaultWidth:"wide"}),quarter:Hn({values:eB,defaultWidth:"wide",argumentCallback:n=>n-1}),month:Hn({values:tB,defaultWidth:"wide"}),day:Hn({values:nB,defaultWidth:"wide"}),dayPeriod:Hn({values:rB,defaultWidth:"wide",formattingValues:iB,defaultFormattingWidth:"wide"})};function Qn(n){return(e,t={})=>{const r=t.width,i=r&&n.matchPatterns[r]||n.matchPatterns[n.defaultMatchWidth],s=e.match(i);if(!s)return null;const o=s[0],a=r&&n.parsePatterns[r]||n.parsePatterns[n.defaultParseWidth],l=Array.isArray(a)?lB(a,h=>h.test(o)):aB(a,h=>h.test(o));let c;c=n.valueCallback?n.valueCallback(l):l,c=t.valueCallback?t.valueCallback(c):c;const d=e.slice(o.length);return{value:c,rest:d}}}function aB(n,e){for(const t in n)if(Object.prototype.hasOwnProperty.call(n,t)&&e(n[t]))return t}function lB(n,e){for(let t=0;t<n.length;t++)if(e(n[t]))return t}function EP(n){return(e,t={})=>{const r=e.match(n.matchPattern);if(!r)return null;const i=r[0],s=e.match(n.parsePattern);if(!s)return null;let o=n.valueCallback?n.valueCallback(s[0]):s[0];o=t.valueCallback?t.valueCallback(o):o;const a=e.slice(i.length);return{value:o,rest:a}}}const uB=/^(\d+)(th|st|nd|rd)?/i,cB=/\d+/i,dB={narrow:/^(b|a)/i,abbreviated:/^(b\.?\s?c\.?|b\.?\s?c\.?\s?e\.?|a\.?\s?d\.?|c\.?\s?e\.?)/i,wide:/^(before christ|before common era|anno domini|common era)/i},hB={any:[/^b/i,/^(a|c)/i]},fB={narrow:/^[1234]/i,abbreviated:/^q[1234]/i,wide:/^[1234](th|st|nd|rd)? quarter/i},pB={any:[/1/i,/2/i,/3/i,/4/i]},mB={narrow:/^[jfmasond]/i,abbreviated:/^(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)/i,wide:/^(january|february|march|april|may|june|july|august|september|october|november|december)/i},gB={narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^ap/i,/^may/i,/^jun/i,/^jul/i,/^au/i,/^s/i,/^o/i,/^n/i,/^d/i]},yB={narrow:/^[smtwf]/i,short:/^(su|mo|tu|we|th|fr|sa)/i,abbreviated:/^(sun|mon|tue|wed|thu|fri|sat)/i,wide:/^(sunday|monday|tuesday|wednesday|thursday|friday|saturday)/i},_B={narrow:[/^s/i,/^m/i,/^t/i,/^w/i,/^t/i,/^f/i,/^s/i],any:[/^su/i,/^m/i,/^tu/i,/^w/i,/^th/i,/^f/i,/^sa/i]},vB={narrow:/^(a|p|mi|n|(in the|at) (morning|afternoon|evening|night))/i,any:/^([ap]\.?\s?m\.?|midnight|noon|(in the|at) (morning|afternoon|evening|night))/i},wB={any:{am:/^a/i,pm:/^p/i,midnight:/^mi/i,noon:/^no/i,morning:/morning/i,afternoon:/afternoon/i,evening:/evening/i,night:/night/i}},EB={ordinalNumber:EP({matchPattern:uB,parsePattern:cB,valueCallback:n=>parseInt(n,10)}),era:Qn({matchPatterns:dB,defaultMatchWidth:"wide",parsePatterns:hB,defaultParseWidth:"any"}),quarter:Qn({matchPatterns:fB,defaultMatchWidth:"wide",parsePatterns:pB,defaultParseWidth:"any",valueCallback:n=>n+1}),month:Qn({matchPatterns:mB,defaultMatchWidth:"wide",parsePatterns:gB,defaultParseWidth:"any"}),day:Qn({matchPatterns:yB,defaultMatchWidth:"wide",parsePatterns:_B,defaultParseWidth:"any"}),dayPeriod:Qn({matchPatterns:vB,defaultMatchWidth:"any",parsePatterns:wB,defaultParseWidth:"any"})},TP={code:"en-US",formatDistance:YF,formatLong:GF,formatRelative:JF,localize:oB,match:EB,options:{weekStartsOn:0,firstWeekContainsDate:1}};function pf(n){const e=J(n),t=Ie(n,0);return t.setFullYear(e.getFullYear(),0,1),t.setHours(0,0,0,0),t}function TB(n){const e=J(n);return fu(e,pf(e))+1}function Or(n,e){var a,l,c,d;const t=Xs(),r=(e==null?void 0:e.weekStartsOn)??((l=(a=e==null?void 0:e.locale)==null?void 0:a.options)==null?void 0:l.weekStartsOn)??t.weekStartsOn??((d=(c=t.locale)==null?void 0:c.options)==null?void 0:d.weekStartsOn)??0,i=J(n),s=i.getDay(),o=(s<r?7:0)+s-r;return i.setDate(i.getDate()-o),i.setHours(0,0,0,0),i}function ua(n){return Or(n,{weekStartsOn:1})}function IP(n){const e=J(n),t=e.getFullYear(),r=Ie(n,0);r.setFullYear(t+1,0,4),r.setHours(0,0,0,0);const i=ua(r),s=Ie(n,0);s.setFullYear(t,0,4),s.setHours(0,0,0,0);const o=ua(s);return e.getTime()>=i.getTime()?t+1:e.getTime()>=o.getTime()?t:t-1}function IB(n){const e=IP(n),t=Ie(n,0);return t.setFullYear(e,0,4),t.setHours(0,0,0,0),ua(t)}function N_(n){const e=J(n),t=+ua(e)-+IB(e);return Math.round(t/_P)+1}function M_(n,e){var d,h,p,g;const t=J(n),r=t.getFullYear(),i=Xs(),s=(e==null?void 0:e.firstWeekContainsDate)??((h=(d=e==null?void 0:e.locale)==null?void 0:d.options)==null?void 0:h.firstWeekContainsDate)??i.firstWeekContainsDate??((g=(p=i.locale)==null?void 0:p.options)==null?void 0:g.firstWeekContainsDate)??1,o=Ie(n,0);o.setFullYear(r+1,0,s),o.setHours(0,0,0,0);const a=Or(o,e),l=Ie(n,0);l.setFullYear(r,0,s),l.setHours(0,0,0,0);const c=Or(l,e);return t.getTime()>=a.getTime()?r+1:t.getTime()>=c.getTime()?r:r-1}function SB(n,e){var a,l,c,d;const t=Xs(),r=(e==null?void 0:e.firstWeekContainsDate)??((l=(a=e==null?void 0:e.locale)==null?void 0:a.options)==null?void 0:l.firstWeekContainsDate)??t.firstWeekContainsDate??((d=(c=t.locale)==null?void 0:c.options)==null?void 0:d.firstWeekContainsDate)??1,i=M_(n,e),s=Ie(n,0);return s.setFullYear(i,0,r),s.setHours(0,0,0,0),Or(s,e)}function SP(n,e){const t=J(n),r=+Or(t,e)-+SB(t,e);return Math.round(r/_P)+1}function Te(n,e){const t=n<0?"-":"",r=Math.abs(n).toString().padStart(e,"0");return t+r}const Gr={y(n,e){const t=n.getFullYear(),r=t>0?t:1-t;return Te(e==="yy"?r%100:r,e.length)},M(n,e){const t=n.getMonth();return e==="M"?String(t+1):Te(t+1,2)},d(n,e){return Te(n.getDate(),e.length)},a(n,e){const t=n.getHours()/12>=1?"pm":"am";switch(e){case"a":case"aa":return t.toUpperCase();case"aaa":return t;case"aaaaa":return t[0];case"aaaa":default:return t==="am"?"a.m.":"p.m."}},h(n,e){return Te(n.getHours()%12||12,e.length)},H(n,e){return Te(n.getHours(),e.length)},m(n,e){return Te(n.getMinutes(),e.length)},s(n,e){return Te(n.getSeconds(),e.length)},S(n,e){const t=e.length,r=n.getMilliseconds(),i=Math.trunc(r*Math.pow(10,t-3));return Te(i,e.length)}},lo={am:"am",pm:"pm",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},UE={G:function(n,e,t){const r=n.getFullYear()>0?1:0;switch(e){case"G":case"GG":case"GGG":return t.era(r,{width:"abbreviated"});case"GGGGG":return t.era(r,{width:"narrow"});case"GGGG":default:return t.era(r,{width:"wide"})}},y:function(n,e,t){if(e==="yo"){const r=n.getFullYear(),i=r>0?r:1-r;return t.ordinalNumber(i,{unit:"year"})}return Gr.y(n,e)},Y:function(n,e,t,r){const i=M_(n,r),s=i>0?i:1-i;if(e==="YY"){const o=s%100;return Te(o,2)}return e==="Yo"?t.ordinalNumber(s,{unit:"year"}):Te(s,e.length)},R:function(n,e){const t=IP(n);return Te(t,e.length)},u:function(n,e){const t=n.getFullYear();return Te(t,e.length)},Q:function(n,e,t){const r=Math.ceil((n.getMonth()+1)/3);switch(e){case"Q":return String(r);case"QQ":return Te(r,2);case"Qo":return t.ordinalNumber(r,{unit:"quarter"});case"QQQ":return t.quarter(r,{width:"abbreviated",context:"formatting"});case"QQQQQ":return t.quarter(r,{width:"narrow",context:"formatting"});case"QQQQ":default:return t.quarter(r,{width:"wide",context:"formatting"})}},q:function(n,e,t){const r=Math.ceil((n.getMonth()+1)/3);switch(e){case"q":return String(r);case"qq":return Te(r,2);case"qo":return t.ordinalNumber(r,{unit:"quarter"});case"qqq":return t.quarter(r,{width:"abbreviated",context:"standalone"});case"qqqqq":return t.quarter(r,{width:"narrow",context:"standalone"});case"qqqq":default:return t.quarter(r,{width:"wide",context:"standalone"})}},M:function(n,e,t){const r=n.getMonth();switch(e){case"M":case"MM":return Gr.M(n,e);case"Mo":return t.ordinalNumber(r+1,{unit:"month"});case"MMM":return t.month(r,{width:"abbreviated",context:"formatting"});case"MMMMM":return t.month(r,{width:"narrow",context:"formatting"});case"MMMM":default:return t.month(r,{width:"wide",context:"formatting"})}},L:function(n,e,t){const r=n.getMonth();switch(e){case"L":return String(r+1);case"LL":return Te(r+1,2);case"Lo":return t.ordinalNumber(r+1,{unit:"month"});case"LLL":return t.month(r,{width:"abbreviated",context:"standalone"});case"LLLLL":return t.month(r,{width:"narrow",context:"standalone"});case"LLLL":default:return t.month(r,{width:"wide",context:"standalone"})}},w:function(n,e,t,r){const i=SP(n,r);return e==="wo"?t.ordinalNumber(i,{unit:"week"}):Te(i,e.length)},I:function(n,e,t){const r=N_(n);return e==="Io"?t.ordinalNumber(r,{unit:"week"}):Te(r,e.length)},d:function(n,e,t){return e==="do"?t.ordinalNumber(n.getDate(),{unit:"date"}):Gr.d(n,e)},D:function(n,e,t){const r=TB(n);return e==="Do"?t.ordinalNumber(r,{unit:"dayOfYear"}):Te(r,e.length)},E:function(n,e,t){const r=n.getDay();switch(e){case"E":case"EE":case"EEE":return t.day(r,{width:"abbreviated",context:"formatting"});case"EEEEE":return t.day(r,{width:"narrow",context:"formatting"});case"EEEEEE":return t.day(r,{width:"short",context:"formatting"});case"EEEE":default:return t.day(r,{width:"wide",context:"formatting"})}},e:function(n,e,t,r){const i=n.getDay(),s=(i-r.weekStartsOn+8)%7||7;switch(e){case"e":return String(s);case"ee":return Te(s,2);case"eo":return t.ordinalNumber(s,{unit:"day"});case"eee":return t.day(i,{width:"abbreviated",context:"formatting"});case"eeeee":return t.day(i,{width:"narrow",context:"formatting"});case"eeeeee":return t.day(i,{width:"short",context:"formatting"});case"eeee":default:return t.day(i,{width:"wide",context:"formatting"})}},c:function(n,e,t,r){const i=n.getDay(),s=(i-r.weekStartsOn+8)%7||7;switch(e){case"c":return String(s);case"cc":return Te(s,e.length);case"co":return t.ordinalNumber(s,{unit:"day"});case"ccc":return t.day(i,{width:"abbreviated",context:"standalone"});case"ccccc":return t.day(i,{width:"narrow",context:"standalone"});case"cccccc":return t.day(i,{width:"short",context:"standalone"});case"cccc":default:return t.day(i,{width:"wide",context:"standalone"})}},i:function(n,e,t){const r=n.getDay(),i=r===0?7:r;switch(e){case"i":return String(i);case"ii":return Te(i,e.length);case"io":return t.ordinalNumber(i,{unit:"day"});case"iii":return t.day(r,{width:"abbreviated",context:"formatting"});case"iiiii":return t.day(r,{width:"narrow",context:"formatting"});case"iiiiii":return t.day(r,{width:"short",context:"formatting"});case"iiii":default:return t.day(r,{width:"wide",context:"formatting"})}},a:function(n,e,t){const i=n.getHours()/12>=1?"pm":"am";switch(e){case"a":case"aa":return t.dayPeriod(i,{width:"abbreviated",context:"formatting"});case"aaa":return t.dayPeriod(i,{width:"abbreviated",context:"formatting"}).toLowerCase();case"aaaaa":return t.dayPeriod(i,{width:"narrow",context:"formatting"});case"aaaa":default:return t.dayPeriod(i,{width:"wide",context:"formatting"})}},b:function(n,e,t){const r=n.getHours();let i;switch(r===12?i=lo.noon:r===0?i=lo.midnight:i=r/12>=1?"pm":"am",e){case"b":case"bb":return t.dayPeriod(i,{width:"abbreviated",context:"formatting"});case"bbb":return t.dayPeriod(i,{width:"abbreviated",context:"formatting"}).toLowerCase();case"bbbbb":return t.dayPeriod(i,{width:"narrow",context:"formatting"});case"bbbb":default:return t.dayPeriod(i,{width:"wide",context:"formatting"})}},B:function(n,e,t){const r=n.getHours();let i;switch(r>=17?i=lo.evening:r>=12?i=lo.afternoon:r>=4?i=lo.morning:i=lo.night,e){case"B":case"BB":case"BBB":return t.dayPeriod(i,{width:"abbreviated",context:"formatting"});case"BBBBB":return t.dayPeriod(i,{width:"narrow",context:"formatting"});case"BBBB":default:return t.dayPeriod(i,{width:"wide",context:"formatting"})}},h:function(n,e,t){if(e==="ho"){let r=n.getHours()%12;return r===0&&(r=12),t.ordinalNumber(r,{unit:"hour"})}return Gr.h(n,e)},H:function(n,e,t){return e==="Ho"?t.ordinalNumber(n.getHours(),{unit:"hour"}):Gr.H(n,e)},K:function(n,e,t){const r=n.getHours()%12;return e==="Ko"?t.ordinalNumber(r,{unit:"hour"}):Te(r,e.length)},k:function(n,e,t){let r=n.getHours();return r===0&&(r=24),e==="ko"?t.ordinalNumber(r,{unit:"hour"}):Te(r,e.length)},m:function(n,e,t){return e==="mo"?t.ordinalNumber(n.getMinutes(),{unit:"minute"}):Gr.m(n,e)},s:function(n,e,t){return e==="so"?t.ordinalNumber(n.getSeconds(),{unit:"second"}):Gr.s(n,e)},S:function(n,e){return Gr.S(n,e)},X:function(n,e,t){const r=n.getTimezoneOffset();if(r===0)return"Z";switch(e){case"X":return $E(r);case"XXXX":case"XX":return is(r);case"XXXXX":case"XXX":default:return is(r,":")}},x:function(n,e,t){const r=n.getTimezoneOffset();switch(e){case"x":return $E(r);case"xxxx":case"xx":return is(r);case"xxxxx":case"xxx":default:return is(r,":")}},O:function(n,e,t){const r=n.getTimezoneOffset();switch(e){case"O":case"OO":case"OOO":return"GMT"+jE(r,":");case"OOOO":default:return"GMT"+is(r,":")}},z:function(n,e,t){const r=n.getTimezoneOffset();switch(e){case"z":case"zz":case"zzz":return"GMT"+jE(r,":");case"zzzz":default:return"GMT"+is(r,":")}},t:function(n,e,t){const r=Math.trunc(n.getTime()/1e3);return Te(r,e.length)},T:function(n,e,t){const r=n.getTime();return Te(r,e.length)}};function jE(n,e=""){const t=n>0?"-":"+",r=Math.abs(n),i=Math.trunc(r/60),s=r%60;return s===0?t+String(i):t+String(i)+e+Te(s,2)}function $E(n,e){return n%60===0?(n>0?"-":"+")+Te(Math.abs(n)/60,2):is(n,e)}function is(n,e=""){const t=n>0?"-":"+",r=Math.abs(n),i=Te(Math.trunc(r/60),2),s=Te(r%60,2);return t+i+e+s}const zE=(n,e)=>{switch(n){case"P":return e.date({width:"short"});case"PP":return e.date({width:"medium"});case"PPP":return e.date({width:"long"});case"PPPP":default:return e.date({width:"full"})}},DP=(n,e)=>{switch(n){case"p":return e.time({width:"short"});case"pp":return e.time({width:"medium"});case"ppp":return e.time({width:"long"});case"pppp":default:return e.time({width:"full"})}},DB=(n,e)=>{const t=n.match(/(P+)(p+)?/)||[],r=t[1],i=t[2];if(!i)return zE(n,e);let s;switch(r){case"P":s=e.dateTime({width:"short"});break;case"PP":s=e.dateTime({width:"medium"});break;case"PPP":s=e.dateTime({width:"long"});break;case"PPPP":default:s=e.dateTime({width:"full"});break}return s.replace("{{date}}",zE(r,e)).replace("{{time}}",DP(i,e))},oh={p:DP,P:DB},bB=/^D+$/,PB=/^Y+$/,kB=["D","DD","YY","YYYY"];function bP(n){return bB.test(n)}function PP(n){return PB.test(n)}function fg(n,e,t){const r=xB(n,e,t);if(console.warn(r),kB.includes(n))throw new RangeError(r)}function xB(n,e,t){const r=n[0]==="Y"?"years":"days of the month";return`Use \`${n.toLowerCase()}\` instead of \`${n}\` (in \`${e}\`) for formatting ${r} to the input \`${t}\`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md`}function br(n){return n instanceof Date||typeof n=="object"&&Object.prototype.toString.call(n)==="[object Date]"}function ah(n){if(!br(n)&&typeof n!="number")return!1;const e=J(n);return!isNaN(Number(e))}const CB=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,RB=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,AB=/^'([^]*?)'?$/,NB=/''/g,MB=/[a-zA-Z]/;function qE(n,e,t){var d,h,p,g,v,S,D,w;const r=Xs(),i=(t==null?void 0:t.locale)??r.locale??TP,s=(t==null?void 0:t.firstWeekContainsDate)??((h=(d=t==null?void 0:t.locale)==null?void 0:d.options)==null?void 0:h.firstWeekContainsDate)??r.firstWeekContainsDate??((g=(p=r.locale)==null?void 0:p.options)==null?void 0:g.firstWeekContainsDate)??1,o=(t==null?void 0:t.weekStartsOn)??((S=(v=t==null?void 0:t.locale)==null?void 0:v.options)==null?void 0:S.weekStartsOn)??r.weekStartsOn??((w=(D=r.locale)==null?void 0:D.options)==null?void 0:w.weekStartsOn)??0,a=J(n);if(!ah(a))throw new RangeError("Invalid time value");let l=e.match(RB).map(_=>{const E=_[0];if(E==="p"||E==="P"){const x=oh[E];return x(_,i.formatLong)}return _}).join("").match(CB).map(_=>{if(_==="''")return{isToken:!1,value:"'"};const E=_[0];if(E==="'")return{isToken:!1,value:OB(_)};if(UE[E])return{isToken:!0,value:_};if(E.match(MB))throw new RangeError("Format string contains an unescaped latin alphabet character `"+E+"`");return{isToken:!1,value:_}});i.localize.preprocessor&&(l=i.localize.preprocessor(a,l));const c={firstWeekContainsDate:s,weekStartsOn:o,locale:i};return l.map(_=>{if(!_.isToken)return _.value;const E=_.value;(!(t!=null&&t.useAdditionalWeekYearTokens)&&PP(E)||!(t!=null&&t.useAdditionalDayOfYearTokens)&&bP(E))&&fg(E,e,String(n));const x=UE[E[0]];return x(a,E,i.localize,c)}).join("")}function OB(n){const e=n.match(AB);return e?e[1].replace(NB,"'"):n}function WE(n){return J(n).getDate()}function VB(n){return J(n).getDay()}function sr(n){return J(n).getHours()}function or(n){return J(n).getMinutes()}function qt(n){return J(n).getMonth()}function Pr(n){return J(n).getSeconds()}function pg(n){return J(n).getTime()}function ue(n){return J(n).getFullYear()}function Mi(n,e){const t=J(n),r=J(e);return t.getTime()>r.getTime()}function js(n,e){const t=J(n),r=J(e);return+t<+r}function LB(n,e){const t=J(n),r=J(e);return+t==+r}function FB(n,e){const t=Us(n),r=Us(e);return+t==+r}function BB(n,e){const t=J(n),r=J(e);return t.getFullYear()===r.getFullYear()&&t.getMonth()===r.getMonth()}function mg(n){const e=J(n),t=e.getMonth(),r=t-t%3;return e.setMonth(r,1),e.setHours(0,0,0,0),e}function UB(n,e){const t=mg(n),r=mg(e);return+t==+r}function jB(n,e){const t=J(n),r=J(e);return t.getFullYear()===r.getFullYear()}function pu(n,e){const t=+J(n),[r,i]=[+J(e.start),+J(e.end)].sort((s,o)=>s-o);return t>=r&&t<=i}function YE(n){let e;return n.forEach(function(t){const r=J(t);(e===void 0||e<r||isNaN(Number(r)))&&(e=r)}),e||new Date(NaN)}function HE(n){let e;return n.forEach(t=>{const r=J(t);(!e||e>r||isNaN(+r))&&(e=r)}),e||new Date(NaN)}function $B(){return Object.assign({},Xs())}function zB(n,e){const t=e instanceof Date?Ie(e,0):new e(0);return t.setFullYear(n.getFullYear(),n.getMonth(),n.getDate()),t.setHours(n.getHours(),n.getMinutes(),n.getSeconds(),n.getMilliseconds()),t}const qB=10;class kP{constructor(){G(this,"subPriority",0)}validate(e,t){return!0}}class WB extends kP{constructor(e,t,r,i,s){super(),this.value=e,this.validateValue=t,this.setValue=r,this.priority=i,s&&(this.subPriority=s)}validate(e,t){return this.validateValue(e,this.value,t)}set(e,t,r){return this.setValue(e,t,this.value,r)}}class YB extends kP{constructor(){super(...arguments);G(this,"priority",qB);G(this,"subPriority",-1)}set(t,r){return r.timestampIsSet?t:Ie(t,zB(t,Date))}}class we{run(e,t,r,i){const s=this.parse(e,t,r,i);return s?{setter:new WB(s.value,this.validate,this.set,this.priority,this.subPriority),rest:s.rest}:null}validate(e,t,r){return!0}}class HB extends we{constructor(){super(...arguments);G(this,"priority",140);G(this,"incompatibleTokens",["R","u","t","T"])}parse(t,r,i){switch(r){case"G":case"GG":case"GGG":return i.era(t,{width:"abbreviated"})||i.era(t,{width:"narrow"});case"GGGGG":return i.era(t,{width:"narrow"});case"GGGG":default:return i.era(t,{width:"wide"})||i.era(t,{width:"abbreviated"})||i.era(t,{width:"narrow"})}}set(t,r,i){return r.era=i,t.setFullYear(i,0,1),t.setHours(0,0,0,0),t}}const it={month:/^(1[0-2]|0?\d)/,date:/^(3[0-1]|[0-2]?\d)/,dayOfYear:/^(36[0-6]|3[0-5]\d|[0-2]?\d?\d)/,week:/^(5[0-3]|[0-4]?\d)/,hour23h:/^(2[0-3]|[0-1]?\d)/,hour24h:/^(2[0-4]|[0-1]?\d)/,hour11h:/^(1[0-1]|0?\d)/,hour12h:/^(1[0-2]|0?\d)/,minute:/^[0-5]?\d/,second:/^[0-5]?\d/,singleDigit:/^\d/,twoDigits:/^\d{1,2}/,threeDigits:/^\d{1,3}/,fourDigits:/^\d{1,4}/,anyDigitsSigned:/^-?\d+/,singleDigitSigned:/^-?\d/,twoDigitsSigned:/^-?\d{1,2}/,threeDigitsSigned:/^-?\d{1,3}/,fourDigitsSigned:/^-?\d{1,4}/},Kn={basicOptionalMinutes:/^([+-])(\d{2})(\d{2})?|Z/,basic:/^([+-])(\d{2})(\d{2})|Z/,basicOptionalSeconds:/^([+-])(\d{2})(\d{2})((\d{2}))?|Z/,extended:/^([+-])(\d{2}):(\d{2})|Z/,extendedOptionalSeconds:/^([+-])(\d{2}):(\d{2})(:(\d{2}))?|Z/};function st(n,e){return n&&{value:e(n.value),rest:n.rest}}function qe(n,e){const t=e.match(n);return t?{value:parseInt(t[0],10),rest:e.slice(t[0].length)}:null}function Gn(n,e){const t=e.match(n);if(!t)return null;if(t[0]==="Z")return{value:0,rest:e.slice(1)};const r=t[1]==="+"?1:-1,i=t[2]?parseInt(t[2],10):0,s=t[3]?parseInt(t[3],10):0,o=t[5]?parseInt(t[5],10):0;return{value:r*(i*ff+s*hf+o*BF),rest:e.slice(t[0].length)}}function xP(n){return qe(it.anyDigitsSigned,n)}function et(n,e){switch(n){case 1:return qe(it.singleDigit,e);case 2:return qe(it.twoDigits,e);case 3:return qe(it.threeDigits,e);case 4:return qe(it.fourDigits,e);default:return qe(new RegExp("^\\d{1,"+n+"}"),e)}}function lh(n,e){switch(n){case 1:return qe(it.singleDigitSigned,e);case 2:return qe(it.twoDigitsSigned,e);case 3:return qe(it.threeDigitsSigned,e);case 4:return qe(it.fourDigitsSigned,e);default:return qe(new RegExp("^-?\\d{1,"+n+"}"),e)}}function O_(n){switch(n){case"morning":return 4;case"evening":return 17;case"pm":case"noon":case"afternoon":return 12;case"am":case"midnight":case"night":default:return 0}}function CP(n,e){const t=e>0,r=t?e:1-e;let i;if(r<=50)i=n||100;else{const s=r+50,o=Math.trunc(s/100)*100,a=n>=s%100;i=n+o-(a?100:0)}return t?i:1-i}function RP(n){return n%400===0||n%4===0&&n%100!==0}class QB extends we{constructor(){super(...arguments);G(this,"priority",130);G(this,"incompatibleTokens",["Y","R","u","w","I","i","e","c","t","T"])}parse(t,r,i){const s=o=>({year:o,isTwoDigitYear:r==="yy"});switch(r){case"y":return st(et(4,t),s);case"yo":return st(i.ordinalNumber(t,{unit:"year"}),s);default:return st(et(r.length,t),s)}}validate(t,r){return r.isTwoDigitYear||r.year>0}set(t,r,i){const s=t.getFullYear();if(i.isTwoDigitYear){const a=CP(i.year,s);return t.setFullYear(a,0,1),t.setHours(0,0,0,0),t}const o=!("era"in r)||r.era===1?i.year:1-i.year;return t.setFullYear(o,0,1),t.setHours(0,0,0,0),t}}class KB extends we{constructor(){super(...arguments);G(this,"priority",130);G(this,"incompatibleTokens",["y","R","u","Q","q","M","L","I","d","D","i","t","T"])}parse(t,r,i){const s=o=>({year:o,isTwoDigitYear:r==="YY"});switch(r){case"Y":return st(et(4,t),s);case"Yo":return st(i.ordinalNumber(t,{unit:"year"}),s);default:return st(et(r.length,t),s)}}validate(t,r){return r.isTwoDigitYear||r.year>0}set(t,r,i,s){const o=M_(t,s);if(i.isTwoDigitYear){const l=CP(i.year,o);return t.setFullYear(l,0,s.firstWeekContainsDate),t.setHours(0,0,0,0),Or(t,s)}const a=!("era"in r)||r.era===1?i.year:1-i.year;return t.setFullYear(a,0,s.firstWeekContainsDate),t.setHours(0,0,0,0),Or(t,s)}}class GB extends we{constructor(){super(...arguments);G(this,"priority",130);G(this,"incompatibleTokens",["G","y","Y","u","Q","q","M","L","w","d","D","e","c","t","T"])}parse(t,r){return lh(r==="R"?4:r.length,t)}set(t,r,i){const s=Ie(t,0);return s.setFullYear(i,0,4),s.setHours(0,0,0,0),ua(s)}}class XB extends we{constructor(){super(...arguments);G(this,"priority",130);G(this,"incompatibleTokens",["G","y","Y","R","w","I","i","e","c","t","T"])}parse(t,r){return lh(r==="u"?4:r.length,t)}set(t,r,i){return t.setFullYear(i,0,1),t.setHours(0,0,0,0),t}}class JB extends we{constructor(){super(...arguments);G(this,"priority",120);G(this,"incompatibleTokens",["Y","R","q","M","L","w","I","d","D","i","e","c","t","T"])}parse(t,r,i){switch(r){case"Q":case"QQ":return et(r.length,t);case"Qo":return i.ordinalNumber(t,{unit:"quarter"});case"QQQ":return i.quarter(t,{width:"abbreviated",context:"formatting"})||i.quarter(t,{width:"narrow",context:"formatting"});case"QQQQQ":return i.quarter(t,{width:"narrow",context:"formatting"});case"QQQQ":default:return i.quarter(t,{width:"wide",context:"formatting"})||i.quarter(t,{width:"abbreviated",context:"formatting"})||i.quarter(t,{width:"narrow",context:"formatting"})}}validate(t,r){return r>=1&&r<=4}set(t,r,i){return t.setMonth((i-1)*3,1),t.setHours(0,0,0,0),t}}class ZB extends we{constructor(){super(...arguments);G(this,"priority",120);G(this,"incompatibleTokens",["Y","R","Q","M","L","w","I","d","D","i","e","c","t","T"])}parse(t,r,i){switch(r){case"q":case"qq":return et(r.length,t);case"qo":return i.ordinalNumber(t,{unit:"quarter"});case"qqq":return i.quarter(t,{width:"abbreviated",context:"standalone"})||i.quarter(t,{width:"narrow",context:"standalone"});case"qqqqq":return i.quarter(t,{width:"narrow",context:"standalone"});case"qqqq":default:return i.quarter(t,{width:"wide",context:"standalone"})||i.quarter(t,{width:"abbreviated",context:"standalone"})||i.quarter(t,{width:"narrow",context:"standalone"})}}validate(t,r){return r>=1&&r<=4}set(t,r,i){return t.setMonth((i-1)*3,1),t.setHours(0,0,0,0),t}}class e4 extends we{constructor(){super(...arguments);G(this,"incompatibleTokens",["Y","R","q","Q","L","w","I","D","i","e","c","t","T"]);G(this,"priority",110)}parse(t,r,i){const s=o=>o-1;switch(r){case"M":return st(qe(it.month,t),s);case"MM":return st(et(2,t),s);case"Mo":return st(i.ordinalNumber(t,{unit:"month"}),s);case"MMM":return i.month(t,{width:"abbreviated",context:"formatting"})||i.month(t,{width:"narrow",context:"formatting"});case"MMMMM":return i.month(t,{width:"narrow",context:"formatting"});case"MMMM":default:return i.month(t,{width:"wide",context:"formatting"})||i.month(t,{width:"abbreviated",context:"formatting"})||i.month(t,{width:"narrow",context:"formatting"})}}validate(t,r){return r>=0&&r<=11}set(t,r,i){return t.setMonth(i,1),t.setHours(0,0,0,0),t}}class t4 extends we{constructor(){super(...arguments);G(this,"priority",110);G(this,"incompatibleTokens",["Y","R","q","Q","M","w","I","D","i","e","c","t","T"])}parse(t,r,i){const s=o=>o-1;switch(r){case"L":return st(qe(it.month,t),s);case"LL":return st(et(2,t),s);case"Lo":return st(i.ordinalNumber(t,{unit:"month"}),s);case"LLL":return i.month(t,{width:"abbreviated",context:"standalone"})||i.month(t,{width:"narrow",context:"standalone"});case"LLLLL":return i.month(t,{width:"narrow",context:"standalone"});case"LLLL":default:return i.month(t,{width:"wide",context:"standalone"})||i.month(t,{width:"abbreviated",context:"standalone"})||i.month(t,{width:"narrow",context:"standalone"})}}validate(t,r){return r>=0&&r<=11}set(t,r,i){return t.setMonth(i,1),t.setHours(0,0,0,0),t}}function n4(n,e,t){const r=J(n),i=SP(r,t)-e;return r.setDate(r.getDate()-i*7),r}class r4 extends we{constructor(){super(...arguments);G(this,"priority",100);G(this,"incompatibleTokens",["y","R","u","q","Q","M","L","I","d","D","i","t","T"])}parse(t,r,i){switch(r){case"w":return qe(it.week,t);case"wo":return i.ordinalNumber(t,{unit:"week"});default:return et(r.length,t)}}validate(t,r){return r>=1&&r<=53}set(t,r,i,s){return Or(n4(t,i,s),s)}}function i4(n,e){const t=J(n),r=N_(t)-e;return t.setDate(t.getDate()-r*7),t}class s4 extends we{constructor(){super(...arguments);G(this,"priority",100);G(this,"incompatibleTokens",["y","Y","u","q","Q","M","L","w","d","D","e","c","t","T"])}parse(t,r,i){switch(r){case"I":return qe(it.week,t);case"Io":return i.ordinalNumber(t,{unit:"week"});default:return et(r.length,t)}}validate(t,r){return r>=1&&r<=53}set(t,r,i){return ua(i4(t,i))}}const o4=[31,28,31,30,31,30,31,31,30,31,30,31],a4=[31,29,31,30,31,30,31,31,30,31,30,31];class l4 extends we{constructor(){super(...arguments);G(this,"priority",90);G(this,"subPriority",1);G(this,"incompatibleTokens",["Y","R","q","Q","w","I","D","i","e","c","t","T"])}parse(t,r,i){switch(r){case"d":return qe(it.date,t);case"do":return i.ordinalNumber(t,{unit:"date"});default:return et(r.length,t)}}validate(t,r){const i=t.getFullYear(),s=RP(i),o=t.getMonth();return s?r>=1&&r<=a4[o]:r>=1&&r<=o4[o]}set(t,r,i){return t.setDate(i),t.setHours(0,0,0,0),t}}class u4 extends we{constructor(){super(...arguments);G(this,"priority",90);G(this,"subpriority",1);G(this,"incompatibleTokens",["Y","R","q","Q","M","L","w","I","d","E","i","e","c","t","T"])}parse(t,r,i){switch(r){case"D":case"DD":return qe(it.dayOfYear,t);case"Do":return i.ordinalNumber(t,{unit:"date"});default:return et(r.length,t)}}validate(t,r){const i=t.getFullYear();return RP(i)?r>=1&&r<=366:r>=1&&r<=365}set(t,r,i){return t.setMonth(0,i),t.setHours(0,0,0,0),t}}function V_(n,e,t){var h,p,g,v;const r=Xs(),i=(t==null?void 0:t.weekStartsOn)??((p=(h=t==null?void 0:t.locale)==null?void 0:h.options)==null?void 0:p.weekStartsOn)??r.weekStartsOn??((v=(g=r.locale)==null?void 0:g.options)==null?void 0:v.weekStartsOn)??0,s=J(n),o=s.getDay(),l=(e%7+7)%7,c=7-i,d=e<0||e>6?e-(o+c)%7:(l+c)%7-(o+c)%7;return Hi(s,d)}class c4 extends we{constructor(){super(...arguments);G(this,"priority",90);G(this,"incompatibleTokens",["D","i","e","c","t","T"])}parse(t,r,i){switch(r){case"E":case"EE":case"EEE":return i.day(t,{width:"abbreviated",context:"formatting"})||i.day(t,{width:"short",context:"formatting"})||i.day(t,{width:"narrow",context:"formatting"});case"EEEEE":return i.day(t,{width:"narrow",context:"formatting"});case"EEEEEE":return i.day(t,{width:"short",context:"formatting"})||i.day(t,{width:"narrow",context:"formatting"});case"EEEE":default:return i.day(t,{width:"wide",context:"formatting"})||i.day(t,{width:"abbreviated",context:"formatting"})||i.day(t,{width:"short",context:"formatting"})||i.day(t,{width:"narrow",context:"formatting"})}}validate(t,r){return r>=0&&r<=6}set(t,r,i,s){return t=V_(t,i,s),t.setHours(0,0,0,0),t}}class d4 extends we{constructor(){super(...arguments);G(this,"priority",90);G(this,"incompatibleTokens",["y","R","u","q","Q","M","L","I","d","D","E","i","c","t","T"])}parse(t,r,i,s){const o=a=>{const l=Math.floor((a-1)/7)*7;return(a+s.weekStartsOn+6)%7+l};switch(r){case"e":case"ee":return st(et(r.length,t),o);case"eo":return st(i.ordinalNumber(t,{unit:"day"}),o);case"eee":return i.day(t,{width:"abbreviated",context:"formatting"})||i.day(t,{width:"short",context:"formatting"})||i.day(t,{width:"narrow",context:"formatting"});case"eeeee":return i.day(t,{width:"narrow",context:"formatting"});case"eeeeee":return i.day(t,{width:"short",context:"formatting"})||i.day(t,{width:"narrow",context:"formatting"});case"eeee":default:return i.day(t,{width:"wide",context:"formatting"})||i.day(t,{width:"abbreviated",context:"formatting"})||i.day(t,{width:"short",context:"formatting"})||i.day(t,{width:"narrow",context:"formatting"})}}validate(t,r){return r>=0&&r<=6}set(t,r,i,s){return t=V_(t,i,s),t.setHours(0,0,0,0),t}}class h4 extends we{constructor(){super(...arguments);G(this,"priority",90);G(this,"incompatibleTokens",["y","R","u","q","Q","M","L","I","d","D","E","i","e","t","T"])}parse(t,r,i,s){const o=a=>{const l=Math.floor((a-1)/7)*7;return(a+s.weekStartsOn+6)%7+l};switch(r){case"c":case"cc":return st(et(r.length,t),o);case"co":return st(i.ordinalNumber(t,{unit:"day"}),o);case"ccc":return i.day(t,{width:"abbreviated",context:"standalone"})||i.day(t,{width:"short",context:"standalone"})||i.day(t,{width:"narrow",context:"standalone"});case"ccccc":return i.day(t,{width:"narrow",context:"standalone"});case"cccccc":return i.day(t,{width:"short",context:"standalone"})||i.day(t,{width:"narrow",context:"standalone"});case"cccc":default:return i.day(t,{width:"wide",context:"standalone"})||i.day(t,{width:"abbreviated",context:"standalone"})||i.day(t,{width:"short",context:"standalone"})||i.day(t,{width:"narrow",context:"standalone"})}}validate(t,r){return r>=0&&r<=6}set(t,r,i,s){return t=V_(t,i,s),t.setHours(0,0,0,0),t}}function f4(n){let t=J(n).getDay();return t===0&&(t=7),t}function p4(n,e){const t=J(n),r=f4(t),i=e-r;return Hi(t,i)}class m4 extends we{constructor(){super(...arguments);G(this,"priority",90);G(this,"incompatibleTokens",["y","Y","u","q","Q","M","L","w","d","D","E","e","c","t","T"])}parse(t,r,i){const s=o=>o===0?7:o;switch(r){case"i":case"ii":return et(r.length,t);case"io":return i.ordinalNumber(t,{unit:"day"});case"iii":return st(i.day(t,{width:"abbreviated",context:"formatting"})||i.day(t,{width:"short",context:"formatting"})||i.day(t,{width:"narrow",context:"formatting"}),s);case"iiiii":return st(i.day(t,{width:"narrow",context:"formatting"}),s);case"iiiiii":return st(i.day(t,{width:"short",context:"formatting"})||i.day(t,{width:"narrow",context:"formatting"}),s);case"iiii":default:return st(i.day(t,{width:"wide",context:"formatting"})||i.day(t,{width:"abbreviated",context:"formatting"})||i.day(t,{width:"short",context:"formatting"})||i.day(t,{width:"narrow",context:"formatting"}),s)}}validate(t,r){return r>=1&&r<=7}set(t,r,i){return t=p4(t,i),t.setHours(0,0,0,0),t}}class g4 extends we{constructor(){super(...arguments);G(this,"priority",80);G(this,"incompatibleTokens",["b","B","H","k","t","T"])}parse(t,r,i){switch(r){case"a":case"aa":case"aaa":return i.dayPeriod(t,{width:"abbreviated",context:"formatting"})||i.dayPeriod(t,{width:"narrow",context:"formatting"});case"aaaaa":return i.dayPeriod(t,{width:"narrow",context:"formatting"});case"aaaa":default:return i.dayPeriod(t,{width:"wide",context:"formatting"})||i.dayPeriod(t,{width:"abbreviated",context:"formatting"})||i.dayPeriod(t,{width:"narrow",context:"formatting"})}}set(t,r,i){return t.setHours(O_(i),0,0,0),t}}class y4 extends we{constructor(){super(...arguments);G(this,"priority",80);G(this,"incompatibleTokens",["a","B","H","k","t","T"])}parse(t,r,i){switch(r){case"b":case"bb":case"bbb":return i.dayPeriod(t,{width:"abbreviated",context:"formatting"})||i.dayPeriod(t,{width:"narrow",context:"formatting"});case"bbbbb":return i.dayPeriod(t,{width:"narrow",context:"formatting"});case"bbbb":default:return i.dayPeriod(t,{width:"wide",context:"formatting"})||i.dayPeriod(t,{width:"abbreviated",context:"formatting"})||i.dayPeriod(t,{width:"narrow",context:"formatting"})}}set(t,r,i){return t.setHours(O_(i),0,0,0),t}}class _4 extends we{constructor(){super(...arguments);G(this,"priority",80);G(this,"incompatibleTokens",["a","b","t","T"])}parse(t,r,i){switch(r){case"B":case"BB":case"BBB":return i.dayPeriod(t,{width:"abbreviated",context:"formatting"})||i.dayPeriod(t,{width:"narrow",context:"formatting"});case"BBBBB":return i.dayPeriod(t,{width:"narrow",context:"formatting"});case"BBBB":default:return i.dayPeriod(t,{width:"wide",context:"formatting"})||i.dayPeriod(t,{width:"abbreviated",context:"formatting"})||i.dayPeriod(t,{width:"narrow",context:"formatting"})}}set(t,r,i){return t.setHours(O_(i),0,0,0),t}}class v4 extends we{constructor(){super(...arguments);G(this,"priority",70);G(this,"incompatibleTokens",["H","K","k","t","T"])}parse(t,r,i){switch(r){case"h":return qe(it.hour12h,t);case"ho":return i.ordinalNumber(t,{unit:"hour"});default:return et(r.length,t)}}validate(t,r){return r>=1&&r<=12}set(t,r,i){const s=t.getHours()>=12;return s&&i<12?t.setHours(i+12,0,0,0):!s&&i===12?t.setHours(0,0,0,0):t.setHours(i,0,0,0),t}}class w4 extends we{constructor(){super(...arguments);G(this,"priority",70);G(this,"incompatibleTokens",["a","b","h","K","k","t","T"])}parse(t,r,i){switch(r){case"H":return qe(it.hour23h,t);case"Ho":return i.ordinalNumber(t,{unit:"hour"});default:return et(r.length,t)}}validate(t,r){return r>=0&&r<=23}set(t,r,i){return t.setHours(i,0,0,0),t}}class E4 extends we{constructor(){super(...arguments);G(this,"priority",70);G(this,"incompatibleTokens",["h","H","k","t","T"])}parse(t,r,i){switch(r){case"K":return qe(it.hour11h,t);case"Ko":return i.ordinalNumber(t,{unit:"hour"});default:return et(r.length,t)}}validate(t,r){return r>=0&&r<=11}set(t,r,i){return t.getHours()>=12&&i<12?t.setHours(i+12,0,0,0):t.setHours(i,0,0,0),t}}class T4 extends we{constructor(){super(...arguments);G(this,"priority",70);G(this,"incompatibleTokens",["a","b","h","H","K","t","T"])}parse(t,r,i){switch(r){case"k":return qe(it.hour24h,t);case"ko":return i.ordinalNumber(t,{unit:"hour"});default:return et(r.length,t)}}validate(t,r){return r>=1&&r<=24}set(t,r,i){const s=i<=24?i%24:i;return t.setHours(s,0,0,0),t}}class I4 extends we{constructor(){super(...arguments);G(this,"priority",60);G(this,"incompatibleTokens",["t","T"])}parse(t,r,i){switch(r){case"m":return qe(it.minute,t);case"mo":return i.ordinalNumber(t,{unit:"minute"});default:return et(r.length,t)}}validate(t,r){return r>=0&&r<=59}set(t,r,i){return t.setMinutes(i,0,0),t}}class S4 extends we{constructor(){super(...arguments);G(this,"priority",50);G(this,"incompatibleTokens",["t","T"])}parse(t,r,i){switch(r){case"s":return qe(it.second,t);case"so":return i.ordinalNumber(t,{unit:"second"});default:return et(r.length,t)}}validate(t,r){return r>=0&&r<=59}set(t,r,i){return t.setSeconds(i,0),t}}class D4 extends we{constructor(){super(...arguments);G(this,"priority",30);G(this,"incompatibleTokens",["t","T"])}parse(t,r){const i=s=>Math.trunc(s*Math.pow(10,-r.length+3));return st(et(r.length,t),i)}set(t,r,i){return t.setMilliseconds(i),t}}class b4 extends we{constructor(){super(...arguments);G(this,"priority",10);G(this,"incompatibleTokens",["t","T","x"])}parse(t,r){switch(r){case"X":return Gn(Kn.basicOptionalMinutes,t);case"XX":return Gn(Kn.basic,t);case"XXXX":return Gn(Kn.basicOptionalSeconds,t);case"XXXXX":return Gn(Kn.extendedOptionalSeconds,t);case"XXX":default:return Gn(Kn.extended,t)}}set(t,r,i){return r.timestampIsSet?t:Ie(t,t.getTime()-nh(t)-i)}}class P4 extends we{constructor(){super(...arguments);G(this,"priority",10);G(this,"incompatibleTokens",["t","T","X"])}parse(t,r){switch(r){case"x":return Gn(Kn.basicOptionalMinutes,t);case"xx":return Gn(Kn.basic,t);case"xxxx":return Gn(Kn.basicOptionalSeconds,t);case"xxxxx":return Gn(Kn.extendedOptionalSeconds,t);case"xxx":default:return Gn(Kn.extended,t)}}set(t,r,i){return r.timestampIsSet?t:Ie(t,t.getTime()-nh(t)-i)}}class k4 extends we{constructor(){super(...arguments);G(this,"priority",40);G(this,"incompatibleTokens","*")}parse(t){return xP(t)}set(t,r,i){return[Ie(t,i*1e3),{timestampIsSet:!0}]}}class x4 extends we{constructor(){super(...arguments);G(this,"priority",20);G(this,"incompatibleTokens","*")}parse(t){return xP(t)}set(t,r,i){return[Ie(t,i),{timestampIsSet:!0}]}}const C4={G:new HB,y:new QB,Y:new KB,R:new GB,u:new XB,Q:new JB,q:new ZB,M:new e4,L:new t4,w:new r4,I:new s4,d:new l4,D:new u4,E:new c4,e:new d4,c:new h4,i:new m4,a:new g4,b:new y4,B:new _4,h:new v4,H:new w4,K:new E4,k:new T4,m:new I4,s:new S4,S:new D4,X:new b4,x:new P4,t:new k4,T:new x4},R4=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,A4=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,N4=/^'([^]*?)'?$/,M4=/''/g,O4=/\S/,V4=/[a-zA-Z]/;function kp(n,e,t,r){var S,D,w,_,E,x,A,L;const i=$B(),s=(r==null?void 0:r.locale)??i.locale??TP,o=(r==null?void 0:r.firstWeekContainsDate)??((D=(S=r==null?void 0:r.locale)==null?void 0:S.options)==null?void 0:D.firstWeekContainsDate)??i.firstWeekContainsDate??((_=(w=i.locale)==null?void 0:w.options)==null?void 0:_.firstWeekContainsDate)??1,a=(r==null?void 0:r.weekStartsOn)??((x=(E=r==null?void 0:r.locale)==null?void 0:E.options)==null?void 0:x.weekStartsOn)??i.weekStartsOn??((L=(A=i.locale)==null?void 0:A.options)==null?void 0:L.weekStartsOn)??0;if(e==="")return n===""?J(t):Ie(t,NaN);const l={firstWeekContainsDate:o,weekStartsOn:a,locale:s},c=[new YB],d=e.match(A4).map(I=>{const y=I[0];if(y in oh){const b=oh[y];return b(I,s.formatLong)}return I}).join("").match(R4),h=[];for(let I of d){!(r!=null&&r.useAdditionalWeekYearTokens)&&PP(I)&&fg(I,e,n),!(r!=null&&r.useAdditionalDayOfYearTokens)&&bP(I)&&fg(I,e,n);const y=I[0],b=C4[y];if(b){const{incompatibleTokens:k}=b;if(Array.isArray(k)){const R=h.find(P=>k.includes(P.token)||P.token===y);if(R)throw new RangeError(`The format string mustn't contain \`${R.fullToken}\` and \`${I}\` at the same time`)}else if(b.incompatibleTokens==="*"&&h.length>0)throw new RangeError(`The format string mustn't contain \`${I}\` and any other token at the same time`);h.push({token:y,fullToken:I});const C=b.run(n,I,s.match,l);if(!C)return Ie(t,NaN);c.push(C.setter),n=C.rest}else{if(y.match(V4))throw new RangeError("Format string contains an unescaped latin alphabet character `"+y+"`");if(I==="''"?I="'":y==="'"&&(I=L4(I)),n.indexOf(I)===0)n=n.slice(I.length);else return Ie(t,NaN)}}if(n.length>0&&O4.test(n))return Ie(t,NaN);const p=c.map(I=>I.priority).sort((I,y)=>y-I).filter((I,y,b)=>b.indexOf(I)===y).map(I=>c.filter(y=>y.priority===I).sort((y,b)=>b.subPriority-y.subPriority)).map(I=>I[0]);let g=J(t);if(isNaN(g.getTime()))return Ie(t,NaN);const v={};for(const I of p){if(!I.validate(g,l))return Ie(t,NaN);const y=I.set(g,v,l);Array.isArray(y)?(g=y[0],Object.assign(v,y[1])):g=y}return Ie(t,g)}function L4(n){return n.match(N4)[1].replace(M4,"'")}function F4(n,e){const r=$4(n);let i;if(r.date){const l=z4(r.date,2);i=q4(l.restDateString,l.year)}if(!i||isNaN(i.getTime()))return new Date(NaN);const s=i.getTime();let o=0,a;if(r.time&&(o=W4(r.time),isNaN(o)))return new Date(NaN);if(r.timezone){if(a=Y4(r.timezone),isNaN(a))return new Date(NaN)}else{const l=new Date(s+o),c=new Date(0);return c.setFullYear(l.getUTCFullYear(),l.getUTCMonth(),l.getUTCDate()),c.setHours(l.getUTCHours(),l.getUTCMinutes(),l.getUTCSeconds(),l.getUTCMilliseconds()),c}return new Date(s+o+a)}const Cc={dateTimeDelimiter:/[T ]/,timeZoneDelimiter:/[Z ]/i,timezone:/([Z+-].*)$/},B4=/^-?(?:(\d{3})|(\d{2})(?:-?(\d{2}))?|W(\d{2})(?:-?(\d{1}))?|)$/,U4=/^(\d{2}(?:[.,]\d*)?)(?::?(\d{2}(?:[.,]\d*)?))?(?::?(\d{2}(?:[.,]\d*)?))?$/,j4=/^([+-])(\d{2})(?::?(\d{2}))?$/;function $4(n){const e={},t=n.split(Cc.dateTimeDelimiter);let r;if(t.length>2)return e;if(/:/.test(t[0])?r=t[0]:(e.date=t[0],r=t[1],Cc.timeZoneDelimiter.test(e.date)&&(e.date=n.split(Cc.timeZoneDelimiter)[0],r=n.substr(e.date.length,n.length))),r){const i=Cc.timezone.exec(r);i?(e.time=r.replace(i[1],""),e.timezone=i[1]):e.time=r}return e}function z4(n,e){const t=new RegExp("^(?:(\\d{4}|[+-]\\d{"+(4+e)+"})|(\\d{2}|[+-]\\d{"+(2+e)+"})$)"),r=n.match(t);if(!r)return{year:NaN,restDateString:""};const i=r[1]?parseInt(r[1]):null,s=r[2]?parseInt(r[2]):null;return{year:s===null?i:s*100,restDateString:n.slice((r[1]||r[2]).length)}}function q4(n,e){if(e===null)return new Date(NaN);const t=n.match(B4);if(!t)return new Date(NaN);const r=!!t[4],i=il(t[1]),s=il(t[2])-1,o=il(t[3]),a=il(t[4]),l=il(t[5])-1;if(r)return X4(e,a,l)?H4(e,a,l):new Date(NaN);{const c=new Date(0);return!K4(e,s,o)||!G4(e,i)?new Date(NaN):(c.setUTCFullYear(e,s,Math.max(i,o)),c)}}function il(n){return n?parseInt(n):1}function W4(n){const e=n.match(U4);if(!e)return NaN;const t=xp(e[1]),r=xp(e[2]),i=xp(e[3]);return J4(t,r,i)?t*ff+r*hf+i*1e3:NaN}function xp(n){return n&&parseFloat(n.replace(",","."))||0}function Y4(n){if(n==="Z")return 0;const e=n.match(j4);if(!e)return 0;const t=e[1]==="+"?-1:1,r=parseInt(e[2]),i=e[3]&&parseInt(e[3])||0;return Z4(r,i)?t*(r*ff+i*hf):NaN}function H4(n,e,t){const r=new Date(0);r.setUTCFullYear(n,0,4);const i=r.getUTCDay()||7,s=(e-1)*7+t+1-i;return r.setUTCDate(r.getUTCDate()+s),r}const Q4=[31,null,31,30,31,30,31,31,30,31,30,31];function AP(n){return n%400===0||n%4===0&&n%100!==0}function K4(n,e,t){return e>=0&&e<=11&&t>=1&&t<=(Q4[e]||(AP(n)?29:28))}function G4(n,e){return e>=1&&e<=(AP(n)?366:365)}function X4(n,e,t){return e>=1&&e<=53&&t>=0&&t<=6}function J4(n,e,t){return n===24?e===0&&t===0:t>=0&&t<60&&e>=0&&e<60&&n>=0&&n<25}function Z4(n,e){return e>=0&&e<=59}function eU(n){const e=J(n),t=e.getFullYear(),r=e.getMonth(),i=Ie(n,0);return i.setFullYear(t,r+1,0),i.setHours(0,0,0,0),i.getDate()}function cn(n,e){const t=J(n),r=t.getFullYear(),i=t.getDate(),s=Ie(n,0);s.setFullYear(r,e,15),s.setHours(0,0,0,0);const o=eU(s);return t.setMonth(e,Math.min(i,o)),t}function tU(n,e){let t=J(n);return isNaN(+t)?Ie(n,NaN):(e.year!=null&&t.setFullYear(e.year),e.month!=null&&(t=cn(t,e.month)),e.date!=null&&t.setDate(e.date),e.hours!=null&&t.setHours(e.hours),e.minutes!=null&&t.setMinutes(e.minutes),e.seconds!=null&&t.setSeconds(e.seconds),e.milliseconds!=null&&t.setMilliseconds(e.milliseconds),t)}function rd(n,e){const t=J(n);return t.setHours(e),t}function id(n,e){const t=J(n);return t.setMinutes(e),t}function mo(n,e){const t=J(n),r=Math.trunc(t.getMonth()/3)+1,i=e-r;return cn(t,t.getMonth()+i*3)}function sd(n,e){const t=J(n);return t.setSeconds(e),t}function zn(n,e){const t=J(n);return isNaN(+t)?Ie(n,NaN):(t.setFullYear(e),t)}function NP(n){const e=J(n);return e.setDate(1),e.setHours(0,0,0,0),e}function nU(n,e){return Hi(n,-e)}function ca(n,e){return Un(n,-e)}function MP(n,e){return A_(n,-e)}function QE(n,e){return th(n,-e)}function da(n,e){return Dr(n,-e)}function xa(n){return OP(n)?(n.nodeName||"").toLowerCase():"#document"}function fn(n){var e;return(n==null||(e=n.ownerDocument)==null?void 0:e.defaultView)||window}function $r(n){var e;return(e=(OP(n)?n.ownerDocument:n.document)||window.document)==null?void 0:e.documentElement}function OP(n){return n instanceof Node||n instanceof fn(n).Node}function Wt(n){return n instanceof Element||n instanceof fn(n).Element}function ur(n){return n instanceof HTMLElement||n instanceof fn(n).HTMLElement}function KE(n){return typeof ShadowRoot>"u"?!1:n instanceof ShadowRoot||n instanceof fn(n).ShadowRoot}function Vu(n){const{overflow:e,overflowX:t,overflowY:r,display:i}=kn(n);return/auto|scroll|overlay|hidden|clip/.test(e+r+t)&&!["inline","contents"].includes(i)}function rU(n){return["table","td","th"].includes(xa(n))}function mf(n){return[":popover-open",":modal"].some(e=>{try{return n.matches(e)}catch{return!1}})}function L_(n){const e=F_(),t=Wt(n)?kn(n):n;return t.transform!=="none"||t.perspective!=="none"||(t.containerType?t.containerType!=="normal":!1)||!e&&(t.backdropFilter?t.backdropFilter!=="none":!1)||!e&&(t.filter?t.filter!=="none":!1)||["transform","perspective","filter"].some(r=>(t.willChange||"").includes(r))||["paint","layout","strict","content"].some(r=>(t.contain||"").includes(r))}function iU(n){let e=Oi(n);for(;ur(e)&&!ha(e);){if(L_(e))return e;if(mf(e))return null;e=Oi(e)}return null}function F_(){return typeof CSS>"u"||!CSS.supports?!1:CSS.supports("-webkit-backdrop-filter","none")}function ha(n){return["html","body","#document"].includes(xa(n))}function kn(n){return fn(n).getComputedStyle(n)}function gf(n){return Wt(n)?{scrollLeft:n.scrollLeft,scrollTop:n.scrollTop}:{scrollLeft:n.scrollX,scrollTop:n.scrollY}}function Oi(n){if(xa(n)==="html")return n;const e=n.assignedSlot||n.parentNode||KE(n)&&n.host||$r(n);return KE(e)?e.host:e}function VP(n){const e=Oi(n);return ha(e)?n.ownerDocument?n.ownerDocument.body:n.body:ur(e)&&Vu(e)?e:VP(e)}function mu(n,e,t){var r;e===void 0&&(e=[]),t===void 0&&(t=!0);const i=VP(n),s=i===((r=n.ownerDocument)==null?void 0:r.body),o=fn(i);if(s){const a=gg(o);return e.concat(o,o.visualViewport||[],Vu(i)?i:[],a&&t?mu(a):[])}return e.concat(i,mu(i,[],t))}function gg(n){return n.parent&&Object.getPrototypeOf(n.parent)?n.frameElement:null}const fa=Math.min,Es=Math.max,uh=Math.round,Rc=Math.floor,Vi=n=>({x:n,y:n}),sU={left:"right",right:"left",bottom:"top",top:"bottom"},oU={start:"end",end:"start"};function aU(n,e,t){return Es(n,fa(e,t))}function yf(n,e){return typeof n=="function"?n(e):n}function pa(n){return n.split("-")[0]}function Lu(n){return n.split("-")[1]}function lU(n){return n==="x"?"y":"x"}function B_(n){return n==="y"?"height":"width"}function gu(n){return["top","bottom"].includes(pa(n))?"y":"x"}function U_(n){return lU(gu(n))}function uU(n,e,t){t===void 0&&(t=!1);const r=Lu(n),i=U_(n),s=B_(i);let o=i==="x"?r===(t?"end":"start")?"right":"left":r==="start"?"bottom":"top";return e.reference[s]>e.floating[s]&&(o=ch(o)),[o,ch(o)]}function cU(n){const e=ch(n);return[yg(n),e,yg(e)]}function yg(n){return n.replace(/start|end/g,e=>oU[e])}function dU(n,e,t){const r=["left","right"],i=["right","left"],s=["top","bottom"],o=["bottom","top"];switch(n){case"top":case"bottom":return t?e?i:r:e?r:i;case"left":case"right":return e?s:o;default:return[]}}function hU(n,e,t,r){const i=Lu(n);let s=dU(pa(n),t==="start",r);return i&&(s=s.map(o=>o+"-"+i),e&&(s=s.concat(s.map(yg)))),s}function ch(n){return n.replace(/left|right|bottom|top/g,e=>sU[e])}function fU(n){return{top:0,right:0,bottom:0,left:0,...n}}function LP(n){return typeof n!="number"?fU(n):{top:n,right:n,bottom:n,left:n}}function dh(n){const{x:e,y:t,width:r,height:i}=n;return{width:r,height:i,top:t,left:e,right:e+r,bottom:t+i,x:e,y:t}}function GE(n,e,t){let{reference:r,floating:i}=n;const s=gu(e),o=U_(e),a=B_(o),l=pa(e),c=s==="y",d=r.x+r.width/2-i.width/2,h=r.y+r.height/2-i.height/2,p=r[a]/2-i[a]/2;let g;switch(l){case"top":g={x:d,y:r.y-i.height};break;case"bottom":g={x:d,y:r.y+r.height};break;case"right":g={x:r.x+r.width,y:h};break;case"left":g={x:r.x-i.width,y:h};break;default:g={x:r.x,y:r.y}}switch(Lu(e)){case"start":g[o]-=p*(t&&c?-1:1);break;case"end":g[o]+=p*(t&&c?-1:1);break}return g}const pU=async(n,e,t)=>{const{placement:r="bottom",strategy:i="absolute",middleware:s=[],platform:o}=t,a=s.filter(Boolean),l=await(o.isRTL==null?void 0:o.isRTL(e));let c=await o.getElementRects({reference:n,floating:e,strategy:i}),{x:d,y:h}=GE(c,r,l),p=r,g={},v=0;for(let S=0;S<a.length;S++){const{name:D,fn:w}=a[S],{x:_,y:E,data:x,reset:A}=await w({x:d,y:h,initialPlacement:r,placement:p,strategy:i,middlewareData:g,rects:c,platform:o,elements:{reference:n,floating:e}});d=_??d,h=E??h,g={...g,[D]:{...g[D],...x}},A&&v<=50&&(v++,typeof A=="object"&&(A.placement&&(p=A.placement),A.rects&&(c=A.rects===!0?await o.getElementRects({reference:n,floating:e,strategy:i}):A.rects),{x:d,y:h}=GE(c,p,l)),S=-1)}return{x:d,y:h,placement:p,strategy:i,middlewareData:g}};async function mU(n,e){var t;e===void 0&&(e={});const{x:r,y:i,platform:s,rects:o,elements:a,strategy:l}=n,{boundary:c="clippingAncestors",rootBoundary:d="viewport",elementContext:h="floating",altBoundary:p=!1,padding:g=0}=yf(e,n),v=LP(g),D=a[p?h==="floating"?"reference":"floating":h],w=dh(await s.getClippingRect({element:(t=await(s.isElement==null?void 0:s.isElement(D)))==null||t?D:D.contextElement||await(s.getDocumentElement==null?void 0:s.getDocumentElement(a.floating)),boundary:c,rootBoundary:d,strategy:l})),_=h==="floating"?{x:r,y:i,width:o.floating.width,height:o.floating.height}:o.reference,E=await(s.getOffsetParent==null?void 0:s.getOffsetParent(a.floating)),x=await(s.isElement==null?void 0:s.isElement(E))?await(s.getScale==null?void 0:s.getScale(E))||{x:1,y:1}:{x:1,y:1},A=dh(s.convertOffsetParentRelativeRectToViewportRelativeRect?await s.convertOffsetParentRelativeRectToViewportRelativeRect({elements:a,rect:_,offsetParent:E,strategy:l}):_);return{top:(w.top-A.top+v.top)/x.y,bottom:(A.bottom-w.bottom+v.bottom)/x.y,left:(w.left-A.left+v.left)/x.x,right:(A.right-w.right+v.right)/x.x}}const gU=n=>({name:"arrow",options:n,async fn(e){const{x:t,y:r,placement:i,rects:s,platform:o,elements:a,middlewareData:l}=e,{element:c,padding:d=0}=yf(n,e)||{};if(c==null)return{};const h=LP(d),p={x:t,y:r},g=U_(i),v=B_(g),S=await o.getDimensions(c),D=g==="y",w=D?"top":"left",_=D?"bottom":"right",E=D?"clientHeight":"clientWidth",x=s.reference[v]+s.reference[g]-p[g]-s.floating[v],A=p[g]-s.reference[g],L=await(o.getOffsetParent==null?void 0:o.getOffsetParent(c));let I=L?L[E]:0;(!I||!await(o.isElement==null?void 0:o.isElement(L)))&&(I=a.floating[E]||s.floating[v]);const y=x/2-A/2,b=I/2-S[v]/2-1,k=fa(h[w],b),C=fa(h[_],b),R=k,P=I-S[v]-C,ne=I/2-S[v]/2+y,re=aU(R,ne,P),le=!l.arrow&&Lu(i)!=null&&ne!==re&&s.reference[v]/2-(ne<R?k:C)-S[v]/2<0,ie=le?ne<R?ne-R:ne-P:0;return{[g]:p[g]+ie,data:{[g]:re,centerOffset:ne-re-ie,...le&&{alignmentOffset:ie}},reset:le}}}),yU=function(n){return n===void 0&&(n={}),{name:"flip",options:n,async fn(e){var t,r;const{placement:i,middlewareData:s,rects:o,initialPlacement:a,platform:l,elements:c}=e,{mainAxis:d=!0,crossAxis:h=!0,fallbackPlacements:p,fallbackStrategy:g="bestFit",fallbackAxisSideDirection:v="none",flipAlignment:S=!0,...D}=yf(n,e);if((t=s.arrow)!=null&&t.alignmentOffset)return{};const w=pa(i),_=gu(a),E=pa(a)===a,x=await(l.isRTL==null?void 0:l.isRTL(c.floating)),A=p||(E||!S?[ch(a)]:cU(a)),L=v!=="none";!p&&L&&A.push(...hU(a,S,v,x));const I=[a,...A],y=await mU(e,D),b=[];let k=((r=s.flip)==null?void 0:r.overflows)||[];if(d&&b.push(y[w]),h){const ne=uU(i,o,x);b.push(y[ne[0]],y[ne[1]])}if(k=[...k,{placement:i,overflows:b}],!b.every(ne=>ne<=0)){var C,R;const ne=(((C=s.flip)==null?void 0:C.index)||0)+1,re=I[ne];if(re)return{data:{index:ne,overflows:k},reset:{placement:re}};let le=(R=k.filter(ie=>ie.overflows[0]<=0).sort((ie,q)=>ie.overflows[1]-q.overflows[1])[0])==null?void 0:R.placement;if(!le)switch(g){case"bestFit":{var P;const ie=(P=k.filter(q=>{if(L){const Q=gu(q.placement);return Q===_||Q==="y"}return!0}).map(q=>[q.placement,q.overflows.filter(Q=>Q>0).reduce((Q,se)=>Q+se,0)]).sort((q,Q)=>q[1]-Q[1])[0])==null?void 0:P[0];ie&&(le=ie);break}case"initialPlacement":le=a;break}if(i!==le)return{reset:{placement:le}}}return{}}}};async function _U(n,e){const{placement:t,platform:r,elements:i}=n,s=await(r.isRTL==null?void 0:r.isRTL(i.floating)),o=pa(t),a=Lu(t),l=gu(t)==="y",c=["left","top"].includes(o)?-1:1,d=s&&l?-1:1,h=yf(e,n);let{mainAxis:p,crossAxis:g,alignmentAxis:v}=typeof h=="number"?{mainAxis:h,crossAxis:0,alignmentAxis:null}:{mainAxis:0,crossAxis:0,alignmentAxis:null,...h};return a&&typeof v=="number"&&(g=a==="end"?v*-1:v),l?{x:g*d,y:p*c}:{x:p*c,y:g*d}}const vU=function(n){return n===void 0&&(n=0),{name:"offset",options:n,async fn(e){var t,r;const{x:i,y:s,placement:o,middlewareData:a}=e,l=await _U(e,n);return o===((t=a.offset)==null?void 0:t.placement)&&(r=a.arrow)!=null&&r.alignmentOffset?{}:{x:i+l.x,y:s+l.y,data:{...l,placement:o}}}}};function FP(n){const e=kn(n);let t=parseFloat(e.width)||0,r=parseFloat(e.height)||0;const i=ur(n),s=i?n.offsetWidth:t,o=i?n.offsetHeight:r,a=uh(t)!==s||uh(r)!==o;return a&&(t=s,r=o),{width:t,height:r,$:a}}function j_(n){return Wt(n)?n:n.contextElement}function Fo(n){const e=j_(n);if(!ur(e))return Vi(1);const t=e.getBoundingClientRect(),{width:r,height:i,$:s}=FP(e);let o=(s?uh(t.width):t.width)/r,a=(s?uh(t.height):t.height)/i;return(!o||!Number.isFinite(o))&&(o=1),(!a||!Number.isFinite(a))&&(a=1),{x:o,y:a}}const wU=Vi(0);function BP(n){const e=fn(n);return!F_()||!e.visualViewport?wU:{x:e.visualViewport.offsetLeft,y:e.visualViewport.offsetTop}}function EU(n,e,t){return e===void 0&&(e=!1),!t||e&&t!==fn(n)?!1:e}function $s(n,e,t,r){e===void 0&&(e=!1),t===void 0&&(t=!1);const i=n.getBoundingClientRect(),s=j_(n);let o=Vi(1);e&&(r?Wt(r)&&(o=Fo(r)):o=Fo(n));const a=EU(s,t,r)?BP(s):Vi(0);let l=(i.left+a.x)/o.x,c=(i.top+a.y)/o.y,d=i.width/o.x,h=i.height/o.y;if(s){const p=fn(s),g=r&&Wt(r)?fn(r):r;let v=p,S=gg(v);for(;S&&r&&g!==v;){const D=Fo(S),w=S.getBoundingClientRect(),_=kn(S),E=w.left+(S.clientLeft+parseFloat(_.paddingLeft))*D.x,x=w.top+(S.clientTop+parseFloat(_.paddingTop))*D.y;l*=D.x,c*=D.y,d*=D.x,h*=D.y,l+=E,c+=x,v=fn(S),S=gg(v)}}return dh({width:d,height:h,x:l,y:c})}function TU(n){let{elements:e,rect:t,offsetParent:r,strategy:i}=n;const s=i==="fixed",o=$r(r),a=e?mf(e.floating):!1;if(r===o||a&&s)return t;let l={scrollLeft:0,scrollTop:0},c=Vi(1);const d=Vi(0),h=ur(r);if((h||!h&&!s)&&((xa(r)!=="body"||Vu(o))&&(l=gf(r)),ur(r))){const p=$s(r);c=Fo(r),d.x=p.x+r.clientLeft,d.y=p.y+r.clientTop}return{width:t.width*c.x,height:t.height*c.y,x:t.x*c.x-l.scrollLeft*c.x+d.x,y:t.y*c.y-l.scrollTop*c.y+d.y}}function IU(n){return Array.from(n.getClientRects())}function UP(n){return $s($r(n)).left+gf(n).scrollLeft}function SU(n){const e=$r(n),t=gf(n),r=n.ownerDocument.body,i=Es(e.scrollWidth,e.clientWidth,r.scrollWidth,r.clientWidth),s=Es(e.scrollHeight,e.clientHeight,r.scrollHeight,r.clientHeight);let o=-t.scrollLeft+UP(n);const a=-t.scrollTop;return kn(r).direction==="rtl"&&(o+=Es(e.clientWidth,r.clientWidth)-i),{width:i,height:s,x:o,y:a}}function DU(n,e){const t=fn(n),r=$r(n),i=t.visualViewport;let s=r.clientWidth,o=r.clientHeight,a=0,l=0;if(i){s=i.width,o=i.height;const c=F_();(!c||c&&e==="fixed")&&(a=i.offsetLeft,l=i.offsetTop)}return{width:s,height:o,x:a,y:l}}function bU(n,e){const t=$s(n,!0,e==="fixed"),r=t.top+n.clientTop,i=t.left+n.clientLeft,s=ur(n)?Fo(n):Vi(1),o=n.clientWidth*s.x,a=n.clientHeight*s.y,l=i*s.x,c=r*s.y;return{width:o,height:a,x:l,y:c}}function XE(n,e,t){let r;if(e==="viewport")r=DU(n,t);else if(e==="document")r=SU($r(n));else if(Wt(e))r=bU(e,t);else{const i=BP(n);r={...e,x:e.x-i.x,y:e.y-i.y}}return dh(r)}function jP(n,e){const t=Oi(n);return t===e||!Wt(t)||ha(t)?!1:kn(t).position==="fixed"||jP(t,e)}function PU(n,e){const t=e.get(n);if(t)return t;let r=mu(n,[],!1).filter(a=>Wt(a)&&xa(a)!=="body"),i=null;const s=kn(n).position==="fixed";let o=s?Oi(n):n;for(;Wt(o)&&!ha(o);){const a=kn(o),l=L_(o);!l&&a.position==="fixed"&&(i=null),(s?!l&&!i:!l&&a.position==="static"&&!!i&&["absolute","fixed"].includes(i.position)||Vu(o)&&!l&&jP(n,o))?r=r.filter(d=>d!==o):i=a,o=Oi(o)}return e.set(n,r),r}function kU(n){let{element:e,boundary:t,rootBoundary:r,strategy:i}=n;const o=[...t==="clippingAncestors"?mf(e)?[]:PU(e,this._c):[].concat(t),r],a=o[0],l=o.reduce((c,d)=>{const h=XE(e,d,i);return c.top=Es(h.top,c.top),c.right=fa(h.right,c.right),c.bottom=fa(h.bottom,c.bottom),c.left=Es(h.left,c.left),c},XE(e,a,i));return{width:l.right-l.left,height:l.bottom-l.top,x:l.left,y:l.top}}function xU(n){const{width:e,height:t}=FP(n);return{width:e,height:t}}function CU(n,e,t){const r=ur(e),i=$r(e),s=t==="fixed",o=$s(n,!0,s,e);let a={scrollLeft:0,scrollTop:0};const l=Vi(0);if(r||!r&&!s)if((xa(e)!=="body"||Vu(i))&&(a=gf(e)),r){const h=$s(e,!0,s,e);l.x=h.x+e.clientLeft,l.y=h.y+e.clientTop}else i&&(l.x=UP(i));const c=o.left+a.scrollLeft-l.x,d=o.top+a.scrollTop-l.y;return{x:c,y:d,width:o.width,height:o.height}}function Cp(n){return kn(n).position==="static"}function JE(n,e){return!ur(n)||kn(n).position==="fixed"?null:e?e(n):n.offsetParent}function $P(n,e){const t=fn(n);if(mf(n))return t;if(!ur(n)){let i=Oi(n);for(;i&&!ha(i);){if(Wt(i)&&!Cp(i))return i;i=Oi(i)}return t}let r=JE(n,e);for(;r&&rU(r)&&Cp(r);)r=JE(r,e);return r&&ha(r)&&Cp(r)&&!L_(r)?t:r||iU(n)||t}const RU=async function(n){const e=this.getOffsetParent||$P,t=this.getDimensions,r=await t(n.floating);return{reference:CU(n.reference,await e(n.floating),n.strategy),floating:{x:0,y:0,width:r.width,height:r.height}}};function AU(n){return kn(n).direction==="rtl"}const NU={convertOffsetParentRelativeRectToViewportRelativeRect:TU,getDocumentElement:$r,getClippingRect:kU,getOffsetParent:$P,getElementRects:RU,getClientRects:IU,getDimensions:xU,getScale:Fo,isElement:Wt,isRTL:AU};function MU(n,e){let t=null,r;const i=$r(n);function s(){var a;clearTimeout(r),(a=t)==null||a.disconnect(),t=null}function o(a,l){a===void 0&&(a=!1),l===void 0&&(l=1),s();const{left:c,top:d,width:h,height:p}=n.getBoundingClientRect();if(a||e(),!h||!p)return;const g=Rc(d),v=Rc(i.clientWidth-(c+h)),S=Rc(i.clientHeight-(d+p)),D=Rc(c),_={rootMargin:-g+"px "+-v+"px "+-S+"px "+-D+"px",threshold:Es(0,fa(1,l))||1};let E=!0;function x(A){const L=A[0].intersectionRatio;if(L!==l){if(!E)return o();L?o(!1,L):r=setTimeout(()=>{o(!1,1e-7)},1e3)}E=!1}try{t=new IntersectionObserver(x,{..._,root:i.ownerDocument})}catch{t=new IntersectionObserver(x,_)}t.observe(n)}return o(!0),s}function OU(n,e,t,r){r===void 0&&(r={});const{ancestorScroll:i=!0,ancestorResize:s=!0,elementResize:o=typeof ResizeObserver=="function",layoutShift:a=typeof IntersectionObserver=="function",animationFrame:l=!1}=r,c=j_(n),d=i||s?[...c?mu(c):[],...mu(e)]:[];d.forEach(w=>{i&&w.addEventListener("scroll",t,{passive:!0}),s&&w.addEventListener("resize",t)});const h=c&&a?MU(c,t):null;let p=-1,g=null;o&&(g=new ResizeObserver(w=>{let[_]=w;_&&_.target===c&&g&&(g.unobserve(e),cancelAnimationFrame(p),p=requestAnimationFrame(()=>{var E;(E=g)==null||E.observe(e)})),t()}),c&&!l&&g.observe(c),g.observe(e));let v,S=l?$s(n):null;l&&D();function D(){const w=$s(n);S&&(w.x!==S.x||w.y!==S.y||w.width!==S.width||w.height!==S.height)&&t(),S=w,v=requestAnimationFrame(D)}return t(),()=>{var w;d.forEach(_=>{i&&_.removeEventListener("scroll",t),s&&_.removeEventListener("resize",t)}),h==null||h(),(w=g)==null||w.disconnect(),g=null,l&&cancelAnimationFrame(v)}}const VU=vU,LU=yU,ZE=gU,FU=(n,e,t)=>{const r=new Map,i={platform:NU,...t},s={...i.platform,_c:r};return pU(n,e,{...i,platform:s})};var od=typeof document<"u"?N.useLayoutEffect:N.useEffect;function hh(n,e){if(n===e)return!0;if(typeof n!=typeof e)return!1;if(typeof n=="function"&&n.toString()===e.toString())return!0;let t,r,i;if(n&&e&&typeof n=="object"){if(Array.isArray(n)){if(t=n.length,t!==e.length)return!1;for(r=t;r--!==0;)if(!hh(n[r],e[r]))return!1;return!0}if(i=Object.keys(n),t=i.length,t!==Object.keys(e).length)return!1;for(r=t;r--!==0;)if(!{}.hasOwnProperty.call(e,i[r]))return!1;for(r=t;r--!==0;){const s=i[r];if(!(s==="_owner"&&n.$$typeof)&&!hh(n[s],e[s]))return!1}return!0}return n!==n&&e!==e}function zP(n){return typeof window>"u"?1:(n.ownerDocument.defaultView||window).devicePixelRatio||1}function eT(n,e){const t=zP(n);return Math.round(e*t)/t}function tT(n){const e=N.useRef(n);return od(()=>{e.current=n}),e}function BU(n){n===void 0&&(n={});const{placement:e="bottom",strategy:t="absolute",middleware:r=[],platform:i,elements:{reference:s,floating:o}={},transform:a=!0,whileElementsMounted:l,open:c}=n,[d,h]=N.useState({x:0,y:0,strategy:t,placement:e,middlewareData:{},isPositioned:!1}),[p,g]=N.useState(r);hh(p,r)||g(r);const[v,S]=N.useState(null),[D,w]=N.useState(null),_=N.useCallback(ie=>{ie!==L.current&&(L.current=ie,S(ie))},[]),E=N.useCallback(ie=>{ie!==I.current&&(I.current=ie,w(ie))},[]),x=s||v,A=o||D,L=N.useRef(null),I=N.useRef(null),y=N.useRef(d),b=l!=null,k=tT(l),C=tT(i),R=N.useCallback(()=>{if(!L.current||!I.current)return;const ie={placement:e,strategy:t,middleware:p};C.current&&(ie.platform=C.current),FU(L.current,I.current,ie).then(q=>{const Q={...q,isPositioned:!0};P.current&&!hh(y.current,Q)&&(y.current=Q,Rh.flushSync(()=>{h(Q)}))})},[p,e,t,C]);od(()=>{c===!1&&y.current.isPositioned&&(y.current.isPositioned=!1,h(ie=>({...ie,isPositioned:!1})))},[c]);const P=N.useRef(!1);od(()=>(P.current=!0,()=>{P.current=!1}),[]),od(()=>{if(x&&(L.current=x),A&&(I.current=A),x&&A){if(k.current)return k.current(x,A,R);R()}},[x,A,R,k,b]);const ne=N.useMemo(()=>({reference:L,floating:I,setReference:_,setFloating:E}),[_,E]),re=N.useMemo(()=>({reference:x,floating:A}),[x,A]),le=N.useMemo(()=>{const ie={position:t,left:0,top:0};if(!re.floating)return ie;const q=eT(re.floating,d.x),Q=eT(re.floating,d.y);return a?{...ie,transform:"translate("+q+"px, "+Q+"px)",...zP(re.floating)>=1.5&&{willChange:"transform"}}:{position:t,left:q,top:Q}},[t,a,re.floating,d.x,d.y]);return N.useMemo(()=>({...d,update:R,refs:ne,elements:re,floatingStyles:le}),[d,R,ne,re,le])}const UU=n=>{function e(t){return{}.hasOwnProperty.call(t,"current")}return{name:"arrow",options:n,fn(t){const{element:r,padding:i}=typeof n=="function"?n(t):n;return r&&e(r)?r.current!=null?ZE({element:r.current,padding:i}).fn(t):{}:r?ZE({element:r,padding:i}).fn(t):{}}}},jU=(n,e)=>({...VU(n),options:[n,e]}),$U=(n,e)=>({...LU(n),options:[n,e]}),zU=(n,e)=>({...UU(n),options:[n,e]}),qP={...NT},qU=qP.useInsertionEffect,WU=qU||(n=>n());function YU(n){const e=N.useRef(()=>{});return WU(()=>{e.current=n}),N.useCallback(function(){for(var t=arguments.length,r=new Array(t),i=0;i<t;i++)r[i]=arguments[i];return e.current==null?void 0:e.current(...r)},[])}var fh=typeof document<"u"?N.useLayoutEffect:N.useEffect;function _g(){return _g=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},_g.apply(this,arguments)}let nT=!1,HU=0;const rT=()=>"floating-ui-"+Math.random().toString(36).slice(2,6)+HU++;function QU(){const[n,e]=N.useState(()=>nT?rT():void 0);return fh(()=>{n==null&&e(rT())},[]),N.useEffect(()=>{nT=!0},[]),n}const KU=qP.useId,WP=KU||QU,GU=N.forwardRef(function(e,t){const{context:{placement:r,elements:{floating:i},middlewareData:{arrow:s}},width:o=14,height:a=7,tipRadius:l=0,strokeWidth:c=0,staticOffset:d,stroke:h,d:p,style:{transform:g,...v}={},...S}=e,D=WP(),[w,_]=N.useState(!1);if(fh(()=>{if(!i)return;kn(i).direction==="rtl"&&_(!0)},[i]),!i)return null;const E=c*2,x=E/2,A=o/2*(l/-8+1),L=a/2*l/4,[I,y]=r.split("-"),b=!!p,k=I==="top"||I==="bottom",C=d&&y==="end"?"bottom":"top";let R=d&&y==="end"?"right":"left";d&&w&&(R=y==="end"?"left":"right");const P=(s==null?void 0:s.x)!=null?d||s.x:"",ne=(s==null?void 0:s.y)!=null?d||s.y:"",re=p||"M0,0"+(" H"+o)+(" L"+(o-A)+","+(a-L))+(" Q"+o/2+","+a+" "+A+","+(a-L))+" Z",le={top:b?"rotate(180deg)":"",left:b?"rotate(90deg)":"rotate(-90deg)",bottom:b?"":"rotate(180deg)",right:b?"rotate(-90deg)":"rotate(90deg)"}[I];return N.createElement("svg",_g({},S,{"aria-hidden":!0,ref:t,width:b?o:o+E,height:o,viewBox:"0 0 "+o+" "+(a>o?a:o),style:{position:"absolute",pointerEvents:"none",[R]:P,[C]:ne,[I]:k||b?"100%":"calc(100% - "+E/2+"px)",transform:""+le+(g??""),...v}}),E>0&&N.createElement("path",{clipPath:"url(#"+D+")",fill:"none",stroke:h,strokeWidth:E+(p?0:1),d:re}),N.createElement("path",{stroke:E&&!p?S.fill:"none",d:re}),N.createElement("clipPath",{id:D},N.createElement("rect",{x:-x,y:x*(b?-1:1),width:o+E,height:o})))});function XU(){const n=new Map;return{emit(e,t){var r;(r=n.get(e))==null||r.forEach(i=>i(t))},on(e,t){n.set(e,[...n.get(e)||[],t])},off(e,t){var r;n.set(e,((r=n.get(e))==null?void 0:r.filter(i=>i!==t))||[])}}}const JU=N.createContext(null),ZU=N.createContext(null),ej=()=>{var n;return((n=N.useContext(JU))==null?void 0:n.id)||null},tj=()=>N.useContext(ZU);function nj(n){const{open:e=!1,onOpenChange:t,elements:r}=n,i=WP(),s=N.useRef({}),[o]=N.useState(()=>XU()),a=ej()!=null,[l,c]=N.useState(r.reference),d=YU((g,v,S)=>{s.current.openEvent=g?v:void 0,o.emit("openchange",{open:g,event:v,reason:S,nested:a}),t==null||t(g,v,S)}),h=N.useMemo(()=>({setPositionReference:c}),[]),p=N.useMemo(()=>({reference:l||r.reference||null,floating:r.floating||null,domReference:r.reference}),[l,r.reference,r.floating]);return N.useMemo(()=>({dataRef:s,open:e,onOpenChange:d,elements:p,events:o,floatingId:i,refs:h}),[e,d,p,o,i,h])}function rj(n){n===void 0&&(n={});const{nodeId:e}=n,t=nj({...n,elements:{reference:null,floating:null,...n.elements}}),r=n.rootContext||t,i=r.elements,[s,o]=N.useState(null),[a,l]=N.useState(null),d=(i==null?void 0:i.reference)||s,h=N.useRef(null),p=tj();fh(()=>{d&&(h.current=d)},[d]);const g=BU({...n,elements:{...i,...a&&{reference:a}}}),v=N.useCallback(E=>{const x=Wt(E)?{getBoundingClientRect:()=>E.getBoundingClientRect(),contextElement:E}:E;l(x),g.refs.setReference(x)},[g.refs]),S=N.useCallback(E=>{(Wt(E)||E===null)&&(h.current=E,o(E)),(Wt(g.refs.reference.current)||g.refs.reference.current===null||E!==null&&!Wt(E))&&g.refs.setReference(E)},[g.refs]),D=N.useMemo(()=>({...g.refs,setReference:S,setPositionReference:v,domReference:h}),[g.refs,S,v]),w=N.useMemo(()=>({...g.elements,domReference:d}),[g.elements,d]),_=N.useMemo(()=>({...g,...r,refs:D,elements:w,nodeId:e}),[g,D,w,e,r]);return fh(()=>{r.dataRef.current.floatingContext=_;const E=p==null?void 0:p.nodesRef.current.find(x=>x.id===e);E&&(E.context=_)}),N.useMemo(()=>({...g,context:_,refs:D,elements:w}),[g,D,w,_])}/*!
  react-datepicker v7.3.0
  https://github.com/Hacker0x01/react-datepicker
  Released under the MIT License.
*/var vg=function(e,t){return vg=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var s in i)Object.prototype.hasOwnProperty.call(i,s)&&(r[s]=i[s])},vg(e,t)};function wt(n,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");vg(n,e);function t(){this.constructor=n}n.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}var ge=function(){return ge=Object.assign||function(t){for(var r,i=1,s=arguments.length;i<s;i++){r=arguments[i];for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(t[o]=r[o])}return t},ge.apply(this,arguments)};function Zn(n,e,t){if(t||arguments.length===2)for(var r=0,i=e.length,s;r<i;r++)(s||!(r in e))&&(s||(s=Array.prototype.slice.call(e,0,r)),s[r]=e[r]);return n.concat(s||Array.prototype.slice.call(e))}var ij=function(n){var e=n.showTimeSelectOnly,t=e===void 0?!1:e,r=n.showTime,i=r===void 0?!1:r,s=n.className,o=n.children,a=t?"Choose Time":"Choose Date".concat(i?" and Time":"");return U.createElement("div",{className:s,role:"dialog","aria-label":a,"aria-modal":"true"},o)},K;(function(n){n.ArrowUp="ArrowUp",n.ArrowDown="ArrowDown",n.ArrowLeft="ArrowLeft",n.ArrowRight="ArrowRight",n.PageUp="PageUp",n.PageDown="PageDown",n.Home="Home",n.End="End",n.Enter="Enter",n.Space=" ",n.Tab="Tab",n.Escape="Escape",n.Backspace="Backspace",n.X="x"})(K||(K={}));function $_(){var n=typeof window<"u"?window:globalThis;return n}var Fu=12,sj=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g;function Se(n){if(n==null)return new Date;var e=typeof n=="string"?F4(n):J(n);return vr(e)?e:new Date}function oj(n,e,t,r,i){var s,o=null,a=Ts(t)||Ts(Al()),l=!0;if(Array.isArray(e))return e.forEach(function(d){var h=kp(n,d,new Date,{locale:a,useAdditionalWeekYearTokens:!0,useAdditionalDayOfYearTokens:!0});r&&(l=vr(h,i)&&n===Ve(h,d,t)),vr(h,i)&&l&&(o=h)}),o;if(o=kp(n,e,new Date,{locale:a,useAdditionalWeekYearTokens:!0,useAdditionalDayOfYearTokens:!0}),r)l=vr(o)&&n===Ve(o,e,t);else if(!vr(o)){var c=((s=e.match(sj))!==null&&s!==void 0?s:[]).map(function(d){var h=d[0];if(h==="p"||h==="P"){var p=oh[h];return a?p(d,a.formatLong):h}return d}).join("");n.length>0&&(o=kp(n,c.slice(0,n.length),new Date,{useAdditionalWeekYearTokens:!0,useAdditionalDayOfYearTokens:!0})),vr(o)||(o=new Date(n))}return vr(o)&&l?o:null}function vr(n,e){return ah(n)&&!js(n,e??new Date("1/1/1800"))}function Ve(n,e,t){if(t==="en")return qE(n,e,{useAdditionalWeekYearTokens:!0,useAdditionalDayOfYearTokens:!0});var r=t?Ts(t):void 0;return t&&!r&&console.warn('A locale object was not found for the provided string ["'.concat(t,'"].')),!r&&Al()&&Ts(Al())&&(r=Ts(Al())),qE(n,e,{locale:r,useAdditionalWeekYearTokens:!0,useAdditionalDayOfYearTokens:!0})}function _n(n,e){var t=e.dateFormat,r=e.locale,i=Array.isArray(t)&&t.length>0?t[0]:t;return n&&Ve(n,i,r)||""}function aj(n,e,t){if(!n)return"";var r=_n(n,t),i=e?_n(e,t):"";return"".concat(r," - ").concat(i)}function lj(n,e){if(!(n!=null&&n.length))return"";var t=n[0]?_n(n[0],e):"";if(n.length===1)return t;if(n.length===2&&n[1]){var r=_n(n[1],e);return"".concat(t,", ").concat(r)}var i=n.length-1;return"".concat(t," (+").concat(i,")")}function Rp(n,e){var t=e.hour,r=t===void 0?0:t,i=e.minute,s=i===void 0?0:i,o=e.second,a=o===void 0?0:o;return rd(id(sd(n,a),s),r)}function uj(n){return N_(n)}function cj(n,e){return Ve(n,"ddd",e)}function ad(n){return Us(n)}function wi(n,e,t){var r=Ts(e||Al());return Or(n,{locale:r,weekStartsOn:t})}function Ei(n){return NP(n)}function pl(n){return pf(n)}function iT(n){return mg(n)}function sT(){return Us(Se())}function oT(n){return vP(n)}function dj(n){return qF(n)}function qn(n,e){return n&&e?jB(n,e):!n&&!e}function zt(n,e){return n&&e?BB(n,e):!n&&!e}function ph(n,e){return n&&e?UB(n,e):!n&&!e}function me(n,e){return n&&e?FB(n,e):!n&&!e}function ms(n,e){return n&&e?LB(n,e):!n&&!e}function ml(n,e,t){var r,i=Us(e),s=vP(t);try{r=pu(n,{start:i,end:s})}catch{r=!1}return r}function hj(n,e){var t=$_();t.__localeData__||(t.__localeData__={}),t.__localeData__[n]=e}function Al(){var n=$_();return n.__localeId__}function Ts(n){if(typeof n=="string"){var e=$_();return e.__localeData__?e.__localeData__[n]:void 0}else return n}function fj(n,e,t){return e(Ve(n,"EEEE",t))}function pj(n,e){return Ve(n,"EEEEEE",e)}function mj(n,e){return Ve(n,"EEE",e)}function z_(n,e){return Ve(cn(Se(),n),"LLLL",e)}function YP(n,e){return Ve(cn(Se(),n),"LLL",e)}function gj(n,e){return Ve(mo(Se(),n),"QQQ",e)}function ai(n,e){var t=e===void 0?{}:e,r=t.minDate,i=t.maxDate,s=t.excludeDates,o=t.excludeDateIntervals,a=t.includeDates,l=t.includeDateIntervals,c=t.filterDate;return Bu(n,{minDate:r,maxDate:i})||s&&s.some(function(d){var h;return d instanceof Date?me(n,d):me(n,(h=d.date)!==null&&h!==void 0?h:new Date)})||o&&o.some(function(d){var h=d.start,p=d.end;return pu(n,{start:h,end:p})})||a&&!a.some(function(d){return me(n,d)})||l&&!l.some(function(d){var h=d.start,p=d.end;return pu(n,{start:h,end:p})})||c&&!c(Se(n))||!1}function q_(n,e){var t=e===void 0?{}:e,r=t.excludeDates,i=t.excludeDateIntervals;return i&&i.length>0?i.some(function(s){var o=s.start,a=s.end;return pu(n,{start:o,end:a})}):r&&r.some(function(s){var o;return s instanceof Date?me(n,s):me(n,(o=s.date)!==null&&o!==void 0?o:new Date)})||!1}function HP(n,e){var t=e===void 0?{}:e,r=t.minDate,i=t.maxDate,s=t.excludeDates,o=t.includeDates,a=t.filterDate;return Bu(n,{minDate:r?NP(r):void 0,maxDate:i?$F(i):void 0})||(s==null?void 0:s.some(function(l){return zt(n,l instanceof Date?l:l.date)}))||o&&!o.some(function(l){return zt(n,l)})||a&&!a(Se(n))||!1}function Ac(n,e,t,r){var i=ue(n),s=qt(n),o=ue(e),a=qt(e),l=ue(r);return i===o&&i===l?s<=t&&t<=a:i<o?l===i&&s<=t||l===o&&a>=t||l<o&&l>i:!1}function yj(n,e){var t=e===void 0?{}:e,r=t.minDate,i=t.maxDate,s=t.excludeDates,o=t.includeDates;return Bu(n,{minDate:r,maxDate:i})||s&&s.some(function(a){return zt(a instanceof Date?a:a.date,n)})||o&&!o.some(function(a){return zt(a,n)})||!1}function Ap(n,e){var t=e===void 0?{}:e,r=t.minDate,i=t.maxDate,s=t.excludeDates,o=t.includeDates,a=t.filterDate;return Bu(n,{minDate:r,maxDate:i})||(s==null?void 0:s.some(function(l){return ph(n,l instanceof Date?l:l.date)}))||o&&!o.some(function(l){return ph(n,l)})||a&&!a(Se(n))||!1}function Nc(n,e,t){if(!e||!t||!ah(e)||!ah(t))return!1;var r=ue(e),i=ue(t);return r<=n&&i>=n}function wg(n,e){var t=e===void 0?{}:e,r=t.minDate,i=t.maxDate,s=t.excludeDates,o=t.includeDates,a=t.filterDate,l=new Date(n,0,1);return Bu(l,{minDate:r?pf(r):void 0,maxDate:i?wP(i):void 0})||(s==null?void 0:s.some(function(c){return qn(l,c instanceof Date?c:c.date)}))||o&&!o.some(function(c){return qn(l,c)})||a&&!a(Se(l))||!1}function Mc(n,e,t,r){var i=ue(n),s=ws(n),o=ue(e),a=ws(e),l=ue(r);return i===o&&i===l?s<=t&&t<=a:i<o?l===i&&s<=t||l===o&&a>=t||l<o&&l>i:!1}function Bu(n,e){var t,r=e===void 0?{}:e,i=r.minDate,s=r.maxDate;return(t=i&&fu(n,i)<0||s&&fu(n,s)>0)!==null&&t!==void 0?t:!1}function aT(n,e){return e.some(function(t){return sr(t)===sr(n)&&or(t)===or(n)&&Pr(t)===Pr(n)})}function lT(n,e){var t=e===void 0?{}:e,r=t.excludeTimes,i=t.includeTimes,s=t.filterTime;return r&&aT(n,r)||i&&!aT(n,i)||s&&!s(n)||!1}function uT(n,e){var t=e.minTime,r=e.maxTime;if(!t||!r)throw new Error("Both minTime and maxTime props required");var i=Se();i=rd(i,sr(n)),i=id(i,or(n)),i=sd(i,Pr(n));var s=Se();s=rd(s,sr(t)),s=id(s,or(t)),s=sd(s,Pr(t));var o=Se();o=rd(o,sr(r)),o=id(o,or(r)),o=sd(o,Pr(r));var a;try{a=!pu(i,{start:s,end:o})}catch{a=!1}return a}function cT(n,e){var t=e===void 0?{}:e,r=t.minDate,i=t.includeDates,s=ca(n,1);return r&&rh(r,s)>0||i&&i.every(function(o){return rh(o,s)>0})||!1}function dT(n,e){var t=e===void 0?{}:e,r=t.maxDate,i=t.includeDates,s=Un(n,1);return r&&rh(s,r)>0||i&&i.every(function(o){return rh(s,o)>0})||!1}function _j(n,e){var t=e===void 0?{}:e,r=t.minDate,i=t.includeDates,s=pf(n),o=MP(s,1);return r&&ih(r,o)>0||i&&i.every(function(a){return ih(a,o)>0})||!1}function vj(n,e){var t=e===void 0?{}:e,r=t.maxDate,i=t.includeDates,s=wP(n),o=A_(s,1);return r&&ih(o,r)>0||i&&i.every(function(a){return ih(o,a)>0})||!1}function hT(n,e){var t=e===void 0?{}:e,r=t.minDate,i=t.includeDates,s=da(n,1);return r&&sh(r,s)>0||i&&i.every(function(o){return sh(o,s)>0})||!1}function wj(n,e){var t=e===void 0?{}:e,r=t.minDate,i=t.yearItemNumber,s=i===void 0?Fu:i,o=pl(da(n,s)),a=li(o,s).endPeriod,l=r&&ue(r);return l&&l>a||!1}function fT(n,e){var t=e===void 0?{}:e,r=t.maxDate,i=t.includeDates,s=Dr(n,1);return r&&sh(s,r)>0||i&&i.every(function(o){return sh(s,o)>0})||!1}function Ej(n,e){var t=e===void 0?{}:e,r=t.maxDate,i=t.yearItemNumber,s=i===void 0?Fu:i,o=Dr(n,s),a=li(o,s).startPeriod,l=r&&ue(r);return l&&l<a||!1}function QP(n){var e=n.minDate,t=n.includeDates;if(t&&e){var r=t.filter(function(i){return fu(i,e)>=0});return HE(r)}else return t?HE(t):e}function KP(n){var e=n.maxDate,t=n.includeDates;if(t&&e){var r=t.filter(function(i){return fu(i,e)<=0});return YE(r)}else return t?YE(t):e}function pT(n,e){var t;n===void 0&&(n=[]),e===void 0&&(e="react-datepicker__day--highlighted");for(var r=new Map,i=0,s=n.length;i<s;i++){var o=n[i];if(br(o)){var a=Ve(o,"MM.dd.yyyy"),l=r.get(a)||[];l.includes(e)||(l.push(e),r.set(a,l))}else if(typeof o=="object"){var c=Object.keys(o),d=(t=c[0])!==null&&t!==void 0?t:"",h=o[d];if(typeof d=="string"&&Array.isArray(h))for(var p=0,g=h.length;p<g;p++){var v=h[p];if(v){var a=Ve(v,"MM.dd.yyyy"),l=r.get(a)||[];l.includes(d)||(l.push(d),r.set(a,l))}}}}return r}function Tj(n,e){return n.length!==e.length?!1:n.every(function(t,r){return t===e[r]})}function Ij(n,e){n===void 0&&(n=[]),e===void 0&&(e="react-datepicker__day--holidays");var t=new Map;return n.forEach(function(r){var i=r.date,s=r.holidayName;if(br(i)){var o=Ve(i,"MM.dd.yyyy"),a=t.get(o)||{className:"",holidayNames:[]};if(!("className"in a&&a.className===e&&Tj(a.holidayNames,[s]))){a.className=e;var l=a.holidayNames;a.holidayNames=l?Zn(Zn([],l,!0),[s],!1):[s],t.set(o,a)}}}),t}function Sj(n,e,t,r,i){for(var s=i.length,o=[],a=0;a<s;a++){var l=n,c=i[a];c&&(l=UF(l,sr(c)),l=hg(l,or(c)),l=jF(l,Pr(c)));var d=hg(n,(t+1)*r);Mi(l,e)&&js(l,d)&&c!=null&&o.push(c)}return o}function mT(n){return n<10?"0".concat(n):"".concat(n)}function li(n,e){e===void 0&&(e=Fu);var t=Math.ceil(ue(n)/e)*e,r=t-(e-1);return{startPeriod:r,endPeriod:t}}function Dj(n){var e=new Date(n.getFullYear(),n.getMonth(),n.getDate()),t=new Date(n.getFullYear(),n.getMonth(),n.getDate(),24);return Math.round((+t-+e)/36e5)}function gT(n){var e=n.getSeconds(),t=n.getMilliseconds();return J(n.getTime()-e*1e3-t)}function bj(n,e){return gT(n).getTime()===gT(e).getTime()}function yT(n){if(!br(n))throw new Error("Invalid date");var e=new Date(n);return e.setHours(0,0,0,0),e}function _T(n,e){if(!br(n)||!br(e))throw new Error("Invalid date received");var t=yT(n),r=yT(e);return js(t,r)}function GP(n){return n.key===K.Space}var Pj=function(n){wt(e,n);function e(t){var r=n.call(this,t)||this;return r.onTimeChange=function(i){var s,o;r.setState({time:i});var a=r.props.date,l=a instanceof Date&&!isNaN(+a),c=l?a:new Date;if(i!=null&&i.includes(":")){var d=i.split(":"),h=d[0],p=d[1];c.setHours(Number(h)),c.setMinutes(Number(p))}(o=(s=r.props).onChange)===null||o===void 0||o.call(s,c)},r.renderTimeInput=function(){var i=r.state.time,s=r.props,o=s.date,a=s.timeString,l=s.customTimeInput;return l?N.cloneElement(l,{date:o,value:i,onChange:r.onTimeChange}):U.createElement("input",{type:"time",className:"react-datepicker-time__input",placeholder:"Time",name:"time-input",required:!0,value:i,onChange:function(c){r.onTimeChange(c.target.value||a)}})},r.state={time:r.props.timeString},r}return e.getDerivedStateFromProps=function(t,r){return t.timeString!==r.time?{time:t.timeString}:null},e.prototype.render=function(){return U.createElement("div",{className:"react-datepicker__input-time-container"},U.createElement("div",{className:"react-datepicker-time__caption"},this.props.timeInputLabel),U.createElement("div",{className:"react-datepicker-time__input-container"},U.createElement("div",{className:"react-datepicker-time__input"},this.renderTimeInput())))},e}(N.Component),kj=function(n){wt(e,n);function e(){var t=n!==null&&n.apply(this,arguments)||this;return t.dayEl=N.createRef(),t.handleClick=function(r){!t.isDisabled()&&t.props.onClick&&t.props.onClick(r)},t.handleMouseEnter=function(r){!t.isDisabled()&&t.props.onMouseEnter&&t.props.onMouseEnter(r)},t.handleOnKeyDown=function(r){var i,s,o=r.key;o===K.Space&&(r.preventDefault(),r.key=K.Enter),(s=(i=t.props).handleOnKeyDown)===null||s===void 0||s.call(i,r)},t.isSameDay=function(r){return me(t.props.day,r)},t.isKeyboardSelected=function(){var r;if(t.props.disabledKeyboardNavigation)return!1;var i=t.props.selectsMultiple?(r=t.props.selectedDates)===null||r===void 0?void 0:r.some(function(o){return t.isSameDayOrWeek(o)}):t.isSameDayOrWeek(t.props.selected),s=t.props.preSelection&&t.isDisabled(t.props.preSelection);return!i&&t.isSameDayOrWeek(t.props.preSelection)&&!s},t.isDisabled=function(r){return r===void 0&&(r=t.props.day),ai(r,{minDate:t.props.minDate,maxDate:t.props.maxDate,excludeDates:t.props.excludeDates,excludeDateIntervals:t.props.excludeDateIntervals,includeDateIntervals:t.props.includeDateIntervals,includeDates:t.props.includeDates,filterDate:t.props.filterDate})},t.isExcluded=function(){return q_(t.props.day,{excludeDates:t.props.excludeDates,excludeDateIntervals:t.props.excludeDateIntervals})},t.isStartOfWeek=function(){return me(t.props.day,wi(t.props.day,t.props.locale,t.props.calendarStartDay))},t.isSameWeek=function(r){return t.props.showWeekPicker&&me(r,wi(t.props.day,t.props.locale,t.props.calendarStartDay))},t.isSameDayOrWeek=function(r){return t.isSameDay(r)||t.isSameWeek(r)},t.getHighLightedClass=function(){var r=t.props,i=r.day,s=r.highlightDates;if(!s)return!1;var o=Ve(i,"MM.dd.yyyy");return s.get(o)},t.getHolidaysClass=function(){var r,i=t.props,s=i.day,o=i.holidays;if(!o)return[void 0];var a=Ve(s,"MM.dd.yyyy");return o.has(a)?[(r=o.get(a))===null||r===void 0?void 0:r.className]:[void 0]},t.isInRange=function(){var r=t.props,i=r.day,s=r.startDate,o=r.endDate;return!s||!o?!1:ml(i,s,o)},t.isInSelectingRange=function(){var r,i=t.props,s=i.day,o=i.selectsStart,a=i.selectsEnd,l=i.selectsRange,c=i.selectsDisabledDaysInRange,d=i.startDate,h=i.endDate,p=(r=t.props.selectingDate)!==null&&r!==void 0?r:t.props.preSelection;return!(o||a||l)||!p||!c&&t.isDisabled()?!1:o&&h&&(js(p,h)||ms(p,h))?ml(s,p,h):a&&d&&(Mi(p,d)||ms(p,d))||l&&d&&!h&&(Mi(p,d)||ms(p,d))?ml(s,d,p):!1},t.isSelectingRangeStart=function(){var r;if(!t.isInSelectingRange())return!1;var i=t.props,s=i.day,o=i.startDate,a=i.selectsStart,l=(r=t.props.selectingDate)!==null&&r!==void 0?r:t.props.preSelection;return a?me(s,l):me(s,o)},t.isSelectingRangeEnd=function(){var r;if(!t.isInSelectingRange())return!1;var i=t.props,s=i.day,o=i.endDate,a=i.selectsEnd,l=i.selectsRange,c=(r=t.props.selectingDate)!==null&&r!==void 0?r:t.props.preSelection;return a||l?me(s,c):me(s,o)},t.isRangeStart=function(){var r=t.props,i=r.day,s=r.startDate,o=r.endDate;return!s||!o?!1:me(s,i)},t.isRangeEnd=function(){var r=t.props,i=r.day,s=r.startDate,o=r.endDate;return!s||!o?!1:me(o,i)},t.isWeekend=function(){var r=VB(t.props.day);return r===0||r===6},t.isAfterMonth=function(){return t.props.month!==void 0&&(t.props.month+1)%12===qt(t.props.day)},t.isBeforeMonth=function(){return t.props.month!==void 0&&(qt(t.props.day)+1)%12===t.props.month},t.isCurrentDay=function(){return t.isSameDay(Se())},t.isSelected=function(){var r;return t.props.selectsMultiple?(r=t.props.selectedDates)===null||r===void 0?void 0:r.some(function(i){return t.isSameDayOrWeek(i)}):t.isSameDayOrWeek(t.props.selected)},t.getClassNames=function(r){var i=t.props.dayClassName?t.props.dayClassName(r):void 0;return mt("react-datepicker__day",i,"react-datepicker__day--"+cj(t.props.day),{"react-datepicker__day--disabled":t.isDisabled(),"react-datepicker__day--excluded":t.isExcluded(),"react-datepicker__day--selected":t.isSelected(),"react-datepicker__day--keyboard-selected":t.isKeyboardSelected(),"react-datepicker__day--range-start":t.isRangeStart(),"react-datepicker__day--range-end":t.isRangeEnd(),"react-datepicker__day--in-range":t.isInRange(),"react-datepicker__day--in-selecting-range":t.isInSelectingRange(),"react-datepicker__day--selecting-range-start":t.isSelectingRangeStart(),"react-datepicker__day--selecting-range-end":t.isSelectingRangeEnd(),"react-datepicker__day--today":t.isCurrentDay(),"react-datepicker__day--weekend":t.isWeekend(),"react-datepicker__day--outside-month":t.isAfterMonth()||t.isBeforeMonth()},t.getHighLightedClass(),t.getHolidaysClass())},t.getAriaLabel=function(){var r=t.props,i=r.day,s=r.ariaLabelPrefixWhenEnabled,o=s===void 0?"Choose":s,a=r.ariaLabelPrefixWhenDisabled,l=a===void 0?"Not available":a,c=t.isDisabled()||t.isExcluded()?l:o;return"".concat(c," ").concat(Ve(i,"PPPP",t.props.locale))},t.getTitle=function(){var r=t.props,i=r.day,s=r.holidays,o=s===void 0?new Map:s,a=r.excludeDates,l=Ve(i,"MM.dd.yyyy"),c=[];return o.has(l)&&c.push.apply(c,o.get(l).holidayNames),t.isExcluded()&&c.push(a==null?void 0:a.filter(function(d){return d instanceof Date?me(d,i):me(d==null?void 0:d.date,i)}).map(function(d){if(!(d instanceof Date))return d==null?void 0:d.message})),c.join(", ")},t.getTabIndex=function(){var r=t.props.selected,i=t.props.preSelection,s=!(t.props.showWeekPicker&&(t.props.showWeekNumber||!t.isStartOfWeek()))&&(t.isKeyboardSelected()||t.isSameDay(r)&&me(i,r))?0:-1;return s},t.handleFocusDay=function(){var r;t.shouldFocusDay()&&((r=t.dayEl.current)===null||r===void 0||r.focus({preventScroll:!0}))},t.renderDayContents=function(){return t.props.monthShowsDuplicateDaysEnd&&t.isAfterMonth()||t.props.monthShowsDuplicateDaysStart&&t.isBeforeMonth()?null:t.props.renderDayContents?t.props.renderDayContents(WE(t.props.day),t.props.day):WE(t.props.day)},t.render=function(){return U.createElement("div",{ref:t.dayEl,className:t.getClassNames(t.props.day),onKeyDown:t.handleOnKeyDown,onClick:t.handleClick,onMouseEnter:t.props.usePointerEvent?void 0:t.handleMouseEnter,onPointerEnter:t.props.usePointerEvent?t.handleMouseEnter:void 0,tabIndex:t.getTabIndex(),"aria-label":t.getAriaLabel(),role:"option",title:t.getTitle(),"aria-disabled":t.isDisabled(),"aria-current":t.isCurrentDay()?"date":void 0,"aria-selected":t.isSelected()||t.isInRange()},t.renderDayContents(),t.getTitle()!==""&&U.createElement("span",{className:"overlay"},t.getTitle()))},t}return e.prototype.componentDidMount=function(){this.handleFocusDay()},e.prototype.componentDidUpdate=function(){this.handleFocusDay()},e.prototype.shouldFocusDay=function(){var t=!1;return this.getTabIndex()===0&&this.isSameDay(this.props.preSelection)&&((!document.activeElement||document.activeElement===document.body)&&(t=!0),this.props.inline&&!this.props.shouldFocusDayInline&&(t=!1),this.isDayActiveElement()&&(t=!0),this.isDuplicateDay()&&(t=!1)),t},e.prototype.isDayActiveElement=function(){var t,r,i;return((r=(t=this.props.containerRef)===null||t===void 0?void 0:t.current)===null||r===void 0?void 0:r.contains(document.activeElement))&&((i=document.activeElement)===null||i===void 0?void 0:i.classList.contains("react-datepicker__day"))},e.prototype.isDuplicateDay=function(){return this.props.monthShowsDuplicateDaysEnd&&this.isAfterMonth()||this.props.monthShowsDuplicateDaysStart&&this.isBeforeMonth()},e}(N.Component),xj=function(n){wt(e,n);function e(){var t=n!==null&&n.apply(this,arguments)||this;return t.weekNumberEl=N.createRef(),t.handleClick=function(r){t.props.onClick&&t.props.onClick(r)},t.handleOnKeyDown=function(r){var i,s,o=r.key;o===K.Space&&(r.preventDefault(),r.key=K.Enter),(s=(i=t.props).handleOnKeyDown)===null||s===void 0||s.call(i,r)},t.isKeyboardSelected=function(){return!t.props.disabledKeyboardNavigation&&!me(t.props.date,t.props.selected)&&me(t.props.date,t.props.preSelection)},t.getTabIndex=function(){return t.props.showWeekPicker&&t.props.showWeekNumber&&(t.isKeyboardSelected()||me(t.props.date,t.props.selected)&&me(t.props.preSelection,t.props.selected))?0:-1},t.handleFocusWeekNumber=function(r){var i=!1;t.getTabIndex()===0&&!(r!=null&&r.isInputFocused)&&me(t.props.date,t.props.preSelection)&&((!document.activeElement||document.activeElement===document.body)&&(i=!0),t.props.inline&&!t.props.shouldFocusDayInline&&(i=!1),t.props.containerRef&&t.props.containerRef.current&&t.props.containerRef.current.contains(document.activeElement)&&document.activeElement&&document.activeElement.classList.contains("react-datepicker__week-number")&&(i=!0)),i&&t.weekNumberEl.current&&t.weekNumberEl.current.focus({preventScroll:!0})},t}return Object.defineProperty(e,"defaultProps",{get:function(){return{ariaLabelPrefix:"week "}},enumerable:!1,configurable:!0}),e.prototype.componentDidMount=function(){this.handleFocusWeekNumber()},e.prototype.componentDidUpdate=function(t){this.handleFocusWeekNumber(t)},e.prototype.render=function(){var t=this.props,r=t.weekNumber,i=t.ariaLabelPrefix,s=i===void 0?e.defaultProps.ariaLabelPrefix:i,o=t.onClick,a={"react-datepicker__week-number":!0,"react-datepicker__week-number--clickable":!!o,"react-datepicker__week-number--selected":!!o&&me(this.props.date,this.props.selected),"react-datepicker__week-number--keyboard-selected":this.isKeyboardSelected()};return U.createElement("div",{ref:this.weekNumberEl,className:mt(a),"aria-label":"".concat(s," ").concat(this.props.weekNumber),onClick:this.handleClick,onKeyDown:this.handleOnKeyDown,tabIndex:this.getTabIndex()},r)},e}(N.Component),Cj=function(n){wt(e,n);function e(){var t=n!==null&&n.apply(this,arguments)||this;return t.isDisabled=function(r){return ai(r,{minDate:t.props.minDate,maxDate:t.props.maxDate,excludeDates:t.props.excludeDates,excludeDateIntervals:t.props.excludeDateIntervals,includeDateIntervals:t.props.includeDateIntervals,includeDates:t.props.includeDates,filterDate:t.props.filterDate})},t.handleDayClick=function(r,i){t.props.onDayClick&&t.props.onDayClick(r,i)},t.handleDayMouseEnter=function(r){t.props.onDayMouseEnter&&t.props.onDayMouseEnter(r)},t.handleWeekClick=function(r,i,s){for(var o,a,l,c=new Date(r),d=0;d<7;d++){var h=new Date(r);h.setDate(h.getDate()+d);var p=!t.isDisabled(h);if(p){c=h;break}}typeof t.props.onWeekSelect=="function"&&t.props.onWeekSelect(c,i,s),t.props.showWeekPicker&&t.handleDayClick(c,s),((o=t.props.shouldCloseOnSelect)!==null&&o!==void 0?o:e.defaultProps.shouldCloseOnSelect)&&((l=(a=t.props).setOpen)===null||l===void 0||l.call(a,!1))},t.formatWeekNumber=function(r){return t.props.formatWeekNumber?t.props.formatWeekNumber(r):uj(r)},t.renderDays=function(){var r=t.startOfWeek(),i=[],s=t.formatWeekNumber(r);if(t.props.showWeekNumber){var o=t.props.onWeekSelect||t.props.showWeekPicker?t.handleWeekClick.bind(t,r,s):void 0;i.push(U.createElement(xj,ge({key:"W"},e.defaultProps,t.props,{weekNumber:s,date:r,onClick:o})))}return i.concat([0,1,2,3,4,5,6].map(function(a){var l=Hi(r,a);return U.createElement(kj,ge({},e.defaultProps,t.props,{ariaLabelPrefixWhenEnabled:t.props.chooseDayAriaLabelPrefix,ariaLabelPrefixWhenDisabled:t.props.disabledDayAriaLabelPrefix,key:l.valueOf(),day:l,onClick:t.handleDayClick.bind(t,l),onMouseEnter:t.handleDayMouseEnter.bind(t,l)}))}))},t.startOfWeek=function(){return wi(t.props.day,t.props.locale,t.props.calendarStartDay)},t.isKeyboardSelected=function(){return!t.props.disabledKeyboardNavigation&&!me(t.startOfWeek(),t.props.selected)&&me(t.startOfWeek(),t.props.preSelection)},t}return Object.defineProperty(e,"defaultProps",{get:function(){return{shouldCloseOnSelect:!0}},enumerable:!1,configurable:!0}),e.prototype.render=function(){var t={"react-datepicker__week":!0,"react-datepicker__week--selected":me(this.startOfWeek(),this.props.selected),"react-datepicker__week--keyboard-selected":this.isKeyboardSelected()};return U.createElement("div",{className:mt(t)},this.renderDays())},e}(N.Component),sl,Rj=6,Bo={TWO_COLUMNS:"two_columns",THREE_COLUMNS:"three_columns",FOUR_COLUMNS:"four_columns"},Np=(sl={},sl[Bo.TWO_COLUMNS]={grid:[[0,1],[2,3],[4,5],[6,7],[8,9],[10,11]],verticalNavigationOffset:2},sl[Bo.THREE_COLUMNS]={grid:[[0,1,2],[3,4,5],[6,7,8],[9,10,11]],verticalNavigationOffset:3},sl[Bo.FOUR_COLUMNS]={grid:[[0,1,2,3],[4,5,6,7],[8,9,10,11]],verticalNavigationOffset:4},sl),Oc=1;function vT(n,e){return n?Bo.FOUR_COLUMNS:e?Bo.TWO_COLUMNS:Bo.THREE_COLUMNS}var Aj=function(n){wt(e,n);function e(){var t=n!==null&&n.apply(this,arguments)||this;return t.MONTH_REFS=Zn([],Array(12),!0).map(function(){return N.createRef()}),t.QUARTER_REFS=Zn([],Array(4),!0).map(function(){return N.createRef()}),t.isDisabled=function(r){return ai(r,{minDate:t.props.minDate,maxDate:t.props.maxDate,excludeDates:t.props.excludeDates,excludeDateIntervals:t.props.excludeDateIntervals,includeDateIntervals:t.props.includeDateIntervals,includeDates:t.props.includeDates,filterDate:t.props.filterDate})},t.isExcluded=function(r){return q_(r,{excludeDates:t.props.excludeDates,excludeDateIntervals:t.props.excludeDateIntervals})},t.handleDayClick=function(r,i){var s,o;(o=(s=t.props).onDayClick)===null||o===void 0||o.call(s,r,i,t.props.orderInDisplay)},t.handleDayMouseEnter=function(r){var i,s;(s=(i=t.props).onDayMouseEnter)===null||s===void 0||s.call(i,r)},t.handleMouseLeave=function(){var r,i;(i=(r=t.props).onMouseLeave)===null||i===void 0||i.call(r)},t.isRangeStartMonth=function(r){var i=t.props,s=i.day,o=i.startDate,a=i.endDate;return!o||!a?!1:zt(cn(s,r),o)},t.isRangeStartQuarter=function(r){var i=t.props,s=i.day,o=i.startDate,a=i.endDate;return!o||!a?!1:ph(mo(s,r),o)},t.isRangeEndMonth=function(r){var i=t.props,s=i.day,o=i.startDate,a=i.endDate;return!o||!a?!1:zt(cn(s,r),a)},t.isRangeEndQuarter=function(r){var i=t.props,s=i.day,o=i.startDate,a=i.endDate;return!o||!a?!1:ph(mo(s,r),a)},t.isInSelectingRangeMonth=function(r){var i,s=t.props,o=s.day,a=s.selectsStart,l=s.selectsEnd,c=s.selectsRange,d=s.startDate,h=s.endDate,p=(i=t.props.selectingDate)!==null&&i!==void 0?i:t.props.preSelection;return!(a||l||c)||!p?!1:a&&h?Ac(p,h,r,o):l&&d||c&&d&&!h?Ac(d,p,r,o):!1},t.isSelectingMonthRangeStart=function(r){var i;if(!t.isInSelectingRangeMonth(r))return!1;var s=t.props,o=s.day,a=s.startDate,l=s.selectsStart,c=cn(o,r),d=(i=t.props.selectingDate)!==null&&i!==void 0?i:t.props.preSelection;return l?zt(c,d):zt(c,a)},t.isSelectingMonthRangeEnd=function(r){var i;if(!t.isInSelectingRangeMonth(r))return!1;var s=t.props,o=s.day,a=s.endDate,l=s.selectsEnd,c=s.selectsRange,d=cn(o,r),h=(i=t.props.selectingDate)!==null&&i!==void 0?i:t.props.preSelection;return l||c?zt(d,h):zt(d,a)},t.isInSelectingRangeQuarter=function(r){var i,s=t.props,o=s.day,a=s.selectsStart,l=s.selectsEnd,c=s.selectsRange,d=s.startDate,h=s.endDate,p=(i=t.props.selectingDate)!==null&&i!==void 0?i:t.props.preSelection;return!(a||l||c)||!p?!1:a&&h?Mc(p,h,r,o):l&&d||c&&d&&!h?Mc(d,p,r,o):!1},t.isWeekInMonth=function(r){var i=t.props.day,s=Hi(r,6);return zt(r,i)||zt(s,i)},t.isCurrentMonth=function(r,i){return ue(r)===ue(Se())&&i===qt(Se())},t.isCurrentQuarter=function(r,i){return ue(r)===ue(Se())&&i===ws(Se())},t.isSelectedMonth=function(r,i,s){return qt(s)===i&&ue(r)===ue(s)},t.isSelectMonthInList=function(r,i,s){return s.some(function(o){return t.isSelectedMonth(r,i,o)})},t.isSelectedQuarter=function(r,i,s){return ws(r)===i&&ue(r)===ue(s)},t.renderWeeks=function(){for(var r=[],i=t.props.fixedHeight,s=0,o=!1,a=wi(Ei(t.props.day),t.props.locale,t.props.calendarStartDay),l=function(v){return t.props.showWeekPicker?wi(v,t.props.locale,t.props.calendarStartDay):t.props.preSelection},c=function(v){return t.props.showWeekPicker?wi(v,t.props.locale,t.props.calendarStartDay):t.props.selected},d=t.props.selected?c(t.props.selected):void 0,h=t.props.preSelection?l(t.props.preSelection):void 0;r.push(U.createElement(Cj,ge({},t.props,{ariaLabelPrefix:t.props.weekAriaLabelPrefix,key:s,day:a,month:qt(t.props.day),onDayClick:t.handleDayClick,onDayMouseEnter:t.handleDayMouseEnter,selected:d,preSelection:h,showWeekNumber:t.props.showWeekNumbers}))),!o;){s++,a=th(a,1);var p=i&&s>=Rj,g=!i&&!t.isWeekInMonth(a);if(p||g)if(t.props.peekNextMonth)o=!0;else break}return r},t.onMonthClick=function(r,i){var s=t.isMonthDisabledForLabelDate(i),o=s.isDisabled,a=s.labelDate;o||t.handleDayClick(Ei(a),r)},t.onMonthMouseEnter=function(r){var i=t.isMonthDisabledForLabelDate(r),s=i.isDisabled,o=i.labelDate;s||t.handleDayMouseEnter(Ei(o))},t.handleMonthNavigation=function(r,i){var s,o,a,l;(o=(s=t.props).setPreSelection)===null||o===void 0||o.call(s,i),(l=(a=t.MONTH_REFS[r])===null||a===void 0?void 0:a.current)===null||l===void 0||l.focus()},t.handleKeyboardNavigation=function(r,i,s){var o,a=t.props,l=a.selected,c=a.preSelection,d=a.setPreSelection,h=a.minDate,p=a.maxDate,g=a.showFourColumnMonthYearPicker,v=a.showTwoColumnMonthYearPicker;if(c){var S=vT(g,v),D=t.getVerticalOffset(S),w=(o=Np[S])===null||o===void 0?void 0:o.grid,_=function(I,y,b){var k,C,R=y,P=b;switch(I){case K.ArrowRight:R=Un(y,Oc),P=b===11?0:b+Oc;break;case K.ArrowLeft:R=ca(y,Oc),P=b===0?11:b-Oc;break;case K.ArrowUp:R=ca(y,D),P=!((k=w==null?void 0:w[0])===null||k===void 0)&&k.includes(b)?b+12-D:b-D;break;case K.ArrowDown:R=Un(y,D),P=!((C=w==null?void 0:w[w.length-1])===null||C===void 0)&&C.includes(b)?b-12+D:b+D;break}return{newCalculatedDate:R,newCalculatedMonth:P}},E=function(I,y,b){for(var k=40,C=I,R=!1,P=0,ne=_(C,y,b),re=ne.newCalculatedDate,le=ne.newCalculatedMonth;!R;){if(P>=k){re=y,le=b;break}if(h&&re<h){C=K.ArrowRight;var ie=_(C,re,le);re=ie.newCalculatedDate,le=ie.newCalculatedMonth}if(p&&re>p){C=K.ArrowLeft;var ie=_(C,re,le);re=ie.newCalculatedDate,le=ie.newCalculatedMonth}if(yj(re,t.props)){var ie=_(C,re,le);re=ie.newCalculatedDate,le=ie.newCalculatedMonth}else R=!0;P++}return{newCalculatedDate:re,newCalculatedMonth:le}};if(i===K.Enter){t.isMonthDisabled(s)||(t.onMonthClick(r,s),d==null||d(l));return}var x=E(i,c,s),A=x.newCalculatedDate,L=x.newCalculatedMonth;switch(i){case K.ArrowRight:case K.ArrowLeft:case K.ArrowUp:case K.ArrowDown:t.handleMonthNavigation(L,A);break}}},t.getVerticalOffset=function(r){var i,s;return(s=(i=Np[r])===null||i===void 0?void 0:i.verticalNavigationOffset)!==null&&s!==void 0?s:0},t.onMonthKeyDown=function(r,i){var s=t.props,o=s.disabledKeyboardNavigation,a=s.handleOnMonthKeyDown,l=r.key;l!==K.Tab&&r.preventDefault(),o||t.handleKeyboardNavigation(r,l,i),a&&a(r)},t.onQuarterClick=function(r,i){var s=mo(t.props.day,i);Ap(s,t.props)||t.handleDayClick(iT(s),r)},t.onQuarterMouseEnter=function(r){var i=mo(t.props.day,r);Ap(i,t.props)||t.handleDayMouseEnter(iT(i))},t.handleQuarterNavigation=function(r,i){var s,o,a,l;t.isDisabled(i)||t.isExcluded(i)||((o=(s=t.props).setPreSelection)===null||o===void 0||o.call(s,i),(l=(a=t.QUARTER_REFS[r-1])===null||a===void 0?void 0:a.current)===null||l===void 0||l.focus())},t.onQuarterKeyDown=function(r,i){var s,o,a=r.key;if(!t.props.disabledKeyboardNavigation)switch(a){case K.Enter:t.onQuarterClick(r,i),(o=(s=t.props).setPreSelection)===null||o===void 0||o.call(s,t.props.selected);break;case K.ArrowRight:if(!t.props.preSelection)break;t.handleQuarterNavigation(i===4?1:i+1,A_(t.props.preSelection,1));break;case K.ArrowLeft:if(!t.props.preSelection)break;t.handleQuarterNavigation(i===1?4:i-1,MP(t.props.preSelection,1));break}},t.isMonthDisabledForLabelDate=function(r){var i,s=t.props,o=s.day,a=s.minDate,l=s.maxDate,c=s.excludeDates,d=s.includeDates,h=cn(o,r);return{isDisabled:(i=(a||l||c||d)&&HP(h,t.props))!==null&&i!==void 0?i:!1,labelDate:h}},t.isMonthDisabled=function(r){var i=t.isMonthDisabledForLabelDate(r).isDisabled;return i},t.getMonthClassNames=function(r){var i=t.props,s=i.day,o=i.startDate,a=i.endDate,l=i.preSelection,c=i.monthClassName,d=c?c(cn(s,r)):void 0,h=t.getSelection();return mt("react-datepicker__month-text","react-datepicker__month-".concat(r),d,{"react-datepicker__month-text--disabled":t.isMonthDisabled(r),"react-datepicker__month-text--selected":h?t.isSelectMonthInList(s,r,h):void 0,"react-datepicker__month-text--keyboard-selected":!t.props.disabledKeyboardNavigation&&l&&t.isSelectedMonth(s,r,l)&&!t.isMonthDisabled(r),"react-datepicker__month-text--in-selecting-range":t.isInSelectingRangeMonth(r),"react-datepicker__month-text--in-range":o&&a?Ac(o,a,r,s):void 0,"react-datepicker__month-text--range-start":t.isRangeStartMonth(r),"react-datepicker__month-text--range-end":t.isRangeEndMonth(r),"react-datepicker__month-text--selecting-range-start":t.isSelectingMonthRangeStart(r),"react-datepicker__month-text--selecting-range-end":t.isSelectingMonthRangeEnd(r),"react-datepicker__month-text--today":t.isCurrentMonth(s,r)})},t.getTabIndex=function(r){if(t.props.preSelection==null)return"-1";var i=qt(t.props.preSelection),s=!t.props.disabledKeyboardNavigation&&r===i?"0":"-1";return s},t.getQuarterTabIndex=function(r){if(t.props.preSelection==null)return"-1";var i=ws(t.props.preSelection),s=!t.props.disabledKeyboardNavigation&&r===i?"0":"-1";return s},t.getAriaLabel=function(r){var i=t.props,s=i.chooseDayAriaLabelPrefix,o=s===void 0?"Choose":s,a=i.disabledDayAriaLabelPrefix,l=a===void 0?"Not available":a,c=i.day,d=i.locale,h=cn(c,r),p=t.isDisabled(h)||t.isExcluded(h)?l:o;return"".concat(p," ").concat(Ve(h,"MMMM yyyy",d))},t.getQuarterClassNames=function(r){var i=t.props,s=i.day,o=i.startDate,a=i.endDate,l=i.selected,c=i.minDate,d=i.maxDate,h=i.excludeDates,p=i.includeDates,g=i.filterDate,v=i.preSelection,S=i.disabledKeyboardNavigation,D=(c||d||h||p||g)&&Ap(mo(s,r),t.props);return mt("react-datepicker__quarter-text","react-datepicker__quarter-".concat(r),{"react-datepicker__quarter-text--disabled":D,"react-datepicker__quarter-text--selected":l?t.isSelectedQuarter(s,r,l):void 0,"react-datepicker__quarter-text--keyboard-selected":!S&&v&&t.isSelectedQuarter(s,r,v)&&!D,"react-datepicker__quarter-text--in-selecting-range":t.isInSelectingRangeQuarter(r),"react-datepicker__quarter-text--in-range":o&&a?Mc(o,a,r,s):void 0,"react-datepicker__quarter-text--range-start":t.isRangeStartQuarter(r),"react-datepicker__quarter-text--range-end":t.isRangeEndQuarter(r)})},t.getMonthContent=function(r){var i=t.props,s=i.showFullMonthYearPicker,o=i.renderMonthContent,a=i.locale,l=i.day,c=YP(r,a),d=z_(r,a);return o?o(r,c,d,l):s?d:c},t.getQuarterContent=function(r){var i,s=t.props,o=s.renderQuarterContent,a=s.locale,l=gj(r,a);return(i=o==null?void 0:o(r,l))!==null&&i!==void 0?i:l},t.renderMonths=function(){var r,i=t.props,s=i.showTwoColumnMonthYearPicker,o=i.showFourColumnMonthYearPicker,a=i.day,l=i.selected,c=(r=Np[vT(o,s)])===null||r===void 0?void 0:r.grid;return c==null?void 0:c.map(function(d,h){return U.createElement("div",{className:"react-datepicker__month-wrapper",key:h},d.map(function(p,g){return U.createElement("div",{ref:t.MONTH_REFS[p],key:g,onClick:function(v){t.onMonthClick(v,p)},onKeyDown:function(v){GP(v)&&(v.preventDefault(),v.key=K.Enter),t.onMonthKeyDown(v,p)},onMouseEnter:t.props.usePointerEvent?void 0:function(){return t.onMonthMouseEnter(p)},onPointerEnter:t.props.usePointerEvent?function(){return t.onMonthMouseEnter(p)}:void 0,tabIndex:Number(t.getTabIndex(p)),className:t.getMonthClassNames(p),"aria-disabled":t.isMonthDisabled(p),role:"option","aria-label":t.getAriaLabel(p),"aria-current":t.isCurrentMonth(a,p)?"date":void 0,"aria-selected":l?t.isSelectedMonth(a,p,l):void 0},t.getMonthContent(p))}))})},t.renderQuarters=function(){var r=t.props,i=r.day,s=r.selected,o=[1,2,3,4];return U.createElement("div",{className:"react-datepicker__quarter-wrapper"},o.map(function(a,l){return U.createElement("div",{key:l,ref:t.QUARTER_REFS[l],role:"option",onClick:function(c){t.onQuarterClick(c,a)},onKeyDown:function(c){t.onQuarterKeyDown(c,a)},onMouseEnter:t.props.usePointerEvent?void 0:function(){return t.onQuarterMouseEnter(a)},onPointerEnter:t.props.usePointerEvent?function(){return t.onQuarterMouseEnter(a)}:void 0,className:t.getQuarterClassNames(a),"aria-selected":s?t.isSelectedQuarter(i,a,s):void 0,tabIndex:Number(t.getQuarterTabIndex(a)),"aria-current":t.isCurrentQuarter(i,a)?"date":void 0},t.getQuarterContent(a))}))},t.getClassNames=function(){var r=t.props,i=r.selectingDate,s=r.selectsStart,o=r.selectsEnd,a=r.showMonthYearPicker,l=r.showQuarterYearPicker,c=r.showWeekPicker;return mt("react-datepicker__month",{"react-datepicker__month--selecting-range":i&&(s||o)},{"react-datepicker__monthPicker":a},{"react-datepicker__quarterPicker":l},{"react-datepicker__weekPicker":c})},t}return e.prototype.getSelection=function(){var t=this.props,r=t.selected,i=t.selectedDates,s=t.selectsMultiple;if(s)return i;if(r)return[r]},e.prototype.render=function(){var t=this.props,r=t.showMonthYearPicker,i=t.showQuarterYearPicker,s=t.day,o=t.ariaLabelPrefix,a=o===void 0?"Month ":o,l=a?a.trim()+" ":"";return U.createElement("div",{className:this.getClassNames(),onMouseLeave:this.props.usePointerEvent?void 0:this.handleMouseLeave,onPointerLeave:this.props.usePointerEvent?this.handleMouseLeave:void 0,"aria-label":"".concat(l).concat(Ve(s,"MMMM, yyyy",this.props.locale)),role:"listbox"},r?this.renderMonths():i?this.renderQuarters():this.renderWeeks())},e}(N.Component),Nj=function(n){wt(e,n);function e(){var t=n!==null&&n.apply(this,arguments)||this;return t.isSelectedMonth=function(r){return t.props.month===r},t.renderOptions=function(){return t.props.monthNames.map(function(r,i){return U.createElement("div",{className:t.isSelectedMonth(i)?"react-datepicker__month-option react-datepicker__month-option--selected_month":"react-datepicker__month-option",key:r,onClick:t.onChange.bind(t,i),"aria-selected":t.isSelectedMonth(i)?"true":void 0},t.isSelectedMonth(i)?U.createElement("span",{className:"react-datepicker__month-option--selected"},""):"",r)})},t.onChange=function(r){return t.props.onChange(r)},t.handleClickOutside=function(){return t.props.onCancel()},t}return e.prototype.render=function(){return U.createElement("div",{className:"react-datepicker__month-dropdown"},this.renderOptions())},e}(N.Component),Mj=df(Nj),Oj=function(n){wt(e,n);function e(){var t=n!==null&&n.apply(this,arguments)||this;return t.state={dropdownVisible:!1},t.renderSelectOptions=function(r){return r.map(function(i,s){return U.createElement("option",{key:i,value:s},i)})},t.renderSelectMode=function(r){return U.createElement("select",{value:t.props.month,className:"react-datepicker__month-select",onChange:function(i){return t.onChange(parseInt(i.target.value))}},t.renderSelectOptions(r))},t.renderReadView=function(r,i){return U.createElement("div",{key:"read",style:{visibility:r?"visible":"hidden"},className:"react-datepicker__month-read-view",onClick:t.toggleDropdown},U.createElement("span",{className:"react-datepicker__month-read-view--down-arrow"}),U.createElement("span",{className:"react-datepicker__month-read-view--selected-month"},i[t.props.month]))},t.renderDropdown=function(r){return U.createElement(Mj,ge({key:"dropdown"},t.props,{monthNames:r,onChange:t.onChange,onCancel:t.toggleDropdown}))},t.renderScrollMode=function(r){var i=t.state.dropdownVisible,s=[t.renderReadView(!i,r)];return i&&s.unshift(t.renderDropdown(r)),s},t.onChange=function(r){t.toggleDropdown(),r!==t.props.month&&t.props.onChange(r)},t.toggleDropdown=function(){return t.setState({dropdownVisible:!t.state.dropdownVisible})},t}return e.prototype.render=function(){var t=this,r=[0,1,2,3,4,5,6,7,8,9,10,11].map(this.props.useShortMonthInDropdown?function(s){return YP(s,t.props.locale)}:function(s){return z_(s,t.props.locale)}),i;switch(this.props.dropdownMode){case"scroll":i=this.renderScrollMode(r);break;case"select":i=this.renderSelectMode(r);break}return U.createElement("div",{className:"react-datepicker__month-dropdown-container react-datepicker__month-dropdown-container--".concat(this.props.dropdownMode)},i)},e}(N.Component);function Vj(n,e){for(var t=[],r=Ei(n),i=Ei(e);!Mi(r,i);)t.push(Se(r)),r=Un(r,1);return t}var Lj=function(n){wt(e,n);function e(t){var r=n.call(this,t)||this;return r.renderOptions=function(){return r.state.monthYearsList.map(function(i){var s=pg(i),o=qn(r.props.date,i)&&zt(r.props.date,i);return U.createElement("div",{className:o?"react-datepicker__month-year-option--selected_month-year":"react-datepicker__month-year-option",key:s,onClick:r.onChange.bind(r,s),"aria-selected":o?"true":void 0},o?U.createElement("span",{className:"react-datepicker__month-year-option--selected"},""):"",Ve(i,r.props.dateFormat,r.props.locale))})},r.onChange=function(i){return r.props.onChange(i)},r.handleClickOutside=function(){r.props.onCancel()},r.state={monthYearsList:Vj(r.props.minDate,r.props.maxDate)},r}return e.prototype.render=function(){var t=mt({"react-datepicker__month-year-dropdown":!0,"react-datepicker__month-year-dropdown--scrollable":this.props.scrollableMonthYearDropdown});return U.createElement("div",{className:t},this.renderOptions())},e}(N.Component),Fj=df(Lj),Bj=function(n){wt(e,n);function e(){var t=n!==null&&n.apply(this,arguments)||this;return t.state={dropdownVisible:!1},t.renderSelectOptions=function(){for(var r=Ei(t.props.minDate),i=Ei(t.props.maxDate),s=[];!Mi(r,i);){var o=pg(r);s.push(U.createElement("option",{key:o,value:o},Ve(r,t.props.dateFormat,t.props.locale))),r=Un(r,1)}return s},t.onSelectChange=function(r){t.onChange(parseInt(r.target.value))},t.renderSelectMode=function(){return U.createElement("select",{value:pg(Ei(t.props.date)),className:"react-datepicker__month-year-select",onChange:t.onSelectChange},t.renderSelectOptions())},t.renderReadView=function(r){var i=Ve(t.props.date,t.props.dateFormat,t.props.locale);return U.createElement("div",{key:"read",style:{visibility:r?"visible":"hidden"},className:"react-datepicker__month-year-read-view",onClick:t.toggleDropdown},U.createElement("span",{className:"react-datepicker__month-year-read-view--down-arrow"}),U.createElement("span",{className:"react-datepicker__month-year-read-view--selected-month-year"},i))},t.renderDropdown=function(){return U.createElement(Fj,ge({key:"dropdown"},t.props,{onChange:t.onChange,onCancel:t.toggleDropdown}))},t.renderScrollMode=function(){var r=t.state.dropdownVisible,i=[t.renderReadView(!r)];return r&&i.unshift(t.renderDropdown()),i},t.onChange=function(r){t.toggleDropdown();var i=Se(r);qn(t.props.date,i)&&zt(t.props.date,i)||t.props.onChange(i)},t.toggleDropdown=function(){return t.setState({dropdownVisible:!t.state.dropdownVisible})},t}return e.prototype.render=function(){var t;switch(this.props.dropdownMode){case"scroll":t=this.renderScrollMode();break;case"select":t=this.renderSelectMode();break}return U.createElement("div",{className:"react-datepicker__month-year-dropdown-container react-datepicker__month-year-dropdown-container--".concat(this.props.dropdownMode)},t)},e}(N.Component),Uj=function(n){wt(e,n);function e(){var t=n!==null&&n.apply(this,arguments)||this;return t.state={height:null},t.scrollToTheSelectedTime=function(){requestAnimationFrame(function(){var r,i,s;t.list&&(t.list.scrollTop=(s=t.centerLi&&e.calcCenterPosition(t.props.monthRef?t.props.monthRef.clientHeight-((i=(r=t.header)===null||r===void 0?void 0:r.clientHeight)!==null&&i!==void 0?i:0):t.list.clientHeight,t.centerLi))!==null&&s!==void 0?s:0)})},t.handleClick=function(r){var i,s;(t.props.minTime||t.props.maxTime)&&uT(r,t.props)||(t.props.excludeTimes||t.props.includeTimes||t.props.filterTime)&&lT(r,t.props)||(s=(i=t.props).onChange)===null||s===void 0||s.call(i,r)},t.isSelectedTime=function(r){return t.props.selected&&bj(t.props.selected,r)},t.isDisabledTime=function(r){return(t.props.minTime||t.props.maxTime)&&uT(r,t.props)||(t.props.excludeTimes||t.props.includeTimes||t.props.filterTime)&&lT(r,t.props)},t.liClasses=function(r){var i,s=["react-datepicker__time-list-item",t.props.timeClassName?t.props.timeClassName(r):void 0];return t.isSelectedTime(r)&&s.push("react-datepicker__time-list-item--selected"),t.isDisabledTime(r)&&s.push("react-datepicker__time-list-item--disabled"),t.props.injectTimes&&(sr(r)*3600+or(r)*60+Pr(r))%(((i=t.props.intervals)!==null&&i!==void 0?i:e.defaultProps.intervals)*60)!==0&&s.push("react-datepicker__time-list-item--injected"),s.join(" ")},t.handleOnKeyDown=function(r,i){var s,o;r.key===K.Space&&(r.preventDefault(),r.key=K.Enter),(r.key===K.ArrowUp||r.key===K.ArrowLeft)&&r.target instanceof HTMLElement&&r.target.previousSibling&&(r.preventDefault(),r.target.previousSibling instanceof HTMLElement&&r.target.previousSibling.focus()),(r.key===K.ArrowDown||r.key===K.ArrowRight)&&r.target instanceof HTMLElement&&r.target.nextSibling&&(r.preventDefault(),r.target.nextSibling instanceof HTMLElement&&r.target.nextSibling.focus()),r.key===K.Enter&&t.handleClick(i),(o=(s=t.props).handleOnKeyDown)===null||o===void 0||o.call(s,r)},t.renderTimes=function(){for(var r,i=[],s=t.props.format?t.props.format:"p",o=(r=t.props.intervals)!==null&&r!==void 0?r:e.defaultProps.intervals,a=t.props.selected||t.props.openToDate||Se(),l=ad(a),c=t.props.injectTimes&&t.props.injectTimes.sort(function(D,w){return D.getTime()-w.getTime()}),d=60*Dj(a),h=d/o,p=0;p<h;p++){var g=hg(l,p*o);if(i.push(g),c){var v=Sj(l,g,p,o,c);i=i.concat(v)}}var S=i.reduce(function(D,w){return w.getTime()<=a.getTime()?w:D},i[0]);return i.map(function(D){return U.createElement("li",{key:D.valueOf(),onClick:t.handleClick.bind(t,D),className:t.liClasses(D),ref:function(w){D===S&&(t.centerLi=w)},onKeyDown:function(w){t.handleOnKeyDown(w,D)},tabIndex:D===S?0:-1,role:"option","aria-selected":t.isSelectedTime(D)?"true":void 0,"aria-disabled":t.isDisabledTime(D)?"true":void 0},Ve(D,s,t.props.locale))})},t}return Object.defineProperty(e,"defaultProps",{get:function(){return{intervals:30,todayButton:null,timeCaption:"Time"}},enumerable:!1,configurable:!0}),e.prototype.componentDidMount=function(){this.scrollToTheSelectedTime(),this.props.monthRef&&this.header&&this.setState({height:this.props.monthRef.clientHeight-this.header.clientHeight})},e.prototype.render=function(){var t=this,r,i=this.state.height;return U.createElement("div",{className:"react-datepicker__time-container ".concat(((r=this.props.todayButton)!==null&&r!==void 0?r:e.defaultProps.todayButton)?"react-datepicker__time-container--with-today-button":"")},U.createElement("div",{className:"react-datepicker__header react-datepicker__header--time ".concat(this.props.showTimeSelectOnly?"react-datepicker__header--time--only":""),ref:function(s){t.header=s}},U.createElement("div",{className:"react-datepicker-time__header"},this.props.timeCaption)),U.createElement("div",{className:"react-datepicker__time"},U.createElement("div",{className:"react-datepicker__time-box"},U.createElement("ul",{className:"react-datepicker__time-list",ref:function(s){t.list=s},style:i?{height:i}:{},role:"listbox","aria-label":this.props.timeCaption},this.renderTimes()))))},e.calcCenterPosition=function(t,r){return r.offsetTop-(t/2-r.clientHeight/2)},e}(N.Component),wT=3,jj=function(n){wt(e,n);function e(t){var r=n.call(this,t)||this;return r.YEAR_REFS=Zn([],Array(r.props.yearItemNumber),!0).map(function(){return N.createRef()}),r.isDisabled=function(i){return ai(i,{minDate:r.props.minDate,maxDate:r.props.maxDate,excludeDates:r.props.excludeDates,includeDates:r.props.includeDates,filterDate:r.props.filterDate})},r.isExcluded=function(i){return q_(i,{excludeDates:r.props.excludeDates})},r.selectingDate=function(){var i;return(i=r.props.selectingDate)!==null&&i!==void 0?i:r.props.preSelection},r.updateFocusOnPaginate=function(i){var s=function(){var o,a;(a=(o=r.YEAR_REFS[i])===null||o===void 0?void 0:o.current)===null||a===void 0||a.focus()};window.requestAnimationFrame(s)},r.handleYearClick=function(i,s){r.props.onDayClick&&r.props.onDayClick(i,s)},r.handleYearNavigation=function(i,s){var o,a,l,c,d=r.props,h=d.date,p=d.yearItemNumber;if(!(h===void 0||p===void 0)){var g=li(h,p).startPeriod;r.isDisabled(s)||r.isExcluded(s)||((a=(o=r.props).setPreSelection)===null||a===void 0||a.call(o,s),i-g<0?r.updateFocusOnPaginate(p-(g-i)):i-g>=p?r.updateFocusOnPaginate(Math.abs(p-(i-g))):(c=(l=r.YEAR_REFS[i-g])===null||l===void 0?void 0:l.current)===null||c===void 0||c.focus())}},r.isSameDay=function(i,s){return me(i,s)},r.isCurrentYear=function(i){return i===ue(Se())},r.isRangeStart=function(i){return r.props.startDate&&r.props.endDate&&qn(zn(Se(),i),r.props.startDate)},r.isRangeEnd=function(i){return r.props.startDate&&r.props.endDate&&qn(zn(Se(),i),r.props.endDate)},r.isInRange=function(i){return Nc(i,r.props.startDate,r.props.endDate)},r.isInSelectingRange=function(i){var s=r.props,o=s.selectsStart,a=s.selectsEnd,l=s.selectsRange,c=s.startDate,d=s.endDate;return!(o||a||l)||!r.selectingDate()?!1:o&&d?Nc(i,r.selectingDate(),d):a&&c||l&&c&&!d?Nc(i,c,r.selectingDate()):!1},r.isSelectingRangeStart=function(i){var s;if(!r.isInSelectingRange(i))return!1;var o=r.props,a=o.startDate,l=o.selectsStart,c=zn(Se(),i);return l?qn(c,(s=r.selectingDate())!==null&&s!==void 0?s:null):qn(c,a??null)},r.isSelectingRangeEnd=function(i){var s;if(!r.isInSelectingRange(i))return!1;var o=r.props,a=o.endDate,l=o.selectsEnd,c=o.selectsRange,d=zn(Se(),i);return l||c?qn(d,(s=r.selectingDate())!==null&&s!==void 0?s:null):qn(d,a??null)},r.isKeyboardSelected=function(i){if(!(r.props.date===void 0||r.props.selected==null||r.props.preSelection==null)){var s=r.props,o=s.minDate,a=s.maxDate,l=s.excludeDates,c=s.includeDates,d=s.filterDate,h=pl(zn(r.props.date,i)),p=(o||a||l||c||d)&&wg(i,r.props);return!r.props.disabledKeyboardNavigation&&!r.props.inline&&!me(h,pl(r.props.selected))&&me(h,pl(r.props.preSelection))&&!p}},r.onYearClick=function(i,s){var o=r.props.date;o!==void 0&&r.handleYearClick(pl(zn(o,s)),i)},r.onYearKeyDown=function(i,s){var o,a,l=i.key,c=r.props,d=c.date,h=c.yearItemNumber,p=c.handleOnKeyDown;if(l!==K.Tab&&i.preventDefault(),!r.props.disabledKeyboardNavigation)switch(l){case K.Enter:if(r.props.selected==null)break;r.onYearClick(i,s),(a=(o=r.props).setPreSelection)===null||a===void 0||a.call(o,r.props.selected);break;case K.ArrowRight:if(r.props.preSelection==null)break;r.handleYearNavigation(s+1,Dr(r.props.preSelection,1));break;case K.ArrowLeft:if(r.props.preSelection==null)break;r.handleYearNavigation(s-1,da(r.props.preSelection,1));break;case K.ArrowUp:{if(d===void 0||h===void 0||r.props.preSelection==null)break;var g=li(d,h).startPeriod,v=wT,S=s-v;if(S<g){var D=h%v;s>=g&&s<g+D?v=D:v+=D,S=s-v}r.handleYearNavigation(S,da(r.props.preSelection,v));break}case K.ArrowDown:{if(d===void 0||h===void 0||r.props.preSelection==null)break;var w=li(d,h).endPeriod,v=wT,S=s+v;if(S>w){var D=h%v;s<=w&&s>w-D?v=D:v+=D,S=s+v}r.handleYearNavigation(S,Dr(r.props.preSelection,v));break}}p&&p(i)},r.getYearClassNames=function(i){var s=r.props,o=s.date,a=s.minDate,l=s.maxDate,c=s.selected,d=s.excludeDates,h=s.includeDates,p=s.filterDate,g=s.yearClassName;return mt("react-datepicker__year-text","react-datepicker__year-".concat(i),o?g==null?void 0:g(zn(o,i)):void 0,{"react-datepicker__year-text--selected":c?i===ue(c):void 0,"react-datepicker__year-text--disabled":(a||l||d||h||p)&&wg(i,r.props),"react-datepicker__year-text--keyboard-selected":r.isKeyboardSelected(i),"react-datepicker__year-text--range-start":r.isRangeStart(i),"react-datepicker__year-text--range-end":r.isRangeEnd(i),"react-datepicker__year-text--in-range":r.isInRange(i),"react-datepicker__year-text--in-selecting-range":r.isInSelectingRange(i),"react-datepicker__year-text--selecting-range-start":r.isSelectingRangeStart(i),"react-datepicker__year-text--selecting-range-end":r.isSelectingRangeEnd(i),"react-datepicker__year-text--today":r.isCurrentYear(i)})},r.getYearTabIndex=function(i){if(r.props.disabledKeyboardNavigation||r.props.preSelection==null)return"-1";var s=ue(r.props.preSelection);return i===s?"0":"-1"},r.getYearContainerClassNames=function(){var i=r.props,s=i.selectingDate,o=i.selectsStart,a=i.selectsEnd,l=i.selectsRange;return mt("react-datepicker__year",{"react-datepicker__year--selecting-range":s&&(o||a||l)})},r.getYearContent=function(i){return r.props.renderYearContent?r.props.renderYearContent(i):i},r}return e.prototype.render=function(){var t=this,r=[],i=this.props,s=i.date,o=i.yearItemNumber,a=i.onYearMouseEnter,l=i.onYearMouseLeave;if(s===void 0)return null;for(var c=li(s,o),d=c.startPeriod,h=c.endPeriod,p=function(S){r.push(U.createElement("div",{ref:g.YEAR_REFS[S-d],onClick:function(D){t.onYearClick(D,S)},onKeyDown:function(D){GP(D)&&(D.preventDefault(),D.key=K.Enter),t.onYearKeyDown(D,S)},tabIndex:Number(g.getYearTabIndex(S)),className:g.getYearClassNames(S),onMouseEnter:g.props.usePointerEvent?void 0:function(D){return a(D,S)},onPointerEnter:g.props.usePointerEvent?function(D){return a(D,S)}:void 0,onMouseLeave:g.props.usePointerEvent?void 0:function(D){return l(D,S)},onPointerLeave:g.props.usePointerEvent?function(D){return l(D,S)}:void 0,key:S,"aria-current":g.isCurrentYear(S)?"date":void 0},g.getYearContent(S)))},g=this,v=d;v<=h;v++)p(v);return U.createElement("div",{className:this.getYearContainerClassNames()},U.createElement("div",{className:"react-datepicker__year-wrapper",onMouseLeave:this.props.usePointerEvent?void 0:this.props.clearSelectingDate,onPointerLeave:this.props.usePointerEvent?this.props.clearSelectingDate:void 0},r))},e}(N.Component);function $j(n,e,t,r){for(var i=[],s=0;s<2*e+1;s++){var o=n+e-s,a=!0;t&&(a=ue(t)<=o),r&&a&&(a=ue(r)>=o),a&&i.push(o)}return i}var zj=function(n){wt(e,n);function e(t){var r=n.call(this,t)||this;r.renderOptions=function(){var a=r.props.year,l=r.state.yearsList.map(function(h){return U.createElement("div",{className:a===h?"react-datepicker__year-option react-datepicker__year-option--selected_year":"react-datepicker__year-option",key:h,onClick:r.onChange.bind(r,h),"aria-selected":a===h?"true":void 0},a===h?U.createElement("span",{className:"react-datepicker__year-option--selected"},""):"",h)}),c=r.props.minDate?ue(r.props.minDate):null,d=r.props.maxDate?ue(r.props.maxDate):null;return(!d||!r.state.yearsList.find(function(h){return h===d}))&&l.unshift(U.createElement("div",{className:"react-datepicker__year-option",key:"upcoming",onClick:r.incrementYears},U.createElement("a",{className:"react-datepicker__navigation react-datepicker__navigation--years react-datepicker__navigation--years-upcoming"}))),(!c||!r.state.yearsList.find(function(h){return h===c}))&&l.push(U.createElement("div",{className:"react-datepicker__year-option",key:"previous",onClick:r.decrementYears},U.createElement("a",{className:"react-datepicker__navigation react-datepicker__navigation--years react-datepicker__navigation--years-previous"}))),l},r.onChange=function(a){r.props.onChange(a)},r.handleClickOutside=function(){r.props.onCancel()},r.shiftYears=function(a){var l=r.state.yearsList.map(function(c){return c+a});r.setState({yearsList:l})},r.incrementYears=function(){return r.shiftYears(1)},r.decrementYears=function(){return r.shiftYears(-1)};var i=t.yearDropdownItemNumber,s=t.scrollableYearDropdown,o=i||(s?10:5);return r.state={yearsList:$j(r.props.year,o,r.props.minDate,r.props.maxDate)},r.dropdownRef=N.createRef(),r}return e.prototype.componentDidMount=function(){var t=this.dropdownRef.current;if(t){var r=t.children?Array.from(t.children):null,i=r?r.find(function(s){return s.ariaSelected}):null;t.scrollTop=i&&i instanceof HTMLElement?i.offsetTop+(i.clientHeight-t.clientHeight)/2:(t.scrollHeight-t.clientHeight)/2}},e.prototype.render=function(){var t=mt({"react-datepicker__year-dropdown":!0,"react-datepicker__year-dropdown--scrollable":this.props.scrollableYearDropdown});return U.createElement("div",{className:t,ref:this.dropdownRef},this.renderOptions())},e}(N.Component),qj=df(zj),Wj=function(n){wt(e,n);function e(){var t=n!==null&&n.apply(this,arguments)||this;return t.state={dropdownVisible:!1},t.renderSelectOptions=function(){for(var r=t.props.minDate?ue(t.props.minDate):1900,i=t.props.maxDate?ue(t.props.maxDate):2100,s=[],o=r;o<=i;o++)s.push(U.createElement("option",{key:o,value:o},o));return s},t.onSelectChange=function(r){t.onChange(parseInt(r.target.value))},t.renderSelectMode=function(){return U.createElement("select",{value:t.props.year,className:"react-datepicker__year-select",onChange:t.onSelectChange},t.renderSelectOptions())},t.renderReadView=function(r){return U.createElement("div",{key:"read",style:{visibility:r?"visible":"hidden"},className:"react-datepicker__year-read-view",onClick:function(i){return t.toggleDropdown(i)}},U.createElement("span",{className:"react-datepicker__year-read-view--down-arrow"}),U.createElement("span",{className:"react-datepicker__year-read-view--selected-year"},t.props.year))},t.renderDropdown=function(){return U.createElement(qj,ge({key:"dropdown"},t.props,{onChange:t.onChange,onCancel:t.toggleDropdown}))},t.renderScrollMode=function(){var r=t.state.dropdownVisible,i=[t.renderReadView(!r)];return r&&i.unshift(t.renderDropdown()),i},t.onChange=function(r){t.toggleDropdown(),r!==t.props.year&&t.props.onChange(r)},t.toggleDropdown=function(r){t.setState({dropdownVisible:!t.state.dropdownVisible},function(){t.props.adjustDateOnChange&&t.handleYearChange(t.props.date,r)})},t.handleYearChange=function(r,i){t.onSelect(r,i),t.setOpen()},t.onSelect=function(r,i){t.props.onSelect&&t.props.onSelect(r,i)},t.setOpen=function(){t.props.setOpen&&t.props.setOpen(!0)},t}return e.prototype.render=function(){var t;switch(this.props.dropdownMode){case"scroll":t=this.renderScrollMode();break;case"select":t=this.renderSelectMode();break}return U.createElement("div",{className:"react-datepicker__year-dropdown-container react-datepicker__year-dropdown-container--".concat(this.props.dropdownMode)},t)},e}(N.Component),Yj=["react-datepicker__year-select","react-datepicker__month-select","react-datepicker__month-year-select"],Hj=function(n){var e=(n.className||"").split(/\s+/);return Yj.some(function(t){return e.indexOf(t)>=0})},Qj=function(n){wt(e,n);function e(t){var r=n.call(this,t)||this;return r.monthContainer=void 0,r.handleClickOutside=function(i){r.props.onClickOutside(i)},r.setClickOutsideRef=function(){return r.containerRef.current},r.handleDropdownFocus=function(i){var s,o;Hj(i.target)&&((o=(s=r.props).onDropdownFocus)===null||o===void 0||o.call(s,i))},r.getDateInView=function(){var i=r.props,s=i.preSelection,o=i.selected,a=i.openToDate,l=QP(r.props),c=KP(r.props),d=Se(),h=a||o||s;return h||(l&&js(d,l)?l:c&&Mi(d,c)?c:d)},r.increaseMonth=function(){r.setState(function(i){var s=i.date;return{date:Un(s,1)}},function(){return r.handleMonthChange(r.state.date)})},r.decreaseMonth=function(){r.setState(function(i){var s=i.date;return{date:ca(s,1)}},function(){return r.handleMonthChange(r.state.date)})},r.handleDayClick=function(i,s,o){r.props.onSelect(i,s,o),r.props.setPreSelection&&r.props.setPreSelection(i)},r.handleDayMouseEnter=function(i){r.setState({selectingDate:i}),r.props.onDayMouseEnter&&r.props.onDayMouseEnter(i)},r.handleMonthMouseLeave=function(){r.setState({selectingDate:void 0}),r.props.onMonthMouseLeave&&r.props.onMonthMouseLeave()},r.handleYearMouseEnter=function(i,s){r.setState({selectingDate:zn(Se(),s)}),r.props.onYearMouseEnter&&r.props.onYearMouseEnter(i,s)},r.handleYearMouseLeave=function(i,s){r.props.onYearMouseLeave&&r.props.onYearMouseLeave(i,s)},r.handleYearChange=function(i){r.props.onYearChange&&(r.props.onYearChange(i),r.setState({isRenderAriaLiveMessage:!0})),r.props.adjustDateOnChange&&(r.props.onSelect&&r.props.onSelect(i),r.props.setOpen&&r.props.setOpen(!0)),r.props.setPreSelection&&r.props.setPreSelection(i)},r.handleMonthChange=function(i){r.handleCustomMonthChange(i),r.props.adjustDateOnChange&&(r.props.onSelect&&r.props.onSelect(i),r.props.setOpen&&r.props.setOpen(!0)),r.props.setPreSelection&&r.props.setPreSelection(i)},r.handleCustomMonthChange=function(i){r.props.onMonthChange&&(r.props.onMonthChange(i),r.setState({isRenderAriaLiveMessage:!0}))},r.handleMonthYearChange=function(i){r.handleYearChange(i),r.handleMonthChange(i)},r.changeYear=function(i){r.setState(function(s){var o=s.date;return{date:zn(o,Number(i))}},function(){return r.handleYearChange(r.state.date)})},r.changeMonth=function(i){r.setState(function(s){var o=s.date;return{date:cn(o,Number(i))}},function(){return r.handleMonthChange(r.state.date)})},r.changeMonthYear=function(i){r.setState(function(s){var o=s.date;return{date:zn(cn(o,qt(i)),ue(i))}},function(){return r.handleMonthYearChange(r.state.date)})},r.header=function(i){i===void 0&&(i=r.state.date);var s=wi(i,r.props.locale,r.props.calendarStartDay),o=[];return r.props.showWeekNumbers&&o.push(U.createElement("div",{key:"W",className:"react-datepicker__day-name"},r.props.weekLabel||"#")),o.concat([0,1,2,3,4,5,6].map(function(a){var l=Hi(s,a),c=r.formatWeekday(l,r.props.locale),d=r.props.weekDayClassName?r.props.weekDayClassName(l):void 0;return U.createElement("div",{key:a,"aria-label":Ve(l,"EEEE",r.props.locale),className:mt("react-datepicker__day-name",d)},c)}))},r.formatWeekday=function(i,s){return r.props.formatWeekDay?fj(i,r.props.formatWeekDay,s):r.props.useWeekdaysShort?mj(i,s):pj(i,s)},r.decreaseYear=function(){r.setState(function(i){var s,o=i.date;return{date:da(o,r.props.showYearPicker?(s=r.props.yearItemNumber)!==null&&s!==void 0?s:e.defaultProps.yearItemNumber:1)}},function(){return r.handleYearChange(r.state.date)})},r.clearSelectingDate=function(){r.setState({selectingDate:void 0})},r.renderPreviousButton=function(){var i;if(!r.props.renderCustomHeader){var s;switch(!0){case r.props.showMonthYearPicker:s=hT(r.state.date,r.props);break;case r.props.showYearPicker:s=wj(r.state.date,r.props);break;case r.props.showQuarterYearPicker:s=_j(r.state.date,r.props);break;default:s=cT(r.state.date,r.props);break}if(!(!((i=r.props.forceShowMonthNavigation)!==null&&i!==void 0?i:e.defaultProps.forceShowMonthNavigation)&&!r.props.showDisabledMonthNavigation&&s||r.props.showTimeSelectOnly)){var o=["react-datepicker__navigation-icon","react-datepicker__navigation-icon--previous"],a=["react-datepicker__navigation","react-datepicker__navigation--previous"],l=r.decreaseMonth;(r.props.showMonthYearPicker||r.props.showQuarterYearPicker||r.props.showYearPicker)&&(l=r.decreaseYear),s&&r.props.showDisabledMonthNavigation&&(a.push("react-datepicker__navigation--previous--disabled"),l=void 0);var c=r.props.showMonthYearPicker||r.props.showQuarterYearPicker||r.props.showYearPicker,d=r.props,h=d.previousMonthButtonLabel,p=h===void 0?e.defaultProps.previousMonthButtonLabel:h,g=d.previousYearButtonLabel,v=g===void 0?e.defaultProps.previousYearButtonLabel:g,S=r.props,D=S.previousMonthAriaLabel,w=D===void 0?typeof p=="string"?p:"Previous Month":D,_=S.previousYearAriaLabel,E=_===void 0?typeof v=="string"?v:"Previous Year":_;return U.createElement("button",{type:"button",className:a.join(" "),onClick:l,onKeyDown:r.props.handleOnKeyDown,"aria-label":c?E:w},U.createElement("span",{className:o.join(" ")},c?v:p))}}},r.increaseYear=function(){r.setState(function(i){var s,o=i.date;return{date:Dr(o,r.props.showYearPicker?(s=r.props.yearItemNumber)!==null&&s!==void 0?s:e.defaultProps.yearItemNumber:1)}},function(){return r.handleYearChange(r.state.date)})},r.renderNextButton=function(){var i;if(!r.props.renderCustomHeader){var s;switch(!0){case r.props.showMonthYearPicker:s=fT(r.state.date,r.props);break;case r.props.showYearPicker:s=Ej(r.state.date,r.props);break;case r.props.showQuarterYearPicker:s=vj(r.state.date,r.props);break;default:s=dT(r.state.date,r.props);break}if(!(!((i=r.props.forceShowMonthNavigation)!==null&&i!==void 0?i:e.defaultProps.forceShowMonthNavigation)&&!r.props.showDisabledMonthNavigation&&s||r.props.showTimeSelectOnly)){var o=["react-datepicker__navigation","react-datepicker__navigation--next"],a=["react-datepicker__navigation-icon","react-datepicker__navigation-icon--next"];r.props.showTimeSelect&&o.push("react-datepicker__navigation--next--with-time"),r.props.todayButton&&o.push("react-datepicker__navigation--next--with-today-button");var l=r.increaseMonth;(r.props.showMonthYearPicker||r.props.showQuarterYearPicker||r.props.showYearPicker)&&(l=r.increaseYear),s&&r.props.showDisabledMonthNavigation&&(o.push("react-datepicker__navigation--next--disabled"),l=void 0);var c=r.props.showMonthYearPicker||r.props.showQuarterYearPicker||r.props.showYearPicker,d=r.props,h=d.nextMonthButtonLabel,p=h===void 0?e.defaultProps.nextMonthButtonLabel:h,g=d.nextYearButtonLabel,v=g===void 0?e.defaultProps.nextYearButtonLabel:g,S=r.props,D=S.nextMonthAriaLabel,w=D===void 0?typeof p=="string"?p:"Next Month":D,_=S.nextYearAriaLabel,E=_===void 0?typeof v=="string"?v:"Next Year":_;return U.createElement("button",{type:"button",className:o.join(" "),onClick:l,onKeyDown:r.props.handleOnKeyDown,"aria-label":c?E:w},U.createElement("span",{className:a.join(" ")},c?v:p))}}},r.renderCurrentMonth=function(i){i===void 0&&(i=r.state.date);var s=["react-datepicker__current-month"];return r.props.showYearDropdown&&s.push("react-datepicker__current-month--hasYearDropdown"),r.props.showMonthDropdown&&s.push("react-datepicker__current-month--hasMonthDropdown"),r.props.showMonthYearDropdown&&s.push("react-datepicker__current-month--hasMonthYearDropdown"),U.createElement("h2",{className:s.join(" ")},Ve(i,r.props.dateFormat,r.props.locale))},r.renderYearDropdown=function(i){if(i===void 0&&(i=!1),!(!r.props.showYearDropdown||i))return U.createElement(Wj,ge({},e.defaultProps,r.props,{date:r.state.date,onChange:r.changeYear,year:ue(r.state.date)}))},r.renderMonthDropdown=function(i){if(i===void 0&&(i=!1),!(!r.props.showMonthDropdown||i))return U.createElement(Oj,ge({},e.defaultProps,r.props,{month:qt(r.state.date),onChange:r.changeMonth}))},r.renderMonthYearDropdown=function(i){if(i===void 0&&(i=!1),!(!r.props.showMonthYearDropdown||i))return U.createElement(Bj,ge({},e.defaultProps,r.props,{date:r.state.date,onChange:r.changeMonthYear}))},r.handleTodayButtonClick=function(i){r.props.onSelect(sT(),i),r.props.setPreSelection&&r.props.setPreSelection(sT())},r.renderTodayButton=function(){if(!(!r.props.todayButton||r.props.showTimeSelectOnly))return U.createElement("div",{className:"react-datepicker__today-button",onClick:r.handleTodayButtonClick},r.props.todayButton)},r.renderDefaultHeader=function(i){var s=i.monthDate,o=i.i;return U.createElement("div",{className:"react-datepicker__header ".concat(r.props.showTimeSelect?"react-datepicker__header--has-time-select":"")},r.renderCurrentMonth(s),U.createElement("div",{className:"react-datepicker__header__dropdown react-datepicker__header__dropdown--".concat(r.props.dropdownMode),onFocus:r.handleDropdownFocus},r.renderMonthDropdown(o!==0),r.renderMonthYearDropdown(o!==0),r.renderYearDropdown(o!==0)),U.createElement("div",{className:"react-datepicker__day-names"},r.header(s)))},r.renderCustomHeader=function(i){var s,o,a=i.monthDate,l=i.i;if(r.props.showTimeSelect&&!r.state.monthContainer||r.props.showTimeSelectOnly)return null;var c=cT(r.state.date,r.props),d=dT(r.state.date,r.props),h=hT(r.state.date,r.props),p=fT(r.state.date,r.props),g=!r.props.showMonthYearPicker&&!r.props.showQuarterYearPicker&&!r.props.showYearPicker;return U.createElement("div",{className:"react-datepicker__header react-datepicker__header--custom",onFocus:r.props.onDropdownFocus},(o=(s=r.props).renderCustomHeader)===null||o===void 0?void 0:o.call(s,ge(ge({},r.state),{customHeaderCount:l,monthDate:a,changeMonth:r.changeMonth,changeYear:r.changeYear,decreaseMonth:r.decreaseMonth,increaseMonth:r.increaseMonth,decreaseYear:r.decreaseYear,increaseYear:r.increaseYear,prevMonthButtonDisabled:c,nextMonthButtonDisabled:d,prevYearButtonDisabled:h,nextYearButtonDisabled:p})),g&&U.createElement("div",{className:"react-datepicker__day-names"},r.header(a)))},r.renderYearHeader=function(i){var s=i.monthDate,o=r.props,a=o.showYearPicker,l=o.yearItemNumber,c=l===void 0?e.defaultProps.yearItemNumber:l,d=li(s,c),h=d.startPeriod,p=d.endPeriod;return U.createElement("div",{className:"react-datepicker__header react-datepicker-year-header"},a?"".concat(h," - ").concat(p):ue(s))},r.renderHeader=function(i){var s=i.monthDate,o=i.i,a=o===void 0?0:o,l={monthDate:s,i:a};switch(!0){case r.props.renderCustomHeader!==void 0:return r.renderCustomHeader(l);case(r.props.showMonthYearPicker||r.props.showQuarterYearPicker||r.props.showYearPicker):return r.renderYearHeader(l);default:return r.renderDefaultHeader(l)}},r.renderMonths=function(){var i,s;if(!(r.props.showTimeSelectOnly||r.props.showYearPicker)){for(var o=[],a=(i=r.props.monthsShown)!==null&&i!==void 0?i:e.defaultProps.monthsShown,l=r.props.showPreviousMonths?a-1:0,c=r.props.showMonthYearPicker||r.props.showQuarterYearPicker?Dr(r.state.date,l):ca(r.state.date,l),d=(s=r.props.monthSelectedIn)!==null&&s!==void 0?s:l,h=0;h<a;++h){var p=h-d+l,g=r.props.showMonthYearPicker||r.props.showQuarterYearPicker?Dr(c,p):Un(c,p),v="month-".concat(h),S=h<a-1,D=h>0;o.push(U.createElement("div",{key:v,ref:function(w){r.monthContainer=w??void 0},className:"react-datepicker__month-container"},r.renderHeader({monthDate:g,i:h}),U.createElement(Aj,ge({},e.defaultProps,r.props,{ariaLabelPrefix:r.props.monthAriaLabelPrefix,day:g,onDayClick:r.handleDayClick,handleOnKeyDown:r.props.handleOnDayKeyDown,handleOnMonthKeyDown:r.props.handleOnKeyDown,onDayMouseEnter:r.handleDayMouseEnter,onMouseLeave:r.handleMonthMouseLeave,orderInDisplay:h,selectingDate:r.state.selectingDate,monthShowsDuplicateDaysEnd:S,monthShowsDuplicateDaysStart:D}))))}return o}},r.renderYears=function(){if(!r.props.showTimeSelectOnly&&r.props.showYearPicker)return U.createElement("div",{className:"react-datepicker__year--container"},r.renderHeader({monthDate:r.state.date}),U.createElement(jj,ge({},e.defaultProps,r.props,{selectingDate:r.state.selectingDate,date:r.state.date,onDayClick:r.handleDayClick,clearSelectingDate:r.clearSelectingDate,onYearMouseEnter:r.handleYearMouseEnter,onYearMouseLeave:r.handleYearMouseLeave})))},r.renderTimeSection=function(){if(r.props.showTimeSelect&&(r.state.monthContainer||r.props.showTimeSelectOnly))return U.createElement(Uj,ge({},e.defaultProps,r.props,{onChange:r.props.onTimeChange,format:r.props.timeFormat,intervals:r.props.timeIntervals,monthRef:r.state.monthContainer}))},r.renderInputTimeSection=function(){var i=r.props.selected?new Date(r.props.selected):void 0,s=i&&vr(i)&&!!r.props.selected,o=s?"".concat(mT(i.getHours()),":").concat(mT(i.getMinutes())):"";if(r.props.showTimeInput)return U.createElement(Pj,ge({},e.defaultProps,r.props,{date:i,timeString:o,onChange:r.props.onTimeChange}))},r.renderAriaLiveRegion=function(){var i,s=li(r.state.date,(i=r.props.yearItemNumber)!==null&&i!==void 0?i:e.defaultProps.yearItemNumber),o=s.startPeriod,a=s.endPeriod,l;return r.props.showYearPicker?l="".concat(o," - ").concat(a):r.props.showMonthYearPicker||r.props.showQuarterYearPicker?l=ue(r.state.date):l="".concat(z_(qt(r.state.date),r.props.locale)," ").concat(ue(r.state.date)),U.createElement("span",{role:"alert","aria-live":"polite",className:"react-datepicker__aria-live"},r.state.isRenderAriaLiveMessage&&l)},r.renderChildren=function(){if(r.props.children)return U.createElement("div",{className:"react-datepicker__children-container"},r.props.children)},r.containerRef=N.createRef(),r.state={date:r.getDateInView(),selectingDate:void 0,monthContainer:void 0,isRenderAriaLiveMessage:!1},r}return Object.defineProperty(e,"defaultProps",{get:function(){return{monthsShown:1,forceShowMonthNavigation:!1,timeCaption:"Time",previousYearButtonLabel:"Previous Year",nextYearButtonLabel:"Next Year",previousMonthButtonLabel:"Previous Month",nextMonthButtonLabel:"Next Month",yearItemNumber:Fu}},enumerable:!1,configurable:!0}),e.prototype.componentDidMount=function(){var t=this;this.props.showTimeSelect&&(this.assignMonthContainer=function(){t.setState({monthContainer:t.monthContainer})}())},e.prototype.componentDidUpdate=function(t){var r=this;if(this.props.preSelection&&(!me(this.props.preSelection,t.preSelection)||this.props.monthSelectedIn!==t.monthSelectedIn)){var i=!zt(this.state.date,this.props.preSelection);this.setState({date:this.props.preSelection},function(){return i&&r.handleCustomMonthChange(r.state.date)})}else this.props.openToDate&&!me(this.props.openToDate,t.openToDate)&&this.setState({date:this.props.openToDate})},e.prototype.render=function(){var t=this.props.container||ij;return U.createElement("div",{style:{display:"contents"},ref:this.containerRef},U.createElement(t,{className:mt("react-datepicker",this.props.className,{"react-datepicker--time-only":this.props.showTimeSelectOnly}),showTime:this.props.showTimeSelect||this.props.showTimeInput,showTimeSelectOnly:this.props.showTimeSelectOnly},this.renderAriaLiveRegion(),this.renderPreviousButton(),this.renderNextButton(),this.renderMonths(),this.renderYears(),this.renderTodayButton(),this.renderTimeSection(),this.renderInputTimeSection(),this.renderChildren()))},e}(N.Component),Kj=function(n){var e=n.icon,t=n.className,r=t===void 0?"":t,i=n.onClick,s="react-datepicker__calendar-icon";return typeof e=="string"?U.createElement("i",{className:"".concat(s," ").concat(e," ").concat(r),"aria-hidden":"true",onClick:i}):U.isValidElement(e)?U.cloneElement(e,{className:"".concat(e.props.className||""," ").concat(s," ").concat(r),onClick:function(o){typeof e.props.onClick=="function"&&e.props.onClick(o),typeof i=="function"&&i(o)}}):U.createElement("svg",{className:"".concat(s," ").concat(r),xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 448 512",onClick:i},U.createElement("path",{d:"M96 32V64H48C21.5 64 0 85.5 0 112v48H448V112c0-26.5-21.5-48-48-48H352V32c0-17.7-14.3-32-32-32s-32 14.3-32 32V64H160V32c0-17.7-14.3-32-32-32S96 14.3 96 32zM448 192H0V464c0 26.5 21.5 48 48 48H400c26.5 0 48-21.5 48-48V192z"}))},XP=function(n){wt(e,n);function e(t){var r=n.call(this,t)||this;return r.portalRoot=null,r.el=document.createElement("div"),r}return e.prototype.componentDidMount=function(){this.portalRoot=(this.props.portalHost||document).getElementById(this.props.portalId),this.portalRoot||(this.portalRoot=document.createElement("div"),this.portalRoot.setAttribute("id",this.props.portalId),(this.props.portalHost||document.body).appendChild(this.portalRoot)),this.portalRoot.appendChild(this.el)},e.prototype.componentWillUnmount=function(){this.portalRoot&&this.portalRoot.removeChild(this.el)},e.prototype.render=function(){return iR.createPortal(this.props.children,this.el)},e}(N.Component),Gj="[tabindex], a, button, input, select, textarea",Xj=function(n){return(n instanceof HTMLAnchorElement||!n.disabled)&&n.tabIndex!==-1},JP=function(n){wt(e,n);function e(t){var r=n.call(this,t)||this;return r.getTabChildren=function(){var i;return Array.prototype.slice.call((i=r.tabLoopRef.current)===null||i===void 0?void 0:i.querySelectorAll(Gj),1,-1).filter(Xj)},r.handleFocusStart=function(){var i=r.getTabChildren();i&&i.length>1&&i[i.length-1].focus()},r.handleFocusEnd=function(){var i=r.getTabChildren();i&&i.length>1&&i[0].focus()},r.tabLoopRef=N.createRef(),r}return e.prototype.render=function(){var t;return((t=this.props.enableTabLoop)!==null&&t!==void 0?t:e.defaultProps.enableTabLoop)?U.createElement("div",{className:"react-datepicker__tab-loop",ref:this.tabLoopRef},U.createElement("div",{className:"react-datepicker__tab-loop__start",tabIndex:0,onFocus:this.handleFocusStart}),this.props.children,U.createElement("div",{className:"react-datepicker__tab-loop__end",tabIndex:0,onFocus:this.handleFocusEnd})):this.props.children},e.defaultProps={enableTabLoop:!0},e}(N.Component);function Jj(n){var e=function(t){var r,i=typeof t.hidePopper=="boolean"?t.hidePopper:!0,s=N.useRef(null),o=rj(ge({open:!i,whileElementsMounted:OU,placement:t.popperPlacement,middleware:Zn([$U({padding:15}),jU(10),zU({element:s})],(r=t.popperModifiers)!==null&&r!==void 0?r:[],!0)},t.popperProps)),a=ge(ge({},t),{hidePopper:i,popperProps:ge(ge({},o),{arrowRef:s})});return U.createElement(n,ge({},a))};return e}var Zj=function(n){wt(e,n);function e(){return n!==null&&n.apply(this,arguments)||this}return Object.defineProperty(e,"defaultProps",{get:function(){return{hidePopper:!0}},enumerable:!1,configurable:!0}),e.prototype.render=function(){var t=this.props,r=t.className,i=t.wrapperClassName,s=t.hidePopper,o=s===void 0?e.defaultProps.hidePopper:s,a=t.popperComponent,l=t.targetComponent,c=t.enableTabLoop,d=t.popperOnKeyDown,h=t.portalId,p=t.portalHost,g=t.popperProps,v=t.showArrow,S=void 0;if(!o){var D=mt("react-datepicker-popper",r);S=U.createElement(JP,{enableTabLoop:c},U.createElement("div",{ref:g.refs.setFloating,style:g.floatingStyles,className:D,"data-placement":g.placement,onKeyDown:d},a,v&&U.createElement(GU,{ref:g.arrowRef,context:g.context,fill:"currentColor",strokeWidth:1,height:8,width:16,style:{transform:"translateY(-1px)"},className:"react-datepicker__triangle"})))}this.props.popperContainer&&(S=N.createElement(this.props.popperContainer,{},S)),h&&!o&&(S=U.createElement(XP,{portalId:h,portalHost:p},S));var w=mt("react-datepicker-wrapper",i);return U.createElement(U.Fragment,null,U.createElement("div",{ref:g.refs.setReference,className:w},l),S)},e}(N.Component),e3=Jj(Zj),ET="react-datepicker-ignore-onclickoutside",t3=df(Qj);function n3(n,e){return n&&e?qt(n)!==qt(e)||ue(n)!==ue(e):n!==e}var Mp="Date input not valid.";(function(n){wt(e,n);function e(t){var r=n.call(this,t)||this;return r.calendar=null,r.input=null,r.getPreSelection=function(){return r.props.openToDate?r.props.openToDate:r.props.selectsEnd&&r.props.startDate?r.props.startDate:r.props.selectsStart&&r.props.endDate?r.props.endDate:Se()},r.modifyHolidays=function(){var i;return(i=r.props.holidays)===null||i===void 0?void 0:i.reduce(function(s,o){var a=new Date(o.date);return vr(a)?Zn(Zn([],s,!0),[ge(ge({},o),{date:a})],!1):s},[])},r.calcInitialState=function(){var i,s=r.getPreSelection(),o=QP(r.props),a=KP(r.props),l=o&&js(s,ad(o))?o:a&&Mi(s,oT(a))?a:s;return{open:r.props.startOpen||!1,preventFocus:!1,inputValue:null,preSelection:(i=r.props.selectsRange?r.props.startDate:r.props.selected)!==null&&i!==void 0?i:l,highlightDates:pT(r.props.highlightDates),focused:!1,shouldFocusDayInline:!1,isRenderAriaLiveMessage:!1,wasHidden:!1}},r.resetHiddenStatus=function(){r.setState(ge(ge({},r.state),{wasHidden:!1}))},r.setHiddenStatus=function(){r.setState(ge(ge({},r.state),{wasHidden:!0}))},r.setHiddenStateOnVisibilityHidden=function(){document.visibilityState==="hidden"&&r.setHiddenStatus()},r.clearPreventFocusTimeout=function(){r.preventFocusTimeout&&clearTimeout(r.preventFocusTimeout)},r.setFocus=function(){r.input&&r.input.focus&&r.input.focus({preventScroll:!0})},r.setBlur=function(){r.input&&r.input.blur&&r.input.blur(),r.cancelFocusInput()},r.setOpen=function(i,s){s===void 0&&(s=!1),r.setState({open:i,preSelection:i&&r.state.open?r.state.preSelection:r.calcInitialState().preSelection,lastPreSelectChange:Op},function(){i||r.setState(function(o){return{focused:s?o.focused:!1}},function(){!s&&r.setBlur(),r.setState({inputValue:null})})})},r.inputOk=function(){return br(r.state.preSelection)},r.isCalendarOpen=function(){return r.props.open===void 0?r.state.open&&!r.props.disabled&&!r.props.readOnly:r.props.open},r.handleFocus=function(i){var s,o,a=r.state.wasHidden,l=a?r.state.open:!0;a&&r.resetHiddenStatus(),!r.state.preventFocus&&l&&((o=(s=r.props).onFocus)===null||o===void 0||o.call(s,i),!r.props.preventOpenOnFocus&&!r.props.readOnly&&r.setOpen(!0)),r.setState({focused:!0})},r.sendFocusBackToInput=function(){r.preventFocusTimeout&&r.clearPreventFocusTimeout(),r.setState({preventFocus:!0},function(){r.preventFocusTimeout=setTimeout(function(){r.setFocus(),r.setState({preventFocus:!1})})})},r.cancelFocusInput=function(){clearTimeout(r.inputFocusTimeout),r.inputFocusTimeout=void 0},r.deferFocusInput=function(){r.cancelFocusInput(),r.inputFocusTimeout=setTimeout(function(){return r.setFocus()},1)},r.handleDropdownFocus=function(){r.cancelFocusInput()},r.handleBlur=function(i){var s,o;(!r.state.open||r.props.withPortal||r.props.showTimeInput)&&((o=(s=r.props).onBlur)===null||o===void 0||o.call(s,i)),r.setState({focused:!1})},r.handleCalendarClickOutside=function(i){var s,o;r.props.inline||r.setOpen(!1),(o=(s=r.props).onClickOutside)===null||o===void 0||o.call(s,i),r.props.withPortal&&i.preventDefault()},r.handleChange=function(){for(var i=[],s=0;s<arguments.length;s++)i[s]=arguments[s];var o=i[0];if(!(r.props.onChangeRaw&&(r.props.onChangeRaw.apply(r,i),!o||typeof o.isDefaultPrevented!="function"||o.isDefaultPrevented()))){r.setState({inputValue:(o==null?void 0:o.target)instanceof HTMLInputElement?o.target.value:null,lastPreSelectChange:r3});var a=r.props,l=a.dateFormat,c=l===void 0?e.defaultProps.dateFormat:l,d=a.strictParsing,h=d===void 0?e.defaultProps.strictParsing:d,p=oj((o==null?void 0:o.target)instanceof HTMLInputElement?o.target.value:"",c,r.props.locale,h,r.props.minDate);r.props.showTimeSelectOnly&&r.props.selected&&p&&!me(p,r.props.selected)&&(p=tU(r.props.selected,{hours:sr(p),minutes:or(p),seconds:Pr(p)})),(p||!((o==null?void 0:o.target)instanceof HTMLInputElement)||!(o!=null&&o.target.value))&&r.setSelected(p,o,!0)}},r.handleSelect=function(i,s,o){if(r.props.shouldCloseOnSelect&&!r.props.showTimeSelect&&r.sendFocusBackToInput(),r.props.onChangeRaw&&r.props.onChangeRaw(s),r.setSelected(i,s,!1,o),r.props.showDateSelect&&r.setState({isRenderAriaLiveMessage:!0}),!r.props.shouldCloseOnSelect||r.props.showTimeSelect)r.setPreSelection(i);else if(!r.props.inline){r.props.selectsRange||r.setOpen(!1);var a=r.props,l=a.startDate,c=a.endDate;l&&!c&&(r.props.swapRange||!_T(i,l))&&r.setOpen(!1)}},r.setSelected=function(i,s,o,a){var l,c=i;if(r.props.showYearPicker){if(c!==null&&wg(ue(c),r.props))return}else if(r.props.showMonthYearPicker){if(c!==null&&HP(c,r.props))return}else if(c!==null&&ai(c,r.props))return;var d=r.props,h=d.onChange,p=d.selectsRange,g=d.startDate,v=d.endDate,S=d.selectsMultiple,D=d.selectedDates,w=d.minTime,_=d.swapRange;if(!ms(r.props.selected,c)||r.props.allowSameDay||p||S)if(c!==null&&(r.props.selected&&(!o||!r.props.showTimeSelect&&!r.props.showTimeSelectOnly&&!r.props.showTimeInput)&&(c=Rp(c,{hour:sr(r.props.selected),minute:or(r.props.selected),second:Pr(r.props.selected)})),!o&&(r.props.showTimeSelect||r.props.showTimeSelectOnly)&&w&&(c=Rp(c,{hour:w.getHours(),minute:w.getMinutes(),second:w.getSeconds()})),r.props.inline||r.setState({preSelection:c}),r.props.focusSelectedMonth||r.setState({monthSelectedIn:a})),p){var E=!g&&!v,x=g&&!v,A=g&&v;E?h?h([c,null],s):e.defaultProps.onChange:x&&(c===null?h?h([null,null],s):e.defaultProps.onChange:_T(c,g)?_?h?h([c,g],s):e.defaultProps.onChange:h?h([c,null],s):e.defaultProps.onChange:h?h([g,c],s):e.defaultProps.onChange),A&&(h?h([c,null],s):e.defaultProps.onChange)}else if(S){if(c!==null)if(!(D!=null&&D.length))h?h([c],s):e.defaultProps.onChange;else{var L=D.some(function(b){return me(b,c)});if(L){var I=D.filter(function(b){return!me(b,c)});h?h(I,s):e.defaultProps.onChange}else h?h(Zn(Zn([],D,!0),[c],!1),s):e.defaultProps.onChange}}else h?h(c,s):e.defaultProps.onChange;if(!o){var y=(l=r.props.onSelect)!==null&&l!==void 0?l:e.defaultProps.onSelect;y(c,s),r.setState({inputValue:null})}},r.setPreSelection=function(i){var s=br(r.props.minDate),o=br(r.props.maxDate),a=!0;if(i){var l=ad(i);if(s&&o)a=ml(i,r.props.minDate,r.props.maxDate);else if(s){var c=ad(r.props.minDate);a=Mi(i,c)||ms(l,c)}else if(o){var d=oT(r.props.maxDate);a=js(i,d)||ms(l,d)}}a&&r.setState({preSelection:i})},r.toggleCalendar=function(){r.setOpen(!r.state.open)},r.handleTimeChange=function(i){var s;if(!(r.props.selectsRange||r.props.selectsMultiple)){var o=r.props.selected?r.props.selected:r.getPreSelection(),a=r.props.selected?i:Rp(o,{hour:sr(i),minute:or(i)});r.setState({preSelection:a});var l=(s=r.props.onChange)!==null&&s!==void 0?s:e.defaultProps.onChange;l(a),r.props.shouldCloseOnSelect&&!r.props.showTimeInput&&(r.sendFocusBackToInput(),r.setOpen(!1)),r.props.showTimeInput&&r.setOpen(!0),(r.props.showTimeSelectOnly||r.props.showTimeSelect)&&r.setState({isRenderAriaLiveMessage:!0}),r.setState({inputValue:null})}},r.onInputClick=function(){var i,s;!r.props.disabled&&!r.props.readOnly&&r.setOpen(!0),(s=(i=r.props).onInputClick)===null||s===void 0||s.call(i)},r.onInputKeyDown=function(i){var s,o,a,l,c;(o=(s=r.props).onKeyDown)===null||o===void 0||o.call(s,i);var d=i.key;if(!r.state.open&&!r.props.inline&&!r.props.preventOpenOnFocus){(d===K.ArrowDown||d===K.ArrowUp||d===K.Enter)&&r.onInputClick();return}if(r.state.open){if(d===K.ArrowDown||d===K.ArrowUp){i.preventDefault();var h=r.props.showTimeSelectOnly?".react-datepicker__time-list-item[tabindex='0']":r.props.showWeekPicker&&r.props.showWeekNumbers?'.react-datepicker__week-number[tabindex="0"]':r.props.showFullMonthYearPicker||r.props.showMonthYearPicker?'.react-datepicker__month-text[tabindex="0"]':'.react-datepicker__day[tabindex="0"]',p=((a=r.calendar)===null||a===void 0?void 0:a.componentNode)instanceof Element&&r.calendar.componentNode.querySelector(h);p instanceof HTMLElement&&p.focus({preventScroll:!0});return}var g=Se(r.state.preSelection);d===K.Enter?(i.preventDefault(),r.inputOk()&&r.state.lastPreSelectChange===Op?(r.handleSelect(g,i),!r.props.shouldCloseOnSelect&&r.setPreSelection(g)):r.setOpen(!1)):d===K.Escape?(i.preventDefault(),r.sendFocusBackToInput(),r.setOpen(!1)):d===K.Tab&&r.setOpen(!1),r.inputOk()||(c=(l=r.props).onInputError)===null||c===void 0||c.call(l,{code:1,msg:Mp})}},r.onPortalKeyDown=function(i){var s=i.key;s===K.Escape&&(i.preventDefault(),r.setState({preventFocus:!0},function(){r.setOpen(!1),setTimeout(function(){r.setFocus(),r.setState({preventFocus:!1})})}))},r.onDayKeyDown=function(i){var s,o,a,l,c=r.props,d=c.minDate,h=c.maxDate,p=c.disabledKeyboardNavigation,g=c.showWeekPicker,v=c.shouldCloseOnSelect,S=c.locale,D=c.calendarStartDay,w=c.adjustDateOnChange,_=c.inline;if((o=(s=r.props).onKeyDown)===null||o===void 0||o.call(s,i),!p){var E=i.key,x=i.shiftKey,A=Se(r.state.preSelection),L=function(P,ne){var re=ne;switch(P){case K.ArrowRight:re=g?th(ne,1):Hi(ne,1);break;case K.ArrowLeft:re=g?QE(ne,1):nU(ne,1);break;case K.ArrowUp:re=QE(ne,1);break;case K.ArrowDown:re=th(ne,1);break;case K.PageUp:re=x?da(ne,1):ca(ne,1);break;case K.PageDown:re=x?Dr(ne,1):Un(ne,1);break;case K.Home:re=wi(ne,S,D);break;case K.End:re=dj(ne);break}return re},I=function(P,ne){for(var re=40,le=P,ie=!1,q=0,Q=L(P,ne);!ie;){if(q>=re){Q=ne;break}d&&Q<d&&(le=K.ArrowRight,Q=ai(d,r.props)?L(le,Q):d),h&&Q>h&&(le=K.ArrowLeft,Q=ai(h,r.props)?L(le,Q):h),ai(Q,r.props)?((le===K.PageUp||le===K.Home)&&(le=K.ArrowRight),(le===K.PageDown||le===K.End)&&(le=K.ArrowLeft),Q=L(le,Q)):ie=!0,q++}return Q};if(E===K.Enter){i.preventDefault(),r.handleSelect(A,i),!v&&r.setPreSelection(A);return}else if(E===K.Escape){i.preventDefault(),r.setOpen(!1),r.inputOk()||(l=(a=r.props).onInputError)===null||l===void 0||l.call(a,{code:1,msg:Mp});return}var y=null;switch(E){case K.ArrowLeft:case K.ArrowRight:case K.ArrowUp:case K.ArrowDown:case K.PageUp:case K.PageDown:case K.Home:case K.End:y=I(E,A);break}if(!y){r.props.onInputError&&r.props.onInputError({code:1,msg:Mp});return}if(i.preventDefault(),r.setState({lastPreSelectChange:Op}),w&&r.setSelected(y),r.setPreSelection(y),_){var b=qt(A),k=qt(y),C=ue(A),R=ue(y);b!==k||C!==R?r.setState({shouldFocusDayInline:!0}):r.setState({shouldFocusDayInline:!1})}}},r.onPopperKeyDown=function(i){var s=i.key;s===K.Escape&&(i.preventDefault(),r.sendFocusBackToInput())},r.onClearClick=function(i){i&&i.preventDefault&&i.preventDefault(),r.sendFocusBackToInput();var s=r.props,o=s.selectsRange,a=s.onChange;o?a?a([null,null],i):e.defaultProps.onChange():a?a(null,i):e.defaultProps.onChange(),r.setState({inputValue:null})},r.clear=function(){r.onClearClick()},r.onScroll=function(i){typeof r.props.closeOnScroll=="boolean"&&r.props.closeOnScroll?(i.target===document||i.target===document.documentElement||i.target===document.body)&&r.setOpen(!1):typeof r.props.closeOnScroll=="function"&&r.props.closeOnScroll(i)&&r.setOpen(!1)},r.renderCalendar=function(){var i,s;return!r.props.inline&&!r.isCalendarOpen()?null:U.createElement(t3,ge({ref:function(o){r.calendar=o}},r.props,r.state,{setOpen:r.setOpen,dateFormat:(i=r.props.dateFormatCalendar)!==null&&i!==void 0?i:e.defaultProps.dateFormatCalendar,onSelect:r.handleSelect,onClickOutside:r.handleCalendarClickOutside,holidays:Ij(r.modifyHolidays()),outsideClickIgnoreClass:ET,onDropdownFocus:r.handleDropdownFocus,onTimeChange:r.handleTimeChange,className:r.props.calendarClassName,container:r.props.calendarContainer,handleOnKeyDown:r.props.onKeyDown,handleOnDayKeyDown:r.onDayKeyDown,setPreSelection:r.setPreSelection,dropdownMode:(s=r.props.dropdownMode)!==null&&s!==void 0?s:e.defaultProps.dropdownMode}),r.props.children)},r.renderAriaLiveRegion=function(){var i=r.props,s=i.dateFormat,o=s===void 0?e.defaultProps.dateFormat:s,a=i.locale,l=r.props.showTimeInput||r.props.showTimeSelect,c=l?"PPPPp":"PPPP",d;return r.props.selectsRange?d="Selected start date: ".concat(_n(r.props.startDate,{dateFormat:c,locale:a}),". ").concat(r.props.endDate?"End date: "+_n(r.props.endDate,{dateFormat:c,locale:a}):""):r.props.showTimeSelectOnly?d="Selected time: ".concat(_n(r.props.selected,{dateFormat:o,locale:a})):r.props.showYearPicker?d="Selected year: ".concat(_n(r.props.selected,{dateFormat:"yyyy",locale:a})):r.props.showMonthYearPicker?d="Selected month: ".concat(_n(r.props.selected,{dateFormat:"MMMM yyyy",locale:a})):r.props.showQuarterYearPicker?d="Selected quarter: ".concat(_n(r.props.selected,{dateFormat:"yyyy, QQQ",locale:a})):d="Selected date: ".concat(_n(r.props.selected,{dateFormat:c,locale:a})),U.createElement("span",{role:"alert","aria-live":"polite",className:"react-datepicker__aria-live"},d)},r.renderDateInput=function(){var i,s,o,a=mt(r.props.className,(i={},i[ET]=r.state.open,i)),l=r.props.customInput||U.createElement("input",{type:"text"}),c=r.props.customInputRef||"ref",d=r.props,h=d.dateFormat,p=h===void 0?e.defaultProps.dateFormat:h,g=d.locale,v=typeof r.props.value=="string"?r.props.value:typeof r.state.inputValue=="string"?r.state.inputValue:r.props.selectsRange?aj(r.props.startDate,r.props.endDate,{dateFormat:p,locale:g}):r.props.selectsMultiple?lj((o=r.props.selectedDates)!==null&&o!==void 0?o:[],{dateFormat:p,locale:g}):_n(r.props.selected,{dateFormat:p,locale:g});return N.cloneElement(l,(s={},s[c]=function(S){r.input=S},s.value=v,s.onBlur=r.handleBlur,s.onChange=r.handleChange,s.onClick=r.onInputClick,s.onFocus=r.handleFocus,s.onKeyDown=r.onInputKeyDown,s.id=r.props.id,s.name=r.props.name,s.form=r.props.form,s.autoFocus=r.props.autoFocus,s.placeholder=r.props.placeholderText,s.disabled=r.props.disabled,s.autoComplete=r.props.autoComplete,s.className=mt(l.props.className,a),s.title=r.props.title,s.readOnly=r.props.readOnly,s.required=r.props.required,s.tabIndex=r.props.tabIndex,s["aria-describedby"]=r.props.ariaDescribedBy,s["aria-invalid"]=r.props.ariaInvalid,s["aria-labelledby"]=r.props.ariaLabelledBy,s["aria-required"]=r.props.ariaRequired,s))},r.renderClearButton=function(){var i=r.props,s=i.isClearable,o=i.disabled,a=i.selected,l=i.startDate,c=i.endDate,d=i.clearButtonTitle,h=i.clearButtonClassName,p=h===void 0?"":h,g=i.ariaLabelClose,v=g===void 0?"Close":g,S=i.selectedDates;return s&&(a!=null||l!=null||c!=null||S!=null&&S.length)?U.createElement("button",{type:"button",className:mt("react-datepicker__close-icon",p,{"react-datepicker__close-icon--disabled":o}),disabled:o,"aria-label":v,onClick:r.onClearClick,title:d,tabIndex:-1}):null},r.state=r.calcInitialState(),r.preventFocusTimeout=void 0,r}return Object.defineProperty(e,"defaultProps",{get:function(){return{allowSameDay:!1,dateFormat:"MM/dd/yyyy",dateFormatCalendar:"LLLL yyyy",onChange:function(){},disabled:!1,disabledKeyboardNavigation:!1,dropdownMode:"scroll",onFocus:function(){},onBlur:function(){},onKeyDown:function(){},onInputClick:function(){},onSelect:function(){},onClickOutside:function(){},onMonthChange:function(){},onCalendarOpen:function(){},onCalendarClose:function(){},preventOpenOnFocus:!1,onYearChange:function(){},onInputError:function(){},monthsShown:1,readOnly:!1,withPortal:!1,selectsDisabledDaysInRange:!1,shouldCloseOnSelect:!0,showTimeSelect:!1,showTimeInput:!1,showPreviousMonths:!1,showMonthYearPicker:!1,showFullMonthYearPicker:!1,showTwoColumnMonthYearPicker:!1,showFourColumnMonthYearPicker:!1,showYearPicker:!1,showQuarterYearPicker:!1,showWeekPicker:!1,strictParsing:!1,swapRange:!1,timeIntervals:30,timeCaption:"Time",previousMonthAriaLabel:"Previous Month",previousMonthButtonLabel:"Previous Month",nextMonthAriaLabel:"Next Month",nextMonthButtonLabel:"Next Month",previousYearAriaLabel:"Previous Year",previousYearButtonLabel:"Previous Year",nextYearAriaLabel:"Next Year",nextYearButtonLabel:"Next Year",timeInputLabel:"Time",enableTabLoop:!0,yearItemNumber:Fu,focusSelectedMonth:!1,showPopperArrow:!0,excludeScrollbar:!0,customTimeInput:null,calendarStartDay:void 0,toggleCalendarOnIconClick:!1,usePointerEvent:!1}},enumerable:!1,configurable:!0}),e.prototype.componentDidMount=function(){window.addEventListener("scroll",this.onScroll,!0),document.addEventListener("visibilitychange",this.setHiddenStateOnVisibilityHidden)},e.prototype.componentDidUpdate=function(t,r){var i,s,o,a;t.inline&&n3(t.selected,this.props.selected)&&this.setPreSelection(this.props.selected),this.state.monthSelectedIn!==void 0&&t.monthsShown!==this.props.monthsShown&&this.setState({monthSelectedIn:0}),t.highlightDates!==this.props.highlightDates&&this.setState({highlightDates:pT(this.props.highlightDates)}),!r.focused&&!ms(t.selected,this.props.selected)&&this.setState({inputValue:null}),r.open!==this.state.open&&(r.open===!1&&this.state.open===!0&&((s=(i=this.props).onCalendarOpen)===null||s===void 0||s.call(i)),r.open===!0&&this.state.open===!1&&((a=(o=this.props).onCalendarClose)===null||a===void 0||a.call(o)))},e.prototype.componentWillUnmount=function(){this.clearPreventFocusTimeout(),window.removeEventListener("scroll",this.onScroll,!0),document.removeEventListener("visibilitychange",this.setHiddenStateOnVisibilityHidden)},e.prototype.renderInputContainer=function(){var t=this.props,r=t.showIcon,i=t.icon,s=t.calendarIconClassname,o=t.calendarIconClassName,a=t.toggleCalendarOnIconClick,l=this.state.open;return s&&console.warn("calendarIconClassname props is deprecated. should use calendarIconClassName props."),U.createElement("div",{className:"react-datepicker__input-container".concat(r?" react-datepicker__view-calendar-icon":"")},r&&U.createElement(Kj,ge({icon:i,className:mt(o,!o&&s,l&&"react-datepicker-ignore-onclickoutside")},a?{onClick:this.toggleCalendar}:null)),this.state.isRenderAriaLiveMessage&&this.renderAriaLiveRegion(),this.renderDateInput(),this.renderClearButton())},e.prototype.render=function(){var t=this.renderCalendar();if(this.props.inline)return t;if(this.props.withPortal){var r=this.state.open?U.createElement(JP,{enableTabLoop:this.props.enableTabLoop},U.createElement("div",{className:"react-datepicker__portal",tabIndex:-1,onKeyDown:this.onPortalKeyDown},t)):null;return this.state.open&&this.props.portalId&&(r=U.createElement(XP,ge({portalId:this.props.portalId},this.props),r)),U.createElement("div",null,this.renderInputContainer(),r)}return U.createElement(e3,ge({},this.props,{className:this.props.popperClassName,hidePopper:!this.isCalendarOpen(),targetComponent:this.renderInputContainer(),popperComponent:t,popperOnKeyDown:this.onPopperKeyDown,showArrow:this.props.showPopperArrow}))},e})(N.Component);var r3="input",Op="navigate";const i3={lessThanXSeconds:{one:"menos de un segundo",other:"menos de {{count}} segundos"},xSeconds:{one:"1 segundo",other:"{{count}} segundos"},halfAMinute:"medio minuto",lessThanXMinutes:{one:"menos de un minuto",other:"menos de {{count}} minutos"},xMinutes:{one:"1 minuto",other:"{{count}} minutos"},aboutXHours:{one:"alrededor de 1 hora",other:"alrededor de {{count}} horas"},xHours:{one:"1 hora",other:"{{count}} horas"},xDays:{one:"1 da",other:"{{count}} das"},aboutXWeeks:{one:"alrededor de 1 semana",other:"alrededor de {{count}} semanas"},xWeeks:{one:"1 semana",other:"{{count}} semanas"},aboutXMonths:{one:"alrededor de 1 mes",other:"alrededor de {{count}} meses"},xMonths:{one:"1 mes",other:"{{count}} meses"},aboutXYears:{one:"alrededor de 1 ao",other:"alrededor de {{count}} aos"},xYears:{one:"1 ao",other:"{{count}} aos"},overXYears:{one:"ms de 1 ao",other:"ms de {{count}} aos"},almostXYears:{one:"casi 1 ao",other:"casi {{count}} aos"}},s3=(n,e,t)=>{let r;const i=i3[n];return typeof i=="string"?r=i:e===1?r=i.one:r=i.other.replace("{{count}}",e.toString()),t!=null&&t.addSuffix?t.comparison&&t.comparison>0?"en "+r:"hace "+r:r},o3={full:"EEEE, d 'de' MMMM 'de' y",long:"d 'de' MMMM 'de' y",medium:"d MMM y",short:"dd/MM/y"},a3={full:"HH:mm:ss zzzz",long:"HH:mm:ss z",medium:"HH:mm:ss",short:"HH:mm"},l3={full:"{{date}} 'a las' {{time}}",long:"{{date}} 'a las' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},u3={date:Lo({formats:o3,defaultWidth:"full"}),time:Lo({formats:a3,defaultWidth:"full"}),dateTime:Lo({formats:l3,defaultWidth:"full"})},c3={lastWeek:"'el' eeee 'pasado a la' p",yesterday:"'ayer a la' p",today:"'hoy a la' p",tomorrow:"'maana a la' p",nextWeek:"eeee 'a la' p",other:"P"},d3={lastWeek:"'el' eeee 'pasado a las' p",yesterday:"'ayer a las' p",today:"'hoy a las' p",tomorrow:"'maana a las' p",nextWeek:"eeee 'a las' p",other:"P"},h3=(n,e,t,r)=>e.getHours()!==1?d3[n]:c3[n],f3={narrow:["AC","DC"],abbreviated:["AC","DC"],wide:["antes de cristo","despus de cristo"]},p3={narrow:["1","2","3","4"],abbreviated:["T1","T2","T3","T4"],wide:["1 trimestre","2 trimestre","3 trimestre","4 trimestre"]},m3={narrow:["e","f","m","a","m","j","j","a","s","o","n","d"],abbreviated:["ene","feb","mar","abr","may","jun","jul","ago","sep","oct","nov","dic"],wide:["enero","febrero","marzo","abril","mayo","junio","julio","agosto","septiembre","octubre","noviembre","diciembre"]},g3={narrow:["d","l","m","m","j","v","s"],short:["do","lu","ma","mi","ju","vi","s"],abbreviated:["dom","lun","mar","mi","jue","vie","sb"],wide:["domingo","lunes","martes","mircoles","jueves","viernes","sbado"]},y3={narrow:{am:"a",pm:"p",midnight:"mn",noon:"md",morning:"maana",afternoon:"tarde",evening:"tarde",night:"noche"},abbreviated:{am:"AM",pm:"PM",midnight:"medianoche",noon:"mediodia",morning:"maana",afternoon:"tarde",evening:"tarde",night:"noche"},wide:{am:"a.m.",pm:"p.m.",midnight:"medianoche",noon:"mediodia",morning:"maana",afternoon:"tarde",evening:"tarde",night:"noche"}},_3={narrow:{am:"a",pm:"p",midnight:"mn",noon:"md",morning:"de la maana",afternoon:"de la tarde",evening:"de la tarde",night:"de la noche"},abbreviated:{am:"AM",pm:"PM",midnight:"medianoche",noon:"mediodia",morning:"de la maana",afternoon:"de la tarde",evening:"de la tarde",night:"de la noche"},wide:{am:"a.m.",pm:"p.m.",midnight:"medianoche",noon:"mediodia",morning:"de la maana",afternoon:"de la tarde",evening:"de la tarde",night:"de la noche"}},v3=(n,e)=>Number(n)+"",w3={ordinalNumber:v3,era:Hn({values:f3,defaultWidth:"wide"}),quarter:Hn({values:p3,defaultWidth:"wide",argumentCallback:n=>Number(n)-1}),month:Hn({values:m3,defaultWidth:"wide"}),day:Hn({values:g3,defaultWidth:"wide"}),dayPeriod:Hn({values:y3,defaultWidth:"wide",formattingValues:_3,defaultFormattingWidth:"wide"})},E3=/^(\d+)()?/i,T3=/\d+/i,I3={narrow:/^(ac|dc|a|d)/i,abbreviated:/^(a\.?\s?c\.?|a\.?\s?e\.?\s?c\.?|d\.?\s?c\.?|e\.?\s?c\.?)/i,wide:/^(antes de cristo|antes de la era com[u]n|despu[e]s de cristo|era com[u]n)/i},S3={any:[/^ac/i,/^dc/i],wide:[/^(antes de cristo|antes de la era com[u]n)/i,/^(despu[e]s de cristo|era com[u]n)/i]},D3={narrow:/^[1234]/i,abbreviated:/^T[1234]/i,wide:/^[1234]()? trimestre/i},b3={any:[/1/i,/2/i,/3/i,/4/i]},P3={narrow:/^[efmajsond]/i,abbreviated:/^(ene|feb|mar|abr|may|jun|jul|ago|sep|oct|nov|dic)/i,wide:/^(enero|febrero|marzo|abril|mayo|junio|julio|agosto|septiembre|octubre|noviembre|diciembre)/i},k3={narrow:[/^e/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^en/i,/^feb/i,/^mar/i,/^abr/i,/^may/i,/^jun/i,/^jul/i,/^ago/i,/^sep/i,/^oct/i,/^nov/i,/^dic/i]},x3={narrow:/^[dlmjvs]/i,short:/^(do|lu|ma|mi|ju|vi|s[a])/i,abbreviated:/^(dom|lun|mar|mi[e]|jue|vie|s[a]b)/i,wide:/^(domingo|lunes|martes|mi[e]rcoles|jueves|viernes|s[a]bado)/i},C3={narrow:[/^d/i,/^l/i,/^m/i,/^m/i,/^j/i,/^v/i,/^s/i],any:[/^do/i,/^lu/i,/^ma/i,/^mi/i,/^ju/i,/^vi/i,/^sa/i]},R3={narrow:/^(a|p|mn|md|(de la|a las) (maana|tarde|noche))/i,any:/^([ap]\.?\s?m\.?|medianoche|mediodia|(de la|a las) (maana|tarde|noche))/i},A3={any:{am:/^a/i,pm:/^p/i,midnight:/^mn/i,noon:/^md/i,morning:/maana/i,afternoon:/tarde/i,evening:/tarde/i,night:/noche/i}},N3={ordinalNumber:EP({matchPattern:E3,parsePattern:T3,valueCallback:function(n){return parseInt(n,10)}}),era:Qn({matchPatterns:I3,defaultMatchWidth:"wide",parsePatterns:S3,defaultParseWidth:"any"}),quarter:Qn({matchPatterns:D3,defaultMatchWidth:"wide",parsePatterns:b3,defaultParseWidth:"any",valueCallback:n=>n+1}),month:Qn({matchPatterns:P3,defaultMatchWidth:"wide",parsePatterns:k3,defaultParseWidth:"any"}),day:Qn({matchPatterns:x3,defaultMatchWidth:"wide",parsePatterns:C3,defaultParseWidth:"any"}),dayPeriod:Qn({matchPatterns:R3,defaultMatchWidth:"any",parsePatterns:A3,defaultParseWidth:"any"})},M3={code:"es",formatDistance:s3,formatLong:u3,formatRelative:h3,localize:w3,match:N3,options:{weekStartsOn:1,firstWeekContainsDate:1}};hj("es",M3);function O3({postRegister:n,arrParroquiaState:e,setGetArr:t,getArr:r}){const[i,s]=N.useState({nombreBautismo:"",fechaBautismo:""}),{nombreBautismo:o,fechaBautismo:a}=i,l=({target:A})=>{const{name:L,value:I}=A;s({...i,[L]:I})},[c,d]=N.useState(""),h=A=>{const L=A.target.files[0];d(L)},p=()=>{if(o.length<=0){alert("El Nombre esta Vacio");return}confirm("Quiere Guardar este Documento?")&&setTimeout(()=>{alert("Documento Guardado")},2e3),n(c,i),s({nombreBautismo:"",fechaBautismo:""})},[g,v]=N.useState(null),S=({target:A})=>{w(null);const{name:L,value:I}=A;if(I.length>4){t(!r);let y=e.filter(b=>b.nombreBautismo.indexOf(I)>-1);y.length>=1?(v(y[0][L]),console.log("found[0].nombreBautismo===>",y[0].nombreBautismo)):console.log("no hay"),console.log("found===>",y)}};console.log("nameFinder",g);const[D,w]=N.useState(null),_=({target:A})=>{v(null),t(!r);const{value:L}=A;w(L)},[E,x]=N.useState(!0);return V.jsxs(V.Fragment,{children:[V.jsxs("div",{className:"ButtonsNuevoBuscar",children:[V.jsx("button",{onClick:()=>{x(!0)},children:"Nuevo Bautismo"}),V.jsx("button",{onClick:()=>{x(!1)},children:"Buscar"})]}),E?V.jsxs("div",{className:"formInfoToSave",children:[V.jsx("p",{children:"Respaldar FE de Bautismo"}),V.jsx("input",{type:"text",name:"nombreBautismo",placeholder:"Nombre",value:o,onChange:A=>l(A)}),V.jsx("input",{type:"date",name:"fechaBautismo",value:a,onChange:A=>l(A)}),V.jsx("input",{type:"file",name:"fileBautismo",onChange:A=>h(A)}),V.jsx("button",{className:"button-primary guardar",onClick:p,children:"GUARDAR"})]}):V.jsxs("div",{className:"formInfoToFind",children:[V.jsxs("div",{children:[V.jsx("label",{htmlFor:"avatar1",children:"Buscar Bautismo con Nombre:"}),V.jsx("input",{type:"text",id:"avatar1",name:"nombreBautismo",onChange:A=>S(A),placeholder:"Nombre Completo"})]}),V.jsxs("div",{children:[V.jsx("label",{htmlFor:"avatar2",children:"Buscar Bautismo con Fecha:"}),V.jsx("input",{type:"date",id:"avatar2",name:"fechaBautismoFinder",onChange:A=>_(A)})]}),V.jsx("p",{className:g===null?"d-none":"cerrar",onClick:()=>v(null),children:"Cerrar Busquedas"}),V.jsx("p",{className:D===null?"d-none":"cerrar",onClick:()=>w(null),children:"Cerrar Busquedas"}),V.jsx("div",{className:"w-100",children:e.filter(A=>A.nombreBautismo==g).map((A,L)=>V.jsxs("div",{children:[V.jsxs("p",{className:"textMarc",children:["Nombre: ",A.nombreBautismo]}),V.jsxs("p",{children:["Fecha Bautismo: ",A.fechaBautismo]}),V.jsxs("p",{children:["Documento: ",A.fileName]}),V.jsx("a",{href:A.fileUrl,target:"_blanck",children:" Abrir Documento"})]},L))}),V.jsx("div",{className:"w-100",children:e.filter(A=>A.fechaBautismo===D).map((A,L)=>V.jsxs("div",{children:[V.jsxs("p",{className:"textMarc",children:["Nombre: ",A.nombreBautismo]}),V.jsxs("p",{children:["Fecha Bautismo: ",A.fechaBautismo]}),V.jsxs("p",{children:["Documento: ",A.fileName]}),V.jsx("a",{href:A.fileUrl,target:"_blanck",children:" Abrir Documento"}),V.jsx("hr",{})]},L))})]})]})}function V3({arrParroquiaState:n,setGetArr:e,getArr:t}){return V.jsx(V.Fragment,{children:V.jsx("p",{children:"Usuarios"})})}function L3({arrParroquiaState:n,setGetArr:e,getArr:t}){const[r,i]=N.useState(!0);return V.jsxs(V.Fragment,{children:[V.jsxs("div",{className:"ButtonsNuevoBuscar",children:[V.jsx("button",{onClick:()=>{i(!0)},children:"Nueva Confirmacion"}),V.jsx("button",{onClick:()=>{i(!1)},children:"Buscar"})]}),r?V.jsxs("div",{className:"formInfoToSave",children:[V.jsx("p",{children:"Respaldar Acta de Confirmacin"}),V.jsx("input",{type:"text",placeholder:"Nombre"}),V.jsx("input",{type:"date"}),V.jsx("input",{type:"file",id:"avatar",name:"avatar",accept:"image/png, image/jpeg"}),V.jsx("button",{className:"button-primary",children:"GUARDAR"})]}):V.jsxs("div",{className:"formInfoToFind",children:[V.jsxs("div",{children:[V.jsx("label",{htmlFor:"avatar1",children:"Buscar Acta de Confirmacin con Nombre:"}),V.jsx("input",{type:"text",id:"avatar1",placeholder:"Nombre"})]}),V.jsxs("div",{children:[V.jsx("label",{htmlFor:"avatar2",children:"Buscar Acta de Confirmacin con Fecha:"}),V.jsx("input",{type:"date",id:"avatar2",placeholder:"Nombre"})]})]})]})}function F3({arrParroquiaState:n,setGetArr:e,getArr:t}){const[r,i]=N.useState(!0);return V.jsxs(V.Fragment,{children:[V.jsxs("div",{className:"ButtonsNuevoBuscar",children:[V.jsx("button",{onClick:()=>{i(!0)},children:"Primera Comunin"}),V.jsx("button",{onClick:()=>{i(!1)},children:"Buscar"})]}),r?V.jsxs("div",{className:"formInfoToSave",children:[V.jsx("p",{children:"Respaldar Acta de Primera Comunin"}),V.jsx("input",{type:"text",placeholder:"Nombre"}),V.jsx("input",{type:"date"}),V.jsx("input",{type:"file",id:"avatar",name:"avatar",accept:"image/png, image/jpeg"}),V.jsx("button",{className:"button-primary",children:"GUARDAR"})]}):V.jsxs("div",{className:"formInfoToFind",children:[V.jsxs("div",{children:[V.jsx("label",{htmlFor:"avatar1",children:"Buscar Primera Comunin con Nombre:"}),V.jsx("input",{type:"text",id:"avatar1",placeholder:"Nombre"})]}),V.jsxs("div",{children:[V.jsx("label",{htmlFor:"avatar2",children:"Buscar Primera Comunin con Fecha:"}),V.jsx("input",{type:"date",id:"avatar2",placeholder:"Nombre"})]})]})]})}function B3({arrParroquiaState:n,setGetArr:e,getArr:t}){const[r,i]=N.useState(!0);return V.jsxs(V.Fragment,{children:[V.jsxs("div",{className:"ButtonsNuevoBuscar",children:[V.jsx("button",{onClick:()=>{i(!0)},children:"Nuevo Matrimonio"}),V.jsx("button",{onClick:()=>{i(!1)},children:"Buscar"})]}),r?V.jsxs("div",{className:"formInfoToSave",children:[V.jsx("p",{children:"Respaldar Acta de Matrimonio"}),V.jsx("input",{type:"text",placeholder:"Nombre del Esposo"}),V.jsx("input",{type:"date"}),V.jsx("input",{type:"file",id:"avatar",name:"avatar",accept:"image/png, image/jpeg"}),V.jsx("button",{className:"button-primary",children:"GUARDAR"})]}):V.jsxs("div",{className:"formInfoToFind",children:[V.jsxs("div",{children:[V.jsx("label",{htmlFor:"avatar1",children:"Buscar con Nombre del Esposo:"}),V.jsx("input",{type:"text",id:"avatar1",placeholder:"Nombre..."})]}),V.jsxs("div",{children:[V.jsx("label",{htmlFor:"avatar2",children:"Buscar con Fecha:"}),V.jsx("input",{type:"date",id:"avatar2"})]})]})]})}function U3({arrParroquiaState:n,setGetArr:e,getArr:t}){const[r,i]=N.useState(!0);return V.jsxs(V.Fragment,{children:[V.jsxs("div",{className:"ButtonsNuevoBuscar",children:[V.jsx("button",{onClick:()=>{i(!0)},children:"Nuevo Defuncion"}),V.jsx("button",{onClick:()=>{i(!1)},children:"Buscar"})]}),r?V.jsxs("div",{className:"formInfoToSave",children:[V.jsx("p",{children:"Respaldar Acta de Defuncion"}),V.jsx("input",{type:"text",placeholder:"Nombre"}),V.jsx("input",{type:"date"}),V.jsx("input",{type:"file",id:"avatar",name:"avatar",accept:"image/png, image/jpeg"}),V.jsx("button",{className:"button-primary",children:"GUARDAR"})]}):V.jsxs("div",{className:"formInfoToFind",children:[V.jsxs("div",{children:[V.jsx("label",{htmlFor:"avatar1",children:"Buscar con Nombre:"}),V.jsx("input",{type:"text",id:"avatar1",placeholder:"Nombre"})]}),V.jsxs("div",{children:[V.jsx("label",{htmlFor:"avatar2",children:"Buscar con Fecha:"}),V.jsx("input",{type:"date",id:"avatar2",placeholder:"Nombre"})]})]})]})}function j3({arrParroquiaState:n,setGetArr:e,getArr:t}){return V.jsx(V.Fragment,{children:V.jsx("p",{children:"Parroquia"})})}function $3(){const[n,e]=N.useState(!0),t=window.innerWidth,r=()=>{t<999&&e(!0)};return V.jsxs("div",{className:"navBar3",children:[V.jsxs("div",{onClick:()=>e(!n),className:"hamburger",children:[V.jsxs("div",{className:"menu-bar",children:[V.jsx("div",{className:"uno"}),V.jsx("div",{className:"dos"}),V.jsx("div",{className:"tres"})]}),V.jsx("p",{className:"menuIcons",children:n?V.jsx("b",{className:"menuIcon",children:"MENU"}):V.jsx("b",{className:"menuIconX",children:""})})]}),V.jsxs("div",{className:n?"menu3 ":"menu3 display",onClick:r,children:[V.jsx(Ji,{to:"/",children:" Bautismos"}),V.jsx(Ji,{to:"/confirmaciones",children:" Confirmaciones "}),V.jsx(Ji,{to:"/comuniones",children:" Comuniones"}),V.jsx(Ji,{to:"/matrimonios",children:" Matrimonios"}),V.jsx(Ji,{to:"/defunciones",children:" Defunciones"}),V.jsx(Ji,{to:"/parroquia",children:" parroquia"}),V.jsx(Ji,{to:"/usuarios",children:"Usuarios"})]})]})}function z3(){const n=Ws();let e;n.pathname=="/"?e="bautismos":e=n.pathname.substring(1);const[t,r]=N.useState([]),[i,s]=N.useState(!1);N.useEffect(()=>{const a=Xd(LE,e);Nb(a).then(l=>{r(l.docs.map(c=>({...c.data(),id:c.id})))}).catch(l=>{console.error(l)})},[i]);const o=(a,l)=>{console.log(a,a.name);const c=Xd(LE,e),d=og(PF,`${e}-Files/${Date.now()}/${a==null?void 0:a.name}`);HL(d,a).then(()=>{oP(d).then(h=>{l.fileName=a.name,l.fileUrl=h,Mb(c,l)})}).catch(h=>{console.log("postRegister Error, App,jsx, linea 82"),console.log(h)})};return V.jsxs("div",{className:"containerApp",children:[V.jsx($3,{}),V.jsx("h3",{className:"registroParroquial-h3",children:"REGISTRO PARROQUIAL"}),V.jsxs(YR,{children:[V.jsx(gr,{path:"/",element:V.jsx(O3,{postRegister:o,arrParroquiaState:t,setGetArr:s,getArr:i})}),V.jsx(gr,{path:"/confirmaciones",element:V.jsx(L3,{arrParroquiaState:t,setGetArr:s,getArr:i})}),V.jsx(gr,{path:"/comuniones",element:V.jsx(F3,{arrParroquiaState:t,setGetArr:s,getArr:i})}),V.jsx(gr,{path:"/matrimonios",element:V.jsx(B3,{arrParroquiaState:t,setGetArr:s,getArr:i})}),V.jsx(gr,{path:"/defunciones",element:V.jsx(U3,{arrParroquiaState:t,setGetArr:s,getArr:i})}),V.jsx(gr,{path:"/parroquia",element:V.jsx(j3,{arrParroquiaState:t,setGetArr:s,getArr:i})}),V.jsx(gr,{path:"/usuarios",element:V.jsx(V3,{arrParroquiaState:t,setGetArr:s,getArr:i})}),V.jsx(gr,{path:"*",element:V.jsx(qR,{to:"/"})})]})]})}Vp.createRoot(document.getElementById("root")).render(V.jsx(eA,{children:V.jsx(z3,{})}));
